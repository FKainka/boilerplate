---
generator: 'MediaWiki 1.27.3'
robots: 'noindex,nofollow'
title: 'User:Astridx - Joomla! Documentation'
viewport: 'width=device-width, user-scalable=yes, initial-scale=1.0'
---

= Creating a Simple Component for Joomla!4.x = This is a
multiple-article series of tutorials on how to develop a
Model-View-Controller \[\[S:MyLanguage/Component|Component\]\] for
Joomla! Version 4x. You can navigate the articles in this series by
using the navigation drop down menu. Begin with the Introduction, and
navigate the articles in this series by using the navigation button at
the bottom or the box to the right (''Articles in this series''). Let's
start with the introduction. = Developing a Basic Component - Part 1 =
==Notes== \* If you are new to Joomla!, please read
\[\[S:MyLanguage/Absolute\_Basics\_of\_How\_a\_Component\_Functions|Absolute
Basics of How a Component Functions\]\]. \* This tutorial is for
Joomlaǃ4. For creating a component for Joomlaǃ3 see
\[https://docs.joomla.org/J3.x:Developing\_an\_MVC\_Component|
Developing a Model-View-Controller Component/3.x\]. == Requirements ==
You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev). You can download Joomla! 4 at
\[https://github.com/joomla/joomla-cms/tree/4.0-dev GitHub\], on the
\[https://developer.joomla.org/nightly-builds.html Developer website\]
or you can create a free website at https://launch.joomla.org. ==
Creating a simple Component/Developing a Basic Component == You can see
many examples of components in the standard Joomla! install. For example
\* Content \* Banners \* Tags or \* Contact This tutorial will explain
how to go about creating a simple component. Through this tutorial you
will learn the basic file structure of a Joomlaǃ4 component. This basic
structure can then be expanded to produce more complex components. ===
File Structure === There are a few basic files that are used in the
standard pattern of component development: \*
`administrator/components/com_foos/Controller/DisplayController.php` -
This file is Foos master display controller. \*
`administrator/components/com_foos/Extension/FoosComponent.php` - This
file is the Component class for com\_foos. \*
`administrator/components/com_foos/Service/HTML/AdministratorService.php`
- This file is the Content HTML helper. \*
`administrator/components/com_foos/View/Foos/HtmlView.php` - This file
is the View class for a list of foos. \*
`administrator/components/com_foos/services/provider.php` - This file is
the The foo service provider. \*
`administrator/components/com_foos/tmpl/foos/default.php` - This file is
the template for a list of foos. \* `com_foo.xml` - This file contains
information about the componente. It defines the files that need to be
installed by the Joomla! installer and specifies configuration
parameters for the componente. \* `script.php` - This file is the
Installation Script file of Foo Component. === Creating
administrator/components/com\_foos/Controller/DisplayController.php ===
The `administrator/components/com_foos/Controller/DisplayController.php`
file is is Foos master display controller. ==== Completed
administrator/components/com\_foos/Controller/DisplayController.php file
==== The code for the
`administrator/components/com_foos/Controller/DisplayController.php`
file is as follows:

=== Creating
administrator/components/com\_foos/Extension/FoosComponent.php === The
`administrator/components/com_foos/Extension/FoosComponent.php` file is
the Component class for com\_foos. ==== Completed
administrator/components/com\_foos/Extension/FoosComponent.php file ====
The code for the
`administrator/components/com_foos/Extension/FoosComponent.php` file is
as follows:

getRegistry()-&gt;register('foosadministrator', new
AdministratorService); } }

=== Creating
administrator/components/com\_foos/Service/HTML/AdministratorService.php
=== The
`administrator/components/com_foos/Service/HTML/AdministratorService.php`
file is .... ==== Completed
administrator/components/com\_foos/Service/HTML/AdministratorService.php
file ==== The code for the
`administrator/components/com_foos/Service/HTML/AdministratorService.php`
file is as follows:

=== Creating administrator/components/com\_foos/View/Foos/HtmlView.php
=== The `administrator/components/com_foos/View/Foos/HtmlView.php` file
is .... ==== Completed
administrator/components/com\_foos/View/Foos/HtmlView.php file ==== The
code for the `administrator/components/com_foos/View/Foos/HtmlView.php`
file is as follows:

=== Creating administrator/components/com\_foos/services/provider.php
=== The `administrator/components/com_foos/services/provider.php` file
is .... ==== Completed
administrator/components/com\_foos/services/provider.php file ==== The
code for the `administrator/components/com_foos/services/provider.php`
file is as follows:

registerServiceProvider(new
CategoryFactory('\\\\Joomla\\\\Component\\\\Foos'));
\$container-&gt;registerServiceProvider(new
MVCFactory('\\\\Joomla\\\\Component\\\\Foos'));
\$container-&gt;registerServiceProvider(new
ComponentDispatcherFactory('\\\\Joomla\\\\Component\\\\Foos'));
\$container-&gt;set( ComponentInterface::class, function (Container
\$container) { \$component = new
FoosComponent(\$container-&gt;get(ComponentDispatcherFactoryInterface::class));
\$component-&gt;setRegistry(\$container-&gt;get(Registry::class));
return \$component; } ); } };

=== Creating administrator/components/com\_foos/tmpl/foos/default.php
=== The `administrator/components/com_foos/tmpl/foos/default.php` file
is .... ==== Completed
administrator/components/com\_foos/tmpl/foos/default.php file ==== The
code for the `administrator/components/com_foos/tmpl/foos/default.php`
file is as follows:

Hello Foos

=== Creating script.php === The `script.php` file is .... Most entries
are self-explanatory. ==== Completed script.php file ==== The code for
the `script.php` file is as follows:

\* @copyright \[COPYRIGHT\] \* @license GNU General Public License
version 2 or later; see LICENSE.txt \* @link \[AUTHOR\_URL\] \*/ // No
direct access to this file defined('\_JEXEC') or die; use
Joomla\\CMS\\Language\\Text; use Joomla\\CMS\\Log\\Log; /\*\* \* Script
file of Foo Component \* \* @since 1.0.0 \* \*/ class
FoosInstallerScript { /\*\* \* Extension script constructor. \* \*
@since 1.0.0 \* \*/ public function \_\_construct() {
\$this-&gt;minimumJoomla = '4.0'; \$this-&gt;minimumPhp =
JOOMLA\_MINIMUM\_PHP; } /\*\* \* Method to install the extension \* \*
@param InstallerAdapter \$parent The class calling this method \* \*
@return boolean True on success \* \* @since 1.0.0 \* \*/ public
function install(\$parent) { echo
Text::\_('COM\_FOOS\_INSTALLERSCRIPT\_UNINSTALL'); return true; } /\*\*
\* Method to uninstall the extension \* \* @param InstallerAdapter
\$parent The class calling this method \* \* @return boolean True on
success \* \* @since 1.0.0 \* \*/ public function uninstall(\$parent) {
echo Text::\_('COM\_FOOS\_INSTALLERSCRIPT\_UNINSTALL'); return true; }
/\*\* \* Method to update the extension \* \* @param InstallerAdapter
\$parent The class calling this method \* \* @return boolean True on
success \* \* @since 1.0.0 \* \*/ public function update(\$parent) {
echo Text::\_('COM\_FOOS\_INSTALLERSCRIPT\_UPDATE'); return true; }
/\*\* \* Function called before extension installation/update/removal
procedure commences \* \* @param string \$type The type of change
(install, update or discover\_install, not uninstall) \* @param
InstallerAdapter \$parent The class calling this method \* \* @return
boolean True on success \* \* @since 1.0.0 \* \*/ public function
preflight(\$type, \$parent) { // Check for the minimum PHP version
before continuing if (!empty(\$this-&gt;minimumPhp) &&
version\_compare(PHP\_VERSION, \$this-&gt;minimumPhp, '&lt;')) {
Log::add(Text::sprintf('JLIB\_INSTALLER\_MINIMUM\_PHP',
\$this-&gt;minimumPhp), Log::WARNING, 'jerror'); return false; } //
Check for the minimum Joomla version before continuing if
(!empty(\$this-&gt;minimumJoomla) && version\_compare(JVERSION,
\$this-&gt;minimumJoomla, '&lt;')) {
Log::add(Text::sprintf('JLIB\_INSTALLER\_MINIMUM\_JOOMLA',
\$this-&gt;minimumJoomla), Log::WARNING, 'jerror'); return false; } echo
Text::\_('COM\_FOOS\_INSTALLERSCRIPT\_PREFLIGHT'); return true; } /\*\*
\* Function called after extension installation/update/removal procedure
commences \* \* @param string \$type The type of change (install, update
or discover\_install, not uninstall) \* @param InstallerAdapter \$parent
The class calling this method \* \* @return boolean True on success \*
\* @since 1.0.0 \* \*/ public function postflight(\$type, \$parent) {
echo Text::\_('COM\_FOOS\_INSTALLERSCRIPT\_POSTFLIGHT'); return true; }
}

=== Creating com\_foos.xml === The `foo.xml` file is .... Most entries
are self-explanatory. ==== Completed foo.xml file ==== The code for the
`foo.xml` file is as follows:

COM\_FOOS \[DATE\] \[AUTHOR\] \[AUTHOR\_EMAIL\] \[AUTHOR\_URL\]
\[COPYRIGHT\] GNU General Public License version 2 or later; 1.0.0
COM\_FOOS\_XML\_DESCRIPTION Joomla\\Component\\Foos script.php

COM\_FOOS

COM\_FOOS

foos.xml Controller Extension Service View services tmpl

== Test your componente == Now you can zip all files and install them
via Joomla Extension Manager. After that you can choose your component
in the menu of the Joomlaǃbackend.
\[\[File:as\_j4\_t\_1\_1.png|700px\]\] In the front end there is no
change up to now. We are going to work on this in the next chapter. ==
Note == === Version Number === If you ask yourself what version number
you should take: Joomla strictly follows Semantic Versioning (2.0.0) and
it be good if you do this, too. See
https://developer.joomla.org/news/586-joomla-development-strategy.html\#version\_numbering
and https://semver.org/spec/v2.0.0.html for more informations. ===
index.html File === Why was there an index.html file in almost every
folder in Joomla in the past? The blank index.html file in each folder
was to prevent directory browsing via web address. On a poorly
configured web server someone could see all the files contained in a
folder by simply browsing to the path, such as www.example.org/images/.
This could be a potential security problem on servers without directory
browsing (indexing) turned off. Having the blank `index.html` file
returns a blank white screen to the browser rather than displaying the
contents of the folder. So, from a technical aspect, `index.html` files
are not required on a good configured web server, but do prevent
directory access on badly configured environments as already noted. If
you're looking to list an extension on the Joomla! Extensions Directory,
(JED) it is not required to have `index.html` files. If you want to add
`index.html` files to your site, you can copy the script at
https://github.com/joomla/joomla-cms/blob/staging/build/indexmaker.php
and run it from a command line session on your server. === Joomla!
Extensions Directory === You can use the JEDChecker extension at
http://extensions.joomla.org/extensions/miscellaneous/development/21336
to check JED requirements. == Component Contents == At this point in the
tutorial, your component should contain the following files: {| border=1
| 1 |administrator/components/com\_foos/Controller/DisplayController.php
|this is the administrator entry point to the Foo component | new |- |1
|administrator/components/com\_foos/Extension/FoosComponent.php | the
interface BootableExtensionInterface where a component class can load
its internal class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | new |- |1
|administrator/components/com\_foos/Service/HTML/AdministratorService.php
| the html service see https://github.com/joomla/joomla-cms/pull/20217 |
new |- |1 |administrator/components/com\_foos/View/Foos/HtmlView.php |
file representing the view in the back end | new |- |1
|administrator/components/com\_foos/services/provider.php | the service
provider interface see https://github.com/joomla/joomla-cms/pull/20217 |
new |- |1 |administrator/components/com\_foos/tmpl/foos/default.php |
the default view in the back end | new |- |1
|administrator/components/com\_foos/foos.xml |this is an XML (manifest)
file that tells Joomla! how to install our component. | new |- |1
|administrator/components/com\_foos/script.php | the installer script |
new |- |} == Conclusion == Component development for Joomla! is a fairly
simple, straightforward process. Using the techniques described in this
tutorial, an endless variety of componentes can be developed with little
hassle. Boilerplates you can find hereː \*
https://github.com/joomla-extensions/boilerplate/tree/master/plugins/system
The sample files for this Tutorial you can find hereː \*
https://github.com/astridx/boilerplate/tree/tutorial/tutorial/component/
= Adding a view to the site part - Part 2 = == Requirements == You need
Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev) == File Structure == === Changing
administrator/components/com\_foos/foos.xml === The
`administrator/components/com_foos/foos.xml` file is .... ==== Completed
administrator/components/com\_foos/foos.xml file ==== The code for the
`administrator/components/com_foos/foos.xml` file is as follows:

COM\_FOOS \[DATE\] \[AUTHOR\] \[AUTHOR\_EMAIL\] \[AUTHOR\_URL\]
\[COPYRIGHT\] GNU General Public License version 2 or later; 2.0.0
COM\_FOOS\_XML\_DESCRIPTION Joomla\\Component\\Foos script.php
Controller View tmpl

COM\_FOOS

COM\_FOOS

foos.xml Controller Extension Service View services tmpl

=== Creating components/com\_foos/Controller/DisplayController.php ===
The `components/com_foos/Controller/DisplayController.php` file is the
main controller file for the frond end. ==== Completed
components/com\_foos/Controller/DisplayController.php file ==== The code
for the `components/com_foos/Controller/DisplayController.php` file is
as follows:

=== Creating components/com\_foos/View/Foo/HtmlView.php === The
`components/com_foos/View/Foo/HtmlView.php` file is .... ==== Completed
components/com\_foos/View/Foo/HtmlView.php file ==== The code for the
`components/com_foos/View/Foo/HtmlView.php` file is as follows:

=== Creating components/com\_foos/tmpl/foo/default.php === The
`components/com_foos/tmpl/foo/default.php` file is .... Most entries are
self-explanatory. ==== Completed
components/com\_foos/tmpl/foo/default.php file ==== The code for the
`components/com_foos/tmpl/foo/default.php` file is as follows:

Hallo

== Test your component == Now you can zip all files and install them via
Joomla Extension Manager. After that you can see the view in the front
end. In the front end you can see the view if you open the address
joomla-cms4/index.php?option=com\_foos&view=foo.
\[\[File:as\_j4\_t\_2\_1.png|700px\]\] At the moment you have enter the
address manually. It would be nicer to have a menu item. We are going to
work on this in the next chapter. == Component Contents == At this point
in the tutorial, your component should contain the following files: {|
border=1 | 1 |
administrator/components/com\_foos/Controller/DisplayController.php |
this is the administrator entry point to the Foo component | unchanged
|- |1 |administrator/components/com\_foos/Extension/FoosComponent.php |
the interface BootableExtensionInterface where a component class can
load its internal class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- |1
|administrator/components/com\_foos/Service/HTML/AdministratorService.php
| the html service see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- |1
|administrator/components/com\_foos/View/Foos/HtmlView.php | file
representing the view in the back end | unchanged |- |1
|administrator/components/com\_foos/services/provider.php | the service
provider interface see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- |1
|administrator/components/com\_foos/tmpl/foos/default.php | the default
view in the back end | unchanged |- |1
|administrator/components/com\_foos/foos.xml |this is an XML (manifest)
file that tells Joomla! how to install our component. | changed |- |1
|administrator/components/com\_foos/script.php | the installer script |
unchanged |- |2 | components/com\_foos/Controller/DisplayController.php
| this is the frond end entry point to the Foo component | new |- |2 |
components/com\_foos/View/Foo/HtmlView.php | file representing the view
in the frond end | new |- |2 | components/com\_foos/tmpl/foo/default.php
| the default view in the frond end | new |- |} == Conclusion == Now we
have a basic view in the backend and in the front end. = Adding a menu
type to the site part - Part 3 = In this article we will cover how to
add a menu item to a basic Joomla! component. == Requirements == You
need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev) == File Structure == === Creating
components/com\_foos/tmpl/foo/default.xml === The
`components/com_foos/tmpl/foo/default.xml` file is .... ==== Completed
components/com\_foos/tmpl/foo/default.xml file ==== The code for the
`components/com_foos/tmpl/foo/default.xml` file is as follows:

COM\_FOOS\_FOO\_VIEW\_DEFAULT\_DESC

=== Changing administrator/components/com\_foos/foos.xml === The
`administrator/components/com_foos/foos.xml` file is .... ==== Completed
administrator/components/com\_foos/foos.xml file ==== The code for the
`administrator/components/com_foos/foos.xml` file is as follows:

COM\_FOOS \[DATE\] \[AUTHOR\] \[AUTHOR\_EMAIL\] \[AUTHOR\_URL\]
\[COPYRIGHT\] GNU General Public License version 2 or later; 3.0.0
COM\_FOOS\_XML\_DESCRIPTION Joomla\\Component\\Foos script.php
Controller View tmpl

COM\_FOOS

COM\_FOOS

foos.xml Controller Extension Service View services tmpl

== Test your component == Now you can zip all files and install them via
Joomla Extension Manager. After that you can create a menu item in the
menu manager. \[\[File:as\_j4\_t\_3\_1.png|700px\]\] Save the menu item.
\[\[File:as\_j4\_t\_3\_2.png|700px\]\] Now you can see the view in the
front using a menu item. In the front end you can see the menu item and
you can open the view with the help of the menu item.
\[\[File:as\_j4\_t\_3\_3.png|700px\]\] == Component Contents == At this
point in the tutorial, your component should contain the following
files: {| border=1 | 1 |
administrator/components/com\_foos/Controller/DisplayController.php |
this is the administrator entry point to the Foo component | unchanged
|- |1 |administrator/components/com\_foos/Extension/FoosComponent.php |
the interface BootableExtensionInterface where a component class can
load its internal class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- |1
|administrator/components/com\_foos/Service/HTML/AdministratorService.php
| the html service see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- |1
|administrator/components/com\_foos/View/Foos/HtmlView.php | file
representing the view in the back end | unchanged |- |1
|administrator/components/com\_foos/services/provider.php | the service
provider interface see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- |1
|administrator/components/com\_foos/tmpl/foos/default.php | the default
view in the back end | unchanged |- |1
|administrator/components/com\_foos/foos.xml |this is an XML (manifest)
file that tells Joomla! how to install our component. | changed |- |1
|administrator/components/com\_foos/script.php | the installer script |
unchanged |- |2 | components/com\_foos/Controller/DisplayController.php
| this is the frond end entry point to the Foo component | unchanged |-
|2 | components/com\_foos/View/Foo/HtmlView.php | file representing the
view in the frond end | unchanged |- |2 |
components/com\_foos/tmpl/foo/default.php | the default view in the
frond end | unchanged |- |3 | components/com\_foos/tmpl/foo/default.xml
| the xml for the menu item | new |- |} == Conclusion == Now we are able
to add a Menu Item to our component. This will allow us to access our
component a menu item rather than having to remember what to type into
the address bar. Currently the view does not show any data yet. In order
to work with data, we will add a model to our component in the next
chapter. = Adding a model to the site part - Part 4 = == Requirements ==
You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev) == File Structure == === Changing
administrator/components/com\_foos/foos.xml === The
`administrator/components/com_foos/foos.xml` file is .... ==== Completed
administrator/components/com\_foos/foos.xml file ==== The code for the
`administrator/components/com_foos/foos.xml` file is as follows:

COM\_FOOS \[DATE\] \[AUTHOR\] \[AUTHOR\_EMAIL\] \[AUTHOR\_URL\]
\[COPYRIGHT\] GNU General Public License version 2 or later; 4.0.0
COM\_FOOS\_XML\_DESCRIPTION Joomla\\Component\\Foos script.php
Controller Model View tmpl

COM\_FOOS

COM\_FOOS

foos.xml Controller Extension Service View services tmpl

=== Creating components/com\_foos/Model/FooModel.php === The
`components/com_foos/Model/FooModel.php` file is .... ==== Completed
components/com\_foos/Model/FooModel.php file ==== The code for the
`components/com_foos/Model/FooModel.php` file is as follows:

message)) { \$this-&gt;message = 'Hello Foo!'; } return
\$this-&gt;message; } }

=== Changing components/com\_foos/View/Foo/HtmlView.php === The
`components/com_foos/View/Foo/HtmlView.php` file is .... ==== Completed
components/com\_foos/View/Foo/HtmlView.php file ==== The code for the
`components/com_foos/View/Foo/HtmlView.php` file is as follows:

msg = \$this-&gt;get('Msg'); return parent::display(\$tpl); } }

=== Changing components/com\_foos/tmpl/foo/default.php === The
`components/com_foos/tmpl/foo/default.php` file is .... Most entries are
self-explanatory. ==== Completed
components/com\_foos/tmpl/foo/default.php file ==== The code for the
`components/com_foos/tmpl/foo/default.php` file is as follows:

msg;

== Test your component == Now you can zip all files and install them via
Joomla Extension Manager. After that you can see the view in the front
using a model. \[\[File:as\_j4\_t\_4\_1.png|700px\]\] == Component
Contents == At this point in the tutorial, your component should contain
the following files: {| border=1 | 1 |
administrator/components/com\_foos/Controller/DisplayController.php |
this is the administrator entry point to the Foo component | unchanged
|- |1 |administrator/components/com\_foos/Extension/FoosComponent.php |
the interface BootableExtensionInterface where a component class can
load its internal class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- |1
|administrator/components/com\_foos/Service/HTML/AdministratorService.php
| the html service see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- |1
|administrator/components/com\_foos/View/Foos/HtmlView.php | file
representing the view in the back end | unchanged |- |1
|administrator/components/com\_foos/services/provider.php | the service
provider interface see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- |1
|administrator/components/com\_foos/tmpl/foos/default.php | the default
view in the back end | unchanged |- |1
|administrator/components/com\_foos/foos.xml |this is an XML (manifest)
file that tells Joomla! how to install our component. | changed |- |1
|administrator/components/com\_foos/script.php | the installer script |
unchanged |- |2 | components/com\_foos/Controller/DisplayController.php
| this is the frond end entry point to the Foo component | unchanged |-
|4 | components/com\_foos/Model/FooModel.php | this is the frond end
model for the Foo component | new |- |2 |
components/com\_foos/View/Foo/HtmlView.php | file representing the view
in the frond end | changed |- |2 |
components/com\_foos/tmpl/foo/default.php | the default view in the
frond end | changed |- |3 | components/com\_foos/tmpl/foo/default.xml |
the xml for the menu item | unchanged |- |} == Conclusion == At the
moment you can create a menu item, that shows a special view of your
component. What, if you want to show a view depending on a parameter?
That is easy. You can add a variable request in the menu item. We are
going to work on this in the next chapter. = Adding a variable request
in the menu type - Part 5 = For the moment, the displayed message is
always fix. In Joomla! it is possible to add parameters to menu types.
== Requirements == You need Joomla! 4.x for this tutorial (as of writing
currently Joomla! 4.0.0-alpha11-dev) == File Structure == === Changing
administrator/components/com\_foos/foos.xml === The
`administrator/components/com_foos/foos.xml` file is .... ==== Completed
administrator/components/com\_foos/foos.xml file ==== The code for the
`administrator/components/com_foos/foos.xml` file is as follows:

COM\_FOOS \[DATE\] \[AUTHOR\] \[AUTHOR\_EMAIL\] \[AUTHOR\_URL\]
\[COPYRIGHT\] GNU General Public License version 2 or later; 5.0.0
COM\_FOOS\_XML\_DESCRIPTION Joomla\\Component\\Foos script.php
Controller Model View tmpl

COM\_FOOS

COM\_FOOS

foos.xml Controller Extension Service View services tmpl

=== Changing components/com\_foos/Model/FooModel.php === The
`components/com_foos/Model/FooModel.php` file is .... ==== Completed
components/com\_foos/Model/FooModel.php file ==== The code for the
`components/com_foos/Model/FooModel.php` file is as follows:

message = \$app-&gt;input-&gt;get('show\_text', "Hi"); return
\$this-&gt;message; } }

=== Changing components/com\_foos/tmpl/foo/default.xml === The
`components/com_foos/tmpl/foo/default.xml` file is .... ==== Completed
components/com\_foos/tmpl/foo/default.xml file ==== The code for the
`components/com_foos/tmpl/foo/default.xml` file is as follows:

COM\_FOOS\_FOO\_VIEW\_DEFAULT\_DESC

== Test your component == Now you can zip all files and install them via
Joomla Extension Manager. A new installation of the extension is
necessary. After that you can add a parameter to the menu item. This
parameter is set in a text field. \[\[File:as\_j4\_t\_5\_1.png|700px\]\]
The text you entered in this text field is shown in the front end.
Depending on the parameter, the view is set up in the front end.
\[\[File:as\_j4\_t\_5\_2.png|700px\]\] == Note == === Why do we omit the
close tag? === Omitting the closing tag helps you prevent accidental
whitespace or newlines from being added to the end of the file. See:
https://www.php.net/manual/en/language.basic-syntax.instruction-separation.php
== Component Contents == At this point in the tutorial, your component
should contain the following files: {| border=1 | 1 |
administrator/components/com\_foos/Controller/DisplayController.php |
this is the administrator entry point to the Foo component | unchanged
|- |1 |administrator/components/com\_foos/Extension/FoosComponent.php |
the interface BootableExtensionInterface where a component class can
load its internal class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- |1
|administrator/components/com\_foos/Service/HTML/AdministratorService.php
| the html service see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- |1
|administrator/components/com\_foos/View/Foos/HtmlView.php | file
representing the view in the back end | unchanged |- |1
|administrator/components/com\_foos/services/provider.php | the service
provider interface see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- |1
|administrator/components/com\_foos/tmpl/foos/default.php | the default
view in the back end | unchanged |- |1
|administrator/components/com\_foos/foos.xml |this is an XML (manifest)
file that tells Joomla! how to install our component. | changed |- |1
|administrator/components/com\_foos/script.php | the installer script |
unchanged |- |2 | components/com\_foos/Controller/DisplayController.php
| this is the frond end entry point to the Foo component | unchanged |-
|4 | components/com\_foos/Model/FooModel.php | this is the frond end
model for the Foo component | changed |- |2 |
components/com\_foos/View/Foo/HtmlView.php | file representing the view
in the frond end | unchanged |- |2 |
components/com\_foos/tmpl/foo/default.php | the default view in the
frond end | unchanged |- |3 | components/com\_foos/tmpl/foo/default.xml
| the xml for the menu item | changed |- |} == Conclusion == For the
moment, the parameter (messages) is hard coded or entered manually. We
would like to store this value in the Joomla database. Therefore, in the
next chapter, we will add database access to the component. = Using the
database in the backend - Part 6 = == Requirements == You need Joomla!
4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev) == File Structure == === Creating
administrator/components/com\_foos/Model/FoosModel.php === The
`administrator/components/com_foos/Model/FoosModel.php` file is ....
==== Completed administrator/components/com\_foos/Model/FoosModel.php
file ==== The code for the
`administrator/components/com_foos/Model/FoosModel.php` file is as
follows:

getDbo(); \$query = \$db-&gt;getQuery(true); // Select the required
fields from the table. \$query-&gt;select(
\$db-&gt;quoteName(array('id', 'name')) );
\$query-&gt;from(\$db-&gt;quoteName('\#\_\_foos\_details')); return
\$query; } }

=== Changing administrator/components/com\_foos/View/Foos/HtmlView.php
=== The `administrator/components/com_foos/View/Foos/HtmlView.php` file
is .... ==== Completed
administrator/components/com\_foos/View/Foos/HtmlView.php file ==== The
code for the `administrator/components/com_foos/View/Foos/HtmlView.php`
file is as follows:

items = \$this-&gt;get('Items'); return parent::display(\$tpl); } }

=== Changing administrator/components/com\_foos/services/provider.php
=== The `administrator/components/com_foos/services/provider.php` file
is .... ==== Completed
administrator/components/com\_foos/services/provider.php file ==== The
code for the `administrator/components/com_foos/services/provider.php`
file is as follows:

registerServiceProvider(new
CategoryFactory('\\\\Joomla\\\\Component\\\\Foos'));
\$container-&gt;registerServiceProvider(new
MVCFactory('\\\\Joomla\\\\Component\\\\Foos'));
\$container-&gt;registerServiceProvider(new
ComponentDispatcherFactory('\\\\Joomla\\\\Component\\\\Foos'));
\$container-&gt;set( ComponentInterface::class, function (Container
\$container) { \$component = new
FoosComponent(\$container-&gt;get(ComponentDispatcherFactoryInterface::class));
\$component-&gt;setRegistry(\$container-&gt;get(Registry::class));
\$component-&gt;setMVCFactory(\$container-&gt;get(MVCFactoryInterface::class));
return \$component; } ); } };

=== Creating
administrator/components/com\_foos/sql/install.mysql.utf8.sql === The
`administrator/components/com_foos/sql/install.mysql.utf8.sql` file is
.... ==== Completed
administrator/components/com\_foos/sql/install.mysql.utf8.sql file ====
The code for the
`administrator/components/com_foos/sql/install.mysql.utf8.sql` file is
as follows:

CREATE TABLE IF NOT EXISTS \`\#\_\_foos\_details\` ( \`id\` int(11) NOT
NULL AUTO\_INCREMENT, \`alias\` varchar(400) CHARACTER SET utf8mb4
COLLATE utf8mb4\_bin NOT NULL DEFAULT '', \`name\` varchar(255) NOT NULL
DEFAULT '', PRIMARY KEY (\`id\`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4
DEFAULT COLLATE=utf8mb4\_unicode\_ci; INSERT INTO
\`\#\_\_foos\_details\` (\`name\`) VALUES ('Nina'), ('Astrid'),
('Elmar');

=== Creating
administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql === The
`administrator/components/com_foos/sql/uninstall.mysql.utf8.sql` file is
.... ==== Completed
administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql file
==== The code for the
`administrator/components/com_foos/sql/uninstall.mysql.utf8.sql` file is
as follows:

DROP TABLE IF EXISTS \`\#\_\_foos\_details\`;

=== Changing administrator/components/com\_foos/tmpl/foos/default.php
=== The `administrator/components/com_foos/tmpl/foos/default.php` file
is .... ==== Completed
administrator/components/com\_foos/tmpl/foos/default.php file ==== The
code for the `administrator/components/com_foos/tmpl/foos/default.php`
file is as follows:

items as \$i =&gt; \$item) : ?&gt;

name; ?&gt;

=== Changing administrator/components/com\_foos/foos.xml === The
`administrator/components/com_foos/foos.xml` file is .... ==== Completed
administrator/components/com\_foos/foos.xml file ==== The code for the
`administrator/components/com_foos/foos.xml` file is as follows:

COM\_FOOS \[DATE\] \[AUTHOR\] \[AUTHOR\_EMAIL\] \[AUTHOR\_URL\]
\[COPYRIGHT\] GNU General Public License version 2 or later; 6.0.0
COM\_FOOS\_XML\_DESCRIPTION Joomla\\Component\\Foos script.php
sql/install.mysql.utf8.sql sql/uninstall.mysql.utf8.sql Controller Model
View tmpl

COM\_FOOS

COM\_FOOS

foos.xml Controller Extension Model Service View services sql tmpl

== Test your component == Now you can zip all files and install them via
Joomla Extension Manager. You have to run a new installation or fix the
database due to the changes in the database. After that the data for
this component is stored in the database. In the next picture you can
see how the data is retrieved and listed. In the next chapters, we are
working to make the data changeable in the backend.
\[\[File:as\_j4\_t\_6\_1.png|700px\]\] == Component Contents == At this
point in the tutorial, your component should contain the following
files: {| border=1 | 1 |
administrator/components/com\_foos/Controller/DisplayController.php |
this is the administrator entry point to the Foo component | unchanged
|- |1 |administrator/components/com\_foos/Extension/FoosComponent.php |
the interface BootableExtensionInterface where a component class can
load its internal class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 6 |
administrator/components/com\_foos/Model/FoosModel.php | this is the
model of the Foo component | new |- |1
|administrator/components/com\_foos/Service/HTML/AdministratorService.php
| the html service see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- |1
|administrator/components/com\_foos/View/Foos/HtmlView.php | file
representing the view in the back end | changed |- |1
|administrator/components/com\_foos/services/provider.php | the service
provider interface see https://github.com/joomla/joomla-cms/pull/20217 |
changed |- |6
|administrator/components/com\_foos/sql/install.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | new |- |6
|administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql |
During the install/uninstall/update phase of a component, you can
execute SQL queries through the use of this SQL text file | new |- |1
|administrator/components/com\_foos/tmpl/foos/default.php | the default
view in the back end | changed |- |1
|administrator/components/com\_foos/foos.xml |this is an XML (manifest)
file that tells Joomla! how to install our component. | changed |- |1
|administrator/components/com\_foos/script.php | the installer script |
unchanged |- |2 | components/com\_foos/Controller/DisplayController.php
| this is the frond end entry point to the Foo component | unchanged |-
|4 | components/com\_foos/Model/FooModel.php | this is the frond end
model for the Foo component | unchanged |- |2 |
components/com\_foos/View/Foo/HtmlView.php | file representing the view
in the frond end | unchanged |- |2 |
components/com\_foos/tmpl/foo/default.php | the default view in the
frond end | unchanged |- |3 | components/com\_foos/tmpl/foo/default.xml
| the xml for the menu item | unchanged |- |} == Conclusion == Now our
component has a database table where it can store data. In this chapter
we have seen, how we can display this data in the backend. In the next
chapter we will go on an check, how we can use the data in the front
end. = Using the database in the frontend - Part 7 = == Requirements ==
You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev) == File Structure == === Creating
administrator/components/com\_foos/Controller/FooController.php === The
`administrator/components/com_foos/Controller/FooController.php` file is
the controller file. ==== Completed
administrator/components/com\_foos/Controller/FooController.php file
==== The code for the
`administrator/components/com_foos/Controller/FooController.php` file is
as follows:

=== Creating administrator/components/com\_foos/Field/Modal/FooField.php
=== The `administrator/components/com_foos/Field/Modal/FooField.php`
file is contains the modal field. ==== Completed
administrator/components/com\_foos/Field/Modal/FooField.php file ====
The code for the
`administrator/components/com_foos/Field/Modal/FooField.php` file is as
follows:

element\['clear'\] != 'false'); \$allowSelect = ((string)
\$this-&gt;element\['select'\] != 'false'); // The active foo id field.
\$value = (int) \$this-&gt;value &gt; 0 ? (int) \$this-&gt;value : '';
// Create the modal id. \$modalId = 'Foo\_' . \$this-&gt;id; // Add the
modal field script to the document head. HTMLHelper::\_('script',
'system/fields/modal-fields.min.js', array('version' =&gt; 'auto',
'relative' =&gt; true)); // Script to proxy the select modal function to
the modal-fields.js file. if (\$allowSelect) { static \$scriptSelect =
null; if (is\_null(\$scriptSelect)) { \$scriptSelect = array(); } if
(!isset(\$scriptSelect\[\$this-&gt;id\])) {
Factory::getDocument()-&gt;addScriptDeclaration(" function jSelectFoo\_"
. \$this-&gt;id . "(id, title, object) {
window.processModalSelect('Foo', '" . \$this-&gt;id . "', id, title, '',
object); } " ); \$scriptSelect\[\$this-&gt;id\] = true; } } // Setup
variables for display. \$linkFoos =
'index.php?option=com\_foos&view=foos&layout=modal&tmpl=component&' .
Session::getFormToken() . '=1'; \$linkFoo =
'index.php?option=com\_foos&view=foo&layout=modal&tmpl=component&' .
Session::getFormToken() . '=1'; \$modalTitle =
Text::\_('COM\_FOOS\_CHANGE\_FOO'); \$urlSelect = \$linkFoos .
'&function=jSelectFoo\_' . \$this-&gt;id; if (\$value) { \$db =
Factory::getDbo(); \$query = \$db-&gt;getQuery(true)
-&gt;select(\$db-&gt;quoteName('name'))
-&gt;from(\$db-&gt;quoteName('\#\_\_foos\_details'))
-&gt;where(\$db-&gt;quoteName('id') . ' = ' . (int) \$value);
\$db-&gt;setQuery(\$query); try { \$title = \$db-&gt;loadResult(); }
catch (\\RuntimeException \$e) {
Factory::getApplication()-&gt;enqueueMessage(\$e-&gt;getMessage(),
'error'); } } \$title = empty(\$title) ?
Text::\_('COM\_FOOS\_SELECT\_A\_FOO') : htmlspecialchars(\$title,
ENT\_QUOTES, 'UTF-8'); // The current foo display field. \$html = ''; if
(\$allowSelect || \$allowNew || \$allowEdit || \$allowClear) { \$html .=
''; } \$html .= ''; if (\$allowSelect || \$allowNew || \$allowEdit ||
\$allowClear) { \$html .= ''; } // Select foo button if (\$allowSelect)
{ \$html .= '' . '[]{.icon-file aria-hidden="true"} ' .
Text::\_('JSELECT') . '

'; } // Clear foo button if (\$allowClear) { \$html .= '' .
'[]{.icon-remove aria-hidden="true"}' . Text::\_('JCLEAR') . '

'; } if (\$allowSelect || \$allowNew || \$allowEdit || \$allowClear) {
\$html .= ''; } // Select foo modal if (\$allowSelect) { \$html .=
HTMLHelper::\_( 'bootstrap.renderModal', 'ModalSelect' . \$modalId,
array( 'title' =&gt; \$modalTitle, 'url' =&gt; \$urlSelect, 'height'
=&gt; '400px', 'width' =&gt; '800px', 'bodyHeight' =&gt; 70,
'modalWidth' =&gt; 80, 'footer' =&gt; '[' .
Text::\_('JLIB\_HTML\_BEHAVIOR\_CLOSE') . ']{.btn .btn-secondary}', ) );
} // Note: class='required' for client side validation. \$class =
\$this-&gt;required ? ' class="required modal-value"' : ''; \$html .=
''; return \$html; } /\*\* \* Method to get the field label markup. \*
\* @return string The field label markup. \* \* @since 1.0 \*/ protected
function getLabel() { return str\_replace(\$this-&gt;id, \$this-&gt;id .
'\_name', parent::getLabel()); } }

=== Creating administrator/components/com\_foos/Model/FooModel.php ===
The `administrator/components/com_foos/Model/FooModel.php` file is the
model for a foo item. ==== Completed
administrator/components/com\_foos/Model/FooModel.php file ==== The code
for the `administrator/components/com_foos/Model/FooModel.php` file is
as follows:

loadForm('com\_foos.foo', 'foo', array('control' =&gt; 'jform',
'load\_data' =&gt; \$loadData)); if (empty(\$form)) { return false; }
return \$form; } /\*\* \* Method to get the data that should be injected
in the form. \* \* @return mixed The data for the form. \* \* @since 1.0
\*/ protected function loadFormData() { \$app =
Factory::getApplication(); \$data = \$this-&gt;getItem();
\$this-&gt;preprocessData('com\_foos.foo', \$data); return \$data; } }

=== Changing administrator/components/com\_foos/View/Foos/HtmlView.php
=== The `administrator/components/com_foos/View/Foos/HtmlView.php` file
is .... ==== Completed
administrator/components/com\_foos/View/Foos/HtmlView.php file ==== The
code for the `administrator/components/com_foos/View/Foos/HtmlView.php`
file is as follows:

=== Changing administrator/components/com\_foos/tmpl/foos/default.php
=== The `administrator/components/com_foos/tmpl/foos/default.php` file
is .... ==== Completed
administrator/components/com\_foos/tmpl/foos/default.php file ==== The
code for the `administrator/components/com_foos/tmpl/foos/default.php`
file is as follows:

=== Creating administrator/components/com\_foos/Table/FooTable.php ===
The `administrator/components/com_foos/Table/FooTable.php` file is ....
==== Completed administrator/components/com\_foos/Table/FooTable.php
file ==== The code for the
`administrator/components/com_foos/Table/FooTable.php` file is as
follows:

typeAlias = 'com\_foos.foo';
parent::\_\_construct('\#\_\_foos\_details', 'id', \$db); } }

=== Changing administrator/components/com\_foos/foos.xml === The
`administrator/components/com_foos/foos.xml` file is .... ==== Completed
administrator/components/com\_foos/foos.xml file ==== The code for the
`administrator/components/com_foos/foos.xml` file is as follows:

COM\_FOOS \[DATE\] \[AUTHOR\] \[AUTHOR\_EMAIL\] \[AUTHOR\_URL\]
\[COPYRIGHT\] GNU General Public License version 2 or later; 7.0.0
COM\_FOOS\_XML\_DESCRIPTION Joomla\\Component\\Foos script.php
sql/install.mysql.utf8.sql sql/uninstall.mysql.utf8.sql Controller Model
View tmpl js

COM\_FOOS

COM\_FOOS

foos.xml Controller Extension Field Model Service Table View forms
services sql tmpl

=== Creating administrator/components/com\_foos/forms/foo.xml === The
`administrator/components/com_foos/forms/foo.xml` file is .... ====
Completed administrator/components/com\_foos/forms/foo.xml file ==== The
code for the `administrator/components/com_foos/forms/foo.xml` file is
as follows:

=== Changing components/com\_foos/Model/FooModel.php === The
`components/com_foos/Model/FooModel.php` file is .... ==== Completed
components/com\_foos/Model/FooModel.php file ==== The code for the
`components/com_foos/Model/FooModel.php` file is as follows:

input-&gt;getInt('id'); if (\$this-&gt;\_item === null) {
\$this-&gt;\_item = array(); } if (!isset(\$this-&gt;\_item\[\$pk\])) {
try { \$db = \$this-&gt;getDbo(); \$query = \$db-&gt;getQuery(true);
\$query-&gt;select('\*')
-&gt;from(\$db-&gt;quoteName('\#\_\_foos\_details', 'a'))
-&gt;where('a.id = ' . (int) \$pk); \$db-&gt;setQuery(\$query); \$data =
\$db-&gt;loadObject(); if (empty(\$data)) { throw new
\\Exception(Text::\_('COM\_FOOS\_ERROR\_FOO\_NOT\_FOUND'), 404); }
\$this-&gt;\_item\[\$pk\] = \$data; } catch (\\Exception \$e) {
\$this-&gt;setError(\$e); \$this-&gt;\_item\[\$pk\] = false; } } return
\$this-&gt;\_item\[\$pk\]; } }

=== Changing administrator/components/com\_foos/View/Foos/HtmlView.php
=== The `administrator/components/com_foos/View/Foos/HtmlView.php` file
is .... ==== Completed
administrator/components/com\_foos/View/Foos/HtmlView.php file ==== The
code for the `administrator/components/com_foos/View/Foos/HtmlView.php`
file is as follows:

items = \$this-&gt;get('Items'); \$this-&gt;addToolbar(); return
parent::display(\$tpl); } /\*\* \* Add the page title and toolbar. \* \*
@return void \* \* @since 1.0 \*/ protected function addToolbar() { //
Get the toolbar object instance \$toolbar =
Toolbar::getInstance('toolbar');
ToolbarHelper::title(Text::\_('COM\_FOOS\_MANAGER\_FOOS'), 'address
foo'); \$toolbar-&gt;addNew('foo.add'); } }

=== Changing components/com\_foos/View/Foo/HtmlView.php === The
`components/com_foos/View/Foo/HtmlView.php` file is .... ==== Completed
components/com\_foos/View/Foo/HtmlView.php file ==== The code for the
`components/com_foos/View/Foo/HtmlView.php` file is as follows:

item = \$this-&gt;get('Item'); return parent::display(\$tpl); } }

=== Creating administrator/components/com\_foos/tmpl/foo/edit.php ===
The `administrator/components/com_foos/tmpl/foo/edit.php` file is ....
==== Completed administrator/components/com\_foos/tmpl/foo/edit.php file
==== The code for the `components/com_foos/tmpl/foos/edit.php` file is
as follows:

input; // In case of modal \$isModal = \$input-&gt;get('layout') ==
'modal' ? true : false; \$layout = \$isModal ? 'modal' : 'edit'; \$tmpl
= \$isModal || \$input-&gt;get('tmpl', '', 'cmd') === 'component' ?
'&tmpl=component' : ''; ?&gt;

getForm()-&gt;renderField('name'); ?&gt;

=== Creating Creating
administrator/components/com\_foos/tmpl/foo/modal.php === The
`Creating administrator/components/com_foos/tmpl/foo/modal.php` file is
.... ==== Completed Creating
administrator/components/com\_foo/tmpl/foos/modal.php file ==== The code
for the `Creating components/com_foos/tmpl/foo/modal.php` file is as
follows:

<div class="container-popup">

setLayout('edit'); ?&gt;
loadTemplate(); ?&gt;

</div>

=== Changing components/com\_foos/tmpl/foo/default.php === The
`components/com_foos/tmpl/foo/default.php` file is .... ==== Completed
components/com\_foos/tmpl/foo/default.php file ==== The code for the
`components/com_foos/tmpl/foo/default.php` file is as follows:

item-&gt;name;

=== Creating administrator/components/com\_foos/tmpl/foos/modal.php ===
The `administrator/components/com_foos/tmpl/foos/modal.php` file is ....
==== Completed administrator/components/com\_foos/tmpl/foos/modal.php
file ==== The code for the
`administrator/components/com_foos/tmpl/foos/modal.php` file is as
follows:

'auto', 'relative' =&gt; true)); \$function =
\$app-&gt;input-&gt;getCmd('function', 'jSelectFoos'); \$onclick =
\$this-&gt;escape(\$function); ?&gt;

<div class="container-popup">

items)) : ?&gt;
<div class="alert alert-warning">

</div>

'icon-trash', 0 =&gt; 'icon-unpublish', 1 =&gt; 'icon-publish', 2 =&gt;
'icon-archive', ); ?&gt;
items as \$i =&gt; \$item) : ?&gt;
escape(\$item-&gt;name); ?&gt;
id; ?&gt;

</div>

=== Changing components/com\_foos/tmpl/foo/default.php === The
`components/com_foos/tmpl/foo/default.php` file is .... ==== Completed
components/com\_foos/tmpl/foo/default.php file ==== The code for the
`components/com_foos/tmpl/foo/default.php` file is as follows:

item-&gt;name;

=== Changing components/com\_foos/tmpl/foo/default.xml === The
`components/com_foos/tmpl/foo/default.xml` file is .... ==== Completed
components/com\_foos/tmpl/foo/default.xml file ==== The code for the
`components/com_foos/tmpl/foo/default.xml` file is as follows:

COM\_FOOS\_FOO\_VIEW\_DEFAULT\_DESC

=== Creating media/com\_foos/js/admin-foos-modal.js === The
`media/com_foos/js/admin-foos-modal.js` file is .... ==== Completed
media/com\_foos/js/admin-foos-modal.js file ==== The code for the
`media/com_foos/js/admin-foos-modal.js` file is as follows:

(function () { 'use strict'; /\*\* \* Javascript to insert the link \*
View element calls jSelectFoo when a foo is clicked \* jSelectFoo
creates the link tag, sends it to the editor, \* and closes the select
frame. \*/ window.jSelectFoo = function (id, title, catid, object, link,
lang) { var hreflang = ''; if (!Joomla.getOptions('xtd-foos')) { //
Something went wrong window.parent.Joomla.Modal.getCurrent().close();
return false; } var \_Joomla\$getOptions =
Joomla.getOptions('xtd-foos'), editor = \_Joomla\$getOptions.editor; if
(lang !== '') { hreflang = "hreflang = \\"".concat(lang, "\\""); } var
tag = "[").concat(title, "](\%22%22).concat(link,)");
window.parent.Joomla.editors.instances\[editor\].replaceSelection(tag);
window.parent.Joomla.Modal.getCurrent().close(); return true; };
document.addEventListener('DOMContentLoaded', function () { // Get the
elements var elements = document.querySelectorAll('.select-link'); for
(var i = 0, l = elements.length; l &gt; i; i += 1) { // Listen for click
event elements\[i\].addEventListener('click', function (event) {
event.preventDefault(); var functionName =
event.target.getAttribute('data-function'); if (functionName ===
'jSelectFoo') { // Used in xtd\_foos
window\[functionName\](event.target.getAttribute('data-id'),
event.target.getAttribute('data-title'), null, null,
event.target.getAttribute('data-uri'),
event.target.getAttribute('data-language'), null); } else { // Used in
com\_menus
window.parent\[functionName\](event.target.getAttribute('data-id'),
event.target.getAttribute('data-title'), null, null,
event.target.getAttribute('data-uri'),
event.target.getAttribute('data-language'), null); } if
(window.parent.Joomla.Modal) {
window.parent.Joomla.Modal.getCurrent().close(); } }); } }); })();

== Test your component == This chapter contains a lot of work. It is the
most extensive chapter in this tutorial. Now you can zip all files and
install them via Joomla Extension Manager. After that you
\[\[File:as\_j4\_t\_7\_1.png|700px\]\]
\[\[File:as\_j4\_t\_7\_2.png|700px\]\]
\[\[File:as\_j4\_t\_7\_3.png|700px\]\]
\[\[File:as\_j4\_t\_7\_4.png|700px\]\]
\[\[File:as\_j4\_t\_7\_5.png|700px\]\]
\[\[File:as\_j4\_t\_7\_6.png|700px\]\]
\[\[File:as\_j4\_t\_7\_7.png|700px\]\] == Component Contents == At this
point in the tutorial, your component should contain the following
files: {| border=1 | 1 |
administrator/components/com\_foos/Controller/DisplayController.php |
this is the administrator entry point to the Foo component | unchanged
|- | 7 | administrator/components/com\_foos/Controller/FooController.php
| this is the entry point to the Foo component | new |- | 1 |
administrator/components/com\_foos/Extension/FoosComponent.php | the
interface BootableExtensionInterface where a component class can load
its internal class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 7 |
administrator/components/com\_foos/Field/FooField.php | the interface
BootableExtensionInterface where a component class can load its internal
class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | new |- | 7 |
administrator/components/com\_foos/Model/FooModel.php | this is the
model of the Foo component item | new |- | 6 |
administrator/components/com\_foos/Model/FoosModel.php | this is the
model of the Foo component | unchanged |- | 1 |
administrator/components/com\_foos/Service/HTML/AdministratorService.php
| the html service see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- | 7 | administrator/components/com\_foos/Table/FooTable.php
| the database table | new |- | 1 |
administrator/components/com\_foos/View/Foos/HtmlView.php | file
representing the view in the back end | changed |- | 1 |
administrator/components/com\_foos/services/provider.php | the service
provider interface see https://github.com/joomla/joomla-cms/pull/20217 |
changed |- | 6 |
administrator/components/com\_foos/sql/install.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | unchanged |- | 6 |
administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | unchanged |- | 7 |
administrator/components/com\_foos/forms/foo.xml | the default form in
the back end | new |- | 7 |
administrator/components/com\_foos/tmpl/foo/edit.php | the default view
in the back end | new |- | 7 |
administrator/components/com\_foos/tmpl/foo/modal.php | the default view
in the back end | new |- | 1 |
administrator/components/com\_foos/tmpl/foos/default.php | the default
view in the back end | changed |- | 7 |
administrator/components/com\_foos/tmpl/foos/modal.php | the default
view in the back end | new |- |1
|administrator/components/com\_foos/foos.xml |this is an XML (manifest)
file that tells Joomla! how to install our component. | changed |- | 1
|administrator/components/com\_foos/script.php | the installer script |
unchanged |- | 2 | components/com\_foos/Controller/DisplayController.php
| this is the frond end entry point to the Foo component | unchanged |-
| 4 | components/com\_foos/Model/FooModel.php | this is the frond end
model for the Foo component | changed |- | 2 |
components/com\_foos/View/Foo/HtmlView.php | file representing the view
in the frond end | changed |- | 7 |
components/com\_foos/View/Foos/HtmlView.php | file representing the view
in the frond end | new |- | 2 |
components/com\_foos/tmpl/foo/default.php | the default view in the
frond end | changed |- | 3 | components/com\_foos/tmpl/foo/default.xml |
the xml for the menu item | changed |- | 7 |
media/com\_foos/js/admin-foos-modal.js | the javascript file | new |- |}
== Conclusion == = Using languages files - Part 8 = == Requirements ==
You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev) == File Structure == === Changing
administrator/components/com\_foos/foos.xml === The
`administrator/components/com_foos/foos.xml` file is .... ==== Completed
administrator/components/com\_foos/foos.xml file ==== The code for the
`administrator/components/com_foos/foos.xml` file is as follows:

COM\_FOOS \[DATE\] \[AUTHOR\] \[AUTHOR\_EMAIL\] \[AUTHOR\_URL\]
\[COPYRIGHT\] GNU General Public License version 2 or later; 8.0.0
COM\_FOOS\_XML\_DESCRIPTION Joomla\\Component\\Foos script.php
sql/install.mysql.utf8.sql sql/uninstall.mysql.utf8.sql Controller Model
View tmpl language js

COM\_FOOS

COM\_FOOS

foos.xml Controller Extension Model Service View services tmpl sql
language

=== Changing components/com\_foos/tmpl/foo/default.php === The
`components/com_foos/tmpl/foo/default.php` file is .... ==== Completed
components/com\_foos/tmpl/foo/default.php file ==== The code for the
`components/com_foos/tmpl/foo/default.php` file is as follows:

item-&gt;name;

=== Creating components/com\_foos/language/en-GB/en-GB.com\_foo.ini ===
The `components/com_foos/language/en-GB/en-GB.com_foo.ini` file is ....
==== Completed components/com\_foos/language/en-GB/en-GB.com\_foo.ini
file ==== The code for the
`components/com_foos/language/en-GB/en-GB.com_foo.ini` file is as
follows:

COM\_FOOS\_NAME="Name: "

=== Creating
administrator/components/com\_foos/language/en-GB/en-GB.com\_foo.ini ===
The `administrator/components/com_foos/language/en-GB/en-GB.com_foo.ini`
file is .... ==== Completed
administrator/components/com\_foos/language/en-GB/en-GB.com\_foo.ini
file ==== The code for the
`administrator/components/com_foos/language/en-GB/en-GB.com_foo.ini`
file is as follows:

COM\_FOOS="\[PROJECT\_NAME\]" COM\_FOOS\_CONFIGURATION="Foo Options"
COM\_FOOS\_MANAGER\_FOO\_NEW="New" COM\_FOOS\_MANAGER\_FOO\_EDIT="Edit"
COM\_FOOS\_MANAGER\_FOOS="Foo Manager"
COM\_FOOS\_TABLE\_TABLEHEAD\_NAME="Name"
COM\_FOOS\_TABLE\_TABLEHEAD\_ID="ID"
COM\_FOOS\_ERROR\_FOO\_NOT\_FOUND="Foo not found"
COM\_FOOS\_FIELD\_NAME\_LABEL="Name"

=== Creating
administrator/components/com\_foos/language/en-GB/en-GB.com\_foo.sys.ini
=== The
`administrator/components/com_foos/language/en-GB/en-GB.com_foo.sys.ini`
file is .... ==== Completed
administrator/components/com\_foos/language/en-GB/en-GB.com\_foo.sys.ini
file ==== The code for the
`administrator/components/com_foos/language/en-GB/en-GB.com_foo.sys.ini`
file is as follows:

COM\_FOOS="\[PROJECT\_NAME\]" COM\_FOOS\_XML\_DESCRIPTION="Foo
Component" COM\_FOOS\_INSTALLERSCRIPT\_PREFLIGHT="

Anything here happens before the installation/update/uninstallation of
the component

" COM\_FOOS\_INSTALLERSCRIPT\_UPDATE="

The component has been updated

" COM\_FOOS\_INSTALLERSCRIPT\_UNINSTALL="

The component has been uninstalled

" COM\_FOOS\_INSTALLERSCRIPT\_INSTALL="

The component has been installed

" COM\_FOOS\_INSTALLERSCRIPT\_POSTFLIGHT="

Anything here happens after the installation/update/uninstallation of
the component

" COM\_FOOS\_FOO\_VIEW\_DEFAULT\_TITLE="Single Foo"
COM\_FOOS\_FOO\_VIEW\_DEFAULT\_DESC="This links to the information for
one foo." COM\_FOOS\_SELECT\_FOO\_LABEL="Select a foo"
COM\_FOOS\_CHANGE\_FOO="Change a foo" COM\_FOOS\_SELECT\_A\_FOO="Select
a foo"

== Test your component == Now you can zip all files and install them via
Joomla Extension Manager. After that, all language strings are
translated for all installed languages.
\[\[File:as\_j4\_t\_8\_1.png|700px\]\]
\[\[File:as\_j4\_t\_8\_2.png|700px\]\] == Component Contents == At this
point in the tutorial, your component should contain the following
files: {| border=1 | 1 |
administrator/components/com\_foos/Controller/DisplayController.php |
this is the administrator entry point to the Foo component | unchanged
|- | 7 | administrator/components/com\_foos/Controller/FooController.php
| this is the entry point to the Foo component | unchanged |- | 1 |
administrator/components/com\_foos/Extension/FoosComponent.php | the
interface BootableExtensionInterface where a component class can load
its internal class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 7 |
administrator/components/com\_foos/Field/FooField.php | the interface
BootableExtensionInterface where a component class can load its internal
class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 7 |
administrator/components/com\_foos/Model/FooModel.php | this is the
model of the Foo component item | unchanged |- | 6 |
administrator/components/com\_foos/Model/FoosModel.php | this is the
model of the Foo component | unchanged |- | 1 |
administrator/components/com\_foos/Service/HTML/AdministratorService.php
| the html service see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- | 7 | administrator/components/com\_foos/Table/FooTable.php
| the database table | unchanged |- | 1 |
administrator/components/com\_foos/View/Foos/HtmlView.php | file
representing the view in the back end | unchanged |- | 1 |
administrator/components/com\_foos/services/provider.php | the service
provider interface see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- | 6 |
administrator/components/com\_foos/sql/install.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | unchanged |- | 6 |
administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | unchanged |- | 7 |
administrator/components/com\_foos/forms/foo.xml | the default form in
the back end | unchanged |- | 7 |
administrator/components/com\_foos/tmpl/foo/edit.php | the default view
in the back end | unchanged |- | 7 |
administrator/components/com\_foos/tmpl/foo/modal.php | the default view
in the back end | unchanged |- | 1 |
administrator/components/com\_foos/tmpl/foos/default.php | the default
view in the back end | unchanged |- | 7 |
administrator/components/com\_foos/tmpl/foos/modal.php | the default
view in the back end | unchanged |- | 1 |
administrator/components/com\_foos/foos.xml | this is an XML (manifest)
file that tells Joomla! how to install our component. | changed |- | 1 |
administrator/components/com\_foos/script.php | the installer script |
unchanged |- | 8 |
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini |
the language file | new |- | 8 |
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini
| the language file | new |- | 2 |
components/com\_foos/Controller/DisplayController.php | this is the
frond end entry point to the Foo component | unchanged |- | 4 |
components/com\_foos/Model/FooModel.php | this is the frond end model
for the Foo component | unchanged |- | 2 |
components/com\_foos/View/Foo/HtmlView.php | file representing the view
in the frond end | unchanged |- | 7 |
components/com\_foos/View/Foos/HtmlView.php | file representing the view
in the frond end | unchanged |- | 2 |
components/com\_foos/tmpl/foo/default.php | the default view in the
frond end | changed |- | 3 | components/com\_foos/tmpl/foo/default.xml |
the xml for the menu item | unchanged |- | 8 |
components/com\_foos/language/en-GB/en-GB.com\_foos.ini | the language
file | new |- | 8 |
components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini | the
language file | new |- | 7 | media/com\_foos/js/admin-foos-modal.js |
the javascript file | unchanged |- |} == Conclusion == = Adding
configuration - Part 9 = == Requirements == You need Joomla! 4.x for
this tutorial (as of writing currently Joomla! 4.0.0-alpha11-dev) ==
File Structure == === Creating
administrator/components/com\_foos/config.php === The
`administrator/components/com_foos/config.php` file is .... ====
Completed administrator/components/com\_foos/config.php file ==== The
code for the `administrator/components/com_foos/config.php` file is as
follows:

JNO JYES

=== Changing administrator/components/com\_foos/foos.xml === The
`administrator/components/com_foos/foos.xml` file is .... ==== Completed
administrator/components/com\_foos/foos.xml file ==== The code for the
`administrator/components/com_foos/foos.xml` file is as follows:

COM\_FOOS \[DATE\] \[AUTHOR\] \[AUTHOR\_EMAIL\] \[AUTHOR\_URL\]
\[COPYRIGHT\] GNU General Public License version 2 or later; 9.0.0
COM\_FOOS\_XML\_DESCRIPTION Joomla\\Component\\Foos script.php
sql/install.mysql.utf8.sql sql/uninstall.mysql.utf8.sql Controller Model
View tmpl language js

COM\_FOOS

COM\_FOOS

config.xml foos.xml Controller Extension Model Service View services
tmpl sql language

=== Changing
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini
=== The
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.ini`
file is .... ==== Completed
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini
file ==== The code for the
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.ini`
file is as follows:

COM\_FOOS="\[PROJECT\_NAME\]" COM\_FOOS\_CONFIGURATION="Foo Options"
COM\_FOOS\_MANAGER\_FOO\_NEW="New" COM\_FOOS\_MANAGER\_FOO\_EDIT="Edit"
COM\_FOOS\_MANAGER\_FOOS="Foo Manager"
COM\_FOOS\_TABLE\_TABLEHEAD\_NAME="Name"
COM\_FOOS\_TABLE\_TABLEHEAD\_ID="ID"
COM\_FOOS\_ERROR\_FOO\_NOT\_FOUND="Foo not found"
COM\_FOOS\_FIELD\_NAME\_LABEL="Name"
COM\_FOOS\_FIELD\_FOO\_SHOW\_CATEGORY\_LABEL="Show name label"
COM\_FOOS\_FIELD\_CONFIG\_INDIVIDUAL\_FOO\_DESC="These settings apply
for all foo." COM\_FOOS\_FIELD\_CONFIG\_INDIVIDUAL\_FOO\_DISPLAY="Foo"

=== Changing administrator/components/com\_foos/Model/FooModel.php ===
The `administrator/components/com_foos/Model/FooModel.php` file is ....
==== Completed administrator/components/com\_foos/Model/FooModel.php
file ==== The code for the
`administrator/components/com_foos/Model/FooModel.php` file is as
follows:

=== Changing administrator/components/com\_foos/View/Foos/HtmlView.php
=== The `administrator/components/com_foos/View/Foos/HtmlView.php` file
is .... ==== Completed
administrator/components/com\_foos/View/Foos/HtmlView.php file ==== The
code for the `administrator/components/com_foos/View/Foos/HtmlView.php`
file is as follows:

items = \$this-&gt;get('Items'); \$this-&gt;addToolbar(); return
parent::display(\$tpl); } /\*\* \* Add the page title and toolbar. \* \*
@return void \* \* @since 1.0 \*/ protected function addToolbar() { //
Get the toolbar object instance \$toolbar =
Toolbar::getInstance('toolbar');
ToolbarHelper::title(Text::\_('COM\_FOOS\_MANAGER\_FOOS'), 'address
foo'); \$toolbar-&gt;addNew('foo.add');
\$toolbar-&gt;preferences('com\_foos'); } }

=== Changing components/com\_foos/Model/FooModel.php === The
`components/com_foos/Model/FooModel.php` file is .... ==== Completed
components/com\_foos/Model/FooModel.php file ==== The code for the
`components/com_foos/Model/FooModel.php` file is as follows:

input-&gt;getInt('id'); if (\$this-&gt;\_item === null) {
\$this-&gt;\_item = array(); } if (!isset(\$this-&gt;\_item\[\$pk\])) {
try { \$db = \$this-&gt;getDbo(); \$query = \$db-&gt;getQuery(true);
\$query-&gt;select('\*')
-&gt;from(\$db-&gt;quoteName('\#\_\_foos\_details', 'a'))
-&gt;where('a.id = ' . (int) \$pk); \$db-&gt;setQuery(\$query); \$data =
\$db-&gt;loadObject(); if (empty(\$data)) { throw new
\\Exception(Text::\_('COM\_FOOS\_ERROR\_FOO\_NOT\_FOUND'), 404); }
\$this-&gt;\_item\[\$pk\] = \$data; } catch (\\Exception \$e) {
\$this-&gt;setError(\$e); \$this-&gt;\_item\[\$pk\] = false; } } return
\$this-&gt;\_item\[\$pk\]; } /\*\* \* Method to auto-populate the model
state. \* \* Note. Calling getState in this method will result in
recursion. \* \* @return void \* \* @since 1.0 \*/ protected function
populateState() { \$app = Factory::getApplication();
\$this-&gt;setState('foo.id', \$app-&gt;input-&gt;getInt('id'));
\$this-&gt;setState('params', \$app-&gt;getParams()); } }

=== Changing components/com\_foos/tmpl/foo/default.php === The
`components/com_foos/tmpl/foo/default.php` file is .... ==== Completed
components/com\_foos/tmpl/foo/default.php file ==== The code for the
`components/com_foos/tmpl/foo/default.php` file is as follows:

get('State')-&gt;get('params')-&gt;get('show\_foo\_name\_label')) { echo
Text::\_('COM\_FOOS\_NAME') . \$this-&gt;item-&gt;name; } else { echo
\$this-&gt;item-&gt;name; }

== Test your component == Now you can zip all files and install them via
Joomla Extension Manager. Now you can globally use settings for your
extension. You will find a button in the top right corner of the backend
where you can open the options. \[\[File:as\_j4\_t\_9\_1.png|700px\]\]
The options are the configuration that you can use for all the items in
your extension. \[\[File:as\_j4\_t\_9\_2.png|700px\]\] == Component
Contents == At this point in the tutorial, your component should contain
the following files: {| border=1 | 1 |
administrator/components/com\_foos/Controller/DisplayController.php |
this is the administrator entry point to the Foo component | unchanged
|- | 7 | administrator/components/com\_foos/Controller/FooController.php
| this is the entry point to the Foo component | unchanged |- | 1 |
administrator/components/com\_foos/Extension/FoosComponent.php | the
interface BootableExtensionInterface where a component class can load
its internal class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 7 |
administrator/components/com\_foos/Field/FooField.php | the interface
BootableExtensionInterface where a component class can load its internal
class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 7 |
administrator/components/com\_foos/Model/FooModel.php | this is the
model of the Foo component item | changed |- | 6 |
administrator/components/com\_foos/Model/FoosModel.php | this is the
model of the Foo component | unchanged |- | 1 |
administrator/components/com\_foos/Service/HTML/AdministratorService.php
| the html service see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- | 7 | administrator/components/com\_foos/Table/FooTable.php
| the database table | unchanged |- | 1 |
administrator/components/com\_foos/View/Foos/HtmlView.php | file
representing the view in the back end | changed |- | 1 |
administrator/components/com\_foos/services/provider.php | the service
provider interface see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- | 6 |
administrator/components/com\_foos/sql/install.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | unchanged |- | 6 |
administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | unchanged |- | 7 |
administrator/components/com\_foos/forms/foo.xml | the default form in
the back end | unchanged |- | 7 |
administrator/components/com\_foos/tmpl/foo/edit.php | the default view
in the back end | unchanged |- | 7 |
administrator/components/com\_foos/tmpl/foo/modal.php | the default view
in the back end | unchanged |- | 1 |
administrator/components/com\_foos/tmpl/foos/default.php | the default
view in the back end | unchanged |- | 7 |
administrator/components/com\_foos/tmpl/foos/modal.php | the default
view in the back end | unchanged |- | 1 |
administrator/components/com\_foos/foos.xml | this is an XML (manifest)
file that tells Joomla! how to install our component. | unchanged |- | 1
| administrator/components/com\_foos/script.php | the installer script |
unchanged |- | 8 |
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini |
the language file | changed |- | 8 |
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini
| the language file | unchanged |- | 9 |
administrator/components/com\_foos/config.php | the configuration | new
|- | 2 | components/com\_foos/Controller/DisplayController.php | this is
the frond end entry point to the Foo component | unchanged |- | 4 |
components/com\_foos/Model/FooModel.php | this is the frond end model
for the Foo component | changed |- | 2 |
components/com\_foos/View/Foo/HtmlView.php | file representing the view
in the frond end | unchanged |- | 7 |
components/com\_foos/View/Foos/HtmlView.php | file representing the view
in the frond end | unchanged |- | 2 |
components/com\_foos/tmpl/foo/default.php | the default view in the
frond end | changed |- | 3 | components/com\_foos/tmpl/foo/default.xml |
the xml for the menu item | unchanged |- | 8 |
components/com\_foos/language/en-GB/en-GB.com\_foos.ini | the language
file | unchanged |- | 8 |
components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini | the
language file | unchanged |- | 7 |
media/com\_foos/js/admin-foos-modal.js | the javascript file | unchanged
|- |} == Conclusion == You can now use your component very flexibly.
Maybe you like to offer some settings only to a limited number of users.
How to do this is the topic of the next chapter. = Adding ACL - Part 10
= == Requirements == You need Joomla! 4.x for this tutorial (as of
writing currently Joomla! 4.0.0-alpha11-dev) == File Structure == ===
Creating administrator/components/com\_foos/access.xml === The
`administrator/components/com_foos/access.xml` file is .... ====
Completed administrator/components/com\_foos/access.xml file ==== The
code for the `administrator/components/com_foos/access.xml` file is as
follows:

<div class="section" name="component">

</div>

=== Changing administrator/components/com\_foos/foos.xml === The
`administrator/components/com_foos/foos.xml` file is .... ==== Completed
administrator/components/com\_foos/foos.xml file ==== The code for the
`administrator/components/com_foos/foos.xml` file is as follows:

COM\_FOOS \[DATE\] \[AUTHOR\] \[AUTHOR\_EMAIL\] \[AUTHOR\_URL\]
\[COPYRIGHT\] GNU General Public License version 2 or later; 1.10.0
COM\_FOOS\_XML\_DESCRIPTION Joomla\\Component\\Foos script.php
sql/install.mysql.utf8.sql sql/uninstall.mysql.utf8.sql
sql/updates/mysql Controller Model View tmpl language js

COM\_FOOS

COM\_FOOS

access.xml config.xml foos.xml Controller Extension Model Service View
services tmpl sql language

=== Changing administrator/components/com\_foos/Model/FoosModel.php ===
The `administrator/components/com_foos/Model/FoosModel.php` file is ....
==== Completed administrator/components/com\_foos/Model/FoosModel.php
file ==== The code for the
`administrator/components/com_foos/Model/FoosModel.php` file is as
follows:

getDbo(); \$query = \$db-&gt;getQuery(true); // Select the required
fields from the table. \$query-&gt;select(
\$db-&gt;quoteName(array('a.id', 'a.name', 'a.access')) );
\$query-&gt;from(\$db-&gt;quoteName('\#\_\_foos\_details', 'a')); //
Join over the asset groups.
\$query-&gt;select(\$db-&gt;quoteName('ag.title', 'access\_level'))
-&gt;join( 'LEFT', \$db-&gt;quoteName('\#\_\_viewlevels', 'ag') . ' ON '
. \$db-&gt;quoteName('ag.id') . ' = ' . \$db-&gt;quoteName('a.access')
); return \$query; } }

=== Changing administrator/components/com\_foos/View/Foos/HtmlView.php
=== The `administrator/components/com_foos/View/Foos/HtmlView.php` file
is .... ==== Completed
administrator/components/com\_foos/View/Foos/HtmlView.php file ==== The
code for the `administrator/components/com_foos/View/Foos/HtmlView.php`
file is as follows:

items = \$this-&gt;get('Items'); \$this-&gt;addToolbar(); return
parent::display(\$tpl); } /\*\* \* Add the page title and toolbar. \* \*
@return void \* \* @since 1.0 \*/ protected function addToolbar() {
\$canDo = ContentHelper::getActions('com\_foos'); // Get the toolbar
object instance \$toolbar = Toolbar::getInstance('toolbar');
ToolbarHelper::title(Text::\_('COM\_FOOS\_MANAGER\_FOOS'), 'address
foo'); if (\$canDo-&gt;get('core.create')) {
\$toolbar-&gt;addNew('foo.add'); } if (\$canDo-&gt;get('core.options'))
{ \$toolbar-&gt;preferences('com\_foos'); } } }

=== Changing administrator/components/com\_foos/config.xml === The
`administrator/components/com_foos/config.xml` file is .... ====
Completed administrator/components/com\_foos/config.xml file ==== The
code for the `administrator/components/com_foos/config.xml` file is as
follows:

JNO JYES

=== Changing administrator/components/com\_foos/forms/foo.xml === The
`administrator/components/com_foos/forms/foo.xml` file is .... ====
Completed administrator/components/com\_foos/forms/foo.xml file ==== The
code for the `administrator/components/com_foos/forms/foo.xml` file is
as follows:

=== Creating
administrator/components/com\_foos/sql/updates/mysql/1.10.0.sql === The
`administrator/components/com_foos/sql/updates/mysql/1.10.0.sql` file is
.... ==== Completed
administrator/components/com\_foos/sql/updates/mysql/1.10.0.sql file
==== The code for the
`administrator/components/com_foos/sql/updates/mysql/1.10.0.sql` file is
as follows:

ALTER TABLE \`\#\_\_foos\_details\` ADD COLUMN \`access\` int(10)
unsigned NOT NULL DEFAULT 0 AFTER \`alias\`; ALTER TABLE
\`\#\_\_foos\_details\` ADD KEY \`idx\_access\` (\`access\`);

=== Changing administrator/components/com\_foos/tmpl/foo/edit.php ===
The `administrator/components/com_foos/tmpl/foo/edit.php` file is ....
==== Completed administrator/components/com\_foos/tmpl/foo/edit.php file
==== The code for the
`administrator/components/com_foos/tmpl/foo/edit.php` file is as
follows:

input; // In case of modal \$isModal = \$input-&gt;get('layout') ==
'modal' ? true : false; \$layout = \$isModal ? 'modal' : 'edit'; \$tmpl
= \$isModal || \$input-&gt;get('tmpl', '', 'cmd') === 'component' ?
'&tmpl=component' : ''; ?&gt;

getForm()-&gt;renderField('name'); ?&gt;

getForm()-&gt;renderField('access'); ?&gt;

=== Changing administrator/components/com\_foos/tmpl/foo/default.php ===
The `administrator/components/com_foos/tmpl/foo/default.php` file is
.... ==== Completed
administrator/components/com\_foos/tmpl/foo/default.php file ==== The
code for the `administrator/components/com_foos/tmpl/foo/default.php`
file is as follows:

<div class="row">

<div class="col-md-10">

<div id="j-main-container" class="j-main-container">

items)) : ?&gt;
<div class="alert alert-warning">

</div>

items); foreach (\$this-&gt;items as \$i =&gt; \$item) : ?&gt;
<div>

escape(\$item-&gt;name); ?&gt;

</div>

escape(\$item-&gt;name); ?&gt;
access\_level; ?&gt;
id; ?&gt;

</div>

</div>

</div>

== Note== In this tutorial we only cover MySql. How to handle postgrep
you can find in the file
joomla-cms4/administrator/manifests/files/joomla.xml == Test your
component == Now you can zip all files and install them via Joomla
Extension Manager. You have to run a new installation or fix the
database due to the changes in the database. Now you can set the
permissions for the component in the configuration (options).
\[\[File:as\_j4\_t\_10\_1.png|700px\]\] In the overview in the backend
you can see a new table column. This is a value entered if a specific
authorization has been set for an item.
\[\[File:as\_j4\_t\_10\_2.png|700px\]\] You can specify a special
permission when editing a item. You can see that in the next picture.
\[\[File:as\_j4\_t\_10\_3.png|700px\]\] == Example in Joomla! == == Note
== == Component Contents == At this point in the tutorial, your
component should contain the following files: {| border=1 | 1 |
administrator/components/com\_foos/Controller/DisplayController.php |
this is the administrator entry point to the Foo component | unchanged
|- | 7 | administrator/components/com\_foos/Controller/FooController.php
| this is the entry point to the Foo component | unchanged |- | 1 |
administrator/components/com\_foos/Extension/FoosComponent.php | the
interface BootableExtensionInterface where a component class can load
its internal class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 7 |
administrator/components/com\_foos/Field/FooField.php | the interface
BootableExtensionInterface where a component class can load its internal
class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 7 |
administrator/components/com\_foos/Model/FooModel.php | this is the
model of the Foo component item | unchanged |- | 6 |
administrator/components/com\_foos/Model/FoosModel.php | this is the
model of the Foo component | changed |- | 1 |
administrator/components/com\_foos/Service/HTML/AdministratorService.php
| the html service see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- | 7 | administrator/components/com\_foos/Table/FooTable.php
| the database table | unchanged |- | 1 |
administrator/components/com\_foos/View/Foos/HtmlView.php | file
representing the view in the back end | changed |- | 1 |
administrator/components/com\_foos/services/provider.php | the service
provider interface see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- | 6 |
administrator/components/com\_foos/sql/install.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | changed |- | 6 |
administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | unchanged |- | 7 |
administrator/components/com\_foos/forms/foo.xml | the default form in
the back end | changed |- | 7 |
administrator/components/com\_foos/tmpl/foo/edit.php | the default view
in the back end | changed |- | 7 |
administrator/components/com\_foos/tmpl/foo/modal.php | the default view
in the back end | unchanged |- | 1 |
administrator/components/com\_foos/tmpl/foos/default.php | the default
view in the back end | changed |- | 7 |
administrator/components/com\_foos/tmpl/foos/modal.php | the default
view in the back end | unchanged |- | 1 |
administrator/components/com\_foos/foos.xml | this is an XML (manifest)
file that tells Joomla! how to install our component. | changed |- | 1 |
administrator/components/com\_foos/script.php | the installer script |
unchanged |- | 8 |
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini |
the language file | unchanged |- | 8 |
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini
| the language file | unchanged |- | 9 |
administrator/components/com\_foos/config.php | the configuration |
changed |- | 10 | administrator/components/com\_foos/access.xml | the
ACL file for permissen handling | new |- | 2 |
components/com\_foos/Controller/DisplayController.php | this is the
frond end entry point to the Foo component | unchanged |- | 4 |
components/com\_foos/Model/FooModel.php | this is the frond end model
for the Foo component | unchanged |- | 2 |
components/com\_foos/View/Foo/HtmlView.php | file representing the view
in the frond end | unchanged |- | 7 |
components/com\_foos/View/Foos/HtmlView.php | file representing the view
in the frond end | unchanged |- | 2 |
components/com\_foos/tmpl/foo/default.php | the default view in the
frond end | unchanged |- | 3 | components/com\_foos/tmpl/foo/default.xml
| the xml for the menu item | unchanged |- | 8 |
components/com\_foos/language/en-GB/en-GB.com\_foos.ini | the language
file | unchanged |- | 8 |
components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini | the
language file | unchanged |- | 7 |
media/com\_foos/js/admin-foos-modal.js | the javascript file | unchanged
|- |} == Conclusion == You can now accomplish many things with your
component. It is very important, however, to make the component
user-friendly. The next two chapters deal with validation for this
reason. = Adding Server side validation - Part 11a = == Requirements ==
You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev) == File Structure == === Create
administrator/components/com\_foos/Rule/LetterRule.php === The
`administrator/components/com_foos/Rule/LetterRule.php` file is ....
==== Completed administrator/components/com\_foos/Rule/LetterRule.php
file ==== The code for the
`administrator/components/com_foos/Rule/LetterRule.php` file is as
follows:

=== Changing administrator/components/com\_foos/forms/foo.xml === The
`administrator/components/com_foos/forms/foo.xml` file is .... ====
Completed administrator/components/com\_foos/forms/foo.xml file ==== The
code for the `administrator/components/com_foos/forms/foo.xml` file is
as follows:

=== Changing administrator/components/com\_foos/foo.xml === The
`administrator/components/com_foos/foo.xml` file is .... ==== Completed
administrator/components/com\_foos/foo.xml file ==== The code for the
`administrator/components/com_foos/foo.xml` file is as follows:

COM\_FOOS \[DATE\] \[AUTHOR\] \[AUTHOR\_EMAIL\] \[AUTHOR\_URL\]
\[COPYRIGHT\] GNU General Public License version 2 or later; 1.11.0
COM\_FOOS\_XML\_DESCRIPTION Joomla\\Component\\Foos script.php
sql/install.mysql.utf8.sql sql/uninstall.mysql.utf8.sql
sql/updates/mysql Controller Model View tmpl language js

COM\_FOOS

COM\_FOOS

access.xml config.xml foos.xml Controller Extension Model Rule Service
View services tmpl sql language

== Test your component == Now you can zip all files and install them via
Joomla Extension Manager. After that you can == Example in Joomla! == If
you want to save a letter in the name, this is not possible. You will
now see an error message after clicking the Save button
\[\[File:as\_j4\_t\_11a\_1.png|700px\]\] == Component Contents == At
this point in the tutorial, your component should contain the following
files: {| border=1 | 1 |
administrator/components/com\_foos/Controller/DisplayController.php |
this is the administrator entry point to the Foo component | unchanged
|- | 7 | administrator/components/com\_foos/Controller/FooController.php
| this is the entry point to the Foo component | unchanged |- | 1 |
administrator/components/com\_foos/Extension/FoosComponent.php | the
interface BootableExtensionInterface where a component class can load
its internal class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 7 |
administrator/components/com\_foos/Field/FooField.php | the interface
BootableExtensionInterface where a component class can load its internal
class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 7 |
administrator/components/com\_foos/Model/FooModel.php | this is the
model of the Foo component item | unchanged |- | 6 |
administrator/components/com\_foos/Model/FoosModel.php | this is the
model of the Foo component | unchanged |- | 1 |
administrator/components/com\_foos/Service/HTML/AdministratorService.php
| the html service see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- | 7 | administrator/components/com\_foos/Table/FooTable.php
| the database table | unchanged |- | 1 |
administrator/components/com\_foos/View/Foos/HtmlView.php | file
representing the view in the back end | unchanged |- | 1 |
administrator/components/com\_foos/services/provider.php | the service
provider interface see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- | 6 |
administrator/components/com\_foos/sql/install.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | unchanged |- | 6 |
administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | unchanged |- | 7 |
administrator/components/com\_foos/forms/foo.xml | the default form in
the back end | changed |- | 7 |
administrator/components/com\_foos/tmpl/foo/edit.php | the default view
in the back end | unchanged |- | 7 |
administrator/components/com\_foos/tmpl/foo/modal.php | the default view
in the back end | unchanged |- | 1 |
administrator/components/com\_foos/tmpl/foos/default.php | the default
view in the back end | unchanged |- | 7 |
administrator/components/com\_foos/tmpl/foos/modal.php | the default
view in the back end | unchanged |- | 1 |
administrator/components/com\_foos/foos.xml | this is an XML (manifest)
file that tells Joomla! how to install our component. | changed |- | 1 |
administrator/components/com\_foos/script.php | the installer script |
unchanged |- | 8 |
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini |
the language file | unchanged |- | 8 |
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini
| the language file | unchanged |- | 9 |
administrator/components/com\_foos/config.php | the configuration |
unchanged |- | 10 | administrator/components/com\_foos/access.xml | the
ACL file for permissen handling | unchanged |- | 11a |
administrator/components/com\_foos/Rule/LetterRule.php | the server side
validation rule | new |- | 2 |
components/com\_foos/Controller/DisplayController.php | this is the
frond end entry point to the Foo component | unchanged |- | 4 |
components/com\_foos/Model/FooModel.php | this is the frond end model
for the Foo component | unchanged |- | 2 |
components/com\_foos/View/Foo/HtmlView.php | file representing the view
in the frond end | unchanged |- | 7 |
components/com\_foos/View/Foos/HtmlView.php | file representing the view
in the frond end | unchanged |- | 2 |
components/com\_foos/tmpl/foo/default.php | the default view in the
frond end | unchanged |- | 3 | components/com\_foos/tmpl/foo/default.xml
| the xml for the menu item | unchanged |- | 8 |
components/com\_foos/language/en-GB/en-GB.com\_foos.ini | the language
file | unchanged |- | 8 |
components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini | the
language file | unchanged |- | 7 |
media/com\_foos/js/admin-foos-modal.js | the javascript file | unchanged
|- |} == Conclusion == It is no longer possible to save an invalid
value. In large forms, it is not user-friendly to display all errors at
the very end. Therefore, server-side validation is often supplemented
with client-side validation, which checks during input. You can read
more on this topic in the next chapter. = Adding Client side validation
- Part 11b = == Requirements == You need Joomla! 4.x for this tutorial
(as of writing currently Joomla! 4.0.0-alpha11-dev) == File Structure ==
=== Changing administrator/components/com\_foos/foo.xml === The
`administrator/components/com_foos/foo.xml` file is .... ==== Completed
administrator/components/com\_foos/foo.xml file ==== The code for the
`administrator/components/com_foos/foo.xml` file is as follows:

COM\_FOOS \[DATE\] \[AUTHOR\] \[AUTHOR\_EMAIL\] \[AUTHOR\_URL\]
\[COPYRIGHT\] GNU General Public License version 2 or later; 1.11.1
COM\_FOOS\_XML\_DESCRIPTION Joomla\\Component\\Foos script.php
sql/install.mysql.utf8.sql sql/uninstall.mysql.utf8.sql
sql/updates/mysql Controller Model View tmpl language js

COM\_FOOS

COM\_FOOS

access.xml config.xml foos.xml Controller Extension Model Rule Service
View services tmpl sql language

=== Create media/com\_foos/js/admin-foos-letter.js === The
`media/com_foos/js/admin-foos-letter.js` file is .... ==== Completed
media/com\_foos/js/admin-foos-letter.js file ==== The code for the
`media/com_foos/js/admin-foos-letter.js` file is as follows:

document.addEventListener('DOMContentLoaded', function(){ "use strict";
if (document.formvalidator) {
document.formvalidator.setHandler('letter', function (value) { var
returnedValue = false; var regex = /\^(\[a-z\]+)\$/i; if
(regex.test(value)) returnedValue = true; return returnedValue; });
//console.log(document.formvalidator); } });

=== Changing administrator/components/com\_foos/forms/foo.xml === The
`administrator/components/com_foos/forms/foo.xml` file is .... ====
Completed administrator/components/com\_foos/forms/foo.xml file ==== The
code for the `administrator/components/com_foos/forms/foo.xml` file is
as follows:

=== Changing administrator/components/com\_foos/tmpl/foo/edit.php ===
The `administrator/components/com_foos/tmpl/foo/edit.php` file is ....
==== Completed administrator/components/com\_foos/tmpl/foo/edit.php file
==== The code for the
`administrator/components/com_foos/tmpl/foo/edit.php` file is as
follows:

'auto', 'relative' =&gt; true)); \$app = Factory::getApplication();
\$input = \$app-&gt;input; // In case of modal \$isModal =
\$input-&gt;get('layout') == 'modal' ? true : false; \$layout =
\$isModal ? 'modal' : 'edit'; \$tmpl = \$isModal ||
\$input-&gt;get('tmpl', '', 'cmd') === 'component' ? '&tmpl=component' :
''; ?&gt;

getForm()-&gt;renderField('name'); ?&gt;

getForm()-&gt;renderField('access'); ?&gt;

== Test your component == Now you can zip all files and install them via
Joomla Extension Manager. If you now enter a number in the name field,
you will see an error message immediately after leaving the field. For
server-side validation, you only saw the error message after you
submitted the form to the server using the Save button.
\[\[File:as\_j4\_t\_11b\_1.png.png|700px\]\] == Example in Joomla ==
/media/system/js/fields/passwordstrength.js
/administrator/components/com\_users/forms/user.xml == Component
Contents == At this point in the tutorial, your component should contain
the following files: {| border=1 | 1 |
administrator/components/com\_foos/Controller/DisplayController.php |
this is the administrator entry point to the Foo component | unchanged
|- | 7 | administrator/components/com\_foos/Controller/FooController.php
| this is the entry point to the Foo component | unchanged |- | 1 |
administrator/components/com\_foos/Extension/FoosComponent.php | the
interface BootableExtensionInterface where a component class can load
its internal class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 7 |
administrator/components/com\_foos/Field/FooField.php | the interface
BootableExtensionInterface where a component class can load its internal
class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 7 |
administrator/components/com\_foos/Model/FooModel.php | this is the
model of the Foo component item | unchanged |- | 6 |
administrator/components/com\_foos/Model/FoosModel.php | this is the
model of the Foo component | unchanged |- | 1 |
administrator/components/com\_foos/Service/HTML/AdministratorService.php
| the html service see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- | 7 | administrator/components/com\_foos/Table/FooTable.php
| the database table | unchanged |- | 1 |
administrator/components/com\_foos/View/Foos/HtmlView.php | file
representing the view in the back end | unchanged |- | 1 |
administrator/components/com\_foos/services/provider.php | the service
provider interface see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- | 6 |
administrator/components/com\_foos/sql/install.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | unchanged |- | 6 |
administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | unchanged |- | 7 |
administrator/components/com\_foos/forms/foo.xml | the default form in
the back end | unchanged |- | 7 |
administrator/components/com\_foos/tmpl/foo/edit.php | the default view
in the back end | changed |- | 7 |
administrator/components/com\_foos/tmpl/foo/modal.php | the default view
in the back end | unchanged |- | 1 |
administrator/components/com\_foos/tmpl/foos/default.php | the default
view in the back end | unchanged |- | 7 |
administrator/components/com\_foos/tmpl/foos/modal.php | the default
view in the back end | unchanged |- | 1 |
administrator/components/com\_foos/foos.xml | this is an XML (manifest)
file that tells Joomla! how to install our component. | unchanged |- | 1
| administrator/components/com\_foos/script.php | the installer script |
unchanged |- | 8 |
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini |
the language file | unchanged |- | 8 |
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini
| the language file | unchanged |- | 9 |
administrator/components/com\_foos/config.php | the configuration |
unchanged |- | 10 | administrator/components/com\_foos/access.xml | the
ACL file for permissen handling | unchanged |- | 11a |
administrator/components/com\_foos/Rule/LetterRule.php | the server side
validation rule | unchanged |- | 2 |
components/com\_foos/Controller/DisplayController.php | this is the
frond end entry point to the Foo component | unchanged |- | 4 |
components/com\_foos/Model/FooModel.php | this is the frond end model
for the Foo component | unchanged |- | 2 |
components/com\_foos/View/Foo/HtmlView.php | file representing the view
in the frond end | unchanged |- | 7 |
components/com\_foos/View/Foos/HtmlView.php | file representing the view
in the frond end | unchanged |- | 2 |
components/com\_foos/tmpl/foo/default.php | the default view in the
frond end | unchanged |- | 3 | components/com\_foos/tmpl/foo/default.xml
| the xml for the menu item | unchanged |- | 8 |
components/com\_foos/language/en-GB/en-GB.com\_foos.ini | the language
file | unchanged |- | 8 |
components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini | the
language file | unchanged |- | 7 |
media/com\_foos/js/admin-foos-modal.js | the javascript file | unchanged
|- | 11b | media/com\_foos/js/admin-foos-letter.js | the client side
validation rule | new |- |} == Conclusion == You now know the validation
very well. Next, we'll look at how you can create categories and easily
map your items. = Adding categories - Part 12 = == Requirements == You
need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev) == File Structure == === Changing
administrator/components/com\_foos/Model/FoosModel.php === The
`administrator/components/com_foos/Model/FoosModel.php` file is ....
==== Completed administrator/components/com\_foos/Model/FoosModel.php
file ==== The code for the
`administrator/components/com_foos/Model/FoosModel.php` file is as
follows:

getDbo(); \$query = \$db-&gt;getQuery(true); // Select the required
fields from the table. \$query-&gt;select(
\$db-&gt;quoteName(array('a.id', 'a.name', 'a.catid', 'a.access')) );
\$query-&gt;from(\$db-&gt;quoteName('\#\_\_foos\_details', 'a')); //
Join over the asset groups.
\$query-&gt;select(\$db-&gt;quoteName('ag.title', 'access\_level'))
-&gt;join( 'LEFT', \$db-&gt;quoteName('\#\_\_viewlevels', 'ag') . ' ON '
. \$db-&gt;quoteName('ag.id') . ' = ' . \$db-&gt;quoteName('a.access')
); // Join over the categories.
\$query-&gt;select(\$db-&gt;quoteName('c.title', 'category\_title'))
-&gt;join( 'LEFT', \$db-&gt;quoteName('\#\_\_categories', 'c') . ' ON '
. \$db-&gt;quoteName('c.id') . ' = ' . \$db-&gt;quoteName('a.catid') );
return \$query; } }

=== Changing administrator/components/com\_foos/access.xml === The
`administrator/components/com_foos/access.xml` file is .... ====
Completed administrator/components/com\_foos/access.xml file ==== The
code for the `administrator/components/com_foos/access.xml` file is as
follows:

<div class="section" name="component">

</div>

<div class="section" name="category">

</div>

=== Changing administrator/components/com\_foos/foos.xml === The
`administrator/components/com_foos/foos.xml` file is .... ==== Completed
administrator/components/com\_foos/foos.xml file ==== The code for the
`administrator/components/com_foos/foos.xml` file is as follows:

=== Changing administrator/components/com\_foos/forms/foo.xml === The
`administrator/components/com_foos/forms/foo.xml` file is .... ====
Completed administrator/components/com\_foos/forms/foo.xml file ==== The
code for the `administrator/components/com_foos/forms/foo.xml` file is
as follows:

=== Changing administrator/components/com\_foos/sql/update/1.12.0.sql
=== We will implement `state` later. The
`administrator/components/com_foos/sql/update/1.12.0.sql` file is ....
==== Completed administrator/components/com\_foos/sql/update/1.12.0.sql
file ==== The code for the
`administrator/components/com_foos/sql/update/1.12.0.sql` file is as
follows:

ALTER TABLE \`\#\_\_foos\_details\` ADD COLUMN \`catid\` int(11) NOT
NULL DEFAULT 0 AFTER \`alias\`; ALTER TABLE \`\#\_\_foos\_details\` ADD
COLUMN \`state\` tinyint(3) NOT NULL DEFAULT 0 AFTER \`alias\`; ALTER
TABLE \`\#\_\_foos\_details\` ADD KEY \`idx\_catid\` (\`catid\`);

=== Changing
administrator/components/com\_foos/Extension/FoosComponent.php === The
`administrator/components/com_foos/Extension/FoosComponent.php` file is
.... ==== Completed
administrator/components/com\_foos/Extension/FoosComponent.php file ====
The code for the
`administrator/components/com_foos/Extension/FoosComponent.php` file is
as follows:

getRegistry()-&gt;register('foosadministrator', new
AdministratorService); } /\*\* \* Returns the table for the count items
functions for the given section. \* \* @param string \$section The
section \* \* @return string|null \* \* @since 1.0.0 \*/ protected
function getTableNameForSection(string \$section = null) { return
(\$section === 'category' ? 'categories' : 'foos\_details'); } }

=== Changing administrator/components/com\_foos/tmpl/foo/edit.php ===
The `administrator/components/com_foos/tmpl/foo/edit.php` file is ....
==== Completed administrator/components/com\_foos/tmpl/foo/edit.php file
==== The code for the
`administrator/components/com_foos/tmpl/foo/edit.php` file is as
follows:

'auto', 'relative' =&gt; true)); \$app = Factory::getApplication();
\$input = \$app-&gt;input; // In case of modal \$isModal =
\$input-&gt;get('layout') == 'modal' ? true : false; \$layout =
\$isModal ? 'modal' : 'edit'; \$tmpl = \$isModal ||
\$input-&gt;get('tmpl', '', 'cmd') === 'component' ? '&tmpl=component' :
''; ?&gt;

getForm()-&gt;renderField('name'); ?&gt;

getForm()-&gt;renderField('access'); ?&gt;

getForm()-&gt;renderField('catid'); ?&gt;

=== Changing administrator/components/com\_foos/tmpl/foos/default.php
=== The `administrator/components/com_foos/tmpl/foos/default.php` file
is .... ==== Completed
administrator/components/com\_foos/tmpl/foos/default.php file ==== The
code for the `administrator/components/com_foos/tmpl/foos/default.php`
file is as follows:

<div class="row">

<div class="col-md-10">

<div id="j-main-container" class="j-main-container">

items)) : ?&gt;
<div class="alert alert-warning">

</div>

items); foreach (\$this-&gt;items as \$i =&gt; \$item) : ?&gt;
<div>

escape(\$item-&gt;name); ?&gt;

</div>

escape(\$item-&gt;name); ?&gt;
<div class="small">

escape(\$item-&gt;category\_title); ?&gt;

</div>

access\_level; ?&gt;
id; ?&gt;

</div>

</div>

</div>

== Test your component == Now you can zip all files and install them via
Joomla Extension Manager. You have to run a new installation or fix the
database due to the changes in the database. After that you can It would
be good, to set a default categorie while installing your component. You
can do this in the file `script.php` == Example in Joomla! == In the
sidebar you now see another menu item. With this menu item you can
create categories for your extension.
\[\[File:as\_j4\_t\_12b\_1.png|700px\]\] You can select this category
when editing an item. \[\[File:as\_j4\_t\_12b\_2.png|700px\]\] If a
category is assigned, it will be displayed in the overview.
\[\[File:as\_j4\_t\_12b\_3.png|700px\]\] == Component Contents == At
this point in the tutorial, your component should contain the following
files: {| border=1 | 1 |
administrator/components/com\_foos/Controller/DisplayController.php |
this is the administrator entry point to the Foo component | unchanged
|- | 7 | administrator/components/com\_foos/Controller/FooController.php
| this is the entry point to the Foo component | unchanged |- | 1 |
administrator/components/com\_foos/Extension/FoosComponent.php | the
interface BootableExtensionInterface where a component class can load
its internal class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | changed |- | 7 |
administrator/components/com\_foos/Field/FooField.php | the interface
BootableExtensionInterface where a component class can load its internal
class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 7 |
administrator/components/com\_foos/Model/FooModel.php | this is the
model of the Foo component item | unchanged |- | 6 |
administrator/components/com\_foos/Model/FoosModel.php | this is the
model of the Foo component | unchanged |- | 1 |
administrator/components/com\_foos/Service/HTML/AdministratorService.php
| the html service see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- | 7 | administrator/components/com\_foos/Table/FooTable.php
| the database table | unchanged |- | 1 |
administrator/components/com\_foos/View/Foos/HtmlView.php | file
representing the view in the back end | unchanged |- | 1 |
administrator/components/com\_foos/services/provider.php | the service
provider interface see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- | 6 |
administrator/components/com\_foos/sql/install.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | unchanged |- | 6 |
administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | unchanged |- | 7 |
administrator/components/com\_foos/forms/foo.xml | the default form in
the back end | unchanged |- | 7 |
administrator/components/com\_foos/tmpl/foo/edit.php | the default view
in the back end | unchanged |- | 7 |
administrator/components/com\_foos/tmpl/foo/modal.php | the default view
in the back end | unchanged |- | 1 |
administrator/components/com\_foos/tmpl/foos/default.php | the default
view in the back end | unchanged |- | 7 |
administrator/components/com\_foos/tmpl/foos/modal.php | the default
view in the back end | unchanged |- | 1 |
administrator/components/com\_foos/foos.xml | this is an XML (manifest)
file that tells Joomla! how to install our component. | unchanged |- | 1
| administrator/components/com\_foos/script.php | the installer script |
unchanged |- | 8 |
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini |
the language file | unchanged |- | 8 |
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini
| the language file | unchanged |- | 9 |
administrator/components/com\_foos/config.php | the configuration |
unchanged |- | 10 | administrator/components/com\_foos/access.xml | the
ACL file for permissen handling | unchanged |- | 11a |
administrator/components/com\_foos/Rule/LetterRule.php | the server side
validation rule | unchanged |- | 2 |
components/com\_foos/Controller/DisplayController.php | this is the
frond end entry point to the Foo component | unchanged |- | 4 |
components/com\_foos/Model/FooModel.php | this is the frond end model
for the Foo component | unchanged |- | 2 |
components/com\_foos/View/Foo/HtmlView.php | file representing the view
in the frond end | unchanged |- | 7 |
components/com\_foos/View/Foos/HtmlView.php | file representing the view
in the frond end | unchanged |- | 2 |
components/com\_foos/tmpl/foo/default.php | the default view in the
frond end | unchanged |- | 3 | components/com\_foos/tmpl/foo/default.xml
| the xml for the menu item | unchanged |- | 8 |
components/com\_foos/language/en-GB/en-GB.com\_foos.ini | the language
file | unchanged |- | 8 |
components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini | the
language file | unchanged |- | 7 |
media/com\_foos/js/admin-foos-modal.js | the javascript file | unchanged
|- | 11b | media/com\_foos/js/admin-foos-letter.js | the client side
validation rule | unchanged |- |} == Conclusion == You can now classify
the items into categories. Next, we'll look at how to change the state
of an item. = Adding Published/Unpublished - Part 13 = == Requirements
== You need Joomla! 4.x for this tutorial (as of writing currently
Joomla! 4.0.0-alpha11-dev) == File Structure == === Creating
administrator/components/com\_foos/Controller/FoosController.php === The
`administrator/components/com_foos/Controller/FoosController.php` file
is .... ==== Completed
administrator/components/com\_foos/Controller/FoosController.php file
==== The code for the
`administrator/components/com_foos/Controller/FoosController.php` file
is as follows:

true)) { return parent::getModel(\$name, \$prefix, \$config); } }

=== Changing administrator/components/com\_foos/Model/FoosModel.php ===
The `administrator/components/com_foos/Model/FoosModel.php` file is ....
==== Completed administrator/components/com\_foos/Model/FoosModel.php
file ==== The code for the
`administrator/components/com_foos/Model/FoosModel.php` file is as
follows:

getDbo(); \$query = \$db-&gt;getQuery(true); // Select the required
fields from the table. \$query-&gt;select( \$db-&gt;quoteName( explode(
', ', \$this-&gt;getState( 'list.select', 'a.id, a.name, a.catid' . ',
a.access' . ', a.published' . ', a.publish\_up, a.publish\_down' ) ) )
); \$query-&gt;from(\$db-&gt;quoteName('\#\_\_foos\_details', 'a')); //
Join over the asset groups.
\$query-&gt;select(\$db-&gt;quoteName('ag.title', 'access\_level'))
-&gt;join( 'LEFT', \$db-&gt;quoteName('\#\_\_viewlevels', 'ag') . ' ON '
. \$db-&gt;quoteName('ag.id') . ' = ' . \$db-&gt;quoteName('a.access')
); // Join over the categories.
\$query-&gt;select(\$db-&gt;quoteName('c.title', 'category\_title'))
-&gt;join( 'LEFT', \$db-&gt;quoteName('\#\_\_categories', 'c') . ' ON '
. \$db-&gt;quoteName('c.id') . ' = ' . \$db-&gt;quoteName('a.catid') );
return \$query; } }

=== Changing administrator/components/com\_foos/Table/FooTable.php ===
The `administrator/components/com_foos/Table/FooTable.php` file is ....
==== Completed administrator/components/com\_foos/Table/FooTable.php
file ==== The code for the
`administrator/components/com_foos/Table/FooTable.php` file is as
follows:

JPUBLISHED JUNPUBLISHED JARCHIVED JTRASHED

=== Changing
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini
=== The
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.ini`
file translation file. In this part you can learn how to use this with
plural. ==== Completed
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini
file ==== The code for the
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.ini`
file is as follows:

COM\_FOOS="\[PROJECT\_NAME\]" COM\_FOOS\_CONFIGURATION="Foo Options"
COM\_FOOS\_MANAGER\_FOO\_NEW="New" COM\_FOOS\_MANAGER\_FOO\_EDIT="Edit"
COM\_FOOS\_MANAGER\_FOOS="Foo Manager"
COM\_FOOS\_TABLE\_TABLEHEAD\_NAME="Name"
COM\_FOOS\_TABLE\_TABLEHEAD\_ID="ID"
COM\_FOOS\_ERROR\_FOO\_NOT\_FOUND="Foo not found"
COM\_FOOS\_FIELD\_NAME\_LABEL="Name"
COM\_FOOS\_FIELD\_FOO\_SHOW\_CATEGORY\_LABEL="Show name label"
COM\_FOOS\_FIELD\_CONFIG\_INDIVIDUAL\_FOO\_DESC="These settings apply
for all foo." COM\_FOOS\_FIELD\_CONFIG\_INDIVIDUAL\_FOO\_DISPLAY="Foo"
COM\_FOOS\_FIELD\_PUBLISH\_DOWN\_LABEL="Finish Publishing"
COM\_FOOS\_FIELD\_PUBLISH\_UP\_LABEL="Start Publishing"
COM\_FOOS\_N\_ITEMS\_PUBLISHED="%d foos published."
COM\_FOOS\_N\_ITEMS\_PUBLISHED\_1="%d foo published."
COM\_FOOS\_N\_ITEMS\_UNPUBLISHED="%d foos unpublished."
COM\_FOOS\_N\_ITEMS\_UNPUBLISHED\_1="%d foo unpublished."
COM\_FOOS\_FOOS\_FIELD\_PUBLISH\_DOWN\_LABEL="Finish Publishing"
COM\_FOOS\_FOOS\_FIELD\_PUBLISH\_UP\_LABEL="Start Publishing"
COM\_FOOS\_FOOS\_N\_ITEMS\_PUBLISHED="%d foos published."
COM\_FOOS\_FOOS\_N\_ITEMS\_PUBLISHED\_1="%d foo published."
COM\_FOOS\_FOOS\_N\_ITEMS\_UNPUBLISHED="%d foos unpublished."
COM\_FOOS\_FOOS\_N\_ITEMS\_UNPUBLISHED\_1="%d foo unpublished."

=== Create administrator/components/com\_foos/sql/updates/1.13.0.sql ===
The `administrator/components/com_foos/sql/updates/1.13.0.sql` file is
.... ==== Completed
administrator/components/com\_foos/sql/updates/1.13.0.sql file ==== The
code for the `administrator/components/com_foos/sql/updates/1.13.0.sql`
file is as follows:

ALTER TABLE \`\#\_\_foos\_details\` ADD COLUMN \`published\` tinyint(1)
NOT NULL DEFAULT 0 AFTER \`alias\`; ALTER TABLE \`\#\_\_foos\_details\`
ADD COLUMN \`publish\_up\` datetime NOT NULL DEFAULT '0000-00-00
00:00:00' AFTER \`alias\`; ALTER TABLE \`\#\_\_foos\_details\` ADD
COLUMN \`publish\_down\` datetime NOT NULL DEFAULT '0000-00-00 00:00:00'
AFTER \`alias\`; ALTER TABLE \`\#\_\_foos\_details\` ADD KEY
\`idx\_state\` (\`published\`);

=== Changing administrator/components/com\_foos/tmpl/foo/edit.php ===
The `administrator/components/com_foos/tmpl/foo/edit.php` file is ....
==== Completed administrator/components/com\_foos/tmpl/foo/edit.php file
==== The code for the
`administrator/components/com_foos/tmpl/foo/edit.php` file is as
follows:

'auto', 'relative' =&gt; true)); \$app = Factory::getApplication();
\$input = \$app-&gt;input; // In case of modal \$isModal =
\$input-&gt;get('layout') == 'modal' ? true : false; \$layout =
\$isModal ? 'modal' : 'edit'; \$tmpl = \$isModal ||
\$input-&gt;get('tmpl', '', 'cmd') === 'component' ? '&tmpl=component' :
''; ?&gt;

getForm()-&gt;renderField('name'); ?&gt;

getForm()-&gt;renderField('access'); ?&gt;

getForm()-&gt;renderField('published'); ?&gt;

getForm()-&gt;renderField('publish\_up'); ?&gt;

getForm()-&gt;renderField('publish\_down'); ?&gt;

getForm()-&gt;renderField('catid'); ?&gt;

=== Changing administrator/components/com\_foos/tmpl/foos/default.php
=== The `administrator/components/com_foos/tmpl/foos/default.php` file
is .... ==== Completed
administrator/components/com\_foos/tmpl/foos/default.php file ==== The
code for the `administrator/components/com_foos/tmpl/foos/default.php`
file is as follows:

<div class="row">

<div class="col-md-10">

<div id="j-main-container" class="j-main-container">

items)) : ?&gt;
<div class="alert alert-warning">

</div>

items); foreach (\$this-&gt;items as \$i =&gt; \$item) : ?&gt;
id); ?&gt;
<div>

escape(\$item-&gt;name); ?&gt;

</div>

escape(\$item-&gt;name); ?&gt;
<div class="small">

escape(\$item-&gt;category\_title); ?&gt;

</div>

access\_level; ?&gt;
<div class="btn-group">

published, \$i, 'foos.', \$canChange, 'cb', \$item-&gt;publish\_up,
\$item-&gt;publish\_down); ?&gt;

</div>

id; ?&gt;

</div>

</div>

</div>

== Test your component == Now you can zip all files and install them via
Joomla Extension Manager. You have to run a new installation or fix the
database due to the changes in the database. After that you can ==
Example in Joomla! == If you edit an item, you can now also specify the
period to which it should be published.
\[\[File:as\_j4\_t\_13\_1.png|700px\]\] In the overview you can see if
an item is published or not. If you click the symbol the state is
changed. \[\[File:as\_j4\_t\_13\_1.png|700px\]\] In category manager,
the items are now also displayed with the correct state.
\[\[File:as\_j4\_t\_13\_1.png|700px\]\] == Component Contents == At this
point in the tutorial, your component should contain the following
files: {| border=1 | 1 |
administrator/components/com\_foos/Controller/DisplayController.php |
this is the administrator entry point to the Foo component | unchanged
|- | 7 | administrator/components/com\_foos/Controller/FooController.php
| this is the entry point to the Foo component | unchanged |- | 1 |
administrator/components/com\_foos/Extension/FoosComponent.php | the
interface BootableExtensionInterface where a component class can load
its internal class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 7 |
administrator/components/com\_foos/Field/FooField.php | the interface
BootableExtensionInterface where a component class can load its internal
class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 7 |
administrator/components/com\_foos/Model/FooModel.php | this is the
model of the Foo component item | unchanged |- | 6 |
administrator/components/com\_foos/Model/FoosModel.php | this is the
model of the Foo component | unchanged |- | 1 |
administrator/components/com\_foos/Service/HTML/AdministratorService.php
| the html service see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- | 7 | administrator/components/com\_foos/Table/FooTable.php
| the database table | unchanged |- | 1 |
administrator/components/com\_foos/View/Foos/HtmlView.php | file
representing the view in the back end | unchanged |- | 1 |
administrator/components/com\_foos/services/provider.php | the service
provider interface see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- | 6 |
administrator/components/com\_foos/sql/install.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | unchanged |- | 6 |
administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | unchanged |- | 7 |
administrator/components/com\_foos/forms/foo.xml | the default form in
the back end | unchanged |- | 7 |
administrator/components/com\_foos/tmpl/foo/edit.php | the default view
in the back end | unchanged |- | 7 |
administrator/components/com\_foos/tmpl/foo/modal.php | the default view
in the back end | unchanged |- | 1 |
administrator/components/com\_foos/tmpl/foos/default.php | the default
view in the back end | unchanged |- | 7 |
administrator/components/com\_foos/tmpl/foos/modal.php | the default
view in the back end | unchanged |- | 1 |
administrator/components/com\_foos/foos.xml | this is an XML (manifest)
file that tells Joomla! how to install our component. | unchanged |- | 1
| administrator/components/com\_foos/script.php | the installer script |
unchanged |- | 8 |
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini |
the language file | unchanged |- | 8 |
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini
| the language file | unchanged |- | 9 |
administrator/components/com\_foos/config.php | the configuration |
unchanged |- | 10 | administrator/components/com\_foos/access.xml | the
ACL file for permissen handling | unchanged |- | 11a |
administrator/components/com\_foos/Rule/LetterRule.php | the server side
validation rule | unchanged |- | 2 |
components/com\_foos/Controller/DisplayController.php | this is the
frond end entry point to the Foo component | unchanged |- | 4 |
components/com\_foos/Model/FooModel.php | this is the frond end model
for the Foo component | unchanged |- | 2 |
components/com\_foos/View/Foo/HtmlView.php | file representing the view
in the frond end | unchanged |- | 7 |
components/com\_foos/View/Foos/HtmlView.php | file representing the view
in the frond end | unchanged |- | 2 |
components/com\_foos/tmpl/foo/default.php | the default view in the
frond end | unchanged |- | 3 | components/com\_foos/tmpl/foo/default.xml
| the xml for the menu item | unchanged |- | 8 |
components/com\_foos/language/en-GB/en-GB.com\_foos.ini | the language
file | unchanged |- | 8 |
components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini | the
language file | unchanged |- | 7 |
media/com\_foos/js/admin-foos-modal.js | the javascript file | unchanged
|- | 11b | media/com\_foos/js/admin-foos-letter.js | the client side
validation rule | unchanged |- |} == Conclusion == Now you can schedule
the publication of your items. Now we continue with custom fields =
Adding Custom Fields in the backend - Part 14a = == Requirements == You
need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev) == File Structure == === Changing
administrator/components/com\_foos/View/Foos/HtmlView.php === The
`administrator/components/com_foos/View/Foos/HtmlView.php` file is ....
==== Completed administrator/components/com\_foos/View/Foos/HtmlView.php
file ==== The code for the
`administrator/components/com_foos/View/Foos/HtmlView.php` file is as
follows:

items = \$this-&gt;get('Items'); \$this-&gt;addToolbar(); return
parent::display(\$tpl); } /\*\* \* Add the page title and toolbar. \* \*
@return void \* \* @since 1.0 \*/ protected function addToolbar() {
FooHelper::addSubmenu('foos'); \$this-&gt;sidebar =
\\JHtmlSidebar::render(); \$canDo =
ContentHelper::getActions('com\_foos'); // Get the toolbar object
instance \$toolbar = Toolbar::getInstance('toolbar');
ToolbarHelper::title(Text::\_('COM\_FOOS\_MANAGER\_FOOS'), 'address
foo'); if (\$canDo-&gt;get('core.create')) {
\$toolbar-&gt;addNew('foo.add'); } if (\$canDo-&gt;get('core.options'))
{ \$toolbar-&gt;preferences('com\_foos'); }
HTMLHelper::\_('sidebar.setAction', 'index.php?option=com\_foos'); } }

=== Changing administrator/components/com\_foos/access.xml === The
`administrator/components/com_foos/access.xml` file is .... ====
Completed administrator/components/com\_foos/access.xml file ==== The
code for the `administrator/components/com_foos/access.xml` file is as
follows:

<div class="section" name="component">

</div>

<div class="section" name="category">

</div>

<div class="section" name="fieldgroup">

</div>

<div class="section" name="field">

</div>

=== Changing administrator/components/com\_foos/config.xml === The
`administrator/components/com_foos/config.xml` file is .... ====
Completed administrator/components/com\_foos/config.xml file ==== The
code for the `administrator/components/com_foos/config.xml` file is as
follows:

JNO JYES JNO JYES

=== Changing administrator/components/com\_foos/foos.xml === The
`administrator/components/com_foos/foos.xml` file is .... ==== Completed
administrator/components/com\_foos/foos.xml file ==== The code for the
`administrator/components/com_foos/foos.xml` file is as follows:

COM\_FOOS \[DATE\] \[AUTHOR\] \[AUTHOR\_EMAIL\] \[AUTHOR\_URL\]
\[COPYRIGHT\] GNU General Public License version 2 or later; 1.14.0
COM\_FOOS\_XML\_DESCRIPTION Joomla\\Component\\Foos script.php
sql/install.mysql.utf8.sql sql/uninstall.mysql.utf8.sql
sql/updates/mysql Controller Model View tmpl language js

COM\_FOOS

COM\_FOOS

JCATEGORY

access.xml config.xml foos.xml Controller Extension Model Rule Service
View services tmpl sql language

=== Changing
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini
=== The
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.ini`
file is .... ==== Completed
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini
file ==== The code for the
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.ini`
file is as follows:

COM\_FOOS="\[PROJECT\_NAME\]" COM\_FOOS\_CONFIGURATION="Foo Options"
COM\_FOOS\_MANAGER\_FOO\_NEW="New" COM\_FOOS\_MANAGER\_FOO\_EDIT="Edit"
COM\_FOOS\_MANAGER\_FOOS="Foo Manager"
COM\_FOOS\_TABLE\_TABLEHEAD\_NAME="Name"
COM\_FOOS\_TABLE\_TABLEHEAD\_ID="ID"
COM\_FOOS\_ERROR\_FOO\_NOT\_FOUND="Foo not found"
COM\_FOOS\_FIELD\_NAME\_LABEL="Name"
COM\_FOOS\_FIELD\_FOO\_SHOW\_CATEGORY\_LABEL="Show name label"
COM\_FOOS\_FIELD\_CONFIG\_INDIVIDUAL\_FOO\_DESC="These settings apply
for all foo." COM\_FOOS\_FIELD\_CONFIG\_INDIVIDUAL\_FOO\_DISPLAY="Foo"
COM\_FOOS\_FIELD\_PUBLISH\_DOWN\_LABEL="Finish Publishing"
COM\_FOOS\_FIELD\_PUBLISH\_UP\_LABEL="Start Publishing"
COM\_FOOS\_N\_ITEMS\_PUBLISHED="%d foos published."
COM\_FOOS\_N\_ITEMS\_PUBLISHED\_1="%d foo published."
COM\_FOOS\_N\_ITEMS\_UNPUBLISHED="%d foos unpublished."
COM\_FOOS\_N\_ITEMS\_UNPUBLISHED\_1="%d foo unpublished."
COM\_FOOS\_FOOS\_FIELD\_PUBLISH\_DOWN\_LABEL="Finish Publishing"
COM\_FOOS\_FOOS\_FIELD\_PUBLISH\_UP\_LABEL="Start Publishing"
COM\_FOOS\_FOOS\_N\_ITEMS\_PUBLISHED="%d foos published."
COM\_FOOS\_FOOS\_N\_ITEMS\_PUBLISHED\_1="%d foo published."
COM\_FOOS\_FOOS\_N\_ITEMS\_UNPUBLISHED="%d foos unpublished."
COM\_FOOS\_FOOS\_N\_ITEMS\_UNPUBLISHED\_1="%d foo unpublished."
COM\_FOOS\_EDIT\_FOO="Edit Foo" COM\_FOOS\_NEW\_FOO="New Foo"

=== Changing administrator/components/com\_foos/tmpl/foo/edit.php ===
The `administrator/components/com_foos/tmpl/foo/edit.php` file is ....
==== Completed administrator/components/com\_foos/tmpl/foo/edit.php file
==== The code for the
`administrator/components/com_foos/tmpl/foo/edit.php` file is as
follows:

'auto', 'relative' =&gt; true)); \$app = Factory::getApplication();
\$input = \$app-&gt;input; \$this-&gt;useCoreUI = true; // In case of
modal \$isModal = \$input-&gt;get('layout') == 'modal' ? true : false;
\$layout = \$isModal ? 'modal' : 'edit'; \$tmpl = \$isModal ||
\$input-&gt;get('tmpl', '', 'cmd') === 'component' ? '&tmpl=component' :
''; ?&gt;

<div>

'details')); ?&gt;
item-&gt;id) ? Text::\_('COM\_FOOS\_NEW\_FOO') :
Text::\_('COM\_FOOS\_EDIT\_FOO')); ?&gt;
<div class="row">

<div class="col-md-9">

<div class="row">

<div class="col-md-6">

getForm()-&gt;renderField('name'); ?&gt;
getForm()-&gt;renderField('access'); ?&gt;
getForm()-&gt;renderField('published'); ?&gt;
getForm()-&gt;renderField('publish\_up'); ?&gt;
getForm()-&gt;renderField('publish\_down'); ?&gt;
getForm()-&gt;renderField('catid'); ?&gt;

</div>

</div>

</div>

</div>

</div>

=== Changing administrator/components/com\_foos/tmpl/foos/default.php
=== The `administrator/components/com_foos/tmpl/foos/default.php` file
is .... ==== Completed
administrator/components/com\_foos/tmpl/foos/default.php file ==== The
code for the `administrator/components/com_foos/tmpl/foos/default.php`
file is as follows:

<div class="row">

sidebar)) : ?&gt;
<div id="j-sidebar-container" class="col-md-2">

sidebar; ?&gt;

</div>

<div
class="<?php if (!empty($this->sidebar)) {echo 'col-md-10'; } else { echo 'col-md-12'; } ?>">

<div id="j-main-container" class="j-main-container">

items)) : ?&gt;
<div class="alert alert-warning">

</div>

items); foreach (\$this-&gt;items as \$i =&gt; \$item) : ?&gt;
id); ?&gt;
<div>

escape(\$item-&gt;name); ?&gt;

</div>

escape(\$item-&gt;name); ?&gt;
<div class="small">

escape(\$item-&gt;category\_title); ?&gt;

</div>

access\_level; ?&gt;
<div class="btn-group">

published, \$i, 'foos.', \$canChange, 'cb', \$item-&gt;publish\_up,
\$item-&gt;publish\_down); ?&gt;

</div>

id; ?&gt;

</div>

</div>

</div>

=== Creating administrator/components/com\_foos/Helper === The
`administrator/components/com_foos/Helper` file is .... ==== Completed
administrator/components/com\_foos/Helper file ==== The code for the
`administrator/components/com_foos/Helper` file is as follows:

get('custom\_fields\_enable', '1')) { \\JHtmlSidebar::addEntry(
Text::\_('JGLOBAL\_FIELDS'),
'index.php?option=com\_fields&context=com\_foos.foo', \$vName ==
'fields.fields' ); \\JHtmlSidebar::addEntry(
Text::\_('JGLOBAL\_FIELD\_GROUPS'),
'index.php?option=com\_fields&view=groups&context=com\_foos.foo',
\$vName == 'fields.groups' ); } } }

== Test your component == Now you can zip all files and install them via
Joomla Extension Manager. After that you have an option for activating
custom fields in the options of your component.
\[\[File:as\_j4\_t\_14\_1.png|700px\]\] If you activate the option for
custom fields, then you see an submenu in the backend.
\[\[File:as\_j4\_t\_14\_2.png|700px\]\] While editing an foo item, you
see a tab, with all available custom fields for this item.
\[\[File:as\_j4\_t\_14\_3.png|700px\]\] == Example in Joomla! == ==
Component Contents == At this point in the tutorial, your component
should contain the following files: {| border=1 | 1 |
administrator/components/com\_foos/Controller/DisplayController.php |
this is the administrator entry point to the Foo component | unchanged
|- | 7 | administrator/components/com\_foos/Controller/FooController.php
| this is the entry point to the Foo component | unchanged |- | 1 |
administrator/components/com\_foos/Extension/FoosComponent.php | the
interface BootableExtensionInterface where a component class can load
its internal class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 7 |
administrator/components/com\_foos/Field/FooField.php | the interface
BootableExtensionInterface where a component class can load its internal
class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 7 |
administrator/components/com\_foos/Model/FooModel.php | this is the
model of the Foo component item | unchanged |- | 6 |
administrator/components/com\_foos/Model/FoosModel.php | this is the
model of the Foo component | unchanged |- | 1 |
administrator/components/com\_foos/Service/HTML/AdministratorService.php
| the html service see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- | 7 | administrator/components/com\_foos/Table/FooTable.php
| the database table | unchanged |- | 1 |
administrator/components/com\_foos/View/Foos/HtmlView.php | file
representing the view in the back end | unchanged |- | 1 |
administrator/components/com\_foos/services/provider.php | the service
provider interface see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- | 6 |
administrator/components/com\_foos/sql/install.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | unchanged |- | 6 |
administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | unchanged |- | 7 |
administrator/components/com\_foos/forms/foo.xml | the default form in
the back end | unchanged |- | 7 |
administrator/components/com\_foos/tmpl/foo/edit.php | the default view
in the back end | unchanged |- | 7 |
administrator/components/com\_foos/tmpl/foo/modal.php | the default view
in the back end | unchanged |- | 1 |
administrator/components/com\_foos/tmpl/foos/default.php | the default
view in the back end | unchanged |- | 7 |
administrator/components/com\_foos/tmpl/foos/modal.php | the default
view in the back end | unchanged |- | 1 |
administrator/components/com\_foos/foos.xml | this is an XML (manifest)
file that tells Joomla! how to install our component. | unchanged |- | 1
| administrator/components/com\_foos/script.php | the installer script |
unchanged |- | 8 |
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini |
the language file | unchanged |- | 8 |
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini
| the language file | unchanged |- | 9 |
administrator/components/com\_foos/config.php | the configuration |
unchanged |- | 10 | administrator/components/com\_foos/access.xml | the
ACL file for permissen handling | unchanged |- | 14a |
administrator/components/com\_foos/Helper/FooHelper.php | the helper
file | unchanged |- | 11a |
administrator/components/com\_foos/Rule/LetterRule.php | the server side
validation rule | unchanged |- | 2 |
components/com\_foos/Controller/DisplayController.php | this is the
frond end entry point to the Foo component | unchanged |- | 4 |
components/com\_foos/Model/FooModel.php | this is the frond end model
for the Foo component | unchanged |- | 2 |
components/com\_foos/View/Foo/HtmlView.php | file representing the view
in the frond end | unchanged |- | 7 |
components/com\_foos/View/Foos/HtmlView.php | file representing the view
in the frond end | unchanged |- | 2 |
components/com\_foos/tmpl/foo/default.php | the default view in the
frond end | unchanged |- | 3 | components/com\_foos/tmpl/foo/default.xml
| the xml for the menu item | unchanged |- | 8 |
components/com\_foos/language/en-GB/en-GB.com\_foos.ini | the language
file | unchanged |- | 8 |
components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini | the
language file | unchanged |- | 7 |
media/com\_foos/js/admin-foos-modal.js | the javascript file | unchanged
|- | 11b | media/com\_foos/js/admin-foos-letter.js | the client side
validation rule | unchanged |- |} == Conclusion == You never know how to
integrate custom fields in the backend into your component. In the next
chapter, we'll look at how to display the values in the frontend. =
Adding Custom Fields in the frontend - Part 14b = == Requirements == You
need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev) == File Structure == === Changing
administrator/components/com\_foos/foos.xml === The
`administrator/components/com_foos/foos.xml` file is .... ==== Completed
administrator/components/com\_foos/foos.xml file ==== The code for the
`administrator/components/com_foos/foos.xml` file is as follows:

COM\_FOOS \[DATE\] \[AUTHOR\] \[AUTHOR\_EMAIL\] \[AUTHOR\_URL\]
\[COPYRIGHT\] GNU General Public License version 2 or later; 1.14.1
COM\_FOOS\_XML\_DESCRIPTION Joomla\\Component\\Foos script.php
sql/install.mysql.utf8.sql sql/uninstall.mysql.utf8.sql
sql/updates/mysql Controller Model View tmpl language js

COM\_FOOS

COM\_FOOS

JCATEGORY

access.xml config.xml foos.xml Controller Extension Model Rule Service
View services tmpl sql language

=== Changing components/com\_foos/tmpl/foo/default.php === The
`components/com_foos/tmpl/foo/default.php` file is .... ==== Completed
components/com\_foos/tmpl/foo/default.php file ==== The code for the
`components/com_foos/tmpl/foo/default.php` file is as follows:

get('State')-&gt;get('params')-&gt;get('show\_foo\_name\_label')) { echo
Text::\_('COM\_FOOS\_NAME') . \$this-&gt;item-&gt;name; } else { echo
\$this-&gt;item-&gt;name; } echo
\$this-&gt;item-&gt;event-&gt;afterDisplayTitle; echo
\$this-&gt;item-&gt;event-&gt;beforeDisplayContent; echo
\$this-&gt;item-&gt;event-&gt;afterDisplayContent;

=== Changing components/com\_foos/View/Foo/HtmlView.php === The
`components/com_foos/View/Foo/HtmlView.php` file is .... ==== Completed
components/com\_foos/View/Foo/HtmlView.php file ==== The code for the
`components/com_foos/View/Foo/HtmlView.php` file is as follows:

item = \$this-&gt;get('Item');
Factory::getApplication()-&gt;triggerEvent('onContentPrepare', array
('com\_foos.foo', &\$item)); // Store the events for later
\$item-&gt;event = new \\stdClass; \$results =
Factory::getApplication()-&gt;triggerEvent('onContentAfterTitle',
array('com\_foos.foo', &\$item, &\$item-&gt;params));
\$item-&gt;event-&gt;afterDisplayTitle = trim(implode("\\n",
\$results)); \$results =
Factory::getApplication()-&gt;triggerEvent('onContentBeforeDisplay',
array('com\_foos.foo', &\$item, &\$item-&gt;params));
\$item-&gt;event-&gt;beforeDisplayContent = trim(implode("\\n",
\$results)); \$results =
Factory::getApplication()-&gt;triggerEvent('onContentAfterDisplay',
array('com\_foos.foo', &\$item, &\$item-&gt;params));
\$item-&gt;event-&gt;afterDisplayContent = trim(implode("\\n",
\$results)); return parent::display(\$tpl); } }

== Test your component == Now you can zip all files and install them via
Joomla Extension Manager. You can edit the value of a custom field in
the backend. \[\[File:as\_j4\_t\_14b\_1.png|700px\]\] After that you can
show the value for a custom field in the front end.
\[\[File:as\_j4\_t\_14b\_2.png|700px\]\] == Example in Joomla! == ==
Component Contents == At this point in the tutorial, your component
should contain the following files: {| border=1 | 1 |
administrator/components/com\_foos/Controller/DisplayController.php |
this is the administrator entry point to the Foo component | unchanged
|- | 7 | administrator/components/com\_foos/Controller/FooController.php
| this is the entry point to the Foo component | unchanged |- | 1 |
administrator/components/com\_foos/Extension/FoosComponent.php | the
interface BootableExtensionInterface where a component class can load
its internal class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 7 |
administrator/components/com\_foos/Field/FooField.php | the interface
BootableExtensionInterface where a component class can load its internal
class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 7 |
administrator/components/com\_foos/Model/FooModel.php | this is the
model of the Foo component item | unchanged |- | 6 |
administrator/components/com\_foos/Model/FoosModel.php | this is the
model of the Foo component | unchanged |- | 1 |
administrator/components/com\_foos/Service/HTML/AdministratorService.php
| the html service see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- | 7 | administrator/components/com\_foos/Table/FooTable.php
| the database table | unchanged |- | 1 |
administrator/components/com\_foos/View/Foos/HtmlView.php | file
representing the view in the back end | unchanged |- | 1 |
administrator/components/com\_foos/services/provider.php | the service
provider interface see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- | 6 |
administrator/components/com\_foos/sql/install.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | unchanged |- | 6 |
administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | unchanged |- | 7 |
administrator/components/com\_foos/forms/foo.xml | the default form in
the back end | unchanged |- | 7 |
administrator/components/com\_foos/tmpl/foo/edit.php | the default view
in the back end | unchanged |- | 7 |
administrator/components/com\_foos/tmpl/foo/modal.php | the default view
in the back end | unchanged |- | 1 |
administrator/components/com\_foos/tmpl/foos/default.php | the default
view in the back end | unchanged |- | 7 |
administrator/components/com\_foos/tmpl/foos/modal.php | the default
view in the back end | unchanged |- | 1 |
administrator/components/com\_foos/foos.xml | this is an XML (manifest)
file that tells Joomla! how to install our component. | unchanged |- | 1
| administrator/components/com\_foos/script.php | the installer script |
unchanged |- | 8 |
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini |
the language file | unchanged |- | 8 |
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini
| the language file | unchanged |- | 9 |
administrator/components/com\_foos/config.php | the configuration |
unchanged |- | 10 | administrator/components/com\_foos/access.xml | the
ACL file for permissen handling | unchanged |- | 14a |
administrator/components/com\_foos/Helper/FooHelper.php | the helper
file | unchanged |- | 11a |
administrator/components/com\_foos/Rule/LetterRule.php | the server side
validation rule | unchanged |- | 2 |
components/com\_foos/Controller/DisplayController.php | this is the
frond end entry point to the Foo component | unchanged |- | 4 |
components/com\_foos/Model/FooModel.php | this is the frond end model
for the Foo component | unchanged |- | 2 |
components/com\_foos/View/Foo/HtmlView.php | file representing the view
in the frond end | unchanged |- | 7 |
components/com\_foos/View/Foos/HtmlView.php | file representing the view
in the frond end | unchanged |- | 2 |
components/com\_foos/tmpl/foo/default.php | the default view in the
frond end | unchanged |- | 3 | components/com\_foos/tmpl/foo/default.xml
| the xml for the menu item | unchanged |- | 8 |
components/com\_foos/language/en-GB/en-GB.com\_foos.ini | the language
file | unchanged |- | 8 |
components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini | the
language file | unchanged |- | 7 |
media/com\_foos/js/admin-foos-modal.js | the javascript file | unchanged
|- | 11b | media/com\_foos/js/admin-foos-letter.js | the client side
validation rule | unchanged |- |} == Conclusion == Your components can
now fully use custom fields. This is a huge advantage because cusotm
fields make joomla and every component in Joomla user friendly and
customizable. = Adding Associations I - Part 15a = == Requirements ==
You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev). The installation should be multilingual. == File
Structure == === Changing
administrator/components/com\_foos/Extension/FoosComponent.php === The
`administrator/components/com_foos/Extension/FoosComponent.php` file is
.... ==== Completed
administrator/components/com\_foos/Extension/FoosComponent.php file ====
The code for the
`administrator/components/com_foos/Extension/FoosComponent.php` file is
as follows:

getRegistry()-&gt;register('foosadministrator', new
AdministratorService); } /\*\* \* Returns the table for the count items
functions for the given section. \* \* @param string \$section The
section \* \* @return string|null \* \* @since 1.0.0 \*/ protected
function getTableNameForSection(string \$section = null) { return
(\$section === 'category' ? 'categories' : 'foos\_details'); } }

=== Changing administrator/components/com\_foos/Model/FooModel.php ===
The `administrator/components/com_foos/Model/FooModel.php` file is ....
==== Completed administrator/components/com\_foos/Model/FooModel.php
file ==== The code for the
`administrator/components/com_foos/Model/FooModel.php` file is as
follows:

loadForm('com\_foos.foo', 'foo', array('control' =&gt; 'jform',
'load\_data' =&gt; \$loadData)); if (empty(\$form)) { return false; }
return \$form; } /\*\* \* Method to get the data that should be injected
in the form. \* \* @return mixed The data for the form. \* \* @since 1.0
\*/ protected function loadFormData() { \$app =
Factory::getApplication(); \$data = \$this-&gt;getItem();
\$this-&gt;preprocessData('com\_foos.foo', \$data); return \$data; }
/\*\* \* Method to get a single record. \* \* @param integer \$pk The id
of the primary key. \* \* @return mixed Object on success, false on
failure. \* \* @since 1.0 \*/ public function getItem(\$pk = null) {
\$item = parent::getItem(\$pk); // Load associated foo items \$assoc =
Associations::isEnabled(); if (\$assoc) { \$item-&gt;associations =
array(); \$item-&gt;alias = "test"; if (\$item-&gt;id != null) {
\$associations = Associations::getAssociations('com\_foos',
'\#\_\_foos\_details', 'com\_foos.item', \$item-&gt;id, 'id', null);
foreach (\$associations as \$tag =&gt; \$association) {
\$item-&gt;associations\[\$tag\] = \$association-&gt;id; } } } return
\$item; } /\*\* \* Preprocess the form. \* \* @param \\JForm \$form Form
object. \* @param object \$data Data object. \* @param string \$group
Group name. \* \* @return void \* \* @since 1.0 \*/ protected function
preprocessForm(\\JForm \$form, \$data, \$group = 'content') { //
Association contact items if (Associations::isEnabled()) { \$languages =
LanguageHelper::getContentLanguages(false, true, null, 'ordering',
'asc'); if (count(\$languages) &gt; 1) { \$addform = new
\\SimpleXMLElement('

'); \$fields = \$addform-&gt;addChild('fields');
\$fields-&gt;addAttribute('name', 'associations'); \$fieldset =
\$fields-&gt;addChild('fieldset'); \$fieldset-&gt;addAttribute('name',
'item\_associations'); foreach (\$languages as \$language) { \$field =
\$fieldset-&gt;addChild('field'); \$field-&gt;addAttribute('name',
\$language-&gt;lang\_code); \$field-&gt;addAttribute('type',
'modal\_foo'); \$field-&gt;addAttribute('language',
\$language-&gt;lang\_code); \$field-&gt;addAttribute('label',
\$language-&gt;title); \$field-&gt;addAttribute('translate\_label',
'false'); \$field-&gt;addAttribute('select', 'true');
\$field-&gt;addAttribute('new', 'true');
\$field-&gt;addAttribute('edit', 'true');
\$field-&gt;addAttribute('clear', 'true'); } \$form-&gt;load(\$addform,
false); } } parent::preprocessForm(\$form, \$data, \$group); } }

=== Changing administrator/components/com\_foos/Model/FoosModel.php ===
The `administrator/components/com_foos/Model/FoosModel.php` file is ....
==== Completed administrator/components/com\_foos/Model/FoosModel.php
file ==== The code for the
`administrator/components/com_foos/Model/FooModel.php` file is as
follows:

getDbo(); \$query = \$db-&gt;getQuery(true); // Select the required
fields from the table. \$query-&gt;select(
\$db-&gt;quoteName(array('a.id', 'a.name', 'a.catid', 'a.access',
'a.published', 'a.publish\_up', 'a.publish\_down', 'a.language')) ); //
Select the required fields from the table. \$query-&gt;select(
\$db-&gt;quoteName( explode( ', ', \$this-&gt;getState( 'list.select',
'a.id, a.name, a.catid' . ', a.access' . ', a.language' . ',
a.published' . ', a.publish\_up, a.publish\_down' ) ) ) );
\$query-&gt;from(\$db-&gt;quoteName('\#\_\_foos\_details', 'a')); //
Join over the asset groups.
\$query-&gt;select(\$db-&gt;quoteName('ag.title', 'access\_level'))
-&gt;join( 'LEFT', \$db-&gt;quoteName('\#\_\_viewlevels', 'ag') . ' ON '
. \$db-&gt;quoteName('ag.id') . ' = ' . \$db-&gt;quoteName('a.access')
); // Join over the categories.
\$query-&gt;select(\$db-&gt;quoteName('c.title', 'category\_title'))
-&gt;join( 'LEFT', \$db-&gt;quoteName('\#\_\_categories', 'c') . ' ON '
. \$db-&gt;quoteName('c.id') . ' = ' . \$db-&gt;quoteName('a.catid') );
// Join over the language
\$query-&gt;select(\$db-&gt;quoteName('l.title', 'language\_title'))
-&gt;select(\$db-&gt;quoteName('l.image', 'language\_image')) -&gt;join(
'LEFT', \$db-&gt;quoteName('\#\_\_languages', 'l') . ' ON ' .
\$db-&gt;quoteName('l.lang\_code') . ' = ' .
\$db-&gt;quoteName('a.language') ); // Join over the associations.
\$assoc = Associations::isEnabled(); if (\$assoc) {
\$query-&gt;select('COUNT(' . \$db-&gt;quoteName('asso2.id') . ') &gt; 1
as ' . \$db-&gt;quoteName('association')) -&gt;join( 'LEFT',
\$db-&gt;quoteName('\#\_\_associations', 'asso') . ' ON ' .
\$db-&gt;quoteName('asso.id') . ' = ' . \$db-&gt;quoteName('a.id') . '
AND ' . \$db-&gt;quoteName('asso.context') . ' = ' .
\$db-&gt;quote('com\_foos.item') ) -&gt;join( 'LEFT',
\$db-&gt;quoteName('\#\_\_associations', 'asso2') . ' ON ' .
\$db-&gt;quoteName('asso2.key') . ' = ' . \$db-&gt;quoteName('asso.key')
) -&gt;group( \$db-&gt;quoteName( array( 'a.id', 'a.name', 'a.catid',
'a.published', 'a.access', 'a.language', 'a.publish\_up',
'a.publish\_down', 'l.title' , 'l.image' , 'ag.title' , 'c.title' ) ) );
} return \$query; } }

=== Changing
administrator/components/com\_foos/Service/HTML/AdministratorService.php
=== The
`administrator/components/com_foos/Service/HTML/AdministratorService.php`
file is .... ==== Completed
administrator/components/com\_foos/Service/HTML/AdministratorService.php
file ==== The code for the
`administrator/components/com_foos/Service/HTML/AdministratorService.php`
file is as follows:

\$associated) { \$associations\[\$tag\] = (int) \$associated-&gt;id; }
// Get the associated foo items \$db = Factory::getDbo(); \$query =
\$db-&gt;getQuery(true) -&gt;select('c.id, c.name as title')
-&gt;select('l.sef as lang\_sef, lang\_code')
-&gt;from('\#\_\_foos\_details as c') -&gt;select('cat.title as
category\_title') -&gt;join('LEFT', '\#\_\_categories as cat ON
cat.id=c.catid') -&gt;where('c.id IN (' . implode(',',
array\_values(\$associations)) . ')') -&gt;where('c.id != ' . \$fooid)
-&gt;join('LEFT', '\#\_\_languages as l ON c.language=l.lang\_code')
-&gt;select('l.image') -&gt;select('l.title as language\_title');
\$db-&gt;setQuery(\$query); try { \$items =
\$db-&gt;loadObjectList('id'); } catch (\\RuntimeException \$e) { throw
new \\Exception(\$e-&gt;getMessage(), 500, \$e); } if (\$items) {
foreach (\$items as &\$item) { \$text =
strtoupper(\$item-&gt;lang\_sef); \$url =
Route::\_('index.php?option=com\_foos&task=foo.edit&id=' . (int)
\$item-&gt;id); \$tooltip = htmlspecialchars(\$item-&gt;title,
ENT\_QUOTES, 'UTF-8') . '\
' . Text::sprintf('JCATEGORY\_SPRINTF', \$item-&gt;category\_title);
\$classes = 'hasPopover badge badge-secondary'; \$item-&gt;link = '[' .
\$text . ']('%20.%20$url%20.%20' "' . $item->language_title . '"){.' ..
.$classes .. .'}'; } } HTMLHelper::\_('bootstrap.popover'); \$html =
LayoutHelper::render('joomla.content.associations', \$items); } return
\$html; } }

=== Changing administrator/components/com\_foos/foos.xml === The
`administrator/components/com_foos/foos.xml` file is .... ==== Completed
administrator/components/com\_foos/foos.xml file ==== The code for the
`administrator/components/com_foos/foos.xml` file is as follows:

COM\_FOOS \[DATE\] \[AUTHOR\] \[AUTHOR\_EMAIL\] \[AUTHOR\_URL\]
\[COPYRIGHT\] GNU General Public License version 2 or later; 1.15.0
COM\_FOOS\_XML\_DESCRIPTION Joomla\\Component\\Foos script.php
sql/install.mysql.utf8.sql sql/uninstall.mysql.utf8.sql
sql/updates/mysql Controller Model View tmpl language js

COM\_FOOS

COM\_FOOS

JCATEGORY

access.xml config.xml foos.xml Controller Extension Model Rule Service
View services tmpl sql language

=== Changing administrator/components/com\_foos/forms/foo.xml === The
`administrator/components/com_foos/forms/foo.xml` file is .... ====
Completed administrator/components/com\_foos/forms/foo.xml file ==== The
code for the `administrator/components/com_foos/forms/foo.xml` file is
as follows:

JALL JPUBLISHED JUNPUBLISHED JARCHIVED JTRASHED

=== Changing
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini
=== The
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.ini`
file is .... ==== Completed
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini
file ==== The code for the
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.ini`
file is as follows:

COM\_FOOS="\[PROJECT\_NAME\]" COM\_FOOS\_CONFIGURATION="Foo Options"
COM\_FOOS\_MANAGER\_FOO\_NEW="New" COM\_FOOS\_MANAGER\_FOO\_EDIT="Edit"
COM\_FOOS\_MANAGER\_FOOS="Foo Manager"
COM\_FOOS\_TABLE\_TABLEHEAD\_NAME="Name"
COM\_FOOS\_TABLE\_TABLEHEAD\_ID="ID"
COM\_FOOS\_ERROR\_FOO\_NOT\_FOUND="Foo not found"
COM\_FOOS\_FIELD\_NAME\_LABEL="Name"
COM\_FOOS\_FIELD\_FOO\_SHOW\_CATEGORY\_LABEL="Show name label"
COM\_FOOS\_FIELD\_CONFIG\_INDIVIDUAL\_FOO\_DESC="These settings apply
for all foo." COM\_FOOS\_FIELD\_CONFIG\_INDIVIDUAL\_FOO\_DISPLAY="Foo"
COM\_FOOS\_FIELD\_PUBLISH\_DOWN\_LABEL="Finish Publishing"
COM\_FOOS\_FIELD\_PUBLISH\_UP\_LABEL="Start Publishing"
COM\_FOOS\_N\_ITEMS\_PUBLISHED="%d foos published."
COM\_FOOS\_N\_ITEMS\_PUBLISHED\_1="%d foo published."
COM\_FOOS\_N\_ITEMS\_UNPUBLISHED="%d foos unpublished."
COM\_FOOS\_N\_ITEMS\_UNPUBLISHED\_1="%d foo unpublished."
COM\_FOOS\_FOOS\_FIELD\_PUBLISH\_DOWN\_LABEL="Finish Publishing"
COM\_FOOS\_FOOS\_FIELD\_PUBLISH\_UP\_LABEL="Start Publishing"
COM\_FOOS\_FOOS\_N\_ITEMS\_PUBLISHED="%d foos published."
COM\_FOOS\_FOOS\_N\_ITEMS\_PUBLISHED\_1="%d foo published."
COM\_FOOS\_FOOS\_N\_ITEMS\_UNPUBLISHED="%d foos unpublished."
COM\_FOOS\_FOOS\_N\_ITEMS\_UNPUBLISHED\_1="%d foo unpublished."
COM\_FOOS\_EDIT\_FOO="Edit Foo" COM\_FOOS\_NEW\_FOO="New Foo"
COM\_FOOS\_HEADING\_ASSOCIATION="Association"
COM\_FOOS\_CHANGE\_FOO="Change a foo" COM\_FOOS\_SELECT\_A\_FOO="Select
a foo"

=== Changing administrator/components/com\_foos/services/provider.php
=== The `administrator/components/com_foos/services/provider.php` file
is .... ==== Completed
administrator/components/com\_foos/services/provider.php file ==== The
code for the `administrator/components/com_foos/services/provider.php`
file is as follows:

set(AssociationExtensionInterface::class, new AssociationsHelper);
\$container-&gt;registerServiceProvider(new
CategoryFactory('\\\\Joomla\\\\Component\\\\Foos'));
\$container-&gt;registerServiceProvider(new
MVCFactory('\\\\Joomla\\\\Component\\\\Foos'));
\$container-&gt;registerServiceProvider(new
ComponentDispatcherFactory('\\\\Joomla\\\\Component\\\\Foos'));
\$container-&gt;set( ComponentInterface::class, function (Container
\$container) { \$component = new
FoosComponent(\$container-&gt;get(ComponentDispatcherFactoryInterface::class));
\$component-&gt;setRegistry(\$container-&gt;get(Registry::class));
\$component-&gt;setMVCFactory(\$container-&gt;get(MVCFactoryInterface::class));
\$component-&gt;setCategoryFactory(\$container-&gt;get(CategoryFactoryInterface::class));
\$component-&gt;setAssociationExtension(\$container-&gt;get(AssociationExtensionInterface::class));
return \$component; } ); } };

=== Changing administrator/components/com\_foos/tmpl/foo/edit.php ===
The `administrator/components/com_foos/tmpl/foo/edit.php` file is ....
==== Completed administrator/components/com\_foos/tmpl/foo/edit.php file
==== The code for the
`administrator/components/com_foos/tmpl/foo/edit.php` file is as
follows:

'auto', 'relative' =&gt; true)); \$app = Factory::getApplication();
\$input = \$app-&gt;input; \$assoc = Associations::isEnabled();
\$this-&gt;ignore\_fieldsets = array('item\_associations');
\$this-&gt;useCoreUI = true; // In case of modal \$isModal =
\$input-&gt;get('layout') == 'modal' ? true : false; \$layout =
\$isModal ? 'modal' : 'edit'; \$tmpl = \$isModal ||
\$input-&gt;get('tmpl', '', 'cmd') === 'component' ? '&tmpl=component' :
''; ?&gt;

<div>

'details')); ?&gt;
item-&gt;id) ? Text::\_('COM\_FOOS\_NEW\_FOO') :
Text::\_('COM\_FOOS\_EDIT\_FOO')); ?&gt;
<div class="row">

<div class="col-md-9">

<div class="row">

<div class="col-md-6">

getForm()-&gt;renderField('name'); ?&gt;
getForm()-&gt;renderField('access'); ?&gt;
getForm()-&gt;renderField('published'); ?&gt;
getForm()-&gt;renderField('publish\_up'); ?&gt;
getForm()-&gt;renderField('publish\_down'); ?&gt;
getForm()-&gt;renderField('catid'); ?&gt;
getForm()-&gt;renderField('language'); ?&gt;

</div>

</div>

</div>

</div>

loadTemplate('associations'); ?&gt;
<div class="hidden">

loadTemplate('associations'); ?&gt;

</div>

</div>

=== Changing administrator/components/com\_foos/tmpl/foos/default.php
=== The `administrator/components/com_foos/tmpl/foos/default.php` file
is .... ==== Completed
administrator/components/com\_foos/tmpl/foos/default.php file ==== The
code for the `administrator/components/com_foos/tmpl/foos/default.php`
file is as follows:

<div class="row">

sidebar)) : ?&gt;
<div id="j-sidebar-container" class="col-md-2">

sidebar; ?&gt;

</div>

<div
class="<?php if (!empty($this->sidebar)) {echo 'col-md-10'; } else { echo 'col-md-12'; } ?>">

<div id="j-main-container" class="j-main-container">

items)) : ?&gt;
<div class="alert alert-warning">

</div>

items); foreach (\$this-&gt;items as \$i =&gt; \$item) : ?&gt;
id); ?&gt;
<div>

escape(\$item-&gt;name); ?&gt;

</div>

escape(\$item-&gt;name); ?&gt;
<div class="small">

escape(\$item-&gt;category\_title); ?&gt;

</div>

access\_level; ?&gt;
association) : ?&gt;
id); ?&gt;
<div class="btn-group">

published, \$i, 'foos.', \$canChange, 'cb', \$item-&gt;publish\_up,
\$item-&gt;publish\_down); ?&gt;

</div>

id; ?&gt;

</div>

</div>

</div>

=== Creating
administrator/components/com\_foos/Helper/AssociationsHelper.php === The
`administrator/components/com_foos/Helper/AssociationsHelper.php` file
is .... ==== Completed
administrator/components/com\_foos/Helper/AssociationsHelper.php file
==== The code for the
`administrator/components/com_foos/Helper/AssociationsHelper.php` file
is as follows:

=== Creating
administrator/components/com\_foos/sql/updates/mysql/1.15.0.sql === The
`administrator/components/com_foos/sql/updates/mysql/1.15.0.sql` file is
.... ==== Completed
administrator/components/com\_foos/sql/updates/mysql/1.15.0.sql file
==== The code for the
`administrator/components/com_foos/sql/updates/mysql/1.15.0.sql` file is
as follows:

ALTER TABLE \`\#\_\_foos\_details\` ADD COLUMN \`language\` char(7) NOT
NULL DEFAULT '\*' AFTER \`alias\`; ALTER TABLE \`\#\_\_foos\_details\`
ADD KEY \`idx\_language\` (\`language\`);

=== Creating
administrator/components/com\_foos/tmpl/foo/edit\_associations.php ===
The `administrator/components/com_foos/tmpl/foo/edit_associations.php`
file is .... ==== Completed
administrator/components/com\_foos/tmpl/foo/edit\_associations.php file
==== The code for the
`administrator/components/com_foos/tmpl/foo/edit_associations.php` file
is as follows:

getType(\$typeName); \$context = \$this-&gt;extension . '.item';
\$catidField = 'catid'; if (\$typeName === 'category') { \$context =
'com\_categories.item'; \$catidField = ''; } // Get the associations.
\$associations = Associations::getAssociations( \$this-&gt;extension,
\$type\['tables'\]\['a'\], \$context, \$id, 'id', 'alias', \$catidField
); return \$associations; } /\*\* \* Get item information \* \* @param
string \$typeName The item type \* @param int \$id The id of item for
which we need the associated items \* \* @return Table|null \* \* @since
3.7.0 \*/ public function getItem(\$typeName, \$id) { if (empty(\$id)) {
return null; } \$table = null; switch (\$typeName) { case 'foo': \$table
= Table::getInstance('FooTable',
'Joomla\\\\Component\\\\Foos\\\\Administrator\\\\Table\\\\'); break;
case 'category': \$table = Table::getInstance('Category'); break; } if
(empty(\$table)) { return null; } \$table-&gt;load(\$id); return
\$table; } /\*\* \* Get information about the type \* \* @param string
\$typeName The item type \* \* @return array Array of item types \* \*
@since 3.7.0 \*/ public function getType(\$typeName = '') { \$fields =
\$this-&gt;getFieldsTemplate(); \$tables = array(); \$joins = array();
\$support = \$this-&gt;getSupportTemplate(); \$title = ''; if
(in\_array(\$typeName, \$this-&gt;itemTypes)) { switch (\$typeName) {
case 'foo': \$fields\['title'\] = 'a.name'; \$fields\['state'\] =
'a.published'; \$support\['state'\] = true; \$support\['acl'\] = true;
\$support\['category'\] = true; \$support\['save2copy'\] = true;
\$tables = array( 'a' =&gt; '\#\_\_foos\_details' ); \$title = 'foo';
break; case 'category': \$fields\['created\_user\_id'\] =
'a.created\_user\_id'; \$fields\['ordering'\] = 'a.lft';
\$fields\['level'\] = 'a.level'; \$fields\['catid'\] = '';
\$fields\['state'\] = 'a.published'; \$support\['state'\] = true;
\$support\['acl'\] = true; \$support\['checkout'\] = true;
\$support\['level'\] = true; \$tables = array( 'a' =&gt;
'\#\_\_categories' ); \$title = 'category'; break; } } return array(
'fields' =&gt; \$fields, 'support' =&gt; \$support, 'tables' =&gt;
\$tables, 'joins' =&gt; \$joins, 'title' =&gt; \$title ); } }

== Test your component == Now you can zip all files and install them via
Joomla Extension Manager. It is also important that you have more than
one language installed and that the System - Language Filter plugin is
enabled. Furthermore, it is necessary that you create a content
language. \[\[File:as\_j4\_t\_15a\_1.png|700px\]\] You have to run a new
installation or fix the database due to the changes in the database.
\[\[File:as\_j4\_t\_15a\_2.png|700px\]\] After that you see a new tab
with the name associations. Here you can select an association.
\[\[File:as\_j4\_t\_15a\_3.png|700px\]\]
\[\[File:as\_j4\_t\_15a\_4.png|700px\]\] At the moment all items are
offered. Even those who are in the same language. It would be ideal if
only the items are offered, which also match the linked language. We
will do that later. In the default view of com\_foo you can see a column
where the associations are shown.
\[\[File:as\_j4\_t\_15a\_5.png|700px\]\] And you can translate the items
with the help of the component Multilingual Assocciations.
\[\[File:as\_j4\_t\_15a\_6.png|700px\]\] == Example in Joomla! == ==
Component Contents == At this point in the tutorial, your component
should contain the following files: {| border=1 | 1 |
administrator/components/com\_foos/Controller/DisplayController.php |
this is the administrator entry point to the Foo component | unchanged
|- | 7 | administrator/components/com\_foos/Controller/FooController.php
| this is the entry point to the Foo component | unchanged |- | 1 |
administrator/components/com\_foos/Extension/FoosComponent.php | the
interface BootableExtensionInterface where a component class can load
its internal class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 7 |
administrator/components/com\_foos/Field/FooField.php | the interface
BootableExtensionInterface where a component class can load its internal
class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 7 |
administrator/components/com\_foos/Model/FooModel.php | this is the
model of the Foo component item | unchanged |- | 6 |
administrator/components/com\_foos/Model/FoosModel.php | this is the
model of the Foo component | unchanged |- | 1 |
administrator/components/com\_foos/Service/HTML/AdministratorService.php
| the html service see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- | 7 | administrator/components/com\_foos/Table/FooTable.php
| the database table | unchanged |- | 1 |
administrator/components/com\_foos/View/Foos/HtmlView.php | file
representing the view in the back end | unchanged |- | 1 |
administrator/components/com\_foos/services/provider.php | the service
provider interface see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- | 6 |
administrator/components/com\_foos/sql/install.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | unchanged |- | 6 |
administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | unchanged |- | 7 |
administrator/components/com\_foos/forms/foo.xml | the default form in
the back end | unchanged |- | 7 |
administrator/components/com\_foos/tmpl/foo/edit.php | the default view
in the back end | unchanged |- | 7 |
administrator/components/com\_foos/tmpl/foo/modal.php | the default view
in the back end | unchanged |- | 1 |
administrator/components/com\_foos/tmpl/foos/default.php | the default
view in the back end | unchanged |- | 7 |
administrator/components/com\_foos/tmpl/foos/modal.php | the default
view in the back end | unchanged |- | 1 |
administrator/components/com\_foos/foos.xml | this is an XML (manifest)
file that tells Joomla! how to install our component. | unchanged |- | 1
| administrator/components/com\_foos/script.php | the installer script |
unchanged |- | 8 |
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini |
the language file | unchanged |- | 8 |
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini
| the language file | unchanged |- | 9 |
administrator/components/com\_foos/config.php | the configuration |
unchanged |- | 10 | administrator/components/com\_foos/access.xml | the
ACL file for permissen handling | unchanged |- | 14a |
administrator/components/com\_foos/Helper/FooHelper.php | the helper
file | unchanged |- | 11a |
administrator/components/com\_foos/Rule/LetterRule.php | the server side
validation rule | unchanged |- | 15 |
administrator/components/com\_foos/Helper/AssociationsHelper.php | the
helper file for associations | new |- | 15 |
administrator/components/com\_foos/tmpl/foo/edit\_associations.ph | the
template for editing associations | new |- | 2 |
components/com\_foos/Controller/DisplayController.php | this is the
frond end entry point to the Foo component | unchanged |- | 4 |
components/com\_foos/Model/FooModel.php | this is the frond end model
for the Foo component | unchanged |- | 2 |
components/com\_foos/View/Foo/HtmlView.php | file representing the view
in the frond end | unchanged |- | 7 |
components/com\_foos/View/Foos/HtmlView.php | file representing the view
in the frond end | unchanged |- | 2 |
components/com\_foos/tmpl/foo/default.php | the default view in the
frond end | unchanged |- | 3 | components/com\_foos/tmpl/foo/default.xml
| the xml for the menu item | unchanged |- | 8 |
components/com\_foos/language/en-GB/en-GB.com\_foos.ini | the language
file | unchanged |- | 8 |
components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini | the
language file | unchanged |- | 7 |
media/com\_foos/js/admin-foos-modal.js | the javascript file | unchanged
|- | 11b | media/com\_foos/js/admin-foos-letter.js | the client side
validation rule | unchanged |- |} == Conclusion == Your component is now
fit for Multilingual Website. You support the Joomla own functions. In
the next chapter we will make this even more user-friendly. = Adding
Associations II - Part 15b = == Requirements == You need Joomla! 4.x for
this tutorial (as of writing currently Joomla! 4.0.0-alpha11-dev) ==
File Structure == === Changing
administrator/components/com\_foos/Field/Modal/FooField.php === The
`administrator/components/com_foos/Field/Modal/FooField.php` file is
.... ==== Completed
administrator/components/com\_foos/Field/Modal/FooField.php file ====
The code for the
`administrator/components/com_foos/Field/Modal/FooField.php` file is as
follows:

element\['clear'\] != 'false'); \$allowSelect = ((string)
\$this-&gt;element\['select'\] != 'false'); // The active foo id field.
\$value = (int) \$this-&gt;value &gt; 0 ? (int) \$this-&gt;value : '';
// Create the modal id. \$modalId = 'Foo\_' . \$this-&gt;id; // Add the
modal field script to the document head. HTMLHelper::\_('script',
'system/fields/modal-fields.min.js', array('version' =&gt; 'auto',
'relative' =&gt; true)); // Script to proxy the select modal function to
the modal-fields.js file. if (\$allowSelect) { static \$scriptSelect =
null; if (is\_null(\$scriptSelect)) { \$scriptSelect = array(); } if
(!isset(\$scriptSelect\[\$this-&gt;id\])) {
Factory::getDocument()-&gt;addScriptDeclaration(" function jSelectFoo\_"
. \$this-&gt;id . "(id, title, object) {
window.processModalSelect('Foo', '" . \$this-&gt;id . "', id, title, '',
object); } " ); \$scriptSelect\[\$this-&gt;id\] = true; } } // Setup
variables for display. \$linkFoos =
'index.php?option=com\_foos&view=foos&layout=modal&tmpl=component&' .
Session::getFormToken() . '=1'; \$linkFoo =
'index.php?option=com\_foos&view=foo&layout=modal&tmpl=component&' .
Session::getFormToken() . '=1'; \$modalTitle =
Text::\_('COM\_FOOS\_CHANGE\_FOO'); if
(isset(\$this-&gt;element\['language'\])) { \$linkFoos .=
'&forcedLanguage=' . \$this-&gt;element\['language'\]; \$linkFoo .=
'&forcedLanguage=' . \$this-&gt;element\['language'\]; \$modalTitle .= '
— ' . \$this-&gt;element\['label'\]; } \$urlSelect = \$linkFoos .
'&function=jSelectFoo\_' . \$this-&gt;id; if (\$value) { \$db =
Factory::getDbo(); \$query = \$db-&gt;getQuery(true)
-&gt;select(\$db-&gt;quoteName('name'))
-&gt;from(\$db-&gt;quoteName('\#\_\_foos\_details'))
-&gt;where(\$db-&gt;quoteName('id') . ' = ' . (int) \$value);
\$db-&gt;setQuery(\$query); try { \$title = \$db-&gt;loadResult(); }
catch (\\RuntimeException \$e) {
Factory::getApplication()-&gt;enqueueMessage(\$e-&gt;getMessage(),
'error'); } } \$title = empty(\$title) ?
Text::\_('COM\_FOOS\_SELECT\_A\_FOO') : htmlspecialchars(\$title,
ENT\_QUOTES, 'UTF-8'); // The current foo display field. \$html = ''; if
(\$allowSelect || \$allowNew || \$allowEdit || \$allowClear) { \$html .=
''; } \$html .= ''; if (\$allowSelect || \$allowNew || \$allowEdit ||
\$allowClear) { \$html .= ''; } // Select foo button if (\$allowSelect)
{ \$html .= '' . '[]{.icon-file aria-hidden="true"} ' .
Text::\_('JSELECT') . '

'; } // Clear foo button if (\$allowClear) { \$html .= '' .
'[]{.icon-remove aria-hidden="true"}' . Text::\_('JCLEAR') . '

'; } if (\$allowSelect || \$allowNew || \$allowEdit || \$allowClear) {
\$html .= ''; } // Select foo modal if (\$allowSelect) { \$html .=
HTMLHelper::\_( 'bootstrap.renderModal', 'ModalSelect' . \$modalId,
array( 'title' =&gt; \$modalTitle, 'url' =&gt; \$urlSelect, 'height'
=&gt; '400px', 'width' =&gt; '800px', 'bodyHeight' =&gt; 70,
'modalWidth' =&gt; 80, 'footer' =&gt; '[' .
Text::\_('JLIB\_HTML\_BEHAVIOR\_CLOSE') . ']{.btn .btn-secondary}', ) );
} // Note: class='required' for client side validation. \$class =
\$this-&gt;required ? ' class="required modal-value"' : ''; \$html .=
''; return \$html; } /\*\* \* Method to get the field label markup. \*
\* @return string The field label markup. \* \* @since 1.0 \*/ protected
function getLabel() { return str\_replace(\$this-&gt;id, \$this-&gt;id .
'\_name', parent::getLabel()); } }

=== Changing administrator/components/com\_foos/Model/FoosModel.php ===
The `administrator/components/com_foos/Model/FoosModel.php` file is ....
==== Completed administrator/components/com\_foos/Model/FoosModel.php
file ==== The code for the
`administrator/components/com_foos/Model/FoosModel.php` file is as
follows:

getDbo(); \$query = \$db-&gt;getQuery(true); // Select the required
fields from the table. \$query-&gt;select(
\$db-&gt;quoteName(array('a.id', 'a.name', 'a.catid', 'a.access',
'a.published', 'a.publish\_up', 'a.publish\_down', 'a.language')) ); //
Select the required fields from the table. \$query-&gt;select(
\$this-&gt;getState( 'list.select', 'a.id AS id,' . 'a.name AS name,' .
'a.access,' . 'a.language,' . 'a.state AS state,' . 'a.catid AS catid,'
. 'a.published AS published,' . 'a.publish\_up,' . 'a.publish\_down' )
); \$query-&gt;from(\$db-&gt;quoteName('\#\_\_foos\_details', 'a')); //
Join over the asset groups.
\$query-&gt;select(\$db-&gt;quoteName('ag.title', 'access\_level'))
-&gt;join( 'LEFT', \$db-&gt;quoteName('\#\_\_viewlevels', 'ag') . ' ON '
. \$db-&gt;quoteName('ag.id') . ' = ' . \$db-&gt;quoteName('a.access')
); // Join over the categories.
\$query-&gt;select(\$db-&gt;quoteName('c.title', 'category\_title'))
-&gt;join( 'LEFT', \$db-&gt;quoteName('\#\_\_categories', 'c') . ' ON '
. \$db-&gt;quoteName('c.id') . ' = ' . \$db-&gt;quoteName('a.catid') );
// Join over the language
\$query-&gt;select(\$db-&gt;quoteName('l.title', 'language\_title'))
-&gt;select(\$db-&gt;quoteName('l.image', 'language\_image')) -&gt;join(
'LEFT', \$db-&gt;quoteName('\#\_\_languages', 'l') . ' ON ' .
\$db-&gt;quoteName('l.lang\_code') . ' = ' .
\$db-&gt;quoteName('a.language') ); // Join over the associations.
\$assoc = Associations::isEnabled(); if (\$assoc) {
\$query-&gt;select('COUNT(' . \$db-&gt;quoteName('asso2.id') . ') &gt; 1
as ' . \$db-&gt;quoteName('association')) -&gt;join( 'LEFT',
\$db-&gt;quoteName('\#\_\_associations', 'asso') . ' ON ' .
\$db-&gt;quoteName('asso.id') . ' = ' . \$db-&gt;quoteName('a.id') . '
AND ' . \$db-&gt;quoteName('asso.context') . ' = ' .
\$db-&gt;quote('com\_foos.item') ) -&gt;join( 'LEFT',
\$db-&gt;quoteName('\#\_\_associations', 'asso2') . ' ON ' .
\$db-&gt;quoteName('asso2.key') . ' = ' . \$db-&gt;quoteName('asso.key')
) -&gt;group( \$db-&gt;quoteName( array( 'a.id', 'a.name', 'a.catid',
'a.published', 'a.access', 'a.language', 'a.publish\_up',
'a.publish\_down', 'l.title' , 'l.image' , 'ag.title' , 'c.title' ) ) );
} // Filter on the language. if (\$language =
\$this-&gt;getState('filter.language')) {
\$query-&gt;where(\$db-&gt;quoteName('a.language') . ' = :language');
\$query-&gt;bind(':language', \$language); } return \$query; } /\*\* \*
Method to auto-populate the model state. \* \* Note. Calling getState in
this method will result in recursion. \* \* @param string \$ordering An
optional ordering field. \* @param string \$direction An optional
direction (asc|desc). \* \* @return void \* \* @since 1.0 \*/ protected
function populateState(\$ordering = 'a.name', \$direction = 'asc') {
\$app = Factory::getApplication(); \$forcedLanguage =
\$app-&gt;input-&gt;get('forcedLanguage', '', 'cmd'); // Adjust the
context to support modal layouts. if (\$layout =
\$app-&gt;input-&gt;get('layout')) { \$this-&gt;context .= '.' .
\$layout; } // Adjust the context to support forced languages. if
(\$forcedLanguage) { \$this-&gt;context .= '.' . \$forcedLanguage; } //
List state information. parent::populateState(\$ordering, \$direction);
// Force a language. if (!empty(\$forcedLanguage)) {
\$this-&gt;setState('filter.language', \$forcedLanguage); } } }

=== Changing administrator/components/com\_foos/View/Foo/HtmlView.php
=== The `administrator/components/com_foos/View/Foo/HtmlView.php` file
is .... ==== Completed
administrator/components/com\_foos/View/Foo/HtmlView.php file ==== The
code for the `administrator/components/com_foos/View/Foo/HtmlView.php`
file is as follows:

item = \$this-&gt;get('Item'); // If we are forcing a language in modal
(used for associations). if (\$this-&gt;getLayout() === 'modal' &&
\$forcedLanguage =
Factory::getApplication()-&gt;input-&gt;get('forcedLanguage', '',
'cmd')) { // Set the language field to the forcedLanguage and disable
changing it. \$this-&gt;form-&gt;setValue('language', null,
\$forcedLanguage); \$this-&gt;form-&gt;setFieldAttribute('language',
'readonly', 'true'); // Only allow to select categories with All
language or with the forced language.
\$this-&gt;form-&gt;setFieldAttribute('catid', 'language', '\*,' .
\$forcedLanguage); } \$this-&gt;addToolbar(); return
parent::display(\$tpl); } /\*\* \* Add the page title and toolbar. \* \*
@return void \* \* @since 1.0 \*/ protected function addToolbar() {
Factory::getApplication()-&gt;input-&gt;set('hidemainmenu', true);
\$isNew = (\$this-&gt;item-&gt;id == 0); ToolbarHelper::title(\$isNew ?
Text::\_('COM\_FOOS\_MANAGER\_FOO\_NEW') :
Text::\_('COM\_FOOS\_MANAGER\_FOO\_EDIT'), 'address foo');
ToolbarHelper::apply('foo.apply'); ToolbarHelper::cancel('foo.cancel',
'JTOOLBAR\_CLOSE'); } }

=== Changing administrator/components/com\_foos/View/Foos/HtmlView.php
=== The `administrator/components/com_foos/View/Foos/HtmlView.php` file
is .... ==== Completed
administrator/components/com\_foos/View/Foos/HtmlView.php file ==== The
code for the `administrator/components/com_foos/View/Foos/HtmlView.php`
file is as follows:

items = \$this-&gt;get('Items'); // We don't need toolbar in the modal
window. if (\$this-&gt;getLayout() !== 'modal') {
FooHelper::addSubmenu('foos'); \$this-&gt;addToolbar();
\$this-&gt;sidebar = \\JHtmlSidebar::render(); // We do not need to
filter by language when multilingual is disabled if
(!Multilanguage::isEnabled()) {
unset(\$this-&gt;activeFilters\['language'\]);
\$this-&gt;filterForm-&gt;removeField('language', 'filter'); } } else {
// In article associations modal we need to remove language filter if
forcing a language. // We also need to change the category filter to
show show categories with All or the forced language. if
(\$forcedLanguage =
Factory::getApplication()-&gt;input-&gt;get('forcedLanguage', '',
'CMD')) { // If the language is forced we can't allow to select the
language, so transform the language selector filter into a hidden field.
\$languageXml = new \\SimpleXMLElement(''); } } return
parent::display(\$tpl); } /\*\* \* Add the page title and toolbar. \* \*
@return void \* \* @since 1.0 \*/ protected function addToolbar() {
\$canDo = ContentHelper::getActions('com\_foos'); // Get the toolbar
object instance \$toolbar = Toolbar::getInstance('toolbar');
ToolbarHelper::title(Text::\_('COM\_FOOS\_MANAGER\_FOOS'), 'address
foo'); if (\$canDo-&gt;get('core.create')) {
\$toolbar-&gt;addNew('foo.add'); } if (\$canDo-&gt;get('core.options'))
{ \$toolbar-&gt;preferences('com\_foos'); }
HTMLHelper::\_('sidebar.setAction', 'index.php?option=com\_foos'); } }

=== Changing administrator/components/com\_foos/foos.xml === The
`administrator/components/com_foos/foos.xml` file is .... ==== Completed
administrator/components/com\_foos/foos.xml file ==== The code for the
`administrator/components/com_foos/foos.xml` file is as follows:

COM\_FOOS \[DATE\] \[AUTHOR\] \[AUTHOR\_EMAIL\] \[AUTHOR\_URL\]
\[COPYRIGHT\] GNU General Public License version 2 or later; 1.15.1
COM\_FOOS\_XML\_DESCRIPTION Joomla\\Component\\Foos script.php
sql/install.mysql.utf8.sql sql/uninstall.mysql.utf8.sql
sql/updates/mysql Controller Model View tmpl language js

COM\_FOOS

COM\_FOOS

JCATEGORY

access.xml config.xml foos.xml Controller Extension Model Rule Service
View services tmpl sql language

== Test your component == Now you can zip all files and install them via
Joomla Extension Manager. Now the items in the modal are filtered.
\[\[File:as\_j4\_t\_15b\_1.png|700px\]\] == Component Contents == =
Adding Ordering and Filter - Part 16 = == Requirements == You need
Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev) == File Structure == === Changing
administrator/components/com\_foos/Model/FoosModel.php === The
`administrator/components/com_foos/Model/FoosModel.php` file is ....
==== Completed administrator/components/com\_foos/Model/FoosModel.php
file ==== The code for the
`administrator/components/com_foos/Model/FoosModel.php` file is as
follows:

getDbo(); \$query = \$db-&gt;getQuery(true); // Select the required
fields from the table. \$query-&gt;select( \$this-&gt;getState(
'list.select', 'a.id AS id,' . 'a.name AS name,' . 'a.access,' .
'a.language,' . 'a.ordering AS ordering,' . 'a.state AS state,' .
'a.catid AS catid,' . 'a.published AS published,' . 'a.publish\_up,' .
'a.publish\_down' ) );
\$query-&gt;from(\$db-&gt;quoteName('\#\_\_foos\_details', 'a')); //
Join over the asset groups.
\$query-&gt;select(\$db-&gt;quoteName('ag.title', 'access\_level'))
-&gt;join( 'LEFT', \$db-&gt;quoteName('\#\_\_viewlevels', 'ag') . ' ON '
. \$db-&gt;quoteName('ag.id') . ' = ' . \$db-&gt;quoteName('a.access')
); // Join over the categories.
\$query-&gt;select(\$db-&gt;quoteName('c.title', 'category\_title'))
-&gt;join( 'LEFT', \$db-&gt;quoteName('\#\_\_categories', 'c') . ' ON '
. \$db-&gt;quoteName('c.id') . ' = ' . \$db-&gt;quoteName('a.catid') );
// Join over the language
\$query-&gt;select(\$db-&gt;quoteName('l.title', 'language\_title'))
-&gt;select(\$db-&gt;quoteName('l.image', 'language\_image')) -&gt;join(
'LEFT', \$db-&gt;quoteName('\#\_\_languages', 'l') . ' ON ' .
\$db-&gt;quoteName('l.lang\_code') . ' = ' .
\$db-&gt;quoteName('a.language') ); // Join over the associations.
\$assoc = Associations::isEnabled(); if (\$assoc) {
\$query-&gt;select('COUNT(' . \$db-&gt;quoteName('asso2.id') . ') &gt; 1
as ' . \$db-&gt;quoteName('association')) -&gt;join( 'LEFT',
\$db-&gt;quoteName('\#\_\_associations', 'asso') . ' ON ' .
\$db-&gt;quoteName('asso.id') . ' = ' . \$db-&gt;quoteName('a.id') . '
AND ' . \$db-&gt;quoteName('asso.context') . ' = ' .
\$db-&gt;quote('com\_foos.item') ) -&gt;join( 'LEFT',
\$db-&gt;quoteName('\#\_\_associations', 'asso2') . ' ON ' .
\$db-&gt;quoteName('asso2.key') . ' = ' . \$db-&gt;quoteName('asso.key')
) -&gt;group( \$db-&gt;quoteName( array( 'a.id', 'a.name', 'a.catid',
'a.published', 'a.access', 'a.language', 'a.publish\_up',
'a.publish\_down', 'l.title' , 'l.image' , 'ag.title' , 'c.title' ) ) );
} // Filter by access level. if (\$access =
\$this-&gt;getState('filter.access')) {
\$query-&gt;where(\$db-&gt;quoteName('a.access') . ' = ' . (int)
\$access); } // Filter by published state \$published = (string)
\$this-&gt;getState('filter.published'); if (is\_numeric(\$published)) {
\$query-&gt;where(\$db-&gt;quoteName('a.published') . ' = ' . (int)
\$published); } elseif (\$published === '') { \$query-&gt;where('(' .
\$db-&gt;quoteName('a.published') . ' = 0 OR ' .
\$db-&gt;quoteName('a.published') . ' = 1)'); } // Filter by a single or
group of categories. \$categoryId =
\$this-&gt;getState('filter.category\_id'); if
(is\_numeric(\$categoryId)) {
\$query-&gt;where(\$db-&gt;quoteName('a.catid') . ' = ' . (int)
\$categoryId); } elseif (is\_array(\$categoryId)) {
\$query-&gt;where(\$db-&gt;quoteName('a.catid') . ' IN (' . implode(',',
ArrayHelper::toInteger(\$categoryId)) . ')'); } // Filter by search in
name. \$search = \$this-&gt;getState('filter.search'); if
(!empty(\$search)) { if (stripos(\$search, 'id:') === 0) {
\$query-&gt;where('a.id = ' . (int) substr(\$search, 3)); } else {
\$search = \$db-&gt;quote('%' . str\_replace(' ', '%',
\$db-&gt;escape(trim(\$search), true) . '%')); \$query-&gt;where( '(' .
\$db-&gt;quoteName('a.name') . ' LIKE ' . \$search . ')' ); } } //
Filter on the language. if (\$language =
\$this-&gt;getState('filter.language')) {
\$query-&gt;where(\$db-&gt;quoteName('a.language') . ' = ' .
\$db-&gt;quote(\$language)); } // Add the list ordering clause.
\$orderCol = \$this-&gt;state-&gt;get('list.ordering', 'a.name');
\$orderDirn = \$this-&gt;state-&gt;get('list.direction', 'asc'); if
(\$orderCol == 'a.ordering' || \$orderCol == 'category\_title') {
\$orderCol = \$db-&gt;quoteName('c.title') . ' ' . \$orderDirn . ', ' .
\$db-&gt;quoteName('a.ordering'); }
\$query-&gt;order(\$db-&gt;escape(\$orderCol . ' ' . \$orderDirn));
return \$query; } /\*\* \* Method to auto-populate the model state. \*
\* Note. Calling getState in this method will result in recursion. \* \*
@param string \$ordering An optional ordering field. \* @param string
\$direction An optional direction (asc|desc). \* \* @return void \* \*
@since 1.0 \*/ protected function populateState(\$ordering = 'a.name',
\$direction = 'asc') { \$app = Factory::getApplication();
\$forcedLanguage = \$app-&gt;input-&gt;get('forcedLanguage', '', 'cmd');
// Adjust the context to support modal layouts. if (\$layout =
\$app-&gt;input-&gt;get('layout')) { \$this-&gt;context .= '.' .
\$layout; } // Adjust the context to support forced languages. if
(\$forcedLanguage) { \$this-&gt;context .= '.' . \$forcedLanguage; } //
List state information. parent::populateState(\$ordering, \$direction);
// Force a language. if (!empty(\$forcedLanguage)) {
\$this-&gt;setState('filter.language', \$forcedLanguage); } } }

=== Changing administrator/components/com\_foos/View/Foos/HtmlView.php
=== The `administrator/components/com_foos/View/Foos/HtmlView.php` file
is .... ==== Completed
administrator/components/com\_foos/View/Foos/HtmlView.php file ==== The
code for the `administrator/components/com_foos/View/Foos/HtmlView.php`
file is as follows:

items = \$this-&gt;get('Items'); \$this-&gt;filterForm =
\$this-&gt;get('FilterForm'); \$this-&gt;activeFilters =
\$this-&gt;get('ActiveFilters'); \$this-&gt;state =
\$this-&gt;get('State'); // Check for errors. if (count(\$errors =
\$this-&gt;get('Errors'))) { throw new
\\JViewGenericdataexception(implode("\\n", \$errors), 500); } //
Preprocess the list of items to find ordering divisions. // TODO:
Complete the ordering stuff with nested sets foreach (\$this-&gt;items
as &\$item) { \$item-&gt;order\_up = true; \$item-&gt;order\_dn = true;
} // We don't need toolbar in the modal window. if
(\$this-&gt;getLayout() !== 'modal') { FooHelper::addSubmenu('foos');
\$this-&gt;addToolbar(); \$this-&gt;sidebar = \\JHtmlSidebar::render();
// We do not need to filter by language when multilingual is disabled if
(!Multilanguage::isEnabled()) {
unset(\$this-&gt;activeFilters\['language'\]);
\$this-&gt;filterForm-&gt;removeField('language', 'filter'); } } else {
// In article associations modal we need to remove language filter if
forcing a language. // We also need to change the category filter to
show show categories with All or the forced language. if
(\$forcedLanguage =
Factory::getApplication()-&gt;input-&gt;get('forcedLanguage', '',
'CMD')) { // If the language is forced we can't allow to select the
language, so transform the language selector filter into a hidden field.
\$languageXml = new \\SimpleXMLElement('');
\$this-&gt;filterForm-&gt;setField(\$languageXml, 'filter', true); //
Also, unset the active language filter so the search tools is not open
by default with this filter.
unset(\$this-&gt;activeFilters\['language'\]); // One last changes
needed is to change the category filter to just show categories with All
language or with the forced language.
\$this-&gt;filterForm-&gt;setFieldAttribute('category\_id', 'language',
'\*,' . \$forcedLanguage, 'filter'); } } return parent::display(\$tpl);
} /\*\* \* Add the page title and toolbar. \* \* @return void \* \*
@since 1.0 \*/ protected function addToolbar() { \$canDo =
ContentHelper::getActions('com\_foos'); // Get the toolbar object
instance \$toolbar = Toolbar::getInstance('toolbar');
ToolbarHelper::title(Text::\_('COM\_FOOS\_MANAGER\_FOOS'), 'address
foo'); if (\$canDo-&gt;get('core.create')) {
\$toolbar-&gt;addNew('foo.add'); } if (\$canDo-&gt;get('core.options'))
{ \$toolbar-&gt;preferences('com\_foos'); }
HTMLHelper::\_('sidebar.setAction', 'index.php?option=com\_foos'); }
/\*\* \* Returns an array of fields the table can be sorted by \* \*
@return array Array containing the field name to sort by as the key and
display text as value \* \* @since 1.0 \*/ protected function
getSortFields() { return array( 'a.ordering' =&gt;
Text::\_('JGRID\_HEADING\_ORDERING'), 'a.published' =&gt;
Text::\_('JSTATUS'), 'a.name' =&gt; Text::\_('JGLOBAL\_TITLE'),
'category\_title' =&gt; Text::\_('JCATEGORY'), 'a.access' =&gt;
Text::\_('JGRID\_HEADING\_ACCESS'), 'a.language' =&gt;
Text::\_('JGRID\_HEADING\_LANGUAGE'), 'a.id' =&gt;
Text::\_('JGRID\_HEADING\_ID'), ); } }

=== Changing administrator/components/com\_foos/foos.xml === The
`administrator/components/com_foos/foos.xml` file is .... ==== Completed
administrator/components/com\_foos/foos.xml file ==== The code for the
`administrator/components/com_foos/foos.xml` file is as follows:

COM\_FOOS \[DATE\] \[AUTHOR\] \[AUTHOR\_EMAIL\] \[AUTHOR\_URL\]
\[COPYRIGHT\] GNU General Public License version 2 or later; 1.16.0
COM\_FOOS\_XML\_DESCRIPTION Joomla\\Component\\Foos script.php
sql/install.mysql.utf8.sql sql/uninstall.mysql.utf8.sql
sql/updates/mysql Controller Model View tmpl language js

COM\_FOOS

COM\_FOOS

JCATEGORY

access.xml config.xml foos.xml Controller Extension Model Rule Service
View services tmpl sql language

=== Changing administrator/components/com\_foos/forms/foo.xml === The
`administrator/components/com_foos/forms/foo.xml` file is .... ====
Completed administrator/components/com\_foos/forms/foo.xml file ==== The
code for the `administrator/components/com_foos/forms/foo.xml` file is
as follows:

JALL JPUBLISHED JUNPUBLISHED JARCHIVED JTRASHED

=== Create
administrator/components/com\_foos/sql/updates/mysql/1.16.0.sql === The
`administrator/components/com_foos/sql/updates/mysql/1.16.0.sql` file is
.... ==== Completed
administrator/components/com\_foos/sql/updates/mysql/1.16.0.sql file
==== The code for the
`administrator/components/com_foos/sql/updates/mysql/1.16.0.sql` file is
as follows:

ALTER TABLE \`\#\_\_foos\_details\` ADD COLUMN \`ordering\` int(11) NOT
NULL DEFAULT 0 AFTER \`alias\`;

=== Changing administrator/components/com\_foos/tmpl/foos/default.php
=== The `administrator/components/com_foos/tmpl/foos/default.php` file
is .... ==== Completed
administrator/components/com\_foos/tmpl/foos/default.php file ==== The
code for the `administrator/components/com_foos/tmpl/foos/default.php`
file is as follows:

escape(\$this-&gt;state-&gt;get('list.ordering')); \$listDirn =
\$this-&gt;escape(\$this-&gt;state-&gt;get('list.direction'));
\$saveOrder = \$listOrder == 'a.ordering'; if (\$saveOrder &&
!empty(\$this-&gt;items)) { \$saveOrderingUrl =
'index.php?option=com\_foos&task=foos.saveOrderAjax&tmpl=component&' .
Session::getFormToken() . '=1'; } ?&gt;

<div class="row">

sidebar)) : ?&gt;
<div id="j-sidebar-container" class="col-md-2">

sidebar; ?&gt;

</div>

<div
class="<?php if (!empty($this->sidebar)) {echo 'col-md-10'; } else { echo 'col-md-12'; } ?>">

<div id="j-main-container" class="j-main-container">

\$this)); ?&gt;
items)) : ?&gt;
<div class="alert alert-warning">

</div>

,
items); foreach (\$this-&gt;items as \$i =&gt; \$item) : ?&gt;
[ []{.icon-menu aria-hidden="true"} ]{.sortable-handler<?php .echo
.$iconClass; .?>}
id); ?&gt;
<div>

escape(\$item-&gt;name); ?&gt;

</div>

escape(\$item-&gt;name); ?&gt;
<div class="small">

escape(\$item-&gt;category\_title); ?&gt;

</div>

access\_level; ?&gt;
association) : ?&gt;
id); ?&gt;
<div class="btn-group">

published, \$i, 'foos.', \$canChange, 'cb', \$item-&gt;publish\_up,
\$item-&gt;publish\_down); ?&gt;

</div>

id; ?&gt;

</div>

</div>

</div>

=== Changing administrator/components/com\_foos/tmpl/foos/modal.php ===
The `administrator/components/com_foos/tmpl/foos/modal.php` file is ....
==== Completed administrator/components/com\_foos/tmpl/foos/modal.php
file ==== The code for the
`administrator/components/com_foos/tmpl/foos/modal.php` file is as
follows:

'auto', 'relative' =&gt; true)); \$function =
\$app-&gt;input-&gt;getCmd('function', 'jSelectFoos'); \$onclick =
\$this-&gt;escape(\$function); ?&gt;

<div class="container-popup">

items)) : ?&gt;
<div class="alert alert-warning">

</div>

,
'icon-trash', 0 =&gt; 'icon-unpublish', 1 =&gt; 'icon-publish', 2 =&gt;
'icon-archive', ); ?&gt;
items as \$i =&gt; \$item) : ?&gt;
escape(\$item-&gt;name); ?&gt;
id; ?&gt;

</div>

== Test your component == Now you can zip all files and install them via
Joomla Extension Manager. You have to run a new installation or fix the
database due to the changes in the database. These few changes allow you
to sort and filter in your component. You use Joomla functions here and
do not have to invent the wheel yourself. == Example in Joomla! ==
\[\[File:as\_j4\_t\_16\_1.png|700px\]\] == Component Contents == At this
point in the tutorial, your component should contain the following
files: {| border=1 | 1 |
administrator/components/com\_foos/Controller/DisplayController.php |
this is the administrator entry point to the Foo component | unchanged
|- | 7 | administrator/components/com\_foos/Controller/FooController.php
| this is the entry point to the Foo component | unchanged |- | 1 |
administrator/components/com\_foos/Extension/FoosComponent.php | the
interface BootableExtensionInterface where a component class can load
its internal class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 7 |
administrator/components/com\_foos/Field/FooField.php | the interface
BootableExtensionInterface where a component class can load its internal
class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 7 |
administrator/components/com\_foos/Model/FooModel.php | this is the
model of the Foo component item | unchanged |- | 6 |
administrator/components/com\_foos/Model/FoosModel.php | this is the
model of the Foo component | unchanged |- | 1 |
administrator/components/com\_foos/Service/HTML/AdministratorService.php
| the html service see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- | 7 | administrator/components/com\_foos/Table/FooTable.php
| the database table | unchanged |- | 1 |
administrator/components/com\_foos/View/Foos/HtmlView.php | file
representing the view in the back end | unchanged |- | 1 |
administrator/components/com\_foos/services/provider.php | the service
provider interface see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- | 6 |
administrator/components/com\_foos/sql/install.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | unchanged |- | 6 |
administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | unchanged |- | 7 |
administrator/components/com\_foos/forms/foo.xml | the default form in
the back end | unchanged |- | 7 |
administrator/components/com\_foos/tmpl/foo/edit.php | the default view
in the back end | unchanged |- | 7 |
administrator/components/com\_foos/tmpl/foo/modal.php | the default view
in the back end | unchanged |- | 1 |
administrator/components/com\_foos/tmpl/foos/default.php | the default
view in the back end | unchanged |- | 7 |
administrator/components/com\_foos/tmpl/foos/modal.php | the default
view in the back end | unchanged |- | 1 |
administrator/components/com\_foos/foos.xml | this is an XML (manifest)
file that tells Joomla! how to install our component. | unchanged |- | 1
| administrator/components/com\_foos/script.php | the installer script |
unchanged |- | 8 |
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini |
the language file | unchanged |- | 8 |
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini
| the language file | unchanged |- | 9 |
administrator/components/com\_foos/config.php | the configuration |
unchanged |- | 10 | administrator/components/com\_foos/access.xml | the
ACL file for permissen handling | unchanged |- | 14a |
administrator/components/com\_foos/Helper/FooHelper.php | the helper
file | unchanged |- | 11a |
administrator/components/com\_foos/Rule/LetterRule.php | the server side
validation rule | unchanged |- | 15 |
administrator/components/com\_foos/Helper/AssociationsHelper.php | the
helper file for associations | unchanged |- | 15 |
administrator/components/com\_foos/tmpl/foo/edit\_associations.php | the
template for editing associations | unchanged |- | 16 |
administrator/components/com\_foos/forms/filter\_foos.xml | the form for
the filter | new |- | 2 |
components/com\_foos/Controller/DisplayController.php | this is the
frond end entry point to the Foo component | unchanged |- | 4 |
components/com\_foos/Model/FooModel.php | this is the frond end model
for the Foo component | unchanged |- | 2 |
components/com\_foos/View/Foo/HtmlView.php | file representing the view
in the frond end | unchanged |- | 7 |
components/com\_foos/View/Foos/HtmlView.php | file representing the view
in the frond end | unchanged |- | 2 |
components/com\_foos/tmpl/foo/default.php | the default view in the
frond end | unchanged |- | 3 | components/com\_foos/tmpl/foo/default.xml
| the xml for the menu item | unchanged |- | 8 |
components/com\_foos/language/en-GB/en-GB.com\_foos.ini | the language
file | unchanged |- | 8 |
components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini | the
language file | unchanged |- | 7 |
media/com\_foos/js/admin-foos-modal.js | the javascript file | unchanged
|- | 11b | media/com\_foos/js/admin-foos-letter.js | the client side
validation rule | unchanged |- |} == Conclusion == = Adding Actions -
Part 17 = == Requirements == You need Joomla! 4.x for this tutorial (as
of writing currently Joomla! 4.0.0-alpha11-dev) == File Structure == ===
Changing administrator/components/com\_foos/View/Foo/HtmlView.php ===
The `administrator/components/com_foos/View/Foo/HtmlView.php` file is
.... ==== Completed
administrator/components/com\_foos/View/Foo/HtmlView.php file ==== The
code for the `administrator/components/com_foos/View/Foo/HtmlView.php`
file is as follows:

item = \$this-&gt;get('Item'); // If we are forcing a language in modal
(used for associations). if (\$this-&gt;getLayout() === 'modal' &&
\$forcedLanguage =
Factory::getApplication()-&gt;input-&gt;get('forcedLanguage', '',
'cmd')) { // Set the language field to the forcedLanguage and disable
changing it. \$this-&gt;form-&gt;setValue('language', null,
\$forcedLanguage); \$this-&gt;form-&gt;setFieldAttribute('language',
'readonly', 'true'); // Only allow to select categories with All
language or with the forced language.
\$this-&gt;form-&gt;setFieldAttribute('catid', 'language', '\*,' .
\$forcedLanguage); } \$this-&gt;addToolbar(); return
parent::display(\$tpl); } /\*\* \* Add the page title and toolbar. \* \*
@return void \* \* @since 1.0 \*/ protected function addToolbar() {
Factory::getApplication()-&gt;input-&gt;set('hidemainmenu', true);
\$user = Factory::getUser(); \$userId = \$user-&gt;id; \$isNew =
(\$this-&gt;item-&gt;id == 0); ToolbarHelper::title(\$isNew ?
Text::\_('COM\_FOOS\_MANAGER\_FOO\_NEW') :
Text::\_('COM\_FOOS\_MANAGER\_FOO\_EDIT'), 'address foo'); // Since we
don't track these assets at the item level, use the category id. \$canDo
= ContentHelper::getActions('com\_foos', 'category',
\$this-&gt;item-&gt;catid); // Build the actions for new and existing
records. if (\$isNew) { // For new records, check the create permission.
if (\$isNew && (count(\$user-&gt;getAuthorisedCategories('com\_foos',
'core.create')) &gt; 0)) { ToolbarHelper::apply('foo.apply');
ToolbarHelper::saveGroup( \[ \['save', 'foo.save'\], \['save2new',
'foo.save2new'\] \], 'btn-success' ); }
ToolbarHelper::cancel('foo.cancel'); } else { // Since it's an existing
record, check the edit permission, or fall back to edit own if the
owner. \$itemEditable = \$canDo-&gt;get('core.edit') ||
(\$canDo-&gt;get('core.edit.own') && \$this-&gt;item-&gt;created\_by ==
\$userId); \$toolbarButtons = \[\]; // Can't save the record if it's not
editable if (\$itemEditable) { ToolbarHelper::apply('foo.apply');
\$toolbarButtons\[\] = \['save', 'foo.save'\]; // We can save this
record, but check the create permission to see if we can return to make
a new one. if (\$canDo-&gt;get('core.create')) { \$toolbarButtons\[\] =
\['save2new', 'foo.save2new'\]; } } // If checked out, we can still save
if (\$canDo-&gt;get('core.create')) { \$toolbarButtons\[\] =
\['save2copy', 'foo.save2copy'\]; } ToolbarHelper::saveGroup(
\$toolbarButtons, 'btn-success' ); if (Associations::isEnabled() &&
ComponentHelper::isEnabled('com\_associations')) {
ToolbarHelper::custom('foo.editAssociations', 'contract', 'contract',
'JTOOLBAR\_ASSOCIATIONS', false, false); }
ToolbarHelper::cancel('foo.cancel', 'JTOOLBAR\_CLOSE'); } } }

=== Changing administrator/components/com\_foos/View/Foos/HtmlView.php
=== The `administrator/components/com_foos/View/Foos/HtmlView.php` file
is .... ==== Completed
administrator/components/com\_foos/View/Foos/HtmlView.php file ==== The
code for the `administrator/components/com_foos/View/Foos/HtmlView.php`
file is as follows:

items = \$this-&gt;get('Items'); \$this-&gt;filterForm =
\$this-&gt;get('FilterForm'); \$this-&gt;activeFilters =
\$this-&gt;get('ActiveFilters'); \$this-&gt;state =
\$this-&gt;get('State'); // Check for errors. if (count(\$errors =
\$this-&gt;get('Errors'))) { throw new
\\JViewGenericdataexception(implode("\\n", \$errors), 500); } //
Preprocess the list of items to find ordering divisions. // TODO:
Complete the ordering stuff with nested sets foreach (\$this-&gt;items
as &\$item) { \$item-&gt;order\_up = true; \$item-&gt;order\_dn = true;
} // We don't need toolbar in the modal window. if
(\$this-&gt;getLayout() !== 'modal') { FooHelper::addSubmenu('foos');
\$this-&gt;addToolbar(); \$this-&gt;sidebar = \\JHtmlSidebar::render();
// We do not need to filter by language when multilingual is disabled if
(!Multilanguage::isEnabled()) {
unset(\$this-&gt;activeFilters\['language'\]);
\$this-&gt;filterForm-&gt;removeField('language', 'filter'); } } else {
// In article associations modal we need to remove language filter if
forcing a language. // We also need to change the category filter to
show show categories with All or the forced language. if
(\$forcedLanguage =
Factory::getApplication()-&gt;input-&gt;get('forcedLanguage', '',
'CMD')) { // If the language is forced we can't allow to select the
language, so transform the language selector filter into a hidden field.
\$languageXml = new \\SimpleXMLElement('');
\$this-&gt;filterForm-&gt;setField(\$languageXml, 'filter', true); //
Also, unset the active language filter so the search tools is not open
by default with this filter.
unset(\$this-&gt;activeFilters\['language'\]); // One last changes
needed is to change the category filter to just show categories with All
language or with the forced language.
\$this-&gt;filterForm-&gt;setFieldAttribute('category\_id', 'language',
'\*,' . \$forcedLanguage, 'filter'); } } return parent::display(\$tpl);
} /\*\* \* Add the page title and toolbar. \* \* @return void \* \*
@since 1.0 \*/ protected function addToolbar() { \$canDo =
ContentHelper::getActions('com\_foos', 'category',
\$this-&gt;state-&gt;get('filter.category\_id')); \$user =
Factory::getUser(); // Get the toolbar object instance \$toolbar =
Toolbar::getInstance('toolbar');
ToolbarHelper::title(Text::\_('COM\_FOO\_MANAGER\_FOOS'), 'address
foos'); if (\$canDo-&gt;get('core.create') ||
count(\$user-&gt;getAuthorisedCategories('com\_foos', 'core.create'))
&gt; 0) { \$toolbar-&gt;addNew('foo.add'); } if
(\$canDo-&gt;get('core.edit.state')) { \$dropdown =
\$toolbar-&gt;dropdownButton('status-group')
-&gt;text('JTOOLBAR\_CHANGE\_STATUS') -&gt;toggleSplit(false)
-&gt;icon('fa fa-globe') -&gt;buttonClass('btn btn-info')
-&gt;listCheck(true); \$childBar = \$dropdown-&gt;getChildToolbar();
\$childBar-&gt;publish('foos.publish')-&gt;listCheck(true);
\$childBar-&gt;unpublish('foos.unpublish')-&gt;listCheck(true);
\$childBar-&gt;archive('foos.archive')-&gt;listCheck(true); if
(\$user-&gt;authorise('core.admin')) {
\$childBar-&gt;checkin('foos.checkin')-&gt;listCheck(true); } if
(\$this-&gt;state-&gt;get('filter.published') != -2) {
\$childBar-&gt;trash('foos.trash')-&gt;listCheck(true); } } if
(\$this-&gt;state-&gt;get('filter.published') == -2 &&
\$canDo-&gt;get('core.delete')) { \$toolbar-&gt;delete('foos.delete')
-&gt;text('JTOOLBAR\_EMPTY\_TRASH')
-&gt;message('JGLOBAL\_CONFIRM\_DELETE') -&gt;listCheck(true); } if
(\$user-&gt;authorise('core.admin', 'com\_foos') ||
\$user-&gt;authorise('core.options', 'com\_foos')) {
\$toolbar-&gt;preferences('com\_foos'); }
HTMLHelper::\_('sidebar.setAction', 'index.php?option=com\_foos'); }
/\*\* \* Returns an array of fields the table can be sorted by \* \*
@return array Array containing the field name to sort by as the key and
display text as value \* \* @since 1.0 \*/ protected function
getSortFields() { return array( 'a.ordering' =&gt;
Text::\_('JGRID\_HEADING\_ORDERING'), 'a.published' =&gt;
Text::\_('JSTATUS'), 'a.name' =&gt; Text::\_('JGLOBAL\_TITLE'),
'category\_title' =&gt; Text::\_('JCATEGORY'), 'a.access' =&gt;
Text::\_('JGRID\_HEADING\_ACCESS'), 'a.language' =&gt;
Text::\_('JGRID\_HEADING\_LANGUAGE'), 'a.id' =&gt;
Text::\_('JGRID\_HEADING\_ID'), ); } }

=== Changing
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini
=== The
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.ini`
file is .... ==== Completed
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini
file ==== The code for the
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.ini`
file is as follows:

COM\_FOOS="\[PROJECT\_NAME\]" COM\_FOOS\_CONFIGURATION="Foo Options"
COM\_FOOS\_MANAGER\_FOO\_NEW="New" COM\_FOOS\_MANAGER\_FOO\_EDIT="Edit"
COM\_FOOS\_MANAGER\_FOOS="Foo Manager"
COM\_FOOS\_TABLE\_TABLEHEAD\_NAME="Name"
COM\_FOOS\_TABLE\_TABLEHEAD\_ID="ID"
COM\_FOOS\_ERROR\_FOO\_NOT\_FOUND="Foo not found"
COM\_FOOS\_FIELD\_NAME\_LABEL="Name"
COM\_FOOS\_FIELD\_FOO\_SHOW\_CATEGORY\_LABEL="Show name label"
COM\_FOOS\_FIELD\_CONFIG\_INDIVIDUAL\_FOO\_DESC="These settings apply
for all foo." COM\_FOOS\_FIELD\_CONFIG\_INDIVIDUAL\_FOO\_DISPLAY="Foo"
COM\_FOOS\_FIELD\_PUBLISH\_DOWN\_LABEL="Finish Publishing"
COM\_FOOS\_FIELD\_PUBLISH\_UP\_LABEL="Start Publishing"
COM\_FOOS\_N\_ITEMS\_PUBLISHED="%d foos published."
COM\_FOOS\_N\_ITEMS\_PUBLISHED\_1="%d foo published."
COM\_FOOS\_N\_ITEMS\_UNPUBLISHED="%d foos unpublished."
COM\_FOOS\_N\_ITEMS\_UNPUBLISHED\_1="%d foo unpublished."
COM\_FOOS\_FOOS\_FIELD\_PUBLISH\_DOWN\_LABEL="Finish Publishing"
COM\_FOOS\_FOOS\_FIELD\_PUBLISH\_UP\_LABEL="Start Publishing"
COM\_FOOS\_FOOS\_N\_ITEMS\_PUBLISHED="%d foos published."
COM\_FOOS\_FOOS\_N\_ITEMS\_PUBLISHED\_1="%d foo published."
COM\_FOOS\_FOOS\_N\_ITEMS\_UNPUBLISHED="%d foos unpublished."
COM\_FOOS\_FOOS\_N\_ITEMS\_UNPUBLISHED\_1="%d foo unpublished."
COM\_FOOS\_EDIT\_FOO="Edit Foo" COM\_FOOS\_NEW\_FOO="New Foo"
COM\_FOOS\_HEADING\_ASSOCIATION="Association"
COM\_FOOS\_CHANGE\_FOO="Change a foo" COM\_FOOS\_SELECT\_A\_FOO="Select
a foo" COM\_FOOS\_TABLE\_CAPTION="Foo Table Caption"
COM\_FOOS\_N\_ITEMS\_ARCHIVED="%d foos archived."
COM\_FOOS\_N\_ITEMS\_ARCHIVED\_1="%d foo archived."
COM\_FOOS\_N\_ITEMS\_DELETED="%d foos deleted."
COM\_FOOS\_N\_ITEMS\_DELETED\_1="%d foo deleted."
COM\_FOOS\_N\_ITEMS\_TRASHED="%d foos trashed."
COM\_FOOS\_N\_ITEMS\_TRASHED\_1="%d foo trashed."
COM\_FOO\_MANAGER\_FOOS="Foos"

=== Changing administrator/components/com\_foos/foos.xml === The
`administrator/components/com_foos/foos.xml` file is .... ==== Completed
administrator/components/com\_foos/foos.xml file ==== The code for the
`administrator/components/com_foos/foos.xml` file is as follows:

COM\_FOOS \[DATE\] \[AUTHOR\] \[AUTHOR\_EMAIL\] \[AUTHOR\_URL\]
\[COPYRIGHT\] GNU General Public License version 2 or later; 1.17.0
COM\_FOOS\_XML\_DESCRIPTION Joomla\\Component\\Foos script.php
sql/install.mysql.utf8.sql sql/uninstall.mysql.utf8.sql
sql/updates/mysql Controller Model View tmpl language js

COM\_FOOS

COM\_FOOS

JCATEGORY

access.xml config.xml foos.xml Controller Extension Model Rule Service
View services tmpl sql language

== Test your component == == Example in Joomla! == Here you can see how
you can use already implemented actions. Here is an example of an
actions in the edit view. \[\[File:as\_j4-t\_17\_1.png|700px\]\] Here is
an example of an actions in the default view.
\[\[File:as\_j4-t\_17\_2.png|700px\]\] Do you have a specific problem?
Then look at how the standard functions are implemented in Joomla and
apply this analogously to your problem. == Component Contents == At this
point in the tutorial, your component should contain the following
files: {| border=1 | 1 |
administrator/components/com\_foos/Controller/DisplayController.php |
this is the administrator entry point to the Foo component | unchanged
|- | 7 | administrator/components/com\_foos/Controller/FooController.php
| this is the entry point to the Foo component | unchanged |- | 1 |
administrator/components/com\_foos/Extension/FoosComponent.php | the
interface BootableExtensionInterface where a component class can load
its internal class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 7 |
administrator/components/com\_foos/Field/FooField.php | the interface
BootableExtensionInterface where a component class can load its internal
class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 7 |
administrator/components/com\_foos/Model/FooModel.php | this is the
model of the Foo component item | unchanged |- | 6 |
administrator/components/com\_foos/Model/FoosModel.php | this is the
model of the Foo component | unchanged |- | 1 |
administrator/components/com\_foos/Service/HTML/AdministratorService.php
| the html service see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- | 7 | administrator/components/com\_foos/Table/FooTable.php
| the database table | unchanged |- | 1 |
administrator/components/com\_foos/View/Foos/HtmlView.php | file
representing the view in the back end | unchanged |- | 1 |
administrator/components/com\_foos/services/provider.php | the service
provider interface see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- | 6 |
administrator/components/com\_foos/sql/install.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | unchanged |- | 6 |
administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | unchanged |- | 7 |
administrator/components/com\_foos/forms/foo.xml | the default form in
the back end | unchanged |- | 7 |
administrator/components/com\_foos/tmpl/foo/edit.php | the default view
in the back end | unchanged |- | 7 |
administrator/components/com\_foos/tmpl/foo/modal.php | the default view
in the back end | unchanged |- | 1 |
administrator/components/com\_foos/tmpl/foos/default.php | the default
view in the back end | unchanged |- | 7 |
administrator/components/com\_foos/tmpl/foos/modal.php | the default
view in the back end | unchanged |- | 1 |
administrator/components/com\_foos/foos.xml | this is an XML (manifest)
file that tells Joomla! how to install our component. | unchanged |- | 1
| administrator/components/com\_foos/script.php | the installer script |
unchanged |- | 8 |
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini |
the language file | unchanged |- | 8 |
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini
| the language file | unchanged |- | 9 |
administrator/components/com\_foos/config.php | the configuration |
unchanged |- | 10 | administrator/components/com\_foos/access.xml | the
ACL file for permissen handling | unchanged |- | 14a |
administrator/components/com\_foos/Helper/FooHelper.php | the helper
file | unchanged |- | 11a |
administrator/components/com\_foos/Rule/LetterRule.php | the server side
validation rule | unchanged |- | 15 |
administrator/components/com\_foos/Helper/AssociationsHelper.php | the
helper file for associations | unchanged |- | 15 |
administrator/components/com\_foos/tmpl/foo/edit\_associations.php | the
template for editing associations | unchanged |- | 16 |
administrator/components/com\_foos/forms/filter\_foos.xml | the form for
the filter | unchanged |- | 2 |
components/com\_foos/Controller/DisplayController.php | this is the
frond end entry point to the Foo component | unchanged |- | 4 |
components/com\_foos/Model/FooModel.php | this is the frond end model
for the Foo component | unchanged |- | 2 |
components/com\_foos/View/Foo/HtmlView.php | file representing the view
in the frond end | unchanged |- | 7 |
components/com\_foos/View/Foos/HtmlView.php | file representing the view
in the frond end | unchanged |- | 2 |
components/com\_foos/tmpl/foo/default.php | the default view in the
frond end | unchanged |- | 3 | components/com\_foos/tmpl/foo/default.xml
| the xml for the menu item | unchanged |- | 8 |
components/com\_foos/language/en-GB/en-GB.com\_foos.ini | the language
file | unchanged |- | 8 |
components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini | the
language file | unchanged |- | 7 |
media/com\_foos/js/admin-foos-modal.js | the javascript file | unchanged
|- | 11b | media/com\_foos/js/admin-foos-letter.js | the client side
validation rule | unchanged |- |} == Conclusion == With its own
functions, you can implement almost anything you want. You may want to
save parameters that control the function of your component in addition
to the data. This is the topic of the next chapter = Adding Params -
Part 18 = == Requirements == You need Joomla! 4.x for this tutorial (as
of writing currently Joomla! 4.0.0-alpha11-dev) == File Structure == ===
Changing administrator/components/com\_foos/Model/FoosModel.php === The
`administrator/components/com_foos/Model/FoosModel.php` file is ....
==== Completed administrator/components/com\_foos/Model/FoosModel.php
file ==== The code for the
`administrator/components/com_foos/Model/FoosModel.php` file is as
follows:

getDbo(); \$query = \$db-&gt;getQuery(true); // Select the required
fields from the table. \$query-&gt;select( \$this-&gt;getState(
'list.select', 'a.id AS id,' . 'a.name AS name,' . 'a.access,' .
'a.language,' . 'a.ordering AS ordering,' . 'a.state AS state,' .
'a.catid AS catid,' . 'a.published AS published,' . 'a.publish\_up,' .
'a.publish\_down' ) );
\$query-&gt;from(\$db-&gt;quoteName('\#\_\_foos\_details', 'a')); //
Join over the asset groups.
\$query-&gt;select(\$db-&gt;quoteName('ag.title', 'access\_level'))
-&gt;join( 'LEFT', \$db-&gt;quoteName('\#\_\_viewlevels', 'ag') . ' ON '
. \$db-&gt;quoteName('ag.id') . ' = ' . \$db-&gt;quoteName('a.access')
); // Join over the categories.
\$query-&gt;select(\$db-&gt;quoteName('c.title', 'category\_title'))
-&gt;join( 'LEFT', \$db-&gt;quoteName('\#\_\_categories', 'c') . ' ON '
. \$db-&gt;quoteName('c.id') . ' = ' . \$db-&gt;quoteName('a.catid') );
// Join over the language
\$query-&gt;select(\$db-&gt;quoteName('l.title', 'language\_title'))
-&gt;select(\$db-&gt;quoteName('l.image', 'language\_image')) -&gt;join(
'LEFT', \$db-&gt;quoteName('\#\_\_languages', 'l') . ' ON ' .
\$db-&gt;quoteName('l.lang\_code') . ' = ' .
\$db-&gt;quoteName('a.language') ); // Join over the associations.
\$assoc = Associations::isEnabled(); if (\$assoc) {
\$query-&gt;select('COUNT(' . \$db-&gt;quoteName('asso2.id') . ') &gt; 1
as ' . \$db-&gt;quoteName('association')) -&gt;join( 'LEFT',
\$db-&gt;quoteName('\#\_\_associations', 'asso') . ' ON ' .
\$db-&gt;quoteName('asso.id') . ' = ' . \$db-&gt;quoteName('a.id') . '
AND ' . \$db-&gt;quoteName('asso.context') . ' = ' .
\$db-&gt;quote('com\_foos.item') ) -&gt;join( 'LEFT',
\$db-&gt;quoteName('\#\_\_associations', 'asso2') . ' ON ' .
\$db-&gt;quoteName('asso2.key') . ' = ' . \$db-&gt;quoteName('asso.key')
) -&gt;group( \$db-&gt;quoteName( array( 'a.id', 'a.name', 'a.catid',
'a.published', 'a.access', 'a.language', 'a.publish\_up',
'a.publish\_down', 'l.title' , 'l.image' , 'ag.title' , 'c.title' ) ) );
} // Filter by access level. if (\$access =
\$this-&gt;getState('filter.access')) {
\$query-&gt;where(\$db-&gt;quoteName('a.access') . ' = ' . (int)
\$access); } // Filter by published state \$published = (string)
\$this-&gt;getState('filter.published'); if (is\_numeric(\$published)) {
\$query-&gt;where(\$db-&gt;quoteName('a.published') . ' = ' . (int)
\$published); } elseif (\$published === '') { \$query-&gt;where('(' .
\$db-&gt;quoteName('a.published') . ' = 0 OR ' .
\$db-&gt;quoteName('a.published') . ' = 1)'); } // Filter by a single or
group of categories. \$categoryId =
\$this-&gt;getState('filter.category\_id'); if
(is\_numeric(\$categoryId)) {
\$query-&gt;where(\$db-&gt;quoteName('a.catid') . ' = ' . (int)
\$categoryId); } elseif (is\_array(\$categoryId)) {
\$query-&gt;where(\$db-&gt;quoteName('a.catid') . ' IN (' . implode(',',
ArrayHelper::toInteger(\$categoryId)) . ')'); } // Filter by search in
name. \$search = \$this-&gt;getState('filter.search'); if
(!empty(\$search)) { if (stripos(\$search, 'id:') === 0) {
\$query-&gt;where('a.id = ' . (int) substr(\$search, 3)); } else {
\$search = \$db-&gt;quote('%' . str\_replace(' ', '%',
\$db-&gt;escape(trim(\$search), true) . '%')); \$query-&gt;where( '(' .
\$db-&gt;quoteName('a.name') . ' LIKE ' . \$search . ')' ); } } //
Filter on the language. if (\$language =
\$this-&gt;getState('filter.language')) {
\$query-&gt;where(\$db-&gt;quoteName('a.language') . ' = ' .
\$db-&gt;quote(\$language)); } // Filter by a single tag. \$tagId =
\$this-&gt;getState('filter.tag'); if (is\_numeric(\$tagId)) {
\$query-&gt;where(\$db-&gt;quoteName('tagmap.tag\_id') . ' = ' . (int)
\$tagId) -&gt;join( 'LEFT',
\$db-&gt;quoteName('\#\_\_contentitem\_tag\_map', 'tagmap') . ' ON ' .
\$db-&gt;quoteName('tagmap.content\_item\_id') . ' = ' .
\$db-&gt;quoteName('a.id') . ' AND ' .
\$db-&gt;quoteName('tagmap.type\_alias') . ' = ' .
\$db-&gt;quote('com\_foos.contact') ); } // Filter on the level. if
(\$level = \$this-&gt;getState('filter.level')) {
\$query-&gt;where('c.level &lt;= ' . (int) \$level); } // Add the list
ordering clause. \$orderCol = \$this-&gt;state-&gt;get('list.ordering',
'a.name'); \$orderDirn = \$this-&gt;state-&gt;get('list.direction',
'asc'); if (\$orderCol == 'a.ordering' || \$orderCol ==
'category\_title') { \$orderCol = \$db-&gt;quoteName('c.title') . ' ' .
\$orderDirn . ', ' . \$db-&gt;quoteName('a.ordering'); }
\$query-&gt;order(\$db-&gt;escape(\$orderCol . ' ' . \$orderDirn));
return \$query; } /\*\* \* Method to auto-populate the model state. \*
\* Note. Calling getState in this method will result in recursion. \* \*
@param string \$ordering An optional ordering field. \* @param string
\$direction An optional direction (asc|desc). \* \* @return void \* \*
@since 1.0 \*/ protected function populateState(\$ordering = 'a.name',
\$direction = 'asc') { \$app = Factory::getApplication();
\$forcedLanguage = \$app-&gt;input-&gt;get('forcedLanguage', '', 'cmd');
// Adjust the context to support modal layouts. if (\$layout =
\$app-&gt;input-&gt;get('layout')) { \$this-&gt;context .= '.' .
\$layout; } // Adjust the context to support forced languages. if
(\$forcedLanguage) { \$this-&gt;context .= '.' . \$forcedLanguage; } //
List state information. parent::populateState(\$ordering, \$direction);
// Force a language. if (!empty(\$forcedLanguage)) {
\$this-&gt;setState('filter.language', \$forcedLanguage); } } }

=== Changing administrator/components/com\_foos/Table/FooTable.php ===
The `administrator/components/com_foos/Table/FooTable.php` file is ....
==== Completed administrator/components/com\_foos/Table/FooTable.php
file ==== The code for the
`administrator/components/com_foos/Table/FooTable.php` file is as
follows:

typeAlias = 'com\_foos.foo';
parent::\_\_construct('\#\_\_foos\_details', 'id', \$db); } /\*\* \*
Stores a contact. \* \* @param boolean \$updateNulls True to update
fields even if they are null. \* \* @return boolean True on success,
false on failure. \* \* @since 1.0 \*/ public function
store(\$updateNulls = false) { // Transform the params field if
(is\_array(\$this-&gt;params)) { \$registry = new
Registry(\$this-&gt;params); \$this-&gt;params = (string) \$registry; }
return parent::store(\$updateNulls); } /\*\* \* Overloaded check
function \* \* @return boolean \* \* @see Table::check \* @since 1.5 \*/
public function check() { try { parent::check(); } catch (\\Exception
\$e) { \$this-&gt;setError(\$e-&gt;getMessage()); return false; } // Set
name \$this-&gt;name = htmlspecialchars\_decode(\$this-&gt;name,
ENT\_QUOTES); // Check the publish down date is not earlier than publish
up. if (\$this-&gt;publish\_down &gt; \$this-&gt;\_db-&gt;getNullDate()
&& \$this-&gt;publish\_down &lt; \$this-&gt;publish\_up) {
\$this-&gt;setError(Text::\_('JGLOBAL\_START\_PUBLISH\_AFTER\_FINISH'));
return false; } if (empty(\$this-&gt;publish\_up)) {
\$this-&gt;publish\_up = \$this-&gt;getDbo()-&gt;getNullDate(); } if
(empty(\$this-&gt;publish\_down)) { \$this-&gt;publish\_down =
\$this-&gt;getDbo()-&gt;getNullDate(); } return true; } }

=== Changing administrator/components/com\_foos/config.xml === The
`administrator/components/com_foos/config.xml` file is .... ====
Completed administrator/components/com\_foos/config.xml file ==== The
code for the `administrator/components/com_foos/config.xml` file is as
follows:

JNO JYES JNO JYES JHIDE JSHOW

=== Changing administrator/components/com\_foos/foos.xml === The
`administrator/components/com_foos/foos.xml` file is .... ==== Completed
administrator/components/com\_foos/foos.xml file ==== The code for the
`administrator/components/com_foos/foos.xml` file is as follows:

COM\_FOOS \[DATE\] \[AUTHOR\] \[AUTHOR\_EMAIL\] \[AUTHOR\_URL\]
\[COPYRIGHT\] GNU General Public License version 2 or later; 1.18.0
COM\_FOOS\_XML\_DESCRIPTION Joomla\\Component\\Foos script.php
sql/install.mysql.utf8.sql sql/uninstall.mysql.utf8.sql
sql/updates/mysql Controller Model View tmpl language js

COM\_FOOS

COM\_FOOS

JCATEGORY

access.xml config.xml foos.xml Controller Extension Model Rule Service
View services tmpl sql language

=== Changing administrator/components/com\_foos/forms/foo.xml === The
`administrator/components/com_foos/forms/foo.xml` file is .... ====
Completed administrator/components/com\_foos/forms/foo.xml file ==== The
code for the `administrator/components/com_foos/forms/foo.xml` file is
as follows:

JALL JPUBLISHED JUNPUBLISHED JARCHIVED JTRASHED

JHIDE JSHOW

=== Changing
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini
=== The
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.ini`
file is .... ==== Completed
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini
file ==== The code for the
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.ini`
file is as follows:

COM\_FOOS="\[PROJECT\_NAME\]" COM\_FOOS\_CONFIGURATION="Foo Options"
COM\_FOOS\_MANAGER\_FOO\_NEW="New" COM\_FOOS\_MANAGER\_FOO\_EDIT="Edit"
COM\_FOOS\_MANAGER\_FOOS="Foo Manager"
COM\_FOOS\_TABLE\_TABLEHEAD\_NAME="Name"
COM\_FOOS\_TABLE\_TABLEHEAD\_ID="ID"
COM\_FOOS\_ERROR\_FOO\_NOT\_FOUND="Foo not found"
COM\_FOOS\_FIELD\_NAME\_LABEL="Name"
COM\_FOOS\_FIELD\_FOO\_SHOW\_CATEGORY\_LABEL="Show name label"
COM\_FOOS\_FIELD\_CONFIG\_INDIVIDUAL\_FOO\_DESC="These settings apply
for all foo." COM\_FOOS\_FIELD\_CONFIG\_INDIVIDUAL\_FOO\_DISPLAY="Foo"
COM\_FOOS\_FIELD\_PUBLISH\_DOWN\_LABEL="Finish Publishing"
COM\_FOOS\_FIELD\_PUBLISH\_UP\_LABEL="Start Publishing"
COM\_FOOS\_N\_ITEMS\_PUBLISHED="%d foos published."
COM\_FOOS\_N\_ITEMS\_PUBLISHED\_1="%d foo published."
COM\_FOOS\_N\_ITEMS\_UNPUBLISHED="%d foos unpublished."
COM\_FOOS\_N\_ITEMS\_UNPUBLISHED\_1="%d foo unpublished."
COM\_FOOS\_FOOS\_FIELD\_PUBLISH\_DOWN\_LABEL="Finish Publishing"
COM\_FOOS\_FOOS\_FIELD\_PUBLISH\_UP\_LABEL="Start Publishing"
COM\_FOOS\_FOOS\_N\_ITEMS\_PUBLISHED="%d foos published."
COM\_FOOS\_FOOS\_N\_ITEMS\_PUBLISHED\_1="%d foo published."
COM\_FOOS\_FOOS\_N\_ITEMS\_UNPUBLISHED="%d foos unpublished."
COM\_FOOS\_FOOS\_N\_ITEMS\_UNPUBLISHED\_1="%d foo unpublished."
COM\_FOOS\_EDIT\_FOO="Edit Foo" COM\_FOOS\_NEW\_FOO="New Foo"
COM\_FOOS\_HEADING\_ASSOCIATION="Association"
COM\_FOOS\_CHANGE\_FOO="Change a foo" COM\_FOOS\_SELECT\_A\_FOO="Select
a foo" COM\_FOOS\_TABLE\_CAPTION="Foo Table Caption"
COM\_FOOS\_N\_ITEMS\_ARCHIVED="%d foos archived."
COM\_FOOS\_N\_ITEMS\_ARCHIVED\_1="%d foo archived."
COM\_FOOS\_N\_ITEMS\_DELETED="%d foos deleted."
COM\_FOOS\_N\_ITEMS\_DELETED\_1="%d foo deleted."
COM\_FOOS\_N\_ITEMS\_TRASHED="%d foos trashed."
COM\_FOOS\_N\_ITEMS\_TRASHED\_1="%d foo trashed."
COM\_FOO\_MANAGER\_FOOS="Foos"
COM\_FOOS\_FIELD\_PARAMS\_NAME\_LABEL="Show Name"

=== Changing components/com\_foos/View/Foo/HtmlView.php === The
`components/com_foos/View/Foo/HtmlView.php` file is .... ==== Completed
components/com\_foos/View/Foo/HtmlView.php file ==== The code for the
`components/com_foos/View/Foo/HtmlView.php` file is as follows:

=== Changing x === The `x` file is .... ==== Completed x file ==== The
code for the `x` file is as follows:

item = \$this-&gt;get('Item'); \$state = \$this-&gt;State =
\$this-&gt;get('State'); \$params = \$this-&gt;Params =
\$state-&gt;get('params'); \$itemparams = new
Registry(json\_decode(\$item-&gt;params)); \$temp = clone \$params;
\$temp-&gt;merge(\$itemparams); \$item-&gt;params = \$temp;
Factory::getApplication()-&gt;triggerEvent('onContentPrepare', array
('com\_foos.foo', &\$item)); // Store the events for later
\$item-&gt;event = new \\stdClass; \$results =
Factory::getApplication()-&gt;triggerEvent('onContentAfterTitle',
array('com\_foos.foo', &\$item, &\$item-&gt;params));
\$item-&gt;event-&gt;afterDisplayTitle = trim(implode("\\n",
\$results)); \$results =
Factory::getApplication()-&gt;triggerEvent('onContentBeforeDisplay',
array('com\_foos.foo', &\$item, &\$item-&gt;params));
\$item-&gt;event-&gt;beforeDisplayContent = trim(implode("\\n",
\$results)); \$results =
Factory::getApplication()-&gt;triggerEvent('onContentAfterDisplay',
array('com\_foos.foo', &\$item, &\$item-&gt;params));
\$item-&gt;event-&gt;afterDisplayContent = trim(implode("\\n",
\$results)); return parent::display(\$tpl); } }

=== Changing components/com\_foos/tmpl/foo/default.php === The
`components/com_foos/tmpl/foo/default.php` file is .... ==== Completed
components/com\_foos/tmpl/foo/default.php file ==== The code for the
`components/com_foos/tmpl/foo/default.php` file is as follows:

item-&gt;params-&gt;get('show\_name')) { if
(\$this-&gt;Params-&gt;get('show\_foo\_name\_label')) { echo
Text::\_('COM\_FOOS\_NAME') . \$this-&gt;item-&gt;name; } else { echo
\$this-&gt;item-&gt;name; } } echo
\$this-&gt;item-&gt;event-&gt;afterDisplayTitle; echo
\$this-&gt;item-&gt;event-&gt;beforeDisplayContent; echo
\$this-&gt;item-&gt;event-&gt;afterDisplayContent;

=== Creating
administrator/components/com\_foos/sql/updates/mysql/1.18.0.sql === The
`administrator/components/com_foos/sql/updates/mysql/1.18.0.sql` file is
.... ==== Completed
administrator/components/com\_foos/sql/updates/mysql/1.18.0.sql file
==== The code for the
`administrator/components/com_foos/sql/updates/mysql/1.18.0.sql` file is
as follows:

== Test your component == Now you can save a parameter of the options
separately for each item. \[\[File:as\_j4-t\_18\_1.png|700px\]\] ==
Example in Joomla! == == Component Contents == At this point in the
tutorial, your component should contain the following files: {| border=1
| 1 |
administrator/components/com\_foos/Controller/DisplayController.php |
this is the administrator entry point to the Foo component | unchanged
|- |1 |administrator/components/com\_foos/Extension/FoosComponent.php |
the interface BootableExtensionInterface where a component class can
load its internal class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 6 |
administrator/components/com\_foos/Model/FoosModel.php | this is the
model of the Foo component | new |- |1
|administrator/components/com\_foos/Service/HTML/AdministratorService.php
| the html service see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- |1
|administrator/components/com\_foos/View/Foos/HtmlView.php | file
representing the view in the back end | changed |- |1
|administrator/components/com\_foos/services/provider.php | the service
provider interface see https://github.com/joomla/joomla-cms/pull/20217 |
changed |- |6
|administrator/components/com\_foos/sql/install.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | new |- |6
|administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql |
During the install/uninstall/update phase of a component, you can
execute SQL queries through the use of this SQL text file | new |- |1
|administrator/components/com\_foos/tmpl/foos/default.php | the default
view in the back end | changed |- |1
|administrator/components/com\_foos/foos.xml |this is an XML (manifest)
file that tells Joomla! how to install our component. | changed |- |1
|administrator/components/com\_foos/script.php | the installer script |
unchanged |- |2 | components/com\_foos/Controller/DisplayController.php
| this is the frond end entry point to the Foo component | unchanged |-
|4 | components/com\_foos/Model/FooModel.php | this is the frond end
model for the Foo component | unchanged |- |2 |
components/com\_foos/View/Foo/HtmlView.php | file representing the view
in the frond end | unchanged |- |2 |
components/com\_foos/tmpl/foo/default.php | the default view in the
frond end | unchanged |- |3 | components/com\_foos/tmpl/foo/default.xml
| the xml for the menu item | unchanged |- |} == Conclusion == You now
have many different ways to save data in a component. In the next part,
we'll look at how you can organize them on different subpages:
Pagination. geändert:
src/administrator/components/com\_foos/View/Foos/HtmlView.php geändert:
src/administrator/components/com\_foos/tmpl/foos/default.php = Adding
Pagination - Part 19 = == Requirements == You need Joomla! 4.x for this
tutorial (as of writing currently Joomla! 4.0.0-alpha11-dev) == File
Structure == === Changing administrator/components/com\_foos/foos.xml
=== The `administrator/components/com_foos/foos.xml` file is .... ====
Completed administrator/components/com\_foos/foos.xml file ==== The code
for the `administrator/components/com_foos/foos.xml` file is as follows:

COM\_FOOS \[DATE\] \[AUTHOR\] \[AUTHOR\_EMAIL\] \[AUTHOR\_URL\]
\[COPYRIGHT\] GNU General Public License version 2 or later; 1.19.0
COM\_FOOS\_XML\_DESCRIPTION Joomla\\Component\\Foos script.php
sql/install.mysql.utf8.sql sql/uninstall.mysql.utf8.sql
sql/updates/mysql Controller Model View tmpl language js

COM\_FOOS

COM\_FOOS

JCATEGORY

access.xml config.xml foos.xml Controller Extension Model Rule Service
View services tmpl sql language

=== Changing administrator/components/com\_foos/View/Foos/HtmlView.php
=== The `administrator/components/com_foos/View/Foos/HtmlView.php` file
is .... ==== Completed
administrator/components/com\_foos/View/Foos/HtmlView.php file ==== The
code for the `administrator/components/com_foos/View/Foos/HtmlView.php`
file is as follows:

items = \$this-&gt;get('Items'); \$this-&gt;pagination =
\$this-&gt;get('Pagination'); \$this-&gt;filterForm =
\$this-&gt;get('FilterForm'); \$this-&gt;activeFilters =
\$this-&gt;get('ActiveFilters'); \$this-&gt;state =
\$this-&gt;get('State'); // Check for errors. if (count(\$errors =
\$this-&gt;get('Errors'))) { throw new
\\JViewGenericdataexception(implode("\\n", \$errors), 500); } //
Preprocess the list of items to find ordering divisions. // TODO:
Complete the ordering stuff with nested sets foreach (\$this-&gt;items
as &\$item) { \$item-&gt;order\_up = true; \$item-&gt;order\_dn = true;
} // We don't need toolbar in the modal window. if
(\$this-&gt;getLayout() !== 'modal') { FooHelper::addSubmenu('foos');
\$this-&gt;addToolbar(); \$this-&gt;sidebar = \\JHtmlSidebar::render();
// We do not need to filter by language when multilingual is disabled if
(!Multilanguage::isEnabled()) {
unset(\$this-&gt;activeFilters\['language'\]);
\$this-&gt;filterForm-&gt;removeField('language', 'filter'); } } else {
// In article associations modal we need to remove language filter if
forcing a language. // We also need to change the category filter to
show show categories with All or the forced language. if
(\$forcedLanguage =
Factory::getApplication()-&gt;input-&gt;get('forcedLanguage', '',
'CMD')) { // If the language is forced we can't allow to select the
language, so transform the language selector filter into a hidden field.
\$languageXml = new \\SimpleXMLElement('');
\$this-&gt;filterForm-&gt;setField(\$languageXml, 'filter', true); //
Also, unset the active language filter so the search tools is not open
by default with this filter.
unset(\$this-&gt;activeFilters\['language'\]); // One last changes
needed is to change the category filter to just show categories with All
language or with the forced language.
\$this-&gt;filterForm-&gt;setFieldAttribute('category\_id', 'language',
'\*,' . \$forcedLanguage, 'filter'); } } return parent::display(\$tpl);
} /\*\* \* Add the page title and toolbar. \* \* @return void \* \*
@since 1.0 \*/ protected function addToolbar() { \$canDo =
ContentHelper::getActions('com\_foos', 'category',
\$this-&gt;state-&gt;get('filter.category\_id')); \$user =
Factory::getUser(); // Get the toolbar object instance \$toolbar =
Toolbar::getInstance('toolbar');
ToolbarHelper::title(Text::\_('COM\_FOO\_MANAGER\_FOOS'), 'address
foos'); if (\$canDo-&gt;get('core.create') ||
count(\$user-&gt;getAuthorisedCategories('com\_foos', 'core.create'))
&gt; 0) { \$toolbar-&gt;addNew('foo.add'); } if
(\$canDo-&gt;get('core.edit.state')) { \$dropdown =
\$toolbar-&gt;dropdownButton('status-group')
-&gt;text('JTOOLBAR\_CHANGE\_STATUS') -&gt;toggleSplit(false)
-&gt;icon('fa fa-globe') -&gt;buttonClass('btn btn-info')
-&gt;listCheck(true); \$childBar = \$dropdown-&gt;getChildToolbar();
\$childBar-&gt;publish('foos.publish')-&gt;listCheck(true);
\$childBar-&gt;unpublish('foos.unpublish')-&gt;listCheck(true);
\$childBar-&gt;archive('foos.archive')-&gt;listCheck(true); if
(\$user-&gt;authorise('core.admin')) {
\$childBar-&gt;checkin('foos.checkin')-&gt;listCheck(true); } if
(\$this-&gt;state-&gt;get('filter.published') != -2) {
\$childBar-&gt;trash('foos.trash')-&gt;listCheck(true); } } if
(\$this-&gt;state-&gt;get('filter.published') == -2 &&
\$canDo-&gt;get('core.delete')) { \$toolbar-&gt;delete('foos.delete')
-&gt;text('JTOOLBAR\_EMPTY\_TRASH')
-&gt;message('JGLOBAL\_CONFIRM\_DELETE') -&gt;listCheck(true); } if
(\$user-&gt;authorise('core.admin', 'com\_foos') ||
\$user-&gt;authorise('core.options', 'com\_foos')) {
\$toolbar-&gt;preferences('com\_foos'); }
HTMLHelper::\_('sidebar.setAction', 'index.php?option=com\_foos'); }
/\*\* \* Returns an array of fields the table can be sorted by \* \*
@return array Array containing the field name to sort by as the key and
display text as value \* \* @since 1.0 \*/ protected function
getSortFields() { return array( 'a.ordering' =&gt;
Text::\_('JGRID\_HEADING\_ORDERING'), 'a.published' =&gt;
Text::\_('JSTATUS'), 'a.name' =&gt; Text::\_('JGLOBAL\_TITLE'),
'category\_title' =&gt; Text::\_('JCATEGORY'), 'a.access' =&gt;
Text::\_('JGRID\_HEADING\_ACCESS'), 'a.language' =&gt;
Text::\_('JGRID\_HEADING\_LANGUAGE'), 'a.id' =&gt;
Text::\_('JGRID\_HEADING\_ID'), ); } }

=== Changing administrator/components/com\_foos/tmpl/foos/default.php
=== The `administrator/components/com_foos/tmpl/foos/default.php` file
is .... ==== Completed
administrator/components/com\_foos/tmpl/foos/default.php file ==== The
code for the `administrator/components/com_foos/tmpl/foos/default.php`
file is as follows:

escape(\$this-&gt;state-&gt;get('list.ordering')); \$listDirn =
\$this-&gt;escape(\$this-&gt;state-&gt;get('list.direction'));
\$saveOrder = \$listOrder == 'a.ordering'; if (\$saveOrder &&
!empty(\$this-&gt;items)) { \$saveOrderingUrl =
'index.php?option=com\_foos&task=foos.saveOrderAjax&tmpl=component&' .
Session::getFormToken() . '=1'; } ?&gt;

<div class="row">

sidebar)) : ?&gt;
<div id="j-sidebar-container" class="col-md-2">

sidebar; ?&gt;

</div>

<div
class="<?php if (!empty($this->sidebar)) {echo 'col-md-10'; } else { echo 'col-md-12'; } ?>">

<div id="j-main-container" class="j-main-container">

\$this)); ?&gt;
items)) : ?&gt;
<div class="alert alert-warning">

</div>

,
items); foreach (\$this-&gt;items as \$i =&gt; \$item) : ?&gt;
[ []{.icon-menu aria-hidden="true"} ]{.sortable-handler<?php .echo
.$iconClass; .?>}
id); ?&gt;
<div>

escape(\$item-&gt;name); ?&gt;

</div>

escape(\$item-&gt;name); ?&gt;
<div class="small">

escape(\$item-&gt;category\_title); ?&gt;

</div>

access\_level; ?&gt;
association) : ?&gt;
id); ?&gt;
<div class="btn-group">

published, \$i, 'foos.', \$canChange, 'cb', \$item-&gt;publish\_up,
\$item-&gt;publish\_down); ?&gt;

</div>

id; ?&gt;
pagination-&gt;getListFooter(); ?&gt;

</div>

</div>

</div>

== Test your component == Now you see the page numbering in the lower
part of the backend and you can scroll through the pages.
\[\[File:as\_j4-t\_19\_1.png|700px\]\] == Example in Joomla! == ==
Component Contents == At this point in the tutorial, your component
should contain the following files: {| border=1 | 1 |
administrator/components/com\_foos/Controller/DisplayController.php |
this is the administrator entry point to the Foo component | unchanged
|- |1 |administrator/components/com\_foos/Extension/FoosComponent.php |
the interface BootableExtensionInterface where a component class can
load its internal class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 6 |
administrator/components/com\_foos/Model/FoosModel.php | this is the
model of the Foo component | new |- |1
|administrator/components/com\_foos/Service/HTML/AdministratorService.php
| the html service see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- |1
|administrator/components/com\_foos/View/Foos/HtmlView.php | file
representing the view in the back end | changed |- |1
|administrator/components/com\_foos/services/provider.php | the service
provider interface see https://github.com/joomla/joomla-cms/pull/20217 |
changed |- |6
|administrator/components/com\_foos/sql/install.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | new |- |6
|administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql |
During the install/uninstall/update phase of a component, you can
execute SQL queries through the use of this SQL text file | new |- |1
|administrator/components/com\_foos/tmpl/foos/default.php | the default
view in the back end | changed |- |1
|administrator/components/com\_foos/foos.xml |this is an XML (manifest)
file that tells Joomla! how to install our component. | changed |- |1
|administrator/components/com\_foos/script.php | the installer script |
unchanged |- |2 | components/com\_foos/Controller/DisplayController.php
| this is the frond end entry point to the Foo component | unchanged |-
|4 | components/com\_foos/Model/FooModel.php | this is the frond end
model for the Foo component | unchanged |- |2 |
components/com\_foos/View/Foo/HtmlView.php | file representing the view
in the frond end | unchanged |- |2 |
components/com\_foos/tmpl/foo/default.php | the default view in the
frond end | unchanged |- |3 | components/com\_foos/tmpl/foo/default.xml
| the xml for the menu item | unchanged |- |} == Conclusion == You see a
pagination in the lower part of the backend and you can scroll through
the pages. In the next chapter, we'll look at how to make the layout
consistent while also saving lines of code. = Adding a Layout - Part 20
= In this chapter, we'll look at how to make the layout consistent while
also saving lines of code. == Requirements == You need Joomla! 4.x for
this tutorial (as of writing currently Joomla! 4.0.0-alpha11-dev) ==
File Structure == === Changing
administrator/components/com\_foos/foos.xml === The
`administrator/components/com_foos/foos.xml` file is .... ==== Completed
administrator/components/com\_foos/foos.xml file ==== The code for the
`administrator/components/com_foos/foos.xml` file is as follows:

COM\_FOOS \[DATE\] \[AUTHOR\] \[AUTHOR\_EMAIL\] \[AUTHOR\_URL\]
\[COPYRIGHT\] GNU General Public License version 2 or later; 1.20.0
COM\_FOOS\_XML\_DESCRIPTION Joomla\\Component\\Foos script.php
sql/install.mysql.utf8.sql sql/uninstall.mysql.utf8.sql
sql/updates/mysql Controller Model View tmpl language js

COM\_FOOS

COM\_FOOS

JCATEGORY

access.xml config.xml foos.xml Controller Extension Model Rule Service
View services tmpl sql language

=== Changing administrator/components/com\_foos/forms/foo.xml === The
`administrator/components/com_foos/forms/foo.xml` file is .... ====
Completed administrator/components/com\_foos/forms/foo.xml file ==== The
code for the `administrator/components/com_foos/forms/foo.xml` file is
as follows:

JALL JPUBLISHED JUNPUBLISHED JARCHIVED JTRASHED

JHIDE JSHOW

=== Changing x === The `x` file is .... ==== Completed x file ==== The
code for the `x` file is as follows:

=== Changing
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini
=== The
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.sys.ini`
file is .... ==== Completed
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini
file ==== The code for the
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.sys.ini`
file is as follows:

COM\_FOOS="\[PROJECT\_NAME\]" COM\_FOOS\_XML\_DESCRIPTION="Foo
Component" COM\_FOOS\_INSTALLERSCRIPT\_PREFLIGHT="

Anything here happens before the installation/update/uninstallation of
the component

" COM\_FOOS\_INSTALLERSCRIPT\_UPDATE="

The component has been updated

" COM\_FOOS\_INSTALLERSCRIPT\_UNINSTALL="

The component has been uninstalled

" COM\_FOOS\_INSTALLERSCRIPT\_INSTALL="

The component has been installed

" COM\_FOOS\_INSTALLERSCRIPT\_POSTFLIGHT="

Anything here happens after the installation/update/uninstallation of
the component

" COM\_FOOS\_FOO\_VIEW\_DEFAULT\_TITLE="Single Foo"
COM\_FOOS\_FOO\_VIEW\_DEFAULT\_DESC="This links to the information for
one foo." COM\_FOOS\_SELECT\_FOO\_LABEL="Select a foo"
COM\_FOOS\_CHANGE\_FOO="Change a foo" COM\_FOOS\_SELECT\_A\_FOO="Select
a foo" COM\_FOOS\_FOO\_VIEW\_WITHHEAD\_TITLE="Single Foo with a
headertext" COM\_FOOS\_FOO\_VIEW\_WITHHEAD\_DESC="This links to the
information for one foo with a headertext."

=== Creating components/com\_foos/tmpl/foo/withhead.php === The
`components/com_foos/tmpl/foo/withhead.php` file is .... ==== Completed
components/com\_foos/tmpl/foo/withhead.php file ==== The code for the
`components/com_foos/tmpl/foo/withhead.php` file is as follows:

item-&gt;params-&gt;get('show\_name')) { if
(\$this-&gt;Params-&gt;get('show\_foo\_name\_label')) { echo
Text::\_('COM\_FOOS\_NAME') . \$this-&gt;item-&gt;name; } else { echo
\$this-&gt;item-&gt;name; } } echo
\$this-&gt;item-&gt;event-&gt;afterDisplayTitle; echo
\$this-&gt;item-&gt;event-&gt;beforeDisplayContent; echo
\$this-&gt;item-&gt;event-&gt;afterDisplayContent;

=== Creating components/com\_foos/tmpl/foo/withhead.xml === The
`components/com_foos/tmpl/foo/withhead.xml` file is .... ==== Completed
components/com\_foos/tmpl/foo/withhead.xml file ==== The code for the
`components/com_foos/tmpl/foo/withhead.xml` file is as follows:

COM\_FOOS\_FOO\_VIEW\_WITHHEAD\_DESC

== Test your component == == Example in Joomla! ==
\[\[File:componenttutorial20a.png|700px\]\] == Component Contents == At
this point in the tutorial, your component should contain the following
files: {| border=1 | 1 |
administrator/components/com\_foos/Controller/DisplayController.php |
this is the administrator entry point to the Foo component | unchanged
|- |1 |administrator/components/com\_foos/Extension/FoosComponent.php |
the interface BootableExtensionInterface where a component class can
load its internal class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 6 |
administrator/components/com\_foos/Model/FoosModel.php | this is the
model of the Foo component | new |- |1
|administrator/components/com\_foos/Service/HTML/AdministratorService.php
| the html service see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- |1
|administrator/components/com\_foos/View/Foos/HtmlView.php | file
representing the view in the back end | changed |- |1
|administrator/components/com\_foos/services/provider.php | the service
provider interface see https://github.com/joomla/joomla-cms/pull/20217 |
changed |- |6
|administrator/components/com\_foos/sql/install.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | new |- |6
|administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql |
During the install/uninstall/update phase of a component, you can
execute SQL queries through the use of this SQL text file | new |- |1
|administrator/components/com\_foos/tmpl/foos/default.php | the default
view in the back end | changed |- |1
|administrator/components/com\_foos/foos.xml |this is an XML (manifest)
file that tells Joomla! how to install our component. | changed |- |1
|administrator/components/com\_foos/script.php | the installer script |
unchanged |- |2 | components/com\_foos/Controller/DisplayController.php
| this is the frond end entry point to the Foo component | unchanged |-
|4 | components/com\_foos/Model/FooModel.php | this is the frond end
model for the Foo component | unchanged |- |2 |
components/com\_foos/View/Foo/HtmlView.php | file representing the view
in the frond end | unchanged |- |2 |
components/com\_foos/tmpl/foo/default.php | the default view in the
frond end | unchanged |- |3 | components/com\_foos/tmpl/foo/default.xml
| the xml for the menu item | unchanged |- |} == Conclusion == = Adding
Checkout - Part 21 = == Requirements == You need Joomla! 4.x for this
tutorial (as of writing currently Joomla! 4.0.0-alpha11-dev) == File
Structure == === Changing
administrator/components/com\_foos/Model/FoosModel.php === The
`administrator/components/com_foos/Model/FoosModel.php` file is ....
==== Completed administrator/components/com\_foos/Model/FoosModel.php
file ==== The code for the
`administrator/components/com_foos/Model/FoosModel.php` file is as
follows:

getDbo(); \$query = \$db-&gt;getQuery(true); // Select the required
fields from the table. \$query-&gt;select( \$this-&gt;getState(
'list.select', 'a.id AS id,' . 'a.name AS name,' . 'a.access,' .
'a.language,' . 'a.ordering AS ordering,' . 'a.checked\_out AS
checked\_out,' . 'a.checked\_out\_time AS checked\_out\_time,' .
'a.state AS state,' . 'a.catid AS catid,' . 'a.published AS published,'
. 'a.publish\_up,' . 'a.publish\_down' ) );
\$query-&gt;from(\$db-&gt;quoteName('\#\_\_foos\_details', 'a')); //
Join over the asset groups.
\$query-&gt;select(\$db-&gt;quoteName('ag.title', 'access\_level'))
-&gt;join( 'LEFT', \$db-&gt;quoteName('\#\_\_viewlevels', 'ag') . ' ON '
. \$db-&gt;quoteName('ag.id') . ' = ' . \$db-&gt;quoteName('a.access')
); // Join over the categories.
\$query-&gt;select(\$db-&gt;quoteName('c.title', 'category\_title'))
-&gt;join( 'LEFT', \$db-&gt;quoteName('\#\_\_categories', 'c') . ' ON '
. \$db-&gt;quoteName('c.id') . ' = ' . \$db-&gt;quoteName('a.catid') );
// Join over the language
\$query-&gt;select(\$db-&gt;quoteName('l.title', 'language\_title'))
-&gt;select(\$db-&gt;quoteName('l.image', 'language\_image')) -&gt;join(
'LEFT', \$db-&gt;quoteName('\#\_\_languages', 'l') . ' ON ' .
\$db-&gt;quoteName('l.lang\_code') . ' = ' .
\$db-&gt;quoteName('a.language') ); // Join over the associations.
\$assoc = Associations::isEnabled(); if (\$assoc) {
\$query-&gt;select('COUNT(' . \$db-&gt;quoteName('asso2.id') . ') &gt; 1
as ' . \$db-&gt;quoteName('association')) -&gt;join( 'LEFT',
\$db-&gt;quoteName('\#\_\_associations', 'asso') . ' ON ' .
\$db-&gt;quoteName('asso.id') . ' = ' . \$db-&gt;quoteName('a.id') . '
AND ' . \$db-&gt;quoteName('asso.context') . ' = ' .
\$db-&gt;quote('com\_foos.item') ) -&gt;join( 'LEFT',
\$db-&gt;quoteName('\#\_\_associations', 'asso2') . ' ON ' .
\$db-&gt;quoteName('asso2.key') . ' = ' . \$db-&gt;quoteName('asso.key')
) -&gt;group( \$db-&gt;quoteName( array( 'a.id', 'a.name', 'a.catid',
'a.checked\_out', 'a.checked\_out\_time', 'a.published', 'a.access',
'a.language', 'a.publish\_up', 'a.publish\_down', 'l.title' , 'l.image'
, 'ag.title' , 'c.title' ) ) ); } // Join over the users for the checked
out user. \$query-&gt;select(\$db-&gt;quoteName('uc.name', 'editor'))
-&gt;join( 'LEFT', \$db-&gt;quoteName('\#\_\_users', 'uc') . ' ON ' .
\$db-&gt;quoteName('uc.id') . ' = ' .
\$db-&gt;quoteName('a.checked\_out') ); // Filter by access level. if
(\$access = \$this-&gt;getState('filter.access')) {
\$query-&gt;where(\$db-&gt;quoteName('a.access') . ' = ' . (int)
\$access); } // Filter by published state \$published = (string)
\$this-&gt;getState('filter.published'); if (is\_numeric(\$published)) {
\$query-&gt;where(\$db-&gt;quoteName('a.published') . ' = ' . (int)
\$published); } elseif (\$published === '') { \$query-&gt;where('(' .
\$db-&gt;quoteName('a.published') . ' = 0 OR ' .
\$db-&gt;quoteName('a.published') . ' = 1)'); } // Filter by a single or
group of categories. \$categoryId =
\$this-&gt;getState('filter.category\_id'); if
(is\_numeric(\$categoryId)) {
\$query-&gt;where(\$db-&gt;quoteName('a.catid') . ' = ' . (int)
\$categoryId); } elseif (is\_array(\$categoryId)) {
\$query-&gt;where(\$db-&gt;quoteName('a.catid') . ' IN (' . implode(',',
ArrayHelper::toInteger(\$categoryId)) . ')'); } // Filter by search in
name. \$search = \$this-&gt;getState('filter.search'); if
(!empty(\$search)) { if (stripos(\$search, 'id:') === 0) {
\$query-&gt;where('a.id = ' . (int) substr(\$search, 3)); } else {
\$search = \$db-&gt;quote('%' . str\_replace(' ', '%',
\$db-&gt;escape(trim(\$search), true) . '%')); \$query-&gt;where( '(' .
\$db-&gt;quoteName('a.name') . ' LIKE ' . \$search . ')' ); } } //
Filter on the language. if (\$language =
\$this-&gt;getState('filter.language')) {
\$query-&gt;where(\$db-&gt;quoteName('a.language') . ' = ' .
\$db-&gt;quote(\$language)); } // Filter by a single tag. \$tagId =
\$this-&gt;getState('filter.tag'); if (is\_numeric(\$tagId)) {
\$query-&gt;where(\$db-&gt;quoteName('tagmap.tag\_id') . ' = ' . (int)
\$tagId) -&gt;join( 'LEFT',
\$db-&gt;quoteName('\#\_\_contentitem\_tag\_map', 'tagmap') . ' ON ' .
\$db-&gt;quoteName('tagmap.content\_item\_id') . ' = ' .
\$db-&gt;quoteName('a.id') . ' AND ' .
\$db-&gt;quoteName('tagmap.type\_alias') . ' = ' .
\$db-&gt;quote('com\_foos.contact') ); } // Filter on the level. if
(\$level = \$this-&gt;getState('filter.level')) {
\$query-&gt;where('c.level &lt;= ' . (int) \$level); } // Add the list
ordering clause. \$orderCol = \$this-&gt;state-&gt;get('list.ordering',
'a.name'); \$orderDirn = \$this-&gt;state-&gt;get('list.direction',
'asc'); if (\$orderCol == 'a.ordering' || \$orderCol ==
'category\_title') { \$orderCol = \$db-&gt;quoteName('c.title') . ' ' .
\$orderDirn . ', ' . \$db-&gt;quoteName('a.ordering'); }
\$query-&gt;order(\$db-&gt;escape(\$orderCol . ' ' . \$orderDirn));
return \$query; } /\*\* \* Method to auto-populate the model state. \*
\* Note. Calling getState in this method will result in recursion. \* \*
@param string \$ordering An optional ordering field. \* @param string
\$direction An optional direction (asc|desc). \* \* @return void \* \*
@since 1.0 \*/ protected function populateState(\$ordering = 'a.name',
\$direction = 'asc') { \$app = Factory::getApplication();
\$forcedLanguage = \$app-&gt;input-&gt;get('forcedLanguage', '', 'cmd');
// Adjust the context to support modal layouts. if (\$layout =
\$app-&gt;input-&gt;get('layout')) { \$this-&gt;context .= '.' .
\$layout; } // Adjust the context to support forced languages. if
(\$forcedLanguage) { \$this-&gt;context .= '.' . \$forcedLanguage; } //
List state information. parent::populateState(\$ordering, \$direction);
// Force a language. if (!empty(\$forcedLanguage)) {
\$this-&gt;setState('filter.language', \$forcedLanguage); } } }

=== Changing administrator/components/com\_foos/View/Foos/HtmlView.php
=== The `administrator/components/com_foos/View/Foos/HtmlView.php` file
is .... ==== Completed
administrator/components/com\_foos/View/Foos/HtmlView.php file ==== The
code for the `administrator/components/com_foos/View/Foos/HtmlView.php`
file is as follows:

items = \$this-&gt;get('Items'); \$this-&gt;pagination =
\$this-&gt;get('Pagination'); \$this-&gt;filterForm =
\$this-&gt;get('FilterForm'); \$this-&gt;activeFilters =
\$this-&gt;get('ActiveFilters'); \$this-&gt;state =
\$this-&gt;get('State'); // Check for errors. if (count(\$errors =
\$this-&gt;get('Errors'))) { throw new
\\JViewGenericdataexception(implode("\\n", \$errors), 500); } //
Preprocess the list of items to find ordering divisions. // TODO:
Complete the ordering stuff with nested sets foreach (\$this-&gt;items
as &\$item) { \$item-&gt;order\_up = true; \$item-&gt;order\_dn = true;
} // We don't need toolbar in the modal window. if
(\$this-&gt;getLayout() !== 'modal') { FooHelper::addSubmenu('foos');
\$this-&gt;addToolbar(); \$this-&gt;sidebar = \\JHtmlSidebar::render();
// We do not need to filter by language when multilingual is disabled if
(!Multilanguage::isEnabled()) {
unset(\$this-&gt;activeFilters\['language'\]);
\$this-&gt;filterForm-&gt;removeField('language', 'filter'); } } else {
// In article associations modal we need to remove language filter if
forcing a language. // We also need to change the category filter to
show show categories with All or the forced language. if
(\$forcedLanguage =
Factory::getApplication()-&gt;input-&gt;get('forcedLanguage', '',
'CMD')) { // If the language is forced we can't allow to select the
language, so transform the language selector filter into a hidden field.
\$languageXml = new \\SimpleXMLElement('');
\$this-&gt;filterForm-&gt;setField(\$languageXml, 'filter', true); //
Also, unset the active language filter so the search tools is not open
by default with this filter.
unset(\$this-&gt;activeFilters\['language'\]); // One last changes
needed is to change the category filter to just show categories with All
language or with the forced language.
\$this-&gt;filterForm-&gt;setFieldAttribute('category\_id', 'language',
'\*,' . \$forcedLanguage, 'filter'); } } return parent::display(\$tpl);
} /\*\* \* Add the page title and toolbar. \* \* @return void \* \*
@since 1.0 \*/ protected function addToolbar() { \$canDo =
ContentHelper::getActions('com\_foos', 'category',
\$this-&gt;state-&gt;get('filter.category\_id')); \$user =
Factory::getUser(); // Get the toolbar object instance \$toolbar =
Toolbar::getInstance('toolbar');
ToolbarHelper::title(Text::\_('COM\_FOO\_MANAGER\_FOOS'), 'address
foos'); if (\$canDo-&gt;get('core.create') ||
count(\$user-&gt;getAuthorisedCategories('com\_foos', 'core.create'))
&gt; 0) { \$toolbar-&gt;addNew('foo.add'); } if
(\$canDo-&gt;get('core.edit.state')) { \$dropdown =
\$toolbar-&gt;dropdownButton('status-group')
-&gt;text('JTOOLBAR\_CHANGE\_STATUS') -&gt;toggleSplit(false)
-&gt;icon('fa fa-globe') -&gt;buttonClass('btn btn-info')
-&gt;listCheck(true); \$childBar = \$dropdown-&gt;getChildToolbar();
\$childBar-&gt;publish('foos.publish')-&gt;listCheck(true);
\$childBar-&gt;unpublish('foos.unpublish')-&gt;listCheck(true);
\$childBar-&gt;archive('foos.archive')-&gt;listCheck(true); if
(\$user-&gt;authorise('core.admin')) {
\$childBar-&gt;checkin('foos.checkin')-&gt;listCheck(true); } if
(\$this-&gt;state-&gt;get('filter.published') != -2) {
\$childBar-&gt;trash('foos.trash')-&gt;listCheck(true); } } if
(\$this-&gt;state-&gt;get('filter.published') == -2 &&
\$canDo-&gt;get('core.delete')) { \$toolbar-&gt;delete('foos.delete')
-&gt;text('JTOOLBAR\_EMPTY\_TRASH')
-&gt;message('JGLOBAL\_CONFIRM\_DELETE') -&gt;listCheck(true); } if
(\$user-&gt;authorise('core.admin', 'com\_foos') ||
\$user-&gt;authorise('core.options', 'com\_foos')) {
\$toolbar-&gt;preferences('com\_foos'); }
HTMLHelper::\_('sidebar.setAction', 'index.php?option=com\_foos'); }
/\*\* \* Returns an array of fields the table can be sorted by \* \*
@return array Array containing the field name to sort by as the key and
display text as value \* \* @since 1.0 \*/ protected function
getSortFields() { return array( 'a.ordering' =&gt;
Text::\_('JGRID\_HEADING\_ORDERING'), 'a.published' =&gt;
Text::\_('JSTATUS'), 'a.name' =&gt; Text::\_('JGLOBAL\_TITLE'),
'category\_title' =&gt; Text::\_('JCATEGORY'), 'a.access' =&gt;
Text::\_('JGRID\_HEADING\_ACCESS'), 'a.language' =&gt;
Text::\_('JGRID\_HEADING\_LANGUAGE'), 'a.id' =&gt;
Text::\_('JGRID\_HEADING\_ID'), ); } }

=== Changing administrator/components/com\_foos/foos.xml === The
`administrator/components/com_foos/foos.xml` file is .... ==== Completed
administrator/components/com\_foos/foos.xml file ==== The code for the
`administrator/components/com_foos/foos.xml` file is as follows:

COM\_FOOS \[DATE\] \[AUTHOR\] \[AUTHOR\_EMAIL\] \[AUTHOR\_URL\]
\[COPYRIGHT\] GNU General Public License version 2 or later; 1.21.0
COM\_FOOS\_XML\_DESCRIPTION Joomla\\Component\\Foos script.php
sql/install.mysql.utf8.sql sql/uninstall.mysql.utf8.sql
sql/updates/mysql Controller Model View tmpl language js

COM\_FOOS

COM\_FOOS

JCATEGORY

access.xml config.xml foos.xml Controller Extension Model Rule Service
View services tmpl sql language

=== Changing administrator/components/com\_foos/forms/foo.xml === The
`administrator/components/com_foos/forms/foo.xml` file is .... ====
Completed administrator/components/com\_foos/forms/foo.xml file ==== The
code for the `administrator/components/com_foos/forms/foo.xml` file is
as follows:

JALL JPUBLISHED JUNPUBLISHED JARCHIVED JTRASHED

JHIDE JSHOW

=== Changing administrator/components/com\_foos/tmpl/foos/default.php
=== The `administrator/components/com_foos/tmpl/foos/default.php` file
is .... ==== Completed
administrator/components/com\_foos/tmpl/foos/default.php file ==== The
code for the `administrator/components/com_foos/tmpl/foos/default.php`
file is as follows:

escape(\$this-&gt;state-&gt;get('list.ordering')); \$listDirn =
\$this-&gt;escape(\$this-&gt;state-&gt;get('list.direction'));
\$saveOrder = \$listOrder == 'a.ordering'; if (\$saveOrder &&
!empty(\$this-&gt;items)) { \$saveOrderingUrl =
'index.php?option=com\_foos&task=foos.saveOrderAjax&tmpl=component&' .
Session::getFormToken() . '=1'; } ?&gt;

<div class="row">

sidebar)) : ?&gt;
<div id="j-sidebar-container" class="col-md-2">

sidebar; ?&gt;

</div>

<div
class="<?php if (!empty($this->sidebar)) {echo 'col-md-10'; } else { echo 'col-md-12'; } ?>">

<div id="j-main-container" class="j-main-container">

\$this)); ?&gt;
items)) : ?&gt;
<div class="alert alert-warning">

</div>

,
items); foreach (\$this-&gt;items as \$i =&gt; \$item) : ?&gt;
[ []{.icon-menu aria-hidden="true"} ]{.sortable-handler<?php .echo
.$iconClass; .?>}
id); ?&gt;
checked\_out) : ?&gt;
editor, \$item-&gt;checked\_out\_time, 'foos.', true); ?&gt;
<div>

escape(\$item-&gt;name); ?&gt;

</div>

escape(\$item-&gt;name); ?&gt;
<div class="small">

escape(\$item-&gt;category\_title); ?&gt;

</div>

access\_level; ?&gt;
association) : ?&gt;
id); ?&gt;
<div class="btn-group">

published, \$i, 'foos.', \$canChange, 'cb', \$item-&gt;publish\_up,
\$item-&gt;publish\_down); ?&gt;

</div>

id; ?&gt;
pagination-&gt;getListFooter(); ?&gt;

</div>

</div>

</div>

=== Changing
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini
=== The
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.ini`
file is .... ==== Completed
administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini
file ==== The code for the
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.ini`
file is as follows:

COM\_FOOS="\[PROJECT\_NAME\]" COM\_FOOS\_CONFIGURATION="Foo Options"
COM\_FOOS\_MANAGER\_FOO\_NEW="New" COM\_FOOS\_MANAGER\_FOO\_EDIT="Edit"
COM\_FOOS\_MANAGER\_FOOS="Foo Manager"
COM\_FOOS\_TABLE\_TABLEHEAD\_NAME="Name"
COM\_FOOS\_TABLE\_TABLEHEAD\_ID="ID"
COM\_FOOS\_ERROR\_FOO\_NOT\_FOUND="Foo not found"
COM\_FOOS\_FIELD\_NAME\_LABEL="Name"
COM\_FOOS\_FIELD\_FOO\_SHOW\_CATEGORY\_LABEL="Show name label"
COM\_FOOS\_FIELD\_CONFIG\_INDIVIDUAL\_FOO\_DESC="These settings apply
for all foo." COM\_FOOS\_FIELD\_CONFIG\_INDIVIDUAL\_FOO\_DISPLAY="Foo"
COM\_FOOS\_FIELD\_PUBLISH\_DOWN\_LABEL="Finish Publishing"
COM\_FOOS\_FIELD\_PUBLISH\_UP\_LABEL="Start Publishing"
COM\_FOOS\_N\_ITEMS\_ARCHIVED="%s foos archived."
COM\_FOOS\_N\_ITEMS\_ARCHIVED\_1="%s foo archived."
COM\_FOOS\_N\_ITEMS\_CHECKED\_IN\_1="%d foo checked in."
COM\_FOOS\_N\_ITEMS\_CHECKED\_IN\_MORE="%d foos checked in."
COM\_FOOS\_N\_ITEMS\_DELETED="%s foos deleted."
COM\_FOOS\_N\_ITEMS\_DELETED\_1="%s foo deleted."
COM\_FOOS\_N\_ITEMS\_FEATURED="%s foos featured."
COM\_FOOS\_N\_ITEMS\_FEATURED\_1="%s foo featured."
COM\_FOOS\_N\_ITEMS\_PUBLISHED="%s foos published."
COM\_FOOS\_N\_ITEMS\_PUBLISHED\_1="%s foo published."
COM\_FOOS\_N\_ITEMS\_TRASHED="%s foos trashed."
COM\_FOOS\_N\_ITEMS\_TRASHED\_1="%s foo trashed."
COM\_FOOS\_N\_ITEMS\_UNFEATURED="%s foos unfeatured."
COM\_FOOS\_N\_ITEMS\_UNFEATURED\_1="%s foo unfeatured."
COM\_FOOS\_N\_ITEMS\_UNPUBLISHED="%s foos unpublished."
COM\_FOOS\_N\_ITEMS\_UNPUBLISHED\_1="%s foo unpublished."
COM\_FOOS\_FOOS\_FIELD\_PUBLISH\_DOWN\_LABEL="Finish Publishing"
COM\_FOOS\_FOOS\_FIELD\_PUBLISH\_UP\_LABEL="Start Publishing"
COM\_FOOS\_FOOS\_N\_ITEMS\_ARCHIVED="%s foos archived."
COM\_FOOS\_FOOS\_N\_ITEMS\_ARCHIVED\_1="%s foo archived."
COM\_FOOS\_FOOS\_N\_ITEMS\_CHECKED\_IN\_1="%d foo checked in."
COM\_FOOS\_FOOS\_N\_ITEMS\_CHECKED\_IN\_MORE="%d foos checked in."
COM\_FOOS\_FOOS\_N\_ITEMS\_DELETED="%s foos deleted."
COM\_FOOS\_FOOS\_N\_ITEMS\_DELETED\_1="%s foo deleted."
COM\_FOOS\_FOOS\_N\_ITEMS\_FEATURED="%s foos featured."
COM\_FOOS\_FOOS\_N\_ITEMS\_FEATURED\_1="%s foo featured."
COM\_FOOS\_FOOS\_N\_ITEMS\_PUBLISHED="%s foos published."
COM\_FOOS\_FOOS\_N\_ITEMS\_PUBLISHED\_1="%s foo published."
COM\_FOOS\_FOOS\_N\_ITEMS\_TRASHED="%s foos trashed."
COM\_FOOS\_FOOS\_N\_ITEMS\_TRASHED\_1="%s foo trashed."
COM\_FOOS\_FOOS\_N\_ITEMS\_UNFEATURED="%s foos unfeatured."
COM\_FOOS\_FOOS\_N\_ITEMS\_UNFEATURED\_1="%s foo unfeatured."
COM\_FOOS\_FOOS\_N\_ITEMS\_UNPUBLISHED="%s foos unpublished."
COM\_FOOS\_FOOS\_N\_ITEMS\_UNPUBLISHED\_1="%s foo unpublished."
COM\_FOOS\_EDIT\_FOO="Edit Foo" COM\_FOOS\_NEW\_FOO="New Foo"
COM\_FOOS\_HEADING\_ASSOCIATION="Association"
COM\_FOOS\_CHANGE\_FOO="Change a foo" COM\_FOOS\_SELECT\_A\_FOO="Select
a foo" COM\_FOOS\_TABLE\_CAPTION="Foo Table Caption"
COM\_FOOS\_N\_ITEMS\_ARCHIVED="%d foos archived."
COM\_FOOS\_N\_ITEMS\_ARCHIVED\_1="%d foo archived."
COM\_FOOS\_N\_ITEMS\_DELETED="%d foos deleted."
COM\_FOOS\_N\_ITEMS\_DELETED\_1="%d foo deleted."
COM\_FOOS\_N\_ITEMS\_TRASHED="%d foos trashed."
COM\_FOOS\_N\_ITEMS\_TRASHED\_1="%d foo trashed."
COM\_FOO\_MANAGER\_FOOS="Foos"
COM\_FOOS\_FIELD\_PARAMS\_NAME\_LABEL="Show Name"

=== Creating
/administrator/components/com\_foos/sql/updates/mysql/1.21.0.sql === The
`/administrator/components/com_foos/sql/updates/mysql/1.21.0.sql` file
is .... ==== Completed
/administrator/components/com\_foos/sql/updates/mysql/1.21.0.sql file
==== The code for the
`/administrator/components/com_foos/sql/updates/mysql/1.21.0.sql` file
is as follows:

ALTER TABLE \`\#\_\_foos\_details\` ADD COLUMN \`checked\_out\` int(10)
unsigned NOT NULL DEFAULT 0 AFTER \`alias\`; ALTER TABLE
\`\#\_\_foos\_details\` ADD COLUMN \`checked\_out\_time\` datetime NOT
NULL DEFAULT '0000-00-00 00:00:00' AFTER \`alias\`;

== Test your component == If two users edit an item at the same time, it
could lead to overlapping and thus data loss. Therefore, we block the
entry as long as it is being edited by a user. The sign is the lock.
\[\[File:as\_j4\_t\_21\_1.png|700px\]\] == Example in Joomla! == ==
Component Contents == At this point in the tutorial, your component
should contain the following files: {| border=1 | 1 |
administrator/components/com\_foos/Controller/DisplayController.php |
this is the administrator entry point to the Foo component | unchanged
|- |1 |administrator/components/com\_foos/Extension/FoosComponent.php |
the interface BootableExtensionInterface where a component class can
load its internal class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 6 |
administrator/components/com\_foos/Model/FoosModel.php | this is the
model of the Foo component | new |- |1
|administrator/components/com\_foos/Service/HTML/AdministratorService.php
| the html service see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- |1
|administrator/components/com\_foos/View/Foos/HtmlView.php | file
representing the view in the back end | changed |- |1
|administrator/components/com\_foos/services/provider.php | the service
provider interface see https://github.com/joomla/joomla-cms/pull/20217 |
changed |- |6
|administrator/components/com\_foos/sql/install.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | new |- |6
|administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql |
During the install/uninstall/update phase of a component, you can
execute SQL queries through the use of this SQL text file | new |- |1
|administrator/components/com\_foos/tmpl/foos/default.php | the default
view in the back end | changed |- |1
|administrator/components/com\_foos/foos.xml |this is an XML (manifest)
file that tells Joomla! how to install our component. | changed |- |1
|administrator/components/com\_foos/script.php | the installer script |
unchanged |- |2 | components/com\_foos/Controller/DisplayController.php
| this is the frond end entry point to the Foo component | unchanged |-
|4 | components/com\_foos/Model/FooModel.php | this is the frond end
model for the Foo component | unchanged |- |2 |
components/com\_foos/View/Foo/HtmlView.php | file representing the view
in the frond end | unchanged |- |2 |
components/com\_foos/tmpl/foo/default.php | the default view in the
frond end | unchanged |- |3 | components/com\_foos/tmpl/foo/default.xml
| the xml for the menu item | unchanged |- |} == Conclusion == In this
chapter, we have made sure that the data is processed more securely.
Next, we'll look at how we can edit a lot of data in one fell swoop. =
Adding a batch process and alias - Part 22 = In this chapter we'll look
at how we can edit a lot of data in one fell swoop. == Requirements ==
You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev) == File Structure == === Changing
administrator/components/com\_foos/Controller/FooController.php === The
`administrator/components/com_foos/Controller/FooController.php` file is
.... ==== Completed
administrator/components/com\_foos/Controller/FooController.php file
==== The code for the
`administrator/components/com_foos/Controller/FooController.php` file is
as follows:

checkToken(); \$model = \$this-&gt;getModel('Foo', 'Administrator',
array()); // Preset the redirect
\$this-&gt;setRedirect(Route::\_('index.php?option=com\_foos&view=foos'
. \$this-&gt;getRedirectToListAppend(), false)); return
parent::batch(\$model); } }

=== Changing administrator/components/com\_foos/Model/FooModel.php ===
The `administrator/components/com_foos/Model/FooModel.php` file is ....
==== Completed administrator/components/com\_foos/Model/FooModel.php
file ==== The code for the
`administrator/components/com_foos/Model/FooModel.php` file is as
follows:

'batchAccess', 'language\_id' =&gt; 'batchLanguage', ); /\*\* \* Method
to get the row form. \* \* @param array \$data Data for the form. \*
@param boolean \$loadData True if the form is to load its own data
(default case), false if not. \* \* @return \\JForm|boolean A \\JForm
object on success, false on failure \* \* @since 1.0 \*/ public function
getForm(\$data = array(), \$loadData = true) { // Get the form. \$form =
\$this-&gt;loadForm('com\_foos.foo', 'foo', array('control' =&gt;
'jform', 'load\_data' =&gt; \$loadData)); if (empty(\$form)) { return
false; } return \$form; } /\*\* \* Method to get the data that should be
injected in the form. \* \* @return mixed The data for the form. \* \*
@since 1.0 \*/ protected function loadFormData() { \$app =
Factory::getApplication(); \$data = \$this-&gt;getItem();
\$this-&gt;preprocessData('com\_foos.foo', \$data); return \$data; }
/\*\* \* Method to get a single record. \* \* @param integer \$pk The id
of the primary key. \* \* @return mixed Object on success, false on
failure. \* \* @since 1.0 \*/ public function getItem(\$pk = null) {
\$item = parent::getItem(\$pk); // Load associated foo items \$assoc =
Associations::isEnabled(); if (\$assoc) { \$item-&gt;associations =
array(); if (\$item-&gt;id != null) { \$associations =
Associations::getAssociations('com\_foos', '\#\_\_foos\_details',
'com\_foos.item', \$item-&gt;id, 'id', null); foreach (\$associations as
\$tag =&gt; \$association) { \$item-&gt;associations\[\$tag\] =
\$association-&gt;id; } } } return \$item; } /\*\* \* Preprocess the
form. \* \* @param \\JForm \$form Form object. \* @param object \$data
Data object. \* @param string \$group Group name. \* \* @return void \*
\* @since 1.0 \*/ protected function preprocessForm(\\JForm \$form,
\$data, \$group = 'content') { if (Associations::isEnabled()) {
\$languages = LanguageHelper::getContentLanguages(false, true, null,
'ordering', 'asc'); if (count(\$languages) &gt; 1) { \$addform = new
\\SimpleXMLElement('

'); \$fields = \$addform-&gt;addChild('fields');
\$fields-&gt;addAttribute('name', 'associations'); \$fieldset =
\$fields-&gt;addChild('fieldset'); \$fieldset-&gt;addAttribute('name',
'item\_associations'); foreach (\$languages as \$language) { \$field =
\$fieldset-&gt;addChild('field'); \$field-&gt;addAttribute('name',
\$language-&gt;lang\_code); \$field-&gt;addAttribute('type',
'modal\_foo'); \$field-&gt;addAttribute('language',
\$language-&gt;lang\_code); \$field-&gt;addAttribute('label',
\$language-&gt;title); \$field-&gt;addAttribute('translate\_label',
'false'); \$field-&gt;addAttribute('select', 'true');
\$field-&gt;addAttribute('new', 'true');
\$field-&gt;addAttribute('edit', 'true');
\$field-&gt;addAttribute('clear', 'true'); } \$form-&gt;load(\$addform,
false); } } parent::preprocessForm(\$form, \$data, \$group); } }

=== Changing administrator/components/com\_foos/Model/FoosModel.php ===
The `administrator/components/com_foos/Model/FoosModel.php` file is ....
==== Completed administrator/components/com\_foos/Model/FoosModel.php
file ==== The code for the
`administrator/components/com_foos/Model/FoosModel.php` file is as
follows:

getDbo(); \$query = \$db-&gt;getQuery(true); // Select the required
fields from the table. \$query-&gt;select( \$this-&gt;getState(
'list.select', 'a.id AS id,' . 'a.name AS name,' . 'a.access,' .
'a.language,' . 'a.ordering AS ordering,' . 'a.checked\_out AS
checked\_out,' . 'a.checked\_out\_time AS checked\_out\_time,' .
'a.state AS state,' . 'a.catid AS catid,' . 'a.published AS published,'
. 'a.publish\_up,' . 'a.publish\_down' ) );
\$query-&gt;from(\$db-&gt;quoteName('\#\_\_foos\_details', 'a')); //
Join over the asset groups.
\$query-&gt;select(\$db-&gt;quoteName('ag.title', 'access\_level'))
-&gt;join( 'LEFT', \$db-&gt;quoteName('\#\_\_viewlevels', 'ag') . ' ON '
. \$db-&gt;quoteName('ag.id') . ' = ' . \$db-&gt;quoteName('a.access')
); // Join over the categories.
\$query-&gt;select(\$db-&gt;quoteName('c.title', 'category\_title'))
-&gt;join( 'LEFT', \$db-&gt;quoteName('\#\_\_categories', 'c') . ' ON '
. \$db-&gt;quoteName('c.id') . ' = ' . \$db-&gt;quoteName('a.catid') );
// Join over the language
\$query-&gt;select(\$db-&gt;quoteName('l.title', 'language\_title'))
-&gt;select(\$db-&gt;quoteName('l.image', 'language\_image')) -&gt;join(
'LEFT', \$db-&gt;quoteName('\#\_\_languages', 'l') . ' ON ' .
\$db-&gt;quoteName('l.lang\_code') . ' = ' .
\$db-&gt;quoteName('a.language') ); // Join over the associations.
\$assoc = Associations::isEnabled(); if (\$assoc) {
\$query-&gt;select('COUNT(' . \$db-&gt;quoteName('asso2.id') . ') &gt; 1
as ' . \$db-&gt;quoteName('association')) -&gt;join( 'LEFT',
\$db-&gt;quoteName('\#\_\_associations', 'asso') . ' ON ' .
\$db-&gt;quoteName('asso.id') . ' = ' . \$db-&gt;quoteName('a.id') . '
AND ' . \$db-&gt;quoteName('asso.context') . ' = ' .
\$db-&gt;quote('com\_foos.item') ) -&gt;join( 'LEFT',
\$db-&gt;quoteName('\#\_\_associations', 'asso2') . ' ON ' .
\$db-&gt;quoteName('asso2.key') . ' = ' . \$db-&gt;quoteName('asso.key')
) -&gt;group( \$db-&gt;quoteName( array( 'a.id', 'a.name', 'a.alias',
'a.catid', 'a.checked\_out', 'a.checked\_out\_time', 'a.published',
'a.access', 'a.language', 'a.publish\_up', 'a.publish\_down', 'l.title'
, 'l.image' , 'ag.title' , 'c.title' ) ) ); } // Join over the users for
the checked out user. \$query-&gt;select(\$db-&gt;quoteName('uc.name',
'editor')) -&gt;join( 'LEFT', \$db-&gt;quoteName('\#\_\_users', 'uc') .
' ON ' . \$db-&gt;quoteName('uc.id') . ' = ' .
\$db-&gt;quoteName('a.checked\_out') ); // Filter by access level. if
(\$access = \$this-&gt;getState('filter.access')) {
\$query-&gt;where(\$db-&gt;quoteName('a.access') . ' = ' . (int)
\$access); } // Filter by published state \$published = (string)
\$this-&gt;getState('filter.published'); if (is\_numeric(\$published)) {
\$query-&gt;where(\$db-&gt;quoteName('a.published') . ' = ' . (int)
\$published); } elseif (\$published === '') { \$query-&gt;where('(' .
\$db-&gt;quoteName('a.published') . ' = 0 OR ' .
\$db-&gt;quoteName('a.published') . ' = 1)'); } // Filter by a single or
group of categories. \$categoryId =
\$this-&gt;getState('filter.category\_id'); if
(is\_numeric(\$categoryId)) {
\$query-&gt;where(\$db-&gt;quoteName('a.catid') . ' = ' . (int)
\$categoryId); } elseif (is\_array(\$categoryId)) {
\$query-&gt;where(\$db-&gt;quoteName('a.catid') . ' IN (' . implode(',',
ArrayHelper::toInteger(\$categoryId)) . ')'); } // Filter by search in
name. \$search = \$this-&gt;getState('filter.search'); if
(!empty(\$search)) { if (stripos(\$search, 'id:') === 0) {
\$query-&gt;where('a.id = ' . (int) substr(\$search, 3)); } else {
\$search = \$db-&gt;quote('%' . str\_replace(' ', '%',
\$db-&gt;escape(trim(\$search), true) . '%')); \$query-&gt;where( '(' .
\$db-&gt;quoteName('a.name') . ' LIKE ' . \$search . ')' ); } } //
Filter on the language. if (\$language =
\$this-&gt;getState('filter.language')) {
\$query-&gt;where(\$db-&gt;quoteName('a.language') . ' = ' .
\$db-&gt;quote(\$language)); } // Filter by a single tag. \$tagId =
\$this-&gt;getState('filter.tag'); if (is\_numeric(\$tagId)) {
\$query-&gt;where(\$db-&gt;quoteName('tagmap.tag\_id') . ' = ' . (int)
\$tagId) -&gt;join( 'LEFT',
\$db-&gt;quoteName('\#\_\_contentitem\_tag\_map', 'tagmap') . ' ON ' .
\$db-&gt;quoteName('tagmap.content\_item\_id') . ' = ' .
\$db-&gt;quoteName('a.id') . ' AND ' .
\$db-&gt;quoteName('tagmap.type\_alias') . ' = ' .
\$db-&gt;quote('com\_foos.contact') ); } // Filter on the level. if
(\$level = \$this-&gt;getState('filter.level')) {
\$query-&gt;where('c.level &lt;= ' . (int) \$level); } // Add the list
ordering clause. \$orderCol = \$this-&gt;state-&gt;get('list.ordering',
'a.name'); \$orderDirn = \$this-&gt;state-&gt;get('list.direction',
'asc'); if (\$orderCol == 'a.ordering' || \$orderCol ==
'category\_title') { \$orderCol = \$db-&gt;quoteName('c.title') . ' ' .
\$orderDirn . ', ' . \$db-&gt;quoteName('a.ordering'); }
\$query-&gt;order(\$db-&gt;escape(\$orderCol . ' ' . \$orderDirn));
return \$query; } /\*\* \* Method to auto-populate the model state. \*
\* Note. Calling getState in this method will result in recursion. \* \*
@param string \$ordering An optional ordering field. \* @param string
\$direction An optional direction (asc|desc). \* \* @return void \* \*
@since 1.0 \*/ protected function populateState(\$ordering = 'a.name',
\$direction = 'asc') { \$app = Factory::getApplication();
\$forcedLanguage = \$app-&gt;input-&gt;get('forcedLanguage', '', 'cmd');
// Adjust the context to support modal layouts. if (\$layout =
\$app-&gt;input-&gt;get('layout')) { \$this-&gt;context .= '.' .
\$layout; } // Adjust the context to support forced languages. if
(\$forcedLanguage) { \$this-&gt;context .= '.' . \$forcedLanguage; } //
List state information. parent::populateState(\$ordering, \$direction);
// Force a language. if (!empty(\$forcedLanguage)) {
\$this-&gt;setState('filter.language', \$forcedLanguage); } } }

=== Changing administrator/components/com\_foos/View/Foos/HtmlView.php
=== The `administrator/components/com_foos/View/Foos/HtmlView.php` file
is .... ==== Completed
administrator/components/com\_foos/View/Foos/HtmlView.php file ==== The
code for the `administrator/components/com_foos/View/Foos/HtmlView.php`
file is as follows:

items = \$this-&gt;get('Items'); \$this-&gt;pagination =
\$this-&gt;get('Pagination'); \$this-&gt;filterForm =
\$this-&gt;get('FilterForm'); \$this-&gt;activeFilters =
\$this-&gt;get('ActiveFilters'); \$this-&gt;state =
\$this-&gt;get('State'); // Check for errors. if (count(\$errors =
\$this-&gt;get('Errors'))) { throw new
\\JViewGenericdataexception(implode("\\n", \$errors), 500); } //
Preprocess the list of items to find ordering divisions. // TODO:
Complete the ordering stuff with nested sets foreach (\$this-&gt;items
as &\$item) { \$item-&gt;order\_up = true; \$item-&gt;order\_dn = true;
} // We don't need toolbar in the modal window. if
(\$this-&gt;getLayout() !== 'modal') { FooHelper::addSubmenu('foos');
\$this-&gt;addToolbar(); \$this-&gt;sidebar = \\JHtmlSidebar::render();
// We do not need to filter by language when multilingual is disabled if
(!Multilanguage::isEnabled()) {
unset(\$this-&gt;activeFilters\['language'\]);
\$this-&gt;filterForm-&gt;removeField('language', 'filter'); } } else {
// In article associations modal we need to remove language filter if
forcing a language. // We also need to change the category filter to
show show categories with All or the forced language. if
(\$forcedLanguage =
Factory::getApplication()-&gt;input-&gt;get('forcedLanguage', '',
'CMD')) { // If the language is forced we can't allow to select the
language, so transform the language selector filter into a hidden field.
\$languageXml = new \\SimpleXMLElement('');
\$this-&gt;filterForm-&gt;setField(\$languageXml, 'filter', true); //
Also, unset the active language filter so the search tools is not open
by default with this filter.
unset(\$this-&gt;activeFilters\['language'\]); // One last changes
needed is to change the category filter to just show categories with All
language or with the forced language.
\$this-&gt;filterForm-&gt;setFieldAttribute('category\_id', 'language',
'\*,' . \$forcedLanguage, 'filter'); } } return parent::display(\$tpl);
} /\*\* \* Add the page title and toolbar. \* \* @return void \* \*
@since 1.0 \*/ protected function addToolbar() { \$canDo =
ContentHelper::getActions('com\_foos', 'category',
\$this-&gt;state-&gt;get('filter.category\_id')); \$user =
Factory::getUser(); // Get the toolbar object instance \$toolbar =
Toolbar::getInstance('toolbar');
ToolbarHelper::title(Text::\_('COM\_FOO\_MANAGER\_FOOS'), 'address
foos'); if (\$canDo-&gt;get('core.create') ||
count(\$user-&gt;getAuthorisedCategories('com\_foos', 'core.create'))
&gt; 0) { \$toolbar-&gt;addNew('foo.add'); } if
(\$canDo-&gt;get('core.edit.state')) { \$dropdown =
\$toolbar-&gt;dropdownButton('status-group')
-&gt;text('JTOOLBAR\_CHANGE\_STATUS') -&gt;toggleSplit(false)
-&gt;icon('fa fa-globe') -&gt;buttonClass('btn btn-info')
-&gt;listCheck(true); \$childBar = \$dropdown-&gt;getChildToolbar();
\$childBar-&gt;publish('foos.publish')-&gt;listCheck(true);
\$childBar-&gt;unpublish('foos.unpublish')-&gt;listCheck(true);
\$childBar-&gt;archive('foos.archive')-&gt;listCheck(true); if
(\$user-&gt;authorise('core.admin')) {
\$childBar-&gt;checkin('foos.checkin')-&gt;listCheck(true); } if
(\$this-&gt;state-&gt;get('filter.published') != -2) {
\$childBar-&gt;trash('foos.trash')-&gt;listCheck(true); } }
\$toolbar-&gt;popupButton('batch') -&gt;text('JTOOLBAR\_BATCH')
-&gt;selector('collapseModal') -&gt;listCheck(true); if
(\$this-&gt;state-&gt;get('filter.published') == -2 &&
\$canDo-&gt;get('core.delete')) { \$toolbar-&gt;delete('foos.delete')
-&gt;text('JTOOLBAR\_EMPTY\_TRASH')
-&gt;message('JGLOBAL\_CONFIRM\_DELETE') -&gt;listCheck(true); } if
(\$user-&gt;authorise('core.admin', 'com\_foos') ||
\$user-&gt;authorise('core.options', 'com\_foos')) {
\$toolbar-&gt;preferences('com\_foos'); }
HTMLHelper::\_('sidebar.setAction', 'index.php?option=com\_foos'); }
/\*\* \* Returns an array of fields the table can be sorted by \* \*
@return array Array containing the field name to sort by as the key and
display text as value \* \* @since 1.0 \*/ protected function
getSortFields() { return array( 'a.ordering' =&gt;
Text::\_('JGRID\_HEADING\_ORDERING'), 'a.published' =&gt;
Text::\_('JSTATUS'), 'a.name' =&gt; Text::\_('JGLOBAL\_TITLE'),
'category\_title' =&gt; Text::\_('JCATEGORY'), 'a.access' =&gt;
Text::\_('JGRID\_HEADING\_ACCESS'), 'a.language' =&gt;
Text::\_('JGRID\_HEADING\_LANGUAGE'), 'a.id' =&gt;
Text::\_('JGRID\_HEADING\_ID'), ); } }

=== Changing administrator/components/com\_foos/foos.xml === The
`administrator/components/com_foos/foos.xml` file is .... ==== Completed
administrator/components/com\_foos/foos.xml file ==== The code for the
`administrator/components/com_foos/foos.xml` file is as follows:

COM\_FOOS \[DATE\] \[AUTHOR\] \[AUTHOR\_EMAIL\] \[AUTHOR\_URL\]
\[COPYRIGHT\] GNU General Public License version 2 or later; 1.22.0
COM\_FOOS\_XML\_DESCRIPTION Joomla\\Component\\Foos script.php
sql/install.mysql.utf8.sql sql/uninstall.mysql.utf8.sql
sql/updates/mysql Controller Model View tmpl language js

COM\_FOOS

COM\_FOOS

JCATEGORY

access.xml config.xml foos.xml Controller Extension Field Helper Model
Rule Service Table View forms language services sql tmpl

=== Changing administrator/components/com\_foos/forms/foo.xml === The
`administrator/components/com_foos/forms/foo.xml` file is .... ====
Completed administrator/components/com\_foos/forms/foo.xml file ==== The
code for the `administrator/components/com_foos/forms/foo.xml` file is
as follows:

JALL JPUBLISHED JUNPUBLISHED JARCHIVED JTRASHED

JHIDE JSHOW

=== Changing administrator/components/com\_foos/tmpl/foo/edit.php ===
The `administrator/components/com_foos/tmpl/foo/edit.php` file is ....
==== Completed administrator/components/com\_foos/tmpl/foo/edit.php file
==== The code for the
`administrator/components/com_foos/tmpl/foo/edit.php` file is as
follows:

'auto', 'relative' =&gt; true)); \$app = Factory::getApplication();
\$input = \$app-&gt;input; \$assoc = Associations::isEnabled();
\$this-&gt;ignore\_fieldsets = array('item\_associations');
\$this-&gt;useCoreUI = true; // In case of modal \$isModal =
\$input-&gt;get('layout') == 'modal' ? true : false; \$layout =
\$isModal ? 'modal' : 'edit'; \$tmpl = \$isModal ||
\$input-&gt;get('tmpl', '', 'cmd') === 'component' ? '&tmpl=component' :
''; ?&gt;

<div>

'details')); ?&gt;
item-&gt;id) ? Text::\_('COM\_FOOS\_NEW\_FOO') :
Text::\_('COM\_FOOS\_EDIT\_FOO')); ?&gt;
<div class="row">

<div class="col-md-9">

<div class="row">

<div class="col-md-6">

getForm()-&gt;renderField('access'); ?&gt;
getForm()-&gt;renderField('published'); ?&gt;
getForm()-&gt;renderField('publish\_up'); ?&gt;
getForm()-&gt;renderField('publish\_down'); ?&gt;
getForm()-&gt;renderField('catid'); ?&gt;
getForm()-&gt;renderField('language'); ?&gt;

</div>

</div>

</div>

</div>

loadTemplate('associations'); ?&gt;
<div class="hidden">

loadTemplate('associations'); ?&gt;

</div>

</div>

=== Changing administrator/components/com\_foos/tmpl/foos/default.php
=== The `administrator/components/com_foos/tmpl/foos/default.php` file
is .... ==== Completed
administrator/components/com\_foos/tmpl/foos/default.php file ==== The
code for the `administrator/components/com_foos/tmpl/foos/default.php`
file is as follows:

escape(\$this-&gt;state-&gt;get('list.ordering')); \$listDirn =
\$this-&gt;escape(\$this-&gt;state-&gt;get('list.direction'));
\$saveOrder = \$listOrder == 'a.ordering'; if (\$saveOrder &&
!empty(\$this-&gt;items)) { \$saveOrderingUrl =
'index.php?option=com\_foos&task=foos.saveOrderAjax&tmpl=component&' .
Session::getFormToken() . '=1'; } ?&gt;

<div class="row">

sidebar)) : ?&gt;
<div id="j-sidebar-container" class="col-md-2">

sidebar; ?&gt;

</div>

<div
class="<?php if (!empty($this->sidebar)) {echo 'col-md-10'; } else { echo 'col-md-12'; } ?>">

<div id="j-main-container" class="j-main-container">

\$this)); ?&gt;
items)) : ?&gt;
<div class="alert alert-warning">

</div>

,
items); foreach (\$this-&gt;items as \$i =&gt; \$item) : ?&gt;
[ []{.icon-menu aria-hidden="true"} ]{.sortable-handler<?php .echo
.$iconClass; .?>}
id); ?&gt;
checked\_out) : ?&gt;
editor, \$item-&gt;checked\_out\_time, 'foos.', true); ?&gt;
<div>

escape(\$item-&gt;name); ?&gt;

</div>

escape(\$item-&gt;name); ?&gt;
<div class="small">

escape(\$item-&gt;category\_title); ?&gt;

</div>

access\_level; ?&gt;
association) : ?&gt;
id); ?&gt;
<div class="btn-group">

published, \$i, 'foos.', \$canChange, 'cb', \$item-&gt;publish\_up,
\$item-&gt;publish\_down); ?&gt;

</div>

id; ?&gt;
pagination-&gt;getListFooter(); ?&gt;
Text::\_('COM\_FOOS\_BATCH\_OPTIONS'), 'footer' =&gt;
\$this-&gt;loadTemplate('batch\_footer'), ),
\$this-&gt;loadTemplate('batch\_body') ); ?&gt;

</div>

</div>

</div>

=== Creating
administrator/components/com\_foos/tmpl/foos/default\_batch.php === The
`administrator/components/com_foos/tmpl/foos/default_batch.php` file is
the installation file. ==== Completed
administrator/components/com\_foos/tmpl/foos/default\_batch.php file
==== The code for the
`administrator/components/com_foos/tmpl/foos/default_batch.php` file is
as follows:

state-&gt;get('filter.published'); \$noUser = true; ?&gt;

<div id="collapseModal" class="modal hide fade">

<div class="modal-header">

×
### 

</div>

<div class="modal-body modal-batch">

<div class="row">

<div class="form-group col-md-6">

<div class="controls">

</div>

</div>

<div class="form-group col-md-6">

<div class="controls">

</div>

</div>

</div>

<div class="row">

= 0) : ?&gt;
<div class="form-group col-md-6">

<div class="controls">

'com\_foos'\]); ?&gt;

</div>

</div>

<div class="form-group col-md-6">

<div class="controls">

</div>

</div>

<div class="row">

<div class="control-group">

<div class="controls">

\$noUser\]); ?&gt;

</div>

</div>

</div>

</div>

<div class="modal-footer">

</div>

</div>

=== Creating
administrator/components/com\_foos/tmpl/foos/default\_batch\_body.php
=== The
`administrator/components/com_foos/tmpl/foos/default_batch_body.php`
file is the installation file. ==== Completed
administrator/components/com\_foos/tmpl/foos/default\_batch\_body.php
file ==== The code for the
`administrator/components/com_foos/tmpl/foos/default_batch_body.php`
file is as follows:
state-&gt;get('filter.published'); \$noUser = true; ?&gt;
<div class="container">

<div class="row">

<div class="form-group col-md-6">

<div class="controls">

</div>

</div>

<div class="form-group col-md-6">

<div class="controls">

</div>

</div>

</div>

<div class="row">

= 0) : ?&gt;
<div class="form-group col-md-6">

<div class="controls">

'com\_foos'\]); ?&gt;

</div>

</div>

</div>

</div>

=== Creating
administrator/components/com\_foos/tmpl/foos/default\_batch\_footer.php
=== The
`administrator/components/com_foos/tmpl/foos/default_batch_footer.php`
file is the installation file. ==== Completed
administrator/components/com\_foos/tmpl/foos/default\_batch\_footer.php
file ==== The code for the
`administrator/components/com_foos/tmpl/foos/default_batch_footer.php`
file is as follows:
== Test your component == \[\[File:as\_j4\_t\_22\_1.png|700px\]\]
\[\[File:as\_j4\_t\_22\_2.png|700px\]\] == Example in Joomla! == ==
Component Contents == At this point in the tutorial, your component
should contain the following files: {| border=1 | 1 |
administrator/components/com\_foos/Controller/DisplayController.php |
this is the administrator entry point to the Foo component | unchanged
|- |1 |administrator/components/com\_foos/Extension/FoosComponent.php |
the interface BootableExtensionInterface where a component class can
load its internal class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 6 |
administrator/components/com\_foos/Model/FoosModel.php | this is the
model of the Foo component | new |- |1
|administrator/components/com\_foos/Service/HTML/AdministratorService.php
| the html service see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- |1
|administrator/components/com\_foos/View/Foos/HtmlView.php | file
representing the view in the back end | changed |- |1
|administrator/components/com\_foos/services/provider.php | the service
provider interface see https://github.com/joomla/joomla-cms/pull/20217 |
changed |- |6
|administrator/components/com\_foos/sql/install.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | new |- |6
|administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql |
During the install/uninstall/update phase of a component, you can
execute SQL queries through the use of this SQL text file | new |- |1
|administrator/components/com\_foos/tmpl/foos/default.php | the default
view in the back end | changed |- |1
|administrator/components/com\_foos/foos.xml |this is an XML (manifest)
file that tells Joomla! how to install our component. | changed |- |1
|administrator/components/com\_foos/script.php | the installer script |
unchanged |- |2 | components/com\_foos/Controller/DisplayController.php
| this is the frond end entry point to the Foo component | unchanged |-
|4 | components/com\_foos/Model/FooModel.php | this is the frond end
model for the Foo component | unchanged |- |2 |
components/com\_foos/View/Foo/HtmlView.php | file representing the view
in the frond end | unchanged |- |2 |
components/com\_foos/tmpl/foo/default.php | the default view in the
frond end | unchanged |- |3 | components/com\_foos/tmpl/foo/default.xml
| the xml for the menu item | unchanged |- |} == Conclusion == Well, you
have many different features built into your component. Perhaps you
would like to explain these functions to your users with a help page?
This is the topic of the next chapter. = Adding a help link - Part 23 =
Well, you have many different features built into your component.
Perhaps you would like to explain these functions to your users with a
help page? This is the topic of this chapter == Requirements == You need
Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev) == File Structure == === Changing
administrator/components/com\_foos/View/Foo/HtmlView.php === The
`administrator/components/com_foos/View/Foo/HtmlView.php` file is ....
==== Completed administrator/components/com\_foos/View/Foo/HtmlView.php
file ==== The code for the `` file is as follows:
item = \$this-&gt;get('Item'); // If we are forcing a language in modal
(used for associations). if (\$this-&gt;getLayout() === 'modal' &&
\$forcedLanguage =
Factory::getApplication()-&gt;input-&gt;get('forcedLanguage', '',
'cmd')) { // Set the language field to the forcedLanguage and disable
changing it. \$this-&gt;form-&gt;setValue('language', null,
\$forcedLanguage); \$this-&gt;form-&gt;setFieldAttribute('language',
'readonly', 'true'); // Only allow to select categories with All
language or with the forced language.
\$this-&gt;form-&gt;setFieldAttribute('catid', 'language', '\*,' .
\$forcedLanguage); } \$this-&gt;addToolbar(); return
parent::display(\$tpl); } /\*\* \* Add the page title and toolbar. \* \*
@return void \* \* @since 1.0 \*/ protected function addToolbar() {
Factory::getApplication()-&gt;input-&gt;set('hidemainmenu', true);
\$user = Factory::getUser(); \$userId = \$user-&gt;id; \$isNew =
(\$this-&gt;item-&gt;id == 0); \$test =
\$user-&gt;getAuthorisedCategories('com\_foos', 'core.create');
ToolbarHelper::title(\$isNew ? Text::\_('COM\_FOOS\_MANAGER\_FOO\_NEW')
: Text::\_('COM\_FOOS\_MANAGER\_FOO\_EDIT'), 'address foo'); // Since we
don't track these assets at the item level, use the category id. \$canDo
= ContentHelper::getActions('com\_foos', 'category',
\$this-&gt;item-&gt;catid); // Build the actions for new and existing
records. if (\$isNew) { // For new records, check the create permission.
if ((count(\$user-&gt;getAuthorisedCategories('com\_foos',
'core.create')) &gt; 0)) { ToolbarHelper::apply('foo.apply');
ToolbarHelper::saveGroup( \[ \['save', 'foo.save'\], \['save2new',
'foo.save2new'\] \], 'btn-success' ); }
ToolbarHelper::cancel('foo.cancel'); } else { // Since it's an existing
record, check the edit permission, or fall back to edit own if the
owner. \$itemEditable = \$canDo-&gt;get('core.edit') ||
(\$canDo-&gt;get('core.edit.own') && \$this-&gt;item-&gt;created\_by ==
\$userId); \$toolbarButtons = \[\]; // Can't save the record if it's not
editable if (\$itemEditable) { ToolbarHelper::apply('foo.apply');
\$toolbarButtons\[\] = \['save', 'foo.save'\]; // We can save this
record, but check the create permission to see if we can return to make
a new one. if (\$canDo-&gt;get('core.create')) { \$toolbarButtons\[\] =
\['save2new', 'foo.save2new'\]; } } // If checked out, we can still save
if (\$canDo-&gt;get('core.create')) { \$toolbarButtons\[\] =
\['save2copy', 'foo.save2copy'\]; } ToolbarHelper::saveGroup(
\$toolbarButtons, 'btn-success' ); if (Associations::isEnabled() &&
ComponentHelper::isEnabled('com\_associations')) {
ToolbarHelper::custom('foo.editAssociations', 'contract', 'contract',
'JTOOLBAR\_ASSOCIATIONS', false, false); }
ToolbarHelper::cancel('foo.cancel', 'JTOOLBAR\_CLOSE'); }
ToolbarHelper::divider(); ToolbarHelper::help('', false,
'http://google.de'); } }
=== Changing administrator/components/com\_foos/View/Foos/HtmlView.php
=== The `administrator/components/com_foos/View/Foos/HtmlView.php` file
is .... ==== Completed
administrator/components/com\_foos/View/Foos/HtmlView.php file ==== The
code for the `administrator/components/com_foos/View/Foos/HtmlView.php`
file is as follows:
items = \$this-&gt;get('Items'); \$this-&gt;pagination =
\$this-&gt;get('Pagination'); \$this-&gt;filterForm =
\$this-&gt;get('FilterForm'); \$this-&gt;activeFilters =
\$this-&gt;get('ActiveFilters'); \$this-&gt;state =
\$this-&gt;get('State'); // Check for errors. if (count(\$errors =
\$this-&gt;get('Errors'))) { throw new
\\JViewGenericdataexception(implode("\\n", \$errors), 500); } //
Preprocess the list of items to find ordering divisions. // TODO:
Complete the ordering stuff with nested sets foreach (\$this-&gt;items
as &\$item) { \$item-&gt;order\_up = true; \$item-&gt;order\_dn = true;
} // We don't need toolbar in the modal window. if
(\$this-&gt;getLayout() !== 'modal') { FooHelper::addSubmenu('foos');
\$this-&gt;addToolbar(); \$this-&gt;sidebar = \\JHtmlSidebar::render();
// We do not need to filter by language when multilingual is disabled if
(!Multilanguage::isEnabled()) {
unset(\$this-&gt;activeFilters\['language'\]);
\$this-&gt;filterForm-&gt;removeField('language', 'filter'); } } else {
// In article associations modal we need to remove language filter if
forcing a language. // We also need to change the category filter to
show show categories with All or the forced language. if
(\$forcedLanguage =
Factory::getApplication()-&gt;input-&gt;get('forcedLanguage', '',
'CMD')) { // If the language is forced we can't allow to select the
language, so transform the language selector filter into a hidden field.
\$languageXml = new \\SimpleXMLElement('');
\$this-&gt;filterForm-&gt;setField(\$languageXml, 'filter', true); //
Also, unset the active language filter so the search tools is not open
by default with this filter.
unset(\$this-&gt;activeFilters\['language'\]); // One last changes
needed is to change the category filter to just show categories with All
language or with the forced language.
\$this-&gt;filterForm-&gt;setFieldAttribute('category\_id', 'language',
'\*,' . \$forcedLanguage, 'filter'); } } return parent::display(\$tpl);
} /\*\* \* Add the page title and toolbar. \* \* @return void \* \*
@since 1.0 \*/ protected function addToolbar() { \$canDo =
ContentHelper::getActions('com\_foos', 'category',
\$this-&gt;state-&gt;get('filter.category\_id')); \$user =
Factory::getUser(); // Get the toolbar object instance \$toolbar =
Toolbar::getInstance('toolbar');
ToolbarHelper::title(Text::\_('COM\_FOO\_MANAGER\_FOOS'), 'address
foos'); if (\$canDo-&gt;get('core.create') ||
count(\$user-&gt;getAuthorisedCategories('com\_foos', 'core.create'))
&gt; 0) { \$toolbar-&gt;addNew('foo.add'); } if
(\$canDo-&gt;get('core.edit.state')) { \$dropdown =
\$toolbar-&gt;dropdownButton('status-group')
-&gt;text('JTOOLBAR\_CHANGE\_STATUS') -&gt;toggleSplit(false)
-&gt;icon('fa fa-globe') -&gt;buttonClass('btn btn-info')
-&gt;listCheck(true); \$childBar = \$dropdown-&gt;getChildToolbar();
\$childBar-&gt;publish('foos.publish')-&gt;listCheck(true);
\$childBar-&gt;unpublish('foos.unpublish')-&gt;listCheck(true);
\$childBar-&gt;archive('foos.archive')-&gt;listCheck(true); if
(\$user-&gt;authorise('core.admin')) {
\$childBar-&gt;checkin('foos.checkin')-&gt;listCheck(true); } if
(\$this-&gt;state-&gt;get('filter.published') != -2) {
\$childBar-&gt;trash('foos.trash')-&gt;listCheck(true); } }
\$toolbar-&gt;popupButton('batch') -&gt;text('JTOOLBAR\_BATCH')
-&gt;selector('collapseModal') -&gt;listCheck(true); if
(\$this-&gt;state-&gt;get('filter.published') == -2 &&
\$canDo-&gt;get('core.delete')) { \$toolbar-&gt;delete('foos.delete')
-&gt;text('JTOOLBAR\_EMPTY\_TRASH')
-&gt;message('JGLOBAL\_CONFIRM\_DELETE') -&gt;listCheck(true); } if
(\$user-&gt;authorise('core.admin', 'com\_foos') ||
\$user-&gt;authorise('core.options', 'com\_foos')) {
\$toolbar-&gt;preferences('com\_foos'); } ToolbarHelper::divider();
ToolbarHelper::help('', false, 'http://google.de');
HTMLHelper::\_('sidebar.setAction', 'index.php?option=com\_foos'); }
/\*\* \* Returns an array of fields the table can be sorted by \* \*
@return array Array containing the field name to sort by as the key and
display text as value \* \* @since 1.0 \*/ protected function
getSortFields() { return array( 'a.ordering' =&gt;
Text::\_('JGRID\_HEADING\_ORDERING'), 'a.published' =&gt;
Text::\_('JSTATUS'), 'a.name' =&gt; Text::\_('JGLOBAL\_TITLE'),
'category\_title' =&gt; Text::\_('JCATEGORY'), 'a.access' =&gt;
Text::\_('JGRID\_HEADING\_ACCESS'), 'a.language' =&gt;
Text::\_('JGRID\_HEADING\_LANGUAGE'), 'a.id' =&gt;
Text::\_('JGRID\_HEADING\_ID'), ); } }
=== Changing administrator/components/com\_foos/foos.xml === The
`administrator/components/com_foos/foos.xml` file is .... ==== Completed
administrator/components/com\_foos/foos.xml file ==== The code for the
`administrator/components/com_foos/foos.xml` file is as follows:
COM\_FOOS \[DATE\] \[AUTHOR\] \[AUTHOR\_EMAIL\] \[AUTHOR\_URL\]
\[COPYRIGHT\] GNU General Public License version 2 or later; 1.23.0
COM\_FOOS\_XML\_DESCRIPTION Joomla\\Component\\Foos script.php
sql/install.mysql.utf8.sql sql/uninstall.mysql.utf8.sql
sql/updates/mysql Controller Model View tmpl language js
COM\_FOOS
COM\_FOOS
JCATEGORY
access.xml config.xml foos.xml Controller Extension Field Helper Model
Rule Service Table View forms language services sql tmpl
== Test your component == == Example in Joomla! == You can now
individually offer a help page via the button on the top right. You can
put these on the web and keep them up to date. Here I have chosen
google.de as an example. Of course, you can adapt this page to your
circumstances. \[\[File:as\_j4\_t\_23\_1.png|700px\]\] == Component
Contents == At this point in the tutorial, your component should contain
the following files: {| border=1 | 1 |
administrator/components/com\_foos/Controller/DisplayController.php |
this is the administrator entry point to the Foo component | unchanged
|- |1 |administrator/components/com\_foos/Extension/FoosComponent.php |
the interface BootableExtensionInterface where a component class can
load its internal class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 6 |
administrator/components/com\_foos/Model/FoosModel.php | this is the
model of the Foo component | new |- |1
|administrator/components/com\_foos/Service/HTML/AdministratorService.php
| the html service see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- |1
|administrator/components/com\_foos/View/Foos/HtmlView.php | file
representing the view in the back end | changed |- |1
|administrator/components/com\_foos/services/provider.php | the service
provider interface see https://github.com/joomla/joomla-cms/pull/20217 |
changed |- |6
|administrator/components/com\_foos/sql/install.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | new |- |6
|administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql |
During the install/uninstall/update phase of a component, you can
execute SQL queries through the use of this SQL text file | new |- |1
|administrator/components/com\_foos/tmpl/foos/default.php | the default
view in the back end | changed |- |1
|administrator/components/com\_foos/foos.xml |this is an XML (manifest)
file that tells Joomla! how to install our component. | changed |- |1
|administrator/components/com\_foos/script.php | the installer script |
unchanged |- |2 | components/com\_foos/Controller/DisplayController.php
| this is the frond end entry point to the Foo component | unchanged |-
|4 | components/com\_foos/Model/FooModel.php | this is the frond end
model for the Foo component | unchanged |- |2 |
components/com\_foos/View/Foo/HtmlView.php | file representing the view
in the frond end | unchanged |- |2 |
components/com\_foos/tmpl/foo/default.php | the default view in the
frond end | unchanged |- |3 | components/com\_foos/tmpl/foo/default.xml
| the xml for the menu item | unchanged |- |} == Conclusion == You now
know how to keep your users up to date. In the next chapter, we'll look
at how you can make it easy for your users to keep your extension
up-to-date. = Adding an update server and a changelog- Part 24 = In this
chapter, we'll look at how you can make it easy for your users to keep
your extension up-to-date. == Requirements == You need Joomla! 4.x for
this tutorial (as of writing currently Joomla! 4.0.0-alpha11-dev) ==
File Structure == === Changing
administrator/components/com\_foos/foos.xml === The
`administrator/components/com_foos/foos.xml` file is .... ==== Completed
administrator/components/com\_foos/foos.xml file ==== The code for the
`administrator/components/com_foos/foos.xml` file is as follows:
COM\_FOOS \[DATE\] \[AUTHOR\] \[AUTHOR\_EMAIL\] \[AUTHOR\_URL\]
\[COPYRIGHT\] GNU General Public License version 2 or later; 1.24.0
COM\_FOOS\_XML\_DESCRIPTION Joomla\\Component\\Foos script.php
sql/install.mysql.utf8.sql sql/uninstall.mysql.utf8.sql
sql/updates/mysql Controller Model View tmpl language js
COM\_FOOS
COM\_FOOS
JCATEGORY
access.xml config.xml foos.xml Controller Extension Field Helper Model
Rule Rule Service Table View forms language services sql tmpl
https://example.com/.../changelog.xml
http://example.com/.../foo\_update.xml
=== Creating administrator/components/com\_foos/changelog.xml === The
`administrator/components/com_foos/changelog.xml` file is the
installation file. ==== Completed
administrator/components/com\_foos/changelog.xml file ==== The code for
the `administrator/components/com_foos/changelog.xml` file is as
follows:
com\_foos component 1.0.0
Initial
com\_foos component 1.0.0
Add front end view
com\_foos component 1.24.0 Item A &lt;h2&gt;You MUST replace this
file&lt;/h2&gt; Item A Item b Item A Item b Item A Item b Item A Item b
Item A Item b
Item A Item b
=== Creating administrator/components/com\_foos/foo\_update.xml === The
`administrator/components/com_foos/foo_update.xml` file is the
installation file. ==== Completed
administrator/components/com\_foos/foo\_update.xml file ==== The code
for the `administrator/components/com_foos/foo_update.xml` file is as
follows:
Foo This is com\_foo 1.24.0 com\_foo component 1.0.1
http://www.example.com/com\_foo\_101.zip Foo Creator
http://www.example.com site 7.1
== Test your component ==
\[\[File:componenttutorial24atest.png|700px\]\] == Example in Joomla! ==
== More informations ==
https://docs.joomla.org/Adding\_changelog\_to\_your\_manifest\_file
https://github.com/joomla/joomla-cms/pull/24026 == Component Contents ==
At this point in the tutorial, your component should contain the
following files: {| border=1 | 1 |
administrator/components/com\_foos/Controller/DisplayController.php |
this is the administrator entry point to the Foo component | unchanged
|- |1 |administrator/components/com\_foos/Extension/FoosComponent.php |
the interface BootableExtensionInterface where a component class can
load its internal class loader or register HTML services see
https://github.com/joomla/joomla-cms/pull/20217 | unchanged |- | 6 |
administrator/components/com\_foos/Model/FoosModel.php | this is the
model of the Foo component | new |- |1
|administrator/components/com\_foos/Service/HTML/AdministratorService.php
| the html service see https://github.com/joomla/joomla-cms/pull/20217 |
unchanged |- |1
|administrator/components/com\_foos/View/Foos/HtmlView.php | file
representing the view in the back end | changed |- |1
|administrator/components/com\_foos/services/provider.php | the service
provider interface see https://github.com/joomla/joomla-cms/pull/20217 |
changed |- |6
|administrator/components/com\_foos/sql/install.mysql.utf8.sql | During
the install/uninstall/update phase of a component, you can execute SQL
queries through the use of this SQL text file | new |- |6
|administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql |
During the install/uninstall/update phase of a component, you can
execute SQL queries through the use of this SQL text file | new |- |1
|administrator/components/com\_foos/tmpl/foos/default.php | the default
view in the back end | changed |- |1
|administrator/components/com\_foos/foos.xml |this is an XML (manifest)
file that tells Joomla! how to install our component. | changed |- |1
|administrator/components/com\_foos/script.php | the installer script |
unchanged |- |2 | components/com\_foos/Controller/DisplayController.php
| this is the frond end entry point to the Foo component | unchanged |-
|4 | components/com\_foos/Model/FooModel.php | this is the frond end
model for the Foo component | unchanged |- |2 |
components/com\_foos/View/Foo/HtmlView.php | file representing the view
in the frond end | unchanged |- |2 |
components/com\_foos/tmpl/foo/default.php | the default view in the
frond end | unchanged |- |3 | components/com\_foos/tmpl/foo/default.xml
| the xml for the menu item | unchanged |- |} == Conclusion == = Adding
Adding frontend edit - Part 25 =
https://github.com/joomla/joomla-cms/pull/24311 = Adding Tags - Part 26
= https://github.com/joomla/joomla-cms/issues/23589 = Adding Workflow -
Part 27 = I am not sure if we can use it in a third party component.
<div id="navwrapper">

<div id="top-nav" class="fixed">

-   [![Joomla!
    Documentation](/skins/jforeground/joomla_logo_small.png)](/Main_Page)
-   [[ ]{}](#)

<div class="section top-bar-section">

-   <div id="p-sidebar-Joomla">

    </div>

    [Joomla!](#)
    -   <div id="n-sidebar-Main">

        </div>

        [**Joomla! Home](https://www.joomla.org)
    -   <div id="n-sidebar-What">

        </div>

        [What is Joomla?](https://www.joomla.org/about-joomla.html)
    -   <div id="n-sidebar-Benefits">

        </div>

        [Benefits & Features](https://www.joomla.org/core-features.html)
    -   <div id="n-sidebar-Leadership">

        </div>

        [Project &
        Leadership](https://www.joomla.org/about-joomla/the-project.html)
    -   <div id="n-sidebar-Trademark">

        </div>

        [Trademark & Licensing](https://tm.joomla.org)
    -   -   <div id="label">

        </div>

        Support Joomla!
    -   <div id="n-sidebar-Contribute">

        </div>

        [Contribute](https://www.joomla.org/contribute-to-joomla.html)
    -   <div id="n-sidebar-Sponsorship">

        </div>

        [Sponsor](https://www.joomla.org/sponsor.html)
    -   <div id="n-sidebar-Partner">

        </div>

        [Partner](https://www.joomla.org/about-joomla/partners.html)
    -   <div id="n-sidebar-Shop">

        </div>

        [Shop](https://shop.joomla.org/)

-   <div id="p-sidebar-Extend">

    </div>

    [Download & Extend](#)
    -   <div id="n-sidebar-JoomlaCode">

        </div>

        [Downloads](https://downloads.joomla.org/)
    -   <div id="n-sidebar-Extensions">

        </div>

        [Extensions](https://extensions.joomla.org/)
    -   <div id="n-sidebar-Translations">

        </div>

        [Languages](https://community.joomla.org/translations.html)
    -   <div id="n-sidebar-Free-Hosted">

        </div>

        [Get a free site](https://launch.joomla.org)

-   <div id="p-sidebar-About">

    </div>

    [Discover & Learn](#)
    -   <div id="n-sidebar-Docs">

        </div>

        [Documentation](https://docs.joomla.org)
    -   <div id="n-sidebar-Training">

        </div>

        [Training](https://training.joomla.org)
    -   <div id="n-sidebar-Certification">

        </div>

        [Certification](https://certification.joomla.org/)
    -   <div id="n-sidebar-Showcase">

        </div>

        [Site Showcase](https://showcase.joomla.org/)
    -   <div id="n-sidebar-Announcements">

        </div>

        [Announcements](https://www.joomla.org/announcements.html)
    -   <div id="n-sidebar-Blogs">

        </div>

        [Blogs](https://community.joomla.org/blogs.html)
    -   <div id="n-sidebar-Magazine">

        </div>

        [Magazine](https://magazine.joomla.org/)

-   <div id="p-sidebar-News">

    </div>

    [Community & Support](#)
    -   <div id="n-sidebar-Community">

        </div>

        [Community Portal](https://community.joomla.org/)
    -   <div id="n-sidebar-Events">

        </div>

        [Events](https://events.joomla.org/)
    -   <div id="n-sidebar-JUGs">

        </div>

        [User Groups](https://community.joomla.org/user-groups.html)
    -   <div id="n-sidebar-Forum">

        </div>

        [Forum](https://forum.joomla.org/)
    -   <div id="n-sidebar-Resources">

        </div>

        [Resources Directory](https://resources.joomla.org/)
    -   <div id="n-sidebar-Volunteers">

        </div>

        [Volunteers Portal](https://volunteers.joomla.org/)
    -   <div id="n-sidebar-Vel">

        </div>

        [Vulnerable Extensions List](https://vel.joomla.org)

-   <div id="p-sidebar-Developers">

    </div>

    [Developer Resources](#)
    -   <div id="n-sidebar-Developers">

        </div>

        [Developer Network](https://developer.joomla.org/)
    -   <div id="n-sidebar-Security">

        </div>

        [Security
        Centre](https://developer.joomla.org/security-centre.html)
    -   <div id="n-sidebar-Issues">

        </div>

        [Issue Tracker](https://issues.joomla.org/)
    -   <div id="n-sidebar-Github">

        </div>

        [GitHub](https://github.com/joomla)
    -   <div id="n-sidebar-API">

        </div>

        [API Documentation](https://api.joomla.org/)
    -   <div id="n-sidebar-Framework">

        </div>

        [Joomla! Framework](https://framework.joomla.org/)
    -   <div id="n-sidebar-JoomlaCode">

        </div>

        [JoomlaCode](http://joomlacode.org/)

<!-- -->

-   [**](#)
    -   <div id="t-whatlinkshere">

        </div>

        [What links
        here](/Special:WhatLinksHere/User:Astridx "A list of all wiki pages that link here [j]")
    -   <div id="t-recentchangeslinked">

        </div>

        [Related
        changes](/Special:RecentChangesLinked/User:Astridx "Recent changes in pages linked from this page [k]")
    -   <div id="t-contributions">

        </div>

        [User
        contributions](/Special:Contributions/Astridx "A list of contributions by this user")
    -   <div id="t-log">

        </div>

        [Logs](/Special:Log/Astridx)
    -   <div id="t-specialpages">

        </div>

        [Special
        pages](/Special:SpecialPages "A list of all special pages [q]")
    -   <div id="t-print">

        </div>

        [Printable
        version](/index.php?title=User:Astridx&printable=yes "Printable version of this page [p]")
    -   <div id="t-permalink">

        </div>

        [Permanent
        link](/index.php?title=User:Astridx&oldid=623966 "Permanent link to this revision of the page")
    -   <div id="t-info">

        </div>

        [Page
        information](/index.php?title=User:Astridx&action=info "More information about this page")
    -   <div id="n-recentchanges">

        </div>

        [Recent changes](/Special:RecentChanges "Special:RecentChanges")
    -   <div id="n-help">

        </div>

        [Help](/S:MyLanguage/Help:Contents)

-   [Log in](/index.php?title=Special:UserLogin&returnto=User%3AAstridx)

</div>

</div>

<div id="global-header">

<div class="row">

<div class="large-6 column">

[](/Main_Page) {#section-1 .page-title}
==============

<div class="title-name" style="display: inline-block;">

Joomla! Documentation^™^

</div>

</div>

<div class="large-6 column hide-for-small">

-   [Download](https://downloads.joomla.org/){.button .success .radius}
-   [Launch](https://launch.joomla.org/){.button .top .radius}

</div>

</div>

</div>

<div id="bottom-nav">

-   [](/Main_Page) {#section-2 .title-name-small}
    ==============

    <div class="title-name" style="display:none;">

    Joomla! Documentation^™^

    </div>

-   [[]{}](#)

<div class="section top-bar-section">

-   <div id="p-Learn">

    </div>

    [Learn](#)
    -   <div id="n-More-About-Joomla.21">

        </div>

        [More About Joomla!](/Special:MyLanguage/Portal:Learn_More)
    -   <div id="n-Beginners">

        </div>

        [Beginners](/Portal:Beginners)
    -   <div id="n-Administrators">

        </div>

        [Administrators](/Portal:Administrators)
    -   <div id="n-Developers">

        </div>

        [Developers](/Portal:Developers)
    -   <div id="n-Joomla.21-Get-Involved">

        </div>

        [Joomla! Get Involved](/Portal:Participating_in_the_Community)
    -   <div id="n-Joomla.21-Code-Contributors">

        </div>

        [Joomla! Code Contributors](/Portal:Joomla!_Code_Contributors)
    -   <div id="n-Joomla-User-Groups">

        </div>

        [Joomla User
        Groups](/Special:MyLanguage/Portal:Joomla_User_Groups)

-   <div id="p-Browse">

    </div>

    [Browse](#)
    -   <div id="n-CMS-Help-Screens">

        </div>

        [CMS Help Screens](/Help_screens)
    -   <div id="n-Our-Docs">

        </div>

        [Our Docs](/Category:Top_Level)
    -   <div id="n-Our-Glossary">

        </div>

        [Our Glossary](/Glossary)
    -   <div id="n-The-Joomla.21-FAQs">

        </div>

        [The Joomla! FAQs](/Category:FAQ)
    -   <div id="n-Tips-and-tricks">

        </div>

        [Tips and tricks](/Category:Tips_and_tricks)
    -   <div id="n-Recent-Changes">

        </div>

        [Recent Changes](/Special:RecentChanges)

-   <div id="p-Help">

    </div>

    [Help](#)
    -   <div id="n-Contribute-to-Joomla.21-Docs">

        </div>

        [Contribute to Joomla!
        Docs](/JDOC:How_to_Contribute_to_Joomla!_Documentation)
    -   <div id="n-Translate-Joomla.21-Docs">

        </div>

        [Translate Joomla! Docs](/JDOC:Documentation_Translators)
    -   <div id="n-Editing-Help">

        </div>

        [Editing Help](/JHelp:Cheatsheet)
    -   <div id="n-Play-in-the-Sandbox">

        </div>

        [Play in the Sandbox](/Sandbox)
    -   <div id="n-JDOC.27s-Policies">

        </div>

        [JDOC's Policies](/JDOC:Wiki_policy)
    -   <div id="n-Documentation-License">

        </div>

        [Documentation License](/JEDL)
    -   <div id="n-More-Help">

        </div>

        [More
        Help](https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents)

<!-- -->

-   <div class="row">

    <div class="small-12 columns">

    Search

    </div>

    </div>

</div>

</div>

</div>

<div id="page-content">

<div class="row">

<div class="large-12 columns">

<div class="mw-indicators">

</div>

</div>

</div>

<div id="mw-js-message" style="display:none;">

</div>

<div class="row">

<div id="p-cactions" class="large-12 columns">

#### User {#user .namespace .label}

### From Joomla! Documentation {#tagline}

<div id="social">

<div class="addthis_sharing_toolbox">

</div>

</div>

#####  {#section-3 .subtitle}

<div id="ad">

</div>

<div class="clear_both">

</div>

<div class="mw-bodytext">

<div id="mw-content-text" class="mw-content-ltr" lang="en" dir="ltr">

<div class="hf-nsheader">

</div>

<div class="hf-header">

</div>

<div id="toc" class="toc">

<div id="toctitle">

Contents
--------

</div>

-   [[1]{.tocnumber} [Creating a Simple Component for
    Joomla!4.x]{.toctext}](#Creating_a_Simple_Component_for_Joomla.214.x)
-   [[2]{.tocnumber} [Developing a Basic Component - Part
    1]{.toctext}](#Developing_a_Basic_Component_-_Part_1)
    -   [[2.1]{.tocnumber} [Notes]{.toctext}](#Notes)
    -   [[2.2]{.tocnumber} [Requirements]{.toctext}](#Requirements)
    -   [[2.3]{.tocnumber} [Creating a simple Component/Developing a
        Basic
        Component]{.toctext}](#Creating_a_simple_Component.2FDeveloping_a_Basic_Component)
        -   [[2.3.1]{.tocnumber} [File
            Structure]{.toctext}](#File_Structure)
        -   [[2.3.2]{.tocnumber} [Creating
            administrator/components/com\_foos/Controller/DisplayController.php]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2FController.2FDisplayController.php)
            -   [[2.3.2.1]{.tocnumber} [Completed
                administrator/components/com\_foos/Controller/DisplayController.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FController.2FDisplayController.php_file)
        -   [[2.3.3]{.tocnumber} [Creating
            administrator/components/com\_foos/Extension/FoosComponent.php]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2FExtension.2FFoosComponent.php)
            -   [[2.3.3.1]{.tocnumber} [Completed
                administrator/components/com\_foos/Extension/FoosComponent.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FExtension.2FFoosComponent.php_file)
        -   [[2.3.4]{.tocnumber} [Creating
            administrator/components/com\_foos/Service/HTML/AdministratorService.php]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2FService.2FHTML.2FAdministratorService.php)
            -   [[2.3.4.1]{.tocnumber} [Completed
                administrator/components/com\_foos/Service/HTML/AdministratorService.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FService.2FHTML.2FAdministratorService.php_file)
        -   [[2.3.5]{.tocnumber} [Creating
            administrator/components/com\_foos/View/Foos/HtmlView.php]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php)
            -   [[2.3.5.1]{.tocnumber} [Completed
                administrator/components/com\_foos/View/Foos/HtmlView.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_file)
        -   [[2.3.6]{.tocnumber} [Creating
            administrator/components/com\_foos/services/provider.php]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2Fservices.2Fprovider.php)
            -   [[2.3.6.1]{.tocnumber} [Completed
                administrator/components/com\_foos/services/provider.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Fservices.2Fprovider.php_file)
        -   [[2.3.7]{.tocnumber} [Creating
            administrator/components/com\_foos/tmpl/foos/default.php]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php)
            -   [[2.3.7.1]{.tocnumber} [Completed
                administrator/components/com\_foos/tmpl/foos/default.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_file)
        -   [[2.3.8]{.tocnumber} [Creating
            script.php]{.toctext}](#Creating_script.php)
            -   [[2.3.8.1]{.tocnumber} [Completed script.php
                file]{.toctext}](#Completed_script.php_file)
        -   [[2.3.9]{.tocnumber} [Creating
            com\_foos.xml]{.toctext}](#Creating_com_foos.xml)
            -   [[2.3.9.1]{.tocnumber} [Completed foo.xml
                file]{.toctext}](#Completed_foo.xml_file)
    -   [[2.4]{.tocnumber} [Test your
        componente]{.toctext}](#Test_your_componente)
    -   [[2.5]{.tocnumber} [Note]{.toctext}](#Note)
        -   [[2.5.1]{.tocnumber} [Version
            Number]{.toctext}](#Version_Number)
        -   [[2.5.2]{.tocnumber} [index.html
            File]{.toctext}](#index.html_File)
        -   [[2.5.3]{.tocnumber} [Joomla! Extensions
            Directory]{.toctext}](#Joomla.21_Extensions_Directory)
    -   [[2.6]{.tocnumber} [Component
        Contents]{.toctext}](#Component_Contents)
    -   [[2.7]{.tocnumber} [Conclusion]{.toctext}](#Conclusion)
-   [[3]{.tocnumber} [Adding a view to the site part - Part
    2]{.toctext}](#Adding_a_view_to_the_site_part_-_Part_2)
    -   [[3.1]{.tocnumber} [Requirements]{.toctext}](#Requirements_2)
    -   [[3.2]{.tocnumber} [File
        Structure]{.toctext}](#File_Structure_2)
        -   [[3.2.1]{.tocnumber} [Changing
            administrator/components/com\_foos/foos.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml)
            -   [[3.2.1.1]{.tocnumber} [Completed
                administrator/components/com\_foos/foos.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file)
        -   [[3.2.2]{.tocnumber} [Creating
            components/com\_foos/Controller/DisplayController.php]{.toctext}](#Creating_components.2Fcom_foos.2FController.2FDisplayController.php)
            -   [[3.2.2.1]{.tocnumber} [Completed
                components/com\_foos/Controller/DisplayController.php
                file]{.toctext}](#Completed_components.2Fcom_foos.2FController.2FDisplayController.php_file)
        -   [[3.2.3]{.tocnumber} [Creating
            components/com\_foos/View/Foo/HtmlView.php]{.toctext}](#Creating_components.2Fcom_foos.2FView.2FFoo.2FHtmlView.php)
            -   [[3.2.3.1]{.tocnumber} [Completed
                components/com\_foos/View/Foo/HtmlView.php
                file]{.toctext}](#Completed_components.2Fcom_foos.2FView.2FFoo.2FHtmlView.php_file)
        -   [[3.2.4]{.tocnumber} [Creating
            components/com\_foos/tmpl/foo/default.php]{.toctext}](#Creating_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php)
            -   [[3.2.4.1]{.tocnumber} [Completed
                components/com\_foos/tmpl/foo/default.php
                file]{.toctext}](#Completed_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php_file)
    -   [[3.3]{.tocnumber} [Test your
        component]{.toctext}](#Test_your_component)
    -   [[3.4]{.tocnumber} [Component
        Contents]{.toctext}](#Component_Contents_2)
    -   [[3.5]{.tocnumber} [Conclusion]{.toctext}](#Conclusion_2)
-   [[4]{.tocnumber} [Adding a menu type to the site part - Part
    3]{.toctext}](#Adding_a_menu_type_to_the_site_part_-_Part_3)
    -   [[4.1]{.tocnumber} [Requirements]{.toctext}](#Requirements_3)
    -   [[4.2]{.tocnumber} [File
        Structure]{.toctext}](#File_Structure_3)
        -   [[4.2.1]{.tocnumber} [Creating
            components/com\_foos/tmpl/foo/default.xml]{.toctext}](#Creating_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.xml)
            -   [[4.2.1.1]{.tocnumber} [Completed
                components/com\_foos/tmpl/foo/default.xml
                file]{.toctext}](#Completed_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.xml_file)
        -   [[4.2.2]{.tocnumber} [Changing
            administrator/components/com\_foos/foos.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_2)
            -   [[4.2.2.1]{.tocnumber} [Completed
                administrator/components/com\_foos/foos.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_2)
    -   [[4.3]{.tocnumber} [Test your
        component]{.toctext}](#Test_your_component_2)
    -   [[4.4]{.tocnumber} [Component
        Contents]{.toctext}](#Component_Contents_3)
    -   [[4.5]{.tocnumber} [Conclusion]{.toctext}](#Conclusion_3)
-   [[5]{.tocnumber} [Adding a model to the site part - Part
    4]{.toctext}](#Adding_a_model_to_the_site_part_-_Part_4)
    -   [[5.1]{.tocnumber} [Requirements]{.toctext}](#Requirements_4)
    -   [[5.2]{.tocnumber} [File
        Structure]{.toctext}](#File_Structure_4)
        -   [[5.2.1]{.tocnumber} [Changing
            administrator/components/com\_foos/foos.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_3)
            -   [[5.2.1.1]{.tocnumber} [Completed
                administrator/components/com\_foos/foos.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_3)
        -   [[5.2.2]{.tocnumber} [Creating
            components/com\_foos/Model/FooModel.php]{.toctext}](#Creating_components.2Fcom_foos.2FModel.2FFooModel.php)
            -   [[5.2.2.1]{.tocnumber} [Completed
                components/com\_foos/Model/FooModel.php
                file]{.toctext}](#Completed_components.2Fcom_foos.2FModel.2FFooModel.php_file)
        -   [[5.2.3]{.tocnumber} [Changing
            components/com\_foos/View/Foo/HtmlView.php]{.toctext}](#Changing_components.2Fcom_foos.2FView.2FFoo.2FHtmlView.php)
            -   [[5.2.3.1]{.tocnumber} [Completed
                components/com\_foos/View/Foo/HtmlView.php
                file]{.toctext}](#Completed_components.2Fcom_foos.2FView.2FFoo.2FHtmlView.php_file_2)
        -   [[5.2.4]{.tocnumber} [Changing
            components/com\_foos/tmpl/foo/default.php]{.toctext}](#Changing_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php)
            -   [[5.2.4.1]{.tocnumber} [Completed
                components/com\_foos/tmpl/foo/default.php
                file]{.toctext}](#Completed_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php_file_2)
    -   [[5.3]{.tocnumber} [Test your
        component]{.toctext}](#Test_your_component_3)
    -   [[5.4]{.tocnumber} [Component
        Contents]{.toctext}](#Component_Contents_4)
    -   [[5.5]{.tocnumber} [Conclusion]{.toctext}](#Conclusion_4)
-   [[6]{.tocnumber} [Adding a variable request in the menu type - Part
    5]{.toctext}](#Adding_a_variable_request_in_the_menu_type_-_Part_5)
    -   [[6.1]{.tocnumber} [Requirements]{.toctext}](#Requirements_5)
    -   [[6.2]{.tocnumber} [File
        Structure]{.toctext}](#File_Structure_5)
        -   [[6.2.1]{.tocnumber} [Changing
            administrator/components/com\_foos/foos.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_4)
            -   [[6.2.1.1]{.tocnumber} [Completed
                administrator/components/com\_foos/foos.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_4)
        -   [[6.2.2]{.tocnumber} [Changing
            components/com\_foos/Model/FooModel.php]{.toctext}](#Changing_components.2Fcom_foos.2FModel.2FFooModel.php)
            -   [[6.2.2.1]{.tocnumber} [Completed
                components/com\_foos/Model/FooModel.php
                file]{.toctext}](#Completed_components.2Fcom_foos.2FModel.2FFooModel.php_file_2)
        -   [[6.2.3]{.tocnumber} [Changing
            components/com\_foos/tmpl/foo/default.xml]{.toctext}](#Changing_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.xml)
            -   [[6.2.3.1]{.tocnumber} [Completed
                components/com\_foos/tmpl/foo/default.xml
                file]{.toctext}](#Completed_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.xml_file_2)
    -   [[6.3]{.tocnumber} [Test your
        component]{.toctext}](#Test_your_component_4)
    -   [[6.4]{.tocnumber} [Note]{.toctext}](#Note_2)
        -   [[6.4.1]{.tocnumber} [Why do we omit the close
            tag?]{.toctext}](#Why_do_we_omit_the_close_tag.3F)
    -   [[6.5]{.tocnumber} [Component
        Contents]{.toctext}](#Component_Contents_5)
    -   [[6.6]{.tocnumber} [Conclusion]{.toctext}](#Conclusion_5)
-   [[7]{.tocnumber} [Using the database in the backend - Part
    6]{.toctext}](#Using_the_database_in_the_backend_-_Part_6)
    -   [[7.1]{.tocnumber} [Requirements]{.toctext}](#Requirements_6)
    -   [[7.2]{.tocnumber} [File
        Structure]{.toctext}](#File_Structure_6)
        -   [[7.2.1]{.tocnumber} [Creating
            administrator/components/com\_foos/Model/FoosModel.php]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php)
            -   [[7.2.1.1]{.tocnumber} [Completed
                administrator/components/com\_foos/Model/FoosModel.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_file)
        -   [[7.2.2]{.tocnumber} [Changing
            administrator/components/com\_foos/View/Foos/HtmlView.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php)
            -   [[7.2.2.1]{.tocnumber} [Completed
                administrator/components/com\_foos/View/Foos/HtmlView.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_file_2)
        -   [[7.2.3]{.tocnumber} [Changing
            administrator/components/com\_foos/services/provider.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Fservices.2Fprovider.php)
            -   [[7.2.3.1]{.tocnumber} [Completed
                administrator/components/com\_foos/services/provider.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Fservices.2Fprovider.php_file_2)
        -   [[7.2.4]{.tocnumber} [Creating
            administrator/components/com\_foos/sql/install.mysql.utf8.sql]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Finstall.mysql.utf8.sql)
            -   [[7.2.4.1]{.tocnumber} [Completed
                administrator/components/com\_foos/sql/install.mysql.utf8.sql
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Finstall.mysql.utf8.sql_file)
        -   [[7.2.5]{.tocnumber} [Creating
            administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Funinstall.mysql.utf8.sql)
            -   [[7.2.5.1]{.tocnumber} [Completed
                administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Funinstall.mysql.utf8.sql_file)
        -   [[7.2.6]{.tocnumber} [Changing
            administrator/components/com\_foos/tmpl/foos/default.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php)
            -   [[7.2.6.1]{.tocnumber} [Completed
                administrator/components/com\_foos/tmpl/foos/default.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_file_2)
        -   [[7.2.7]{.tocnumber} [Changing
            administrator/components/com\_foos/foos.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_5)
            -   [[7.2.7.1]{.tocnumber} [Completed
                administrator/components/com\_foos/foos.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_5)
    -   [[7.3]{.tocnumber} [Test your
        component]{.toctext}](#Test_your_component_5)
    -   [[7.4]{.tocnumber} [Component
        Contents]{.toctext}](#Component_Contents_6)
    -   [[7.5]{.tocnumber} [Conclusion]{.toctext}](#Conclusion_6)
-   [[8]{.tocnumber} [Using the database in the frontend - Part
    7]{.toctext}](#Using_the_database_in_the_frontend_-_Part_7)
    -   [[8.1]{.tocnumber} [Requirements]{.toctext}](#Requirements_7)
    -   [[8.2]{.tocnumber} [File
        Structure]{.toctext}](#File_Structure_7)
        -   [[8.2.1]{.tocnumber} [Creating
            administrator/components/com\_foos/Controller/FooController.php]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2FController.2FFooController.php)
            -   [[8.2.1.1]{.tocnumber} [Completed
                administrator/components/com\_foos/Controller/FooController.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FController.2FFooController.php_file)
        -   [[8.2.2]{.tocnumber} [Creating
            administrator/components/com\_foos/Field/Modal/FooField.php]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2FField.2FModal.2FFooField.php)
            -   [[8.2.2.1]{.tocnumber} [Completed
                administrator/components/com\_foos/Field/Modal/FooField.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FField.2FModal.2FFooField.php_file)
        -   [[8.2.3]{.tocnumber} [Creating
            administrator/components/com\_foos/Model/FooModel.php]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFooModel.php)
            -   [[8.2.3.1]{.tocnumber} [Completed
                administrator/components/com\_foos/Model/FooModel.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFooModel.php_file)
        -   [[8.2.4]{.tocnumber} [Changing
            administrator/components/com\_foos/View/Foos/HtmlView.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_2)
            -   [[8.2.4.1]{.tocnumber} [Completed
                administrator/components/com\_foos/View/Foos/HtmlView.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_file_3)
        -   [[8.2.5]{.tocnumber} [Changing
            administrator/components/com\_foos/tmpl/foos/default.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_2)
            -   [[8.2.5.1]{.tocnumber} [Completed
                administrator/components/com\_foos/tmpl/foos/default.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_file_3)
        -   [[8.2.6]{.tocnumber} [Creating
            administrator/components/com\_foos/Table/FooTable.php]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2FTable.2FFooTable.php)
            -   [[8.2.6.1]{.tocnumber} [Completed
                administrator/components/com\_foos/Table/FooTable.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FTable.2FFooTable.php_file)
        -   [[8.2.7]{.tocnumber} [Changing
            administrator/components/com\_foos/foos.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_6)
            -   [[8.2.7.1]{.tocnumber} [Completed
                administrator/components/com\_foos/foos.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_6)
        -   [[8.2.8]{.tocnumber} [Creating
            administrator/components/com\_foos/forms/foo.xml]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml)
            -   [[8.2.8.1]{.tocnumber} [Completed
                administrator/components/com\_foos/forms/foo.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_file)
        -   [[8.2.9]{.tocnumber} [Changing
            components/com\_foos/Model/FooModel.php]{.toctext}](#Changing_components.2Fcom_foos.2FModel.2FFooModel.php_2)
            -   [[8.2.9.1]{.tocnumber} [Completed
                components/com\_foos/Model/FooModel.php
                file]{.toctext}](#Completed_components.2Fcom_foos.2FModel.2FFooModel.php_file_3)
        -   [[8.2.10]{.tocnumber} [Changing
            administrator/components/com\_foos/View/Foos/HtmlView.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_3)
            -   [[8.2.10.1]{.tocnumber} [Completed
                administrator/components/com\_foos/View/Foos/HtmlView.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_file_4)
        -   [[8.2.11]{.tocnumber} [Changing
            components/com\_foos/View/Foo/HtmlView.php]{.toctext}](#Changing_components.2Fcom_foos.2FView.2FFoo.2FHtmlView.php_2)
            -   [[8.2.11.1]{.tocnumber} [Completed
                components/com\_foos/View/Foo/HtmlView.php
                file]{.toctext}](#Completed_components.2Fcom_foos.2FView.2FFoo.2FHtmlView.php_file_3)
        -   [[8.2.12]{.tocnumber} [Creating
            administrator/components/com\_foos/tmpl/foo/edit.php]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php)
            -   [[8.2.12.1]{.tocnumber} [Completed
                administrator/components/com\_foos/tmpl/foo/edit.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php_file)
        -   [[8.2.13]{.tocnumber} [Creating Creating
            administrator/components/com\_foos/tmpl/foo/modal.php]{.toctext}](#Creating_Creating_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fmodal.php)
            -   [[8.2.13.1]{.tocnumber} [Completed Creating
                administrator/components/com\_foo/tmpl/foos/modal.php
                file]{.toctext}](#Completed_Creating_administrator.2Fcomponents.2Fcom_foo.2Ftmpl.2Ffoos.2Fmodal.php_file)
        -   [[8.2.14]{.tocnumber} [Changing
            components/com\_foos/tmpl/foo/default.php]{.toctext}](#Changing_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php_2)
            -   [[8.2.14.1]{.tocnumber} [Completed
                components/com\_foos/tmpl/foo/default.php
                file]{.toctext}](#Completed_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php_file_3)
        -   [[8.2.15]{.tocnumber} [Creating
            administrator/components/com\_foos/tmpl/foos/modal.php]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fmodal.php)
            -   [[8.2.15.1]{.tocnumber} [Completed
                administrator/components/com\_foos/tmpl/foos/modal.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fmodal.php_file)
        -   [[8.2.16]{.tocnumber} [Changing
            components/com\_foos/tmpl/foo/default.php]{.toctext}](#Changing_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php_3)
            -   [[8.2.16.1]{.tocnumber} [Completed
                components/com\_foos/tmpl/foo/default.php
                file]{.toctext}](#Completed_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php_file_4)
        -   [[8.2.17]{.tocnumber} [Changing
            components/com\_foos/tmpl/foo/default.xml]{.toctext}](#Changing_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.xml_2)
            -   [[8.2.17.1]{.tocnumber} [Completed
                components/com\_foos/tmpl/foo/default.xml
                file]{.toctext}](#Completed_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.xml_file_3)
        -   [[8.2.18]{.tocnumber} [Creating
            media/com\_foos/js/admin-foos-modal.js]{.toctext}](#Creating_media.2Fcom_foos.2Fjs.2Fadmin-foos-modal.js)
            -   [[8.2.18.1]{.tocnumber} [Completed
                media/com\_foos/js/admin-foos-modal.js
                file]{.toctext}](#Completed_media.2Fcom_foos.2Fjs.2Fadmin-foos-modal.js_file)
    -   [[8.3]{.tocnumber} [Test your
        component]{.toctext}](#Test_your_component_6)
    -   [[8.4]{.tocnumber} [Component
        Contents]{.toctext}](#Component_Contents_7)
    -   [[8.5]{.tocnumber} [Conclusion]{.toctext}](#Conclusion_7)
-   [[9]{.tocnumber} [Using languages files - Part
    8]{.toctext}](#Using_languages_files_-_Part_8)
    -   [[9.1]{.tocnumber} [Requirements]{.toctext}](#Requirements_8)
    -   [[9.2]{.tocnumber} [File
        Structure]{.toctext}](#File_Structure_8)
        -   [[9.2.1]{.tocnumber} [Changing
            administrator/components/com\_foos/foos.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_7)
            -   [[9.2.1.1]{.tocnumber} [Completed
                administrator/components/com\_foos/foos.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_7)
        -   [[9.2.2]{.tocnumber} [Changing
            components/com\_foos/tmpl/foo/default.php]{.toctext}](#Changing_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php_4)
            -   [[9.2.2.1]{.tocnumber} [Completed
                components/com\_foos/tmpl/foo/default.php
                file]{.toctext}](#Completed_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php_file_5)
        -   [[9.2.3]{.tocnumber} [Creating
            components/com\_foos/language/en-GB/en-GB.com\_foo.ini]{.toctext}](#Creating_components.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foo.ini)
            -   [[9.2.3.1]{.tocnumber} [Completed
                components/com\_foos/language/en-GB/en-GB.com\_foo.ini
                file]{.toctext}](#Completed_components.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foo.ini_file)
        -   [[9.2.4]{.tocnumber} [Creating
            administrator/components/com\_foos/language/en-GB/en-GB.com\_foo.ini]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foo.ini)
            -   [[9.2.4.1]{.tocnumber} [Completed
                administrator/components/com\_foos/language/en-GB/en-GB.com\_foo.ini
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foo.ini_file)
        -   [[9.2.5]{.tocnumber} [Creating
            administrator/components/com\_foos/language/en-GB/en-GB.com\_foo.sys.ini]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foo.sys.ini)
            -   [[9.2.5.1]{.tocnumber} [Completed
                administrator/components/com\_foos/language/en-GB/en-GB.com\_foo.sys.ini
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foo.sys.ini_file)
    -   [[9.3]{.tocnumber} [Test your
        component]{.toctext}](#Test_your_component_7)
    -   [[9.4]{.tocnumber} [Component
        Contents]{.toctext}](#Component_Contents_8)
    -   [[9.5]{.tocnumber} [Conclusion]{.toctext}](#Conclusion_8)
-   [[10]{.tocnumber} [Adding configuration - Part
    9]{.toctext}](#Adding_configuration_-_Part_9)
    -   [[10.1]{.tocnumber} [Requirements]{.toctext}](#Requirements_9)
    -   [[10.2]{.tocnumber} [File
        Structure]{.toctext}](#File_Structure_9)
        -   [[10.2.1]{.tocnumber} [Creating
            administrator/components/com\_foos/config.php]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2Fconfig.php)
            -   [[10.2.1.1]{.tocnumber} [Completed
                administrator/components/com\_foos/config.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Fconfig.php_file)
        -   [[10.2.2]{.tocnumber} [Changing
            administrator/components/com\_foos/foos.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_8)
            -   [[10.2.2.1]{.tocnumber} [Completed
                administrator/components/com\_foos/foos.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_8)
        -   [[10.2.3]{.tocnumber} [Changing
            administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.ini)
            -   [[10.2.3.1]{.tocnumber} [Completed
                administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.ini_file)
        -   [[10.2.4]{.tocnumber} [Changing
            administrator/components/com\_foos/Model/FooModel.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFooModel.php)
            -   [[10.2.4.1]{.tocnumber} [Completed
                administrator/components/com\_foos/Model/FooModel.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFooModel.php_file_2)
        -   [[10.2.5]{.tocnumber} [Changing
            administrator/components/com\_foos/View/Foos/HtmlView.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_4)
            -   [[10.2.5.1]{.tocnumber} [Completed
                administrator/components/com\_foos/View/Foos/HtmlView.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_file_5)
        -   [[10.2.6]{.tocnumber} [Changing
            components/com\_foos/Model/FooModel.php]{.toctext}](#Changing_components.2Fcom_foos.2FModel.2FFooModel.php_3)
            -   [[10.2.6.1]{.tocnumber} [Completed
                components/com\_foos/Model/FooModel.php
                file]{.toctext}](#Completed_components.2Fcom_foos.2FModel.2FFooModel.php_file_4)
        -   [[10.2.7]{.tocnumber} [Changing
            components/com\_foos/tmpl/foo/default.php]{.toctext}](#Changing_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php_5)
            -   [[10.2.7.1]{.tocnumber} [Completed
                components/com\_foos/tmpl/foo/default.php
                file]{.toctext}](#Completed_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php_file_6)
    -   [[10.3]{.tocnumber} [Test your
        component]{.toctext}](#Test_your_component_8)
    -   [[10.4]{.tocnumber} [Component
        Contents]{.toctext}](#Component_Contents_9)
    -   [[10.5]{.tocnumber} [Conclusion]{.toctext}](#Conclusion_9)
-   [[11]{.tocnumber} [Adding ACL - Part
    10]{.toctext}](#Adding_ACL_-_Part_10)
    -   [[11.1]{.tocnumber} [Requirements]{.toctext}](#Requirements_10)
    -   [[11.2]{.tocnumber} [File
        Structure]{.toctext}](#File_Structure_10)
        -   [[11.2.1]{.tocnumber} [Creating
            administrator/components/com\_foos/access.xml]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2Faccess.xml)
            -   [[11.2.1.1]{.tocnumber} [Completed
                administrator/components/com\_foos/access.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Faccess.xml_file)
        -   [[11.2.2]{.tocnumber} [Changing
            administrator/components/com\_foos/foos.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_9)
            -   [[11.2.2.1]{.tocnumber} [Completed
                administrator/components/com\_foos/foos.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_9)
        -   [[11.2.3]{.tocnumber} [Changing
            administrator/components/com\_foos/Model/FoosModel.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php)
            -   [[11.2.3.1]{.tocnumber} [Completed
                administrator/components/com\_foos/Model/FoosModel.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_file_2)
        -   [[11.2.4]{.tocnumber} [Changing
            administrator/components/com\_foos/View/Foos/HtmlView.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_5)
            -   [[11.2.4.1]{.tocnumber} [Completed
                administrator/components/com\_foos/View/Foos/HtmlView.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_file_6)
        -   [[11.2.5]{.tocnumber} [Changing
            administrator/components/com\_foos/config.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Fconfig.xml)
            -   [[11.2.5.1]{.tocnumber} [Completed
                administrator/components/com\_foos/config.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Fconfig.xml_file)
        -   [[11.2.6]{.tocnumber} [Changing
            administrator/components/com\_foos/forms/foo.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml)
            -   [[11.2.6.1]{.tocnumber} [Completed
                administrator/components/com\_foos/forms/foo.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_file_2)
        -   [[11.2.7]{.tocnumber} [Creating
            administrator/components/com\_foos/sql/updates/mysql/1.10.0.sql]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Fupdates.2Fmysql.2F1.10.0.sql)
            -   [[11.2.7.1]{.tocnumber} [Completed
                administrator/components/com\_foos/sql/updates/mysql/1.10.0.sql
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Fupdates.2Fmysql.2F1.10.0.sql_file)
        -   [[11.2.8]{.tocnumber} [Changing
            administrator/components/com\_foos/tmpl/foo/edit.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php)
            -   [[11.2.8.1]{.tocnumber} [Completed
                administrator/components/com\_foos/tmpl/foo/edit.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php_file_2)
        -   [[11.2.9]{.tocnumber} [Changing
            administrator/components/com\_foos/tmpl/foo/default.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php)
            -   [[11.2.9.1]{.tocnumber} [Completed
                administrator/components/com\_foos/tmpl/foo/default.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php_file)
    -   [[11.3]{.tocnumber} [Note]{.toctext}](#Note_3)
    -   [[11.4]{.tocnumber} [Test your
        component]{.toctext}](#Test_your_component_9)
    -   [[11.5]{.tocnumber} [Example in
        Joomla!]{.toctext}](#Example_in_Joomla.21)
    -   [[11.6]{.tocnumber} [Note]{.toctext}](#Note_4)
    -   [[11.7]{.tocnumber} [Component
        Contents]{.toctext}](#Component_Contents_10)
    -   [[11.8]{.tocnumber} [Conclusion]{.toctext}](#Conclusion_10)
-   [[12]{.tocnumber} [Adding Server side validation - Part
    11a]{.toctext}](#Adding_Server_side_validation_-_Part_11a)
    -   [[12.1]{.tocnumber} [Requirements]{.toctext}](#Requirements_11)
    -   [[12.2]{.tocnumber} [File
        Structure]{.toctext}](#File_Structure_11)
        -   [[12.2.1]{.tocnumber} [Create
            administrator/components/com\_foos/Rule/LetterRule.php]{.toctext}](#Create_administrator.2Fcomponents.2Fcom_foos.2FRule.2FLetterRule.php)
            -   [[12.2.1.1]{.tocnumber} [Completed
                administrator/components/com\_foos/Rule/LetterRule.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FRule.2FLetterRule.php_file)
        -   [[12.2.2]{.tocnumber} [Changing
            administrator/components/com\_foos/forms/foo.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_2)
            -   [[12.2.2.1]{.tocnumber} [Completed
                administrator/components/com\_foos/forms/foo.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_file_3)
        -   [[12.2.3]{.tocnumber} [Changing
            administrator/components/com\_foos/foo.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoo.xml)
            -   [[12.2.3.1]{.tocnumber} [Completed
                administrator/components/com\_foos/foo.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoo.xml_file)
    -   [[12.3]{.tocnumber} [Test your
        component]{.toctext}](#Test_your_component_10)
    -   [[12.4]{.tocnumber} [Example in
        Joomla!]{.toctext}](#Example_in_Joomla.21_2)
    -   [[12.5]{.tocnumber} [Component
        Contents]{.toctext}](#Component_Contents_11)
    -   [[12.6]{.tocnumber} [Conclusion]{.toctext}](#Conclusion_11)
-   [[13]{.tocnumber} [Adding Client side validation - Part
    11b]{.toctext}](#Adding_Client_side_validation_-_Part_11b)
    -   [[13.1]{.tocnumber} [Requirements]{.toctext}](#Requirements_12)
    -   [[13.2]{.tocnumber} [File
        Structure]{.toctext}](#File_Structure_12)
        -   [[13.2.1]{.tocnumber} [Changing
            administrator/components/com\_foos/foo.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoo.xml_2)
            -   [[13.2.1.1]{.tocnumber} [Completed
                administrator/components/com\_foos/foo.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoo.xml_file_2)
        -   [[13.2.2]{.tocnumber} [Create
            media/com\_foos/js/admin-foos-letter.js]{.toctext}](#Create_media.2Fcom_foos.2Fjs.2Fadmin-foos-letter.js)
            -   [[13.2.2.1]{.tocnumber} [Completed
                media/com\_foos/js/admin-foos-letter.js
                file]{.toctext}](#Completed_media.2Fcom_foos.2Fjs.2Fadmin-foos-letter.js_file)
        -   [[13.2.3]{.tocnumber} [Changing
            administrator/components/com\_foos/forms/foo.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_3)
            -   [[13.2.3.1]{.tocnumber} [Completed
                administrator/components/com\_foos/forms/foo.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_file_4)
        -   [[13.2.4]{.tocnumber} [Changing
            administrator/components/com\_foos/tmpl/foo/edit.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php_2)
            -   [[13.2.4.1]{.tocnumber} [Completed
                administrator/components/com\_foos/tmpl/foo/edit.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php_file_3)
    -   [[13.3]{.tocnumber} [Test your
        component]{.toctext}](#Test_your_component_11)
    -   [[13.4]{.tocnumber} [Example in
        Joomla]{.toctext}](#Example_in_Joomla)
    -   [[13.5]{.tocnumber} [Component
        Contents]{.toctext}](#Component_Contents_12)
    -   [[13.6]{.tocnumber} [Conclusion]{.toctext}](#Conclusion_12)
-   [[14]{.tocnumber} [Adding categories - Part
    12]{.toctext}](#Adding_categories_-_Part_12)
    -   [[14.1]{.tocnumber} [Requirements]{.toctext}](#Requirements_13)
    -   [[14.2]{.tocnumber} [File
        Structure]{.toctext}](#File_Structure_13)
        -   [[14.2.1]{.tocnumber} [Changing
            administrator/components/com\_foos/Model/FoosModel.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_2)
            -   [[14.2.1.1]{.tocnumber} [Completed
                administrator/components/com\_foos/Model/FoosModel.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_file_3)
        -   [[14.2.2]{.tocnumber} [Changing
            administrator/components/com\_foos/access.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Faccess.xml)
            -   [[14.2.2.1]{.tocnumber} [Completed
                administrator/components/com\_foos/access.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Faccess.xml_file_2)
        -   [[14.2.3]{.tocnumber} [Changing
            administrator/components/com\_foos/foos.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_10)
            -   [[14.2.3.1]{.tocnumber} [Completed
                administrator/components/com\_foos/foos.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_10)
        -   [[14.2.4]{.tocnumber} [Changing
            administrator/components/com\_foos/forms/foo.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_4)
            -   [[14.2.4.1]{.tocnumber} [Completed
                administrator/components/com\_foos/forms/foo.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_file_5)
        -   [[14.2.5]{.tocnumber} [Changing
            administrator/components/com\_foos/sql/update/1.12.0.sql]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Fupdate.2F1.12.0.sql)
            -   [[14.2.5.1]{.tocnumber} [Completed
                administrator/components/com\_foos/sql/update/1.12.0.sql
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Fupdate.2F1.12.0.sql_file)
        -   [[14.2.6]{.tocnumber} [Changing
            administrator/components/com\_foos/Extension/FoosComponent.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FExtension.2FFoosComponent.php)
            -   [[14.2.6.1]{.tocnumber} [Completed
                administrator/components/com\_foos/Extension/FoosComponent.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FExtension.2FFoosComponent.php_file_2)
        -   [[14.2.7]{.tocnumber} [Changing
            administrator/components/com\_foos/tmpl/foo/edit.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php_3)
            -   [[14.2.7.1]{.tocnumber} [Completed
                administrator/components/com\_foos/tmpl/foo/edit.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php_file_4)
        -   [[14.2.8]{.tocnumber} [Changing
            administrator/components/com\_foos/tmpl/foos/default.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_3)
            -   [[14.2.8.1]{.tocnumber} [Completed
                administrator/components/com\_foos/tmpl/foos/default.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_file_4)
    -   [[14.3]{.tocnumber} [Test your
        component]{.toctext}](#Test_your_component_12)
    -   [[14.4]{.tocnumber} [Example in
        Joomla!]{.toctext}](#Example_in_Joomla.21_3)
    -   [[14.5]{.tocnumber} [Component
        Contents]{.toctext}](#Component_Contents_13)
    -   [[14.6]{.tocnumber} [Conclusion]{.toctext}](#Conclusion_13)
-   [[15]{.tocnumber} [Adding Published/Unpublished - Part
    13]{.toctext}](#Adding_Published.2FUnpublished_-_Part_13)
    -   [[15.1]{.tocnumber} [Requirements]{.toctext}](#Requirements_14)
    -   [[15.2]{.tocnumber} [File
        Structure]{.toctext}](#File_Structure_14)
        -   [[15.2.1]{.tocnumber} [Creating
            administrator/components/com\_foos/Controller/FoosController.php]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2FController.2FFoosController.php)
            -   [[15.2.1.1]{.tocnumber} [Completed
                administrator/components/com\_foos/Controller/FoosController.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FController.2FFoosController.php_file)
        -   [[15.2.2]{.tocnumber} [Changing
            administrator/components/com\_foos/Model/FoosModel.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_3)
            -   [[15.2.2.1]{.tocnumber} [Completed
                administrator/components/com\_foos/Model/FoosModel.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_file_4)
        -   [[15.2.3]{.tocnumber} [Changing
            administrator/components/com\_foos/Table/FooTable.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FTable.2FFooTable.php)
            -   [[15.2.3.1]{.tocnumber} [Completed
                administrator/components/com\_foos/Table/FooTable.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FTable.2FFooTable.php_file_2)
        -   [[15.2.4]{.tocnumber} [Changing
            administrator/components/com\_foos/forms/foo.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_5)
            -   [[15.2.4.1]{.tocnumber} [Completed
                administrator/components/com\_foos/forms/foo.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_file_6)
        -   [[15.2.5]{.tocnumber} [Changing
            administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.ini_2)
            -   [[15.2.5.1]{.tocnumber} [Completed
                administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.ini_file_2)
        -   [[15.2.6]{.tocnumber} [Create
            administrator/components/com\_foos/sql/updates/1.13.0.sql]{.toctext}](#Create_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Fupdates.2F1.13.0.sql)
            -   [[15.2.6.1]{.tocnumber} [Completed
                administrator/components/com\_foos/sql/updates/1.13.0.sql
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Fupdates.2F1.13.0.sql_file)
        -   [[15.2.7]{.tocnumber} [Changing
            administrator/components/com\_foos/tmpl/foo/edit.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php_4)
            -   [[15.2.7.1]{.tocnumber} [Completed
                administrator/components/com\_foos/tmpl/foo/edit.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php_file_5)
        -   [[15.2.8]{.tocnumber} [Changing
            administrator/components/com\_foos/tmpl/foos/default.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_4)
            -   [[15.2.8.1]{.tocnumber} [Completed
                administrator/components/com\_foos/tmpl/foos/default.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_file_5)
    -   [[15.3]{.tocnumber} [Test your
        component]{.toctext}](#Test_your_component_13)
    -   [[15.4]{.tocnumber} [Example in
        Joomla!]{.toctext}](#Example_in_Joomla.21_4)
    -   [[15.5]{.tocnumber} [Component
        Contents]{.toctext}](#Component_Contents_14)
    -   [[15.6]{.tocnumber} [Conclusion]{.toctext}](#Conclusion_14)
-   [[16]{.tocnumber} [Adding Custom Fields in the backend - Part
    14a]{.toctext}](#Adding_Custom_Fields_in_the_backend_-_Part_14a)
    -   [[16.1]{.tocnumber} [Requirements]{.toctext}](#Requirements_15)
    -   [[16.2]{.tocnumber} [File
        Structure]{.toctext}](#File_Structure_15)
        -   [[16.2.1]{.tocnumber} [Changing
            administrator/components/com\_foos/View/Foos/HtmlView.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_6)
            -   [[16.2.1.1]{.tocnumber} [Completed
                administrator/components/com\_foos/View/Foos/HtmlView.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_file_7)
        -   [[16.2.2]{.tocnumber} [Changing
            administrator/components/com\_foos/access.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Faccess.xml_2)
            -   [[16.2.2.1]{.tocnumber} [Completed
                administrator/components/com\_foos/access.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Faccess.xml_file_3)
        -   [[16.2.3]{.tocnumber} [Changing
            administrator/components/com\_foos/config.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Fconfig.xml_2)
            -   [[16.2.3.1]{.tocnumber} [Completed
                administrator/components/com\_foos/config.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Fconfig.xml_file_2)
        -   [[16.2.4]{.tocnumber} [Changing
            administrator/components/com\_foos/foos.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_11)
            -   [[16.2.4.1]{.tocnumber} [Completed
                administrator/components/com\_foos/foos.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_11)
        -   [[16.2.5]{.tocnumber} [Changing
            administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.ini_3)
            -   [[16.2.5.1]{.tocnumber} [Completed
                administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.ini_file_3)
        -   [[16.2.6]{.tocnumber} [Changing
            administrator/components/com\_foos/tmpl/foo/edit.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php_5)
            -   [[16.2.6.1]{.tocnumber} [Completed
                administrator/components/com\_foos/tmpl/foo/edit.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php_file_6)
        -   [[16.2.7]{.tocnumber} [Changing
            administrator/components/com\_foos/tmpl/foos/default.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_5)
            -   [[16.2.7.1]{.tocnumber} [Completed
                administrator/components/com\_foos/tmpl/foos/default.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_file_6)
        -   [[16.2.8]{.tocnumber} [Creating
            administrator/components/com\_foos/Helper]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2FHelper)
            -   [[16.2.8.1]{.tocnumber} [Completed
                administrator/components/com\_foos/Helper
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FHelper_file)
    -   [[16.3]{.tocnumber} [Test your
        component]{.toctext}](#Test_your_component_14)
    -   [[16.4]{.tocnumber} [Example in
        Joomla!]{.toctext}](#Example_in_Joomla.21_5)
    -   [[16.5]{.tocnumber} [Component
        Contents]{.toctext}](#Component_Contents_15)
    -   [[16.6]{.tocnumber} [Conclusion]{.toctext}](#Conclusion_15)
-   [[17]{.tocnumber} [Adding Custom Fields in the frontend - Part
    14b]{.toctext}](#Adding_Custom_Fields_in_the_frontend_-_Part_14b)
    -   [[17.1]{.tocnumber} [Requirements]{.toctext}](#Requirements_16)
    -   [[17.2]{.tocnumber} [File
        Structure]{.toctext}](#File_Structure_16)
        -   [[17.2.1]{.tocnumber} [Changing
            administrator/components/com\_foos/foos.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_12)
            -   [[17.2.1.1]{.tocnumber} [Completed
                administrator/components/com\_foos/foos.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_12)
        -   [[17.2.2]{.tocnumber} [Changing
            components/com\_foos/tmpl/foo/default.php]{.toctext}](#Changing_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php_6)
            -   [[17.2.2.1]{.tocnumber} [Completed
                components/com\_foos/tmpl/foo/default.php
                file]{.toctext}](#Completed_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php_file_7)
        -   [[17.2.3]{.tocnumber} [Changing
            components/com\_foos/View/Foo/HtmlView.php]{.toctext}](#Changing_components.2Fcom_foos.2FView.2FFoo.2FHtmlView.php_3)
            -   [[17.2.3.1]{.tocnumber} [Completed
                components/com\_foos/View/Foo/HtmlView.php
                file]{.toctext}](#Completed_components.2Fcom_foos.2FView.2FFoo.2FHtmlView.php_file_4)
    -   [[17.3]{.tocnumber} [Test your
        component]{.toctext}](#Test_your_component_15)
    -   [[17.4]{.tocnumber} [Example in
        Joomla!]{.toctext}](#Example_in_Joomla.21_6)
    -   [[17.5]{.tocnumber} [Component
        Contents]{.toctext}](#Component_Contents_16)
    -   [[17.6]{.tocnumber} [Conclusion]{.toctext}](#Conclusion_16)
-   [[18]{.tocnumber} [Adding Associations I - Part
    15a]{.toctext}](#Adding_Associations_I_-_Part_15a)
    -   [[18.1]{.tocnumber} [Requirements]{.toctext}](#Requirements_17)
    -   [[18.2]{.tocnumber} [File
        Structure]{.toctext}](#File_Structure_17)
        -   [[18.2.1]{.tocnumber} [Changing
            administrator/components/com\_foos/Extension/FoosComponent.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FExtension.2FFoosComponent.php_2)
            -   [[18.2.1.1]{.tocnumber} [Completed
                administrator/components/com\_foos/Extension/FoosComponent.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FExtension.2FFoosComponent.php_file_3)
        -   [[18.2.2]{.tocnumber} [Changing
            administrator/components/com\_foos/Model/FooModel.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFooModel.php_2)
            -   [[18.2.2.1]{.tocnumber} [Completed
                administrator/components/com\_foos/Model/FooModel.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFooModel.php_file_3)
        -   [[18.2.3]{.tocnumber} [Changing
            administrator/components/com\_foos/Model/FoosModel.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_4)
            -   [[18.2.3.1]{.tocnumber} [Completed
                administrator/components/com\_foos/Model/FoosModel.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_file_5)
        -   [[18.2.4]{.tocnumber} [Changing
            administrator/components/com\_foos/Service/HTML/AdministratorService.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FService.2FHTML.2FAdministratorService.php)
            -   [[18.2.4.1]{.tocnumber} [Completed
                administrator/components/com\_foos/Service/HTML/AdministratorService.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FService.2FHTML.2FAdministratorService.php_file_2)
        -   [[18.2.5]{.tocnumber} [Changing
            administrator/components/com\_foos/foos.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_13)
            -   [[18.2.5.1]{.tocnumber} [Completed
                administrator/components/com\_foos/foos.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_13)
        -   [[18.2.6]{.tocnumber} [Changing
            administrator/components/com\_foos/forms/foo.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_6)
            -   [[18.2.6.1]{.tocnumber} [Completed
                administrator/components/com\_foos/forms/foo.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_file_7)
        -   [[18.2.7]{.tocnumber} [Changing
            administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.ini_4)
            -   [[18.2.7.1]{.tocnumber} [Completed
                administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.ini_file_4)
        -   [[18.2.8]{.tocnumber} [Changing
            administrator/components/com\_foos/services/provider.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Fservices.2Fprovider.php_2)
            -   [[18.2.8.1]{.tocnumber} [Completed
                administrator/components/com\_foos/services/provider.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Fservices.2Fprovider.php_file_3)
        -   [[18.2.9]{.tocnumber} [Changing
            administrator/components/com\_foos/tmpl/foo/edit.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php_6)
            -   [[18.2.9.1]{.tocnumber} [Completed
                administrator/components/com\_foos/tmpl/foo/edit.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php_file_7)
        -   [[18.2.10]{.tocnumber} [Changing
            administrator/components/com\_foos/tmpl/foos/default.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_6)
            -   [[18.2.10.1]{.tocnumber} [Completed
                administrator/components/com\_foos/tmpl/foos/default.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_file_7)
        -   [[18.2.11]{.tocnumber} [Creating
            administrator/components/com\_foos/Helper/AssociationsHelper.php]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2FHelper.2FAssociationsHelper.php)
            -   [[18.2.11.1]{.tocnumber} [Completed
                administrator/components/com\_foos/Helper/AssociationsHelper.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FHelper.2FAssociationsHelper.php_file)
        -   [[18.2.12]{.tocnumber} [Creating
            administrator/components/com\_foos/sql/updates/mysql/1.15.0.sql]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Fupdates.2Fmysql.2F1.15.0.sql)
            -   [[18.2.12.1]{.tocnumber} [Completed
                administrator/components/com\_foos/sql/updates/mysql/1.15.0.sql
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Fupdates.2Fmysql.2F1.15.0.sql_file)
        -   [[18.2.13]{.tocnumber} [Creating
            administrator/components/com\_foos/tmpl/foo/edit\_associations.php]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit_associations.php)
            -   [[18.2.13.1]{.tocnumber} [Completed
                administrator/components/com\_foos/tmpl/foo/edit\_associations.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit_associations.php_file)
    -   [[18.3]{.tocnumber} [Test your
        component]{.toctext}](#Test_your_component_16)
    -   [[18.4]{.tocnumber} [Example in
        Joomla!]{.toctext}](#Example_in_Joomla.21_7)
    -   [[18.5]{.tocnumber} [Component
        Contents]{.toctext}](#Component_Contents_17)
    -   [[18.6]{.tocnumber} [Conclusion]{.toctext}](#Conclusion_17)
-   [[19]{.tocnumber} [Adding Associations II - Part
    15b]{.toctext}](#Adding_Associations_II_-_Part_15b)
    -   [[19.1]{.tocnumber} [Requirements]{.toctext}](#Requirements_18)
    -   [[19.2]{.tocnumber} [File
        Structure]{.toctext}](#File_Structure_18)
        -   [[19.2.1]{.tocnumber} [Changing
            administrator/components/com\_foos/Field/Modal/FooField.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FField.2FModal.2FFooField.php)
            -   [[19.2.1.1]{.tocnumber} [Completed
                administrator/components/com\_foos/Field/Modal/FooField.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FField.2FModal.2FFooField.php_file_2)
        -   [[19.2.2]{.tocnumber} [Changing
            administrator/components/com\_foos/Model/FoosModel.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_5)
            -   [[19.2.2.1]{.tocnumber} [Completed
                administrator/components/com\_foos/Model/FoosModel.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_file_6)
        -   [[19.2.3]{.tocnumber} [Changing
            administrator/components/com\_foos/View/Foo/HtmlView.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoo.2FHtmlView.php)
            -   [[19.2.3.1]{.tocnumber} [Completed
                administrator/components/com\_foos/View/Foo/HtmlView.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoo.2FHtmlView.php_file)
        -   [[19.2.4]{.tocnumber} [Changing
            administrator/components/com\_foos/View/Foos/HtmlView.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_7)
            -   [[19.2.4.1]{.tocnumber} [Completed
                administrator/components/com\_foos/View/Foos/HtmlView.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_file_8)
        -   [[19.2.5]{.tocnumber} [Changing
            administrator/components/com\_foos/foos.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_14)
            -   [[19.2.5.1]{.tocnumber} [Completed
                administrator/components/com\_foos/foos.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_14)
    -   [[19.3]{.tocnumber} [Test your
        component]{.toctext}](#Test_your_component_17)
    -   [[19.4]{.tocnumber} [Component
        Contents]{.toctext}](#Component_Contents_18)
-   [[20]{.tocnumber} [Adding Ordering and Filter - Part
    16]{.toctext}](#Adding_Ordering_and_Filter_-_Part_16)
    -   [[20.1]{.tocnumber} [Requirements]{.toctext}](#Requirements_19)
    -   [[20.2]{.tocnumber} [File
        Structure]{.toctext}](#File_Structure_19)
        -   [[20.2.1]{.tocnumber} [Changing
            administrator/components/com\_foos/Model/FoosModel.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_6)
            -   [[20.2.1.1]{.tocnumber} [Completed
                administrator/components/com\_foos/Model/FoosModel.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_file_7)
        -   [[20.2.2]{.tocnumber} [Changing
            administrator/components/com\_foos/View/Foos/HtmlView.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_8)
            -   [[20.2.2.1]{.tocnumber} [Completed
                administrator/components/com\_foos/View/Foos/HtmlView.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_file_9)
        -   [[20.2.3]{.tocnumber} [Changing
            administrator/components/com\_foos/foos.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_15)
            -   [[20.2.3.1]{.tocnumber} [Completed
                administrator/components/com\_foos/foos.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_15)
        -   [[20.2.4]{.tocnumber} [Changing
            administrator/components/com\_foos/forms/foo.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_7)
            -   [[20.2.4.1]{.tocnumber} [Completed
                administrator/components/com\_foos/forms/foo.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_file_8)
        -   [[20.2.5]{.tocnumber} [Create
            administrator/components/com\_foos/sql/updates/mysql/1.16.0.sql]{.toctext}](#Create_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Fupdates.2Fmysql.2F1.16.0.sql)
            -   [[20.2.5.1]{.tocnumber} [Completed
                administrator/components/com\_foos/sql/updates/mysql/1.16.0.sql
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Fupdates.2Fmysql.2F1.16.0.sql_file)
        -   [[20.2.6]{.tocnumber} [Changing
            administrator/components/com\_foos/tmpl/foos/default.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_7)
            -   [[20.2.6.1]{.tocnumber} [Completed
                administrator/components/com\_foos/tmpl/foos/default.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_file_8)
        -   [[20.2.7]{.tocnumber} [Changing
            administrator/components/com\_foos/tmpl/foos/modal.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fmodal.php)
            -   [[20.2.7.1]{.tocnumber} [Completed
                administrator/components/com\_foos/tmpl/foos/modal.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fmodal.php_file_2)
    -   [[20.3]{.tocnumber} [Test your
        component]{.toctext}](#Test_your_component_18)
    -   [[20.4]{.tocnumber} [Example in
        Joomla!]{.toctext}](#Example_in_Joomla.21_8)
    -   [[20.5]{.tocnumber} [Component
        Contents]{.toctext}](#Component_Contents_19)
    -   [[20.6]{.tocnumber} [Conclusion]{.toctext}](#Conclusion_18)
-   [[21]{.tocnumber} [Adding Actions - Part
    17]{.toctext}](#Adding_Actions_-_Part_17)
    -   [[21.1]{.tocnumber} [Requirements]{.toctext}](#Requirements_20)
    -   [[21.2]{.tocnumber} [File
        Structure]{.toctext}](#File_Structure_20)
        -   [[21.2.1]{.tocnumber} [Changing
            administrator/components/com\_foos/View/Foo/HtmlView.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoo.2FHtmlView.php_2)
            -   [[21.2.1.1]{.tocnumber} [Completed
                administrator/components/com\_foos/View/Foo/HtmlView.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoo.2FHtmlView.php_file_2)
        -   [[21.2.2]{.tocnumber} [Changing
            administrator/components/com\_foos/View/Foos/HtmlView.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_9)
            -   [[21.2.2.1]{.tocnumber} [Completed
                administrator/components/com\_foos/View/Foos/HtmlView.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_file_10)
        -   [[21.2.3]{.tocnumber} [Changing
            administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.ini_5)
            -   [[21.2.3.1]{.tocnumber} [Completed
                administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.ini_file_5)
        -   [[21.2.4]{.tocnumber} [Changing
            administrator/components/com\_foos/foos.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_16)
            -   [[21.2.4.1]{.tocnumber} [Completed
                administrator/components/com\_foos/foos.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_16)
    -   [[21.3]{.tocnumber} [Test your
        component]{.toctext}](#Test_your_component_19)
    -   [[21.4]{.tocnumber} [Example in
        Joomla!]{.toctext}](#Example_in_Joomla.21_9)
    -   [[21.5]{.tocnumber} [Component
        Contents]{.toctext}](#Component_Contents_20)
    -   [[21.6]{.tocnumber} [Conclusion]{.toctext}](#Conclusion_19)
-   [[22]{.tocnumber} [Adding Params - Part
    18]{.toctext}](#Adding_Params_-_Part_18)
    -   [[22.1]{.tocnumber} [Requirements]{.toctext}](#Requirements_21)
    -   [[22.2]{.tocnumber} [File
        Structure]{.toctext}](#File_Structure_21)
        -   [[22.2.1]{.tocnumber} [Changing
            administrator/components/com\_foos/Model/FoosModel.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_7)
            -   [[22.2.1.1]{.tocnumber} [Completed
                administrator/components/com\_foos/Model/FoosModel.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_file_8)
        -   [[22.2.2]{.tocnumber} [Changing
            administrator/components/com\_foos/Table/FooTable.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FTable.2FFooTable.php_2)
            -   [[22.2.2.1]{.tocnumber} [Completed
                administrator/components/com\_foos/Table/FooTable.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FTable.2FFooTable.php_file_3)
        -   [[22.2.3]{.tocnumber} [Changing
            administrator/components/com\_foos/config.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Fconfig.xml_3)
            -   [[22.2.3.1]{.tocnumber} [Completed
                administrator/components/com\_foos/config.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Fconfig.xml_file_3)
        -   [[22.2.4]{.tocnumber} [Changing
            administrator/components/com\_foos/foos.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_17)
            -   [[22.2.4.1]{.tocnumber} [Completed
                administrator/components/com\_foos/foos.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_17)
        -   [[22.2.5]{.tocnumber} [Changing
            administrator/components/com\_foos/forms/foo.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_8)
            -   [[22.2.5.1]{.tocnumber} [Completed
                administrator/components/com\_foos/forms/foo.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_file_9)
        -   [[22.2.6]{.tocnumber} [Changing
            administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.ini_6)
            -   [[22.2.6.1]{.tocnumber} [Completed
                administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.ini_file_6)
        -   [[22.2.7]{.tocnumber} [Changing
            components/com\_foos/View/Foo/HtmlView.php]{.toctext}](#Changing_components.2Fcom_foos.2FView.2FFoo.2FHtmlView.php_4)
            -   [[22.2.7.1]{.tocnumber} [Completed
                components/com\_foos/View/Foo/HtmlView.php
                file]{.toctext}](#Completed_components.2Fcom_foos.2FView.2FFoo.2FHtmlView.php_file_5)
        -   [[22.2.8]{.tocnumber} [Changing x]{.toctext}](#Changing_x)
            -   [[22.2.8.1]{.tocnumber} [Completed x
                file]{.toctext}](#Completed_x_file)
        -   [[22.2.9]{.tocnumber} [Changing
            components/com\_foos/tmpl/foo/default.php]{.toctext}](#Changing_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php_7)
            -   [[22.2.9.1]{.tocnumber} [Completed
                components/com\_foos/tmpl/foo/default.php
                file]{.toctext}](#Completed_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php_file_8)
        -   [[22.2.10]{.tocnumber} [Creating
            administrator/components/com\_foos/sql/updates/mysql/1.18.0.sql]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Fupdates.2Fmysql.2F1.18.0.sql)
            -   [[22.2.10.1]{.tocnumber} [Completed
                administrator/components/com\_foos/sql/updates/mysql/1.18.0.sql
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Fupdates.2Fmysql.2F1.18.0.sql_file)
    -   [[22.3]{.tocnumber} [Test your
        component]{.toctext}](#Test_your_component_20)
    -   [[22.4]{.tocnumber} [Example in
        Joomla!]{.toctext}](#Example_in_Joomla.21_10)
    -   [[22.5]{.tocnumber} [Component
        Contents]{.toctext}](#Component_Contents_21)
    -   [[22.6]{.tocnumber} [Conclusion]{.toctext}](#Conclusion_20)
-   [[23]{.tocnumber} [Adding Pagination - Part
    19]{.toctext}](#Adding_Pagination_-_Part_19)
    -   [[23.1]{.tocnumber} [Requirements]{.toctext}](#Requirements_22)
    -   [[23.2]{.tocnumber} [File
        Structure]{.toctext}](#File_Structure_22)
        -   [[23.2.1]{.tocnumber} [Changing
            administrator/components/com\_foos/foos.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_18)
            -   [[23.2.1.1]{.tocnumber} [Completed
                administrator/components/com\_foos/foos.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_18)
        -   [[23.2.2]{.tocnumber} [Changing
            administrator/components/com\_foos/View/Foos/HtmlView.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_10)
            -   [[23.2.2.1]{.tocnumber} [Completed
                administrator/components/com\_foos/View/Foos/HtmlView.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_file_11)
        -   [[23.2.3]{.tocnumber} [Changing
            administrator/components/com\_foos/tmpl/foos/default.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_8)
            -   [[23.2.3.1]{.tocnumber} [Completed
                administrator/components/com\_foos/tmpl/foos/default.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_file_9)
    -   [[23.3]{.tocnumber} [Test your
        component]{.toctext}](#Test_your_component_21)
    -   [[23.4]{.tocnumber} [Example in
        Joomla!]{.toctext}](#Example_in_Joomla.21_11)
    -   [[23.5]{.tocnumber} [Component
        Contents]{.toctext}](#Component_Contents_22)
    -   [[23.6]{.tocnumber} [Conclusion]{.toctext}](#Conclusion_21)
-   [[24]{.tocnumber} [Adding a Layout - Part
    20]{.toctext}](#Adding_a_Layout_-_Part_20)
    -   [[24.1]{.tocnumber} [Requirements]{.toctext}](#Requirements_23)
    -   [[24.2]{.tocnumber} [File
        Structure]{.toctext}](#File_Structure_23)
        -   [[24.2.1]{.tocnumber} [Changing
            administrator/components/com\_foos/foos.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_19)
            -   [[24.2.1.1]{.tocnumber} [Completed
                administrator/components/com\_foos/foos.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_19)
        -   [[24.2.2]{.tocnumber} [Changing
            administrator/components/com\_foos/forms/foo.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_9)
            -   [[24.2.2.1]{.tocnumber} [Completed
                administrator/components/com\_foos/forms/foo.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_file_10)
        -   [[24.2.3]{.tocnumber} [Changing x]{.toctext}](#Changing_x_2)
            -   [[24.2.3.1]{.tocnumber} [Completed x
                file]{.toctext}](#Completed_x_file_2)
        -   [[24.2.4]{.tocnumber} [Changing
            administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.sys.ini)
            -   [[24.2.4.1]{.tocnumber} [Completed
                administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.sys.ini_file)
        -   [[24.2.5]{.tocnumber} [Creating
            components/com\_foos/tmpl/foo/withhead.php]{.toctext}](#Creating_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fwithhead.php)
            -   [[24.2.5.1]{.tocnumber} [Completed
                components/com\_foos/tmpl/foo/withhead.php
                file]{.toctext}](#Completed_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fwithhead.php_file)
        -   [[24.2.6]{.tocnumber} [Creating
            components/com\_foos/tmpl/foo/withhead.xml]{.toctext}](#Creating_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fwithhead.xml)
            -   [[24.2.6.1]{.tocnumber} [Completed
                components/com\_foos/tmpl/foo/withhead.xml
                file]{.toctext}](#Completed_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fwithhead.xml_file)
    -   [[24.3]{.tocnumber} [Test your
        component]{.toctext}](#Test_your_component_22)
    -   [[24.4]{.tocnumber} [Example in
        Joomla!]{.toctext}](#Example_in_Joomla.21_12)
    -   [[24.5]{.tocnumber} [Component
        Contents]{.toctext}](#Component_Contents_23)
    -   [[24.6]{.tocnumber} [Conclusion]{.toctext}](#Conclusion_22)
-   [[25]{.tocnumber} [Adding Checkout - Part
    21]{.toctext}](#Adding_Checkout_-_Part_21)
    -   [[25.1]{.tocnumber} [Requirements]{.toctext}](#Requirements_24)
    -   [[25.2]{.tocnumber} [File
        Structure]{.toctext}](#File_Structure_24)
        -   [[25.2.1]{.tocnumber} [Changing
            administrator/components/com\_foos/Model/FoosModel.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_8)
            -   [[25.2.1.1]{.tocnumber} [Completed
                administrator/components/com\_foos/Model/FoosModel.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_file_9)
        -   [[25.2.2]{.tocnumber} [Changing
            administrator/components/com\_foos/View/Foos/HtmlView.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_11)
            -   [[25.2.2.1]{.tocnumber} [Completed
                administrator/components/com\_foos/View/Foos/HtmlView.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_file_12)
        -   [[25.2.3]{.tocnumber} [Changing
            administrator/components/com\_foos/foos.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_20)
            -   [[25.2.3.1]{.tocnumber} [Completed
                administrator/components/com\_foos/foos.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_20)
        -   [[25.2.4]{.tocnumber} [Changing
            administrator/components/com\_foos/forms/foo.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_10)
            -   [[25.2.4.1]{.tocnumber} [Completed
                administrator/components/com\_foos/forms/foo.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_file_11)
        -   [[25.2.5]{.tocnumber} [Changing
            administrator/components/com\_foos/tmpl/foos/default.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_9)
            -   [[25.2.5.1]{.tocnumber} [Completed
                administrator/components/com\_foos/tmpl/foos/default.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_file_10)
        -   [[25.2.6]{.tocnumber} [Changing
            administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.ini_7)
            -   [[25.2.6.1]{.tocnumber} [Completed
                administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.ini_file_7)
        -   [[25.2.7]{.tocnumber} [Creating
            /administrator/components/com\_foos/sql/updates/mysql/1.21.0.sql]{.toctext}](#Creating_.2Fadministrator.2Fcomponents.2Fcom_foos.2Fsql.2Fupdates.2Fmysql.2F1.21.0.sql)
            -   [[25.2.7.1]{.tocnumber} [Completed
                /administrator/components/com\_foos/sql/updates/mysql/1.21.0.sql
                file]{.toctext}](#Completed_.2Fadministrator.2Fcomponents.2Fcom_foos.2Fsql.2Fupdates.2Fmysql.2F1.21.0.sql_file)
    -   [[25.3]{.tocnumber} [Test your
        component]{.toctext}](#Test_your_component_23)
    -   [[25.4]{.tocnumber} [Example in
        Joomla!]{.toctext}](#Example_in_Joomla.21_13)
    -   [[25.5]{.tocnumber} [Component
        Contents]{.toctext}](#Component_Contents_24)
    -   [[25.6]{.tocnumber} [Conclusion]{.toctext}](#Conclusion_23)
-   [[26]{.tocnumber} [Adding a batch process and alias - Part
    22]{.toctext}](#Adding_a_batch_process_and_alias_-_Part_22)
    -   [[26.1]{.tocnumber} [Requirements]{.toctext}](#Requirements_25)
    -   [[26.2]{.tocnumber} [File
        Structure]{.toctext}](#File_Structure_25)
        -   [[26.2.1]{.tocnumber} [Changing
            administrator/components/com\_foos/Controller/FooController.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FController.2FFooController.php)
            -   [[26.2.1.1]{.tocnumber} [Completed
                administrator/components/com\_foos/Controller/FooController.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FController.2FFooController.php_file_2)
        -   [[26.2.2]{.tocnumber} [Changing
            administrator/components/com\_foos/Model/FooModel.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFooModel.php_3)
            -   [[26.2.2.1]{.tocnumber} [Completed
                administrator/components/com\_foos/Model/FooModel.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFooModel.php_file_4)
        -   [[26.2.3]{.tocnumber} [Changing
            administrator/components/com\_foos/Model/FoosModel.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_9)
            -   [[26.2.3.1]{.tocnumber} [Completed
                administrator/components/com\_foos/Model/FoosModel.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_file_10)
        -   [[26.2.4]{.tocnumber} [Changing
            administrator/components/com\_foos/View/Foos/HtmlView.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_12)
            -   [[26.2.4.1]{.tocnumber} [Completed
                administrator/components/com\_foos/View/Foos/HtmlView.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_file_13)
        -   [[26.2.5]{.tocnumber} [Changing
            administrator/components/com\_foos/foos.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_21)
            -   [[26.2.5.1]{.tocnumber} [Completed
                administrator/components/com\_foos/foos.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_21)
        -   [[26.2.6]{.tocnumber} [Changing
            administrator/components/com\_foos/forms/foo.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_11)
            -   [[26.2.6.1]{.tocnumber} [Completed
                administrator/components/com\_foos/forms/foo.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_file_12)
        -   [[26.2.7]{.tocnumber} [Changing
            administrator/components/com\_foos/tmpl/foo/edit.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php_7)
            -   [[26.2.7.1]{.tocnumber} [Completed
                administrator/components/com\_foos/tmpl/foo/edit.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php_file_8)
        -   [[26.2.8]{.tocnumber} [Changing
            administrator/components/com\_foos/tmpl/foos/default.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_10)
            -   [[26.2.8.1]{.tocnumber} [Completed
                administrator/components/com\_foos/tmpl/foos/default.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_file_11)
        -   [[26.2.9]{.tocnumber} [Creating
            administrator/components/com\_foos/tmpl/foos/default\_batch.php]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault_batch.php)
            -   [[26.2.9.1]{.tocnumber} [Completed
                administrator/components/com\_foos/tmpl/foos/default\_batch.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault_batch.php_file)
        -   [[26.2.10]{.tocnumber} [Creating
            administrator/components/com\_foos/tmpl/foos/default\_batch\_body.php]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault_batch_body.php)
            -   [[26.2.10.1]{.tocnumber} [Completed
                administrator/components/com\_foos/tmpl/foos/default\_batch\_body.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault_batch_body.php_file)
        -   [[26.2.11]{.tocnumber} [Creating
            administrator/components/com\_foos/tmpl/foos/default\_batch\_footer.php]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault_batch_footer.php)
            -   [[26.2.11.1]{.tocnumber} [Completed
                administrator/components/com\_foos/tmpl/foos/default\_batch\_footer.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault_batch_footer.php_file)
    -   [[26.3]{.tocnumber} [Test your
        component]{.toctext}](#Test_your_component_24)
    -   [[26.4]{.tocnumber} [Example in
        Joomla!]{.toctext}](#Example_in_Joomla.21_14)
    -   [[26.5]{.tocnumber} [Component
        Contents]{.toctext}](#Component_Contents_25)
    -   [[26.6]{.tocnumber} [Conclusion]{.toctext}](#Conclusion_24)
-   [[27]{.tocnumber} [Adding a help link - Part
    23]{.toctext}](#Adding_a_help_link_-_Part_23)
    -   [[27.1]{.tocnumber} [Requirements]{.toctext}](#Requirements_26)
    -   [[27.2]{.tocnumber} [File
        Structure]{.toctext}](#File_Structure_26)
        -   [[27.2.1]{.tocnumber} [Changing
            administrator/components/com\_foos/View/Foo/HtmlView.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoo.2FHtmlView.php_3)
            -   [[27.2.1.1]{.tocnumber} [Completed
                administrator/components/com\_foos/View/Foo/HtmlView.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoo.2FHtmlView.php_file_3)
        -   [[27.2.2]{.tocnumber} [Changing
            administrator/components/com\_foos/View/Foos/HtmlView.php]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_13)
            -   [[27.2.2.1]{.tocnumber} [Completed
                administrator/components/com\_foos/View/Foos/HtmlView.php
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_file_14)
        -   [[27.2.3]{.tocnumber} [Changing
            administrator/components/com\_foos/foos.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_22)
            -   [[27.2.3.1]{.tocnumber} [Completed
                administrator/components/com\_foos/foos.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_22)
    -   [[27.3]{.tocnumber} [Test your
        component]{.toctext}](#Test_your_component_25)
    -   [[27.4]{.tocnumber} [Example in
        Joomla!]{.toctext}](#Example_in_Joomla.21_15)
    -   [[27.5]{.tocnumber} [Component
        Contents]{.toctext}](#Component_Contents_26)
    -   [[27.6]{.tocnumber} [Conclusion]{.toctext}](#Conclusion_25)
-   [[28]{.tocnumber} [Adding an update server and a changelog- Part
    24]{.toctext}](#Adding_an_update_server_and_a_changelog-_Part_24)
    -   [[28.1]{.tocnumber} [Requirements]{.toctext}](#Requirements_27)
    -   [[28.2]{.tocnumber} [File
        Structure]{.toctext}](#File_Structure_27)
        -   [[28.2.1]{.tocnumber} [Changing
            administrator/components/com\_foos/foos.xml]{.toctext}](#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_23)
            -   [[28.2.1.1]{.tocnumber} [Completed
                administrator/components/com\_foos/foos.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_23)
        -   [[28.2.2]{.tocnumber} [Creating
            administrator/components/com\_foos/changelog.xml]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2Fchangelog.xml)
            -   [[28.2.2.1]{.tocnumber} [Completed
                administrator/components/com\_foos/changelog.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Fchangelog.xml_file)
        -   [[28.2.3]{.tocnumber} [Creating
            administrator/components/com\_foos/foo\_update.xml]{.toctext}](#Creating_administrator.2Fcomponents.2Fcom_foos.2Ffoo_update.xml)
            -   [[28.2.3.1]{.tocnumber} [Completed
                administrator/components/com\_foos/foo\_update.xml
                file]{.toctext}](#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoo_update.xml_file)
    -   [[28.3]{.tocnumber} [Test your
        component]{.toctext}](#Test_your_component_26)
    -   [[28.4]{.tocnumber} [Example in
        Joomla!]{.toctext}](#Example_in_Joomla.21_16)
    -   [[28.5]{.tocnumber} [More
        informations]{.toctext}](#More_informations)
    -   [[28.6]{.tocnumber} [Component
        Contents]{.toctext}](#Component_Contents_27)
    -   [[28.7]{.tocnumber} [Conclusion]{.toctext}](#Conclusion_26)
-   [[29]{.tocnumber} [Adding Adding frontend edit - Part
    25]{.toctext}](#Adding_Adding_frontend_edit_-_Part_25)
-   [[30]{.tocnumber} [Adding Tags - Part
    26]{.toctext}](#Adding_Tags_-_Part_26)
-   [[31]{.tocnumber} [Adding Workflow - Part
    27]{.toctext}](#Adding_Workflow_-_Part_27)

</div>

[Creating a Simple Component for Joomla!4.x]{#Creating_a_Simple_Component_for_Joomla.214.x .mw-headline}
========================================================================================================

This is a multiple-article series of tutorials on how to develop a
Model-View-Controller
[Component](/Special:MyLanguage/Component "Special:MyLanguage/Component")
for Joomla! Version 4x. You can navigate the articles in this series by
using the navigation drop down menu.

Begin with the Introduction, and navigate the articles in this series by
using the navigation button at the bottom or the box to the right
(*Articles in this series*). Let's start with the introduction.

[Developing a Basic Component - Part 1]{#Developing_a_Basic_Component_-_Part_1 .mw-headline}
============================================================================================

[Notes]{#Notes .mw-headline}
----------------------------

-   If you are new to Joomla!,

please read [Absolute Basics of How a Component
Functions](/Special:MyLanguage/Absolute_Basics_of_How_a_Component_Functions "Special:MyLanguage/Absolute Basics of How a Component Functions").

-   This tutorial is for Joomlaǃ4.

For creating a component for Joomlaǃ3 see [Developing a
Model-View-Controller
Component/3.x](https://docs.joomla.org/J3.x:Developing_an_MVC_Component%7C){.external
.text}.

[Requirements]{#Requirements .mw-headline}
------------------------------------------

You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev). You can download Joomla! 4 at
[GitHub](https://github.com/joomla/joomla-cms/tree/4.0-dev){.external
.text}, on the [Developer
website](https://developer.joomla.org/nightly-builds.html){.external
.text} or you can create a free website at <https://launch.joomla.org>.

\

[Creating a simple Component/Developing a Basic Component]{#Creating_a_simple_Component.2FDeveloping_a_Basic_Component .mw-headline}
------------------------------------------------------------------------------------------------------------------------------------

You can see many examples of components in the standard Joomla! install.
For example

-   Content
-   Banners
-   Tags or
-   Contact

This tutorial will explain how to go about creating a simple component.
Through this tutorial you will learn the basic file structure of a
Joomlaǃ4 component. This basic structure can then be expanded to produce
more complex components.

### [File Structure]{#File_Structure .mw-headline}

There are a few basic files that are used in the standard pattern of
component development:

-   `administrator/components/com_foos/Controller/DisplayController.php` -
    This

file is Foos master display controller.

-   `administrator/components/com_foos/Extension/FoosComponent.php` -
    This

file is the Component class for com\_foos.

-   `administrator/components/com_foos/Service/HTML/AdministratorService.php` -
    This

file is the Content HTML helper.

-   `administrator/components/com_foos/View/Foos/HtmlView.php` - This

file is the View class for a list of foos.

-   `administrator/components/com_foos/services/provider.php` - This

file is the The foo service provider.

-   `administrator/components/com_foos/tmpl/foos/default.php` - This

file is the template for a list of foos.

-   `com_foo.xml` - This file contains information about the componente.

It defines the files that need to be installed by the Joomla! installer
and specifies configuration parameters for the componente.

-   `script.php` - This file is the Installation Script file of Foo
    Component.

### [Creating administrator/components/com\_foos/Controller/DisplayController.php]{#Creating_administrator.2Fcomponents.2Fcom_foos.2FController.2FDisplayController.php .mw-headline}

The `administrator/components/com_foos/Controller/DisplayController.php`
file is is Foos master display controller.

#### [Completed administrator/components/com\_foos/Controller/DisplayController.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FController.2FDisplayController.php_file .mw-headline}

The code for the
`administrator/components/com_foos/Controller/DisplayController.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\Controller;

    defined('_JEXEC') or die;

    use Joomla\CMS\MVC\Controller\BaseController;

    /**
     * Foos master display controller.
     *
     * @since  1.0
     */
    class DisplayController extends BaseController
    {
        /**
        * The default view.
        *
        * @var    string
        * @since  1.0
        */
        protected $default_view = 'foos';

        /**
        * Method to display a view.
        *
        * @param   boolean  $cachable   If true, the view output will be cached
        * @param   array    $urlparams  An array of safe URL parameters and their variable types, for valid values see {@link \JFilterInput::clean()}.
        *
        * @return  BaseController|bool  This object to support chaining.
        *
        * @since   1.0
        */
        public function display($cachable = false, $urlparams = array())
        {
            return parent::display();
        }
    }

</div>

### [Creating administrator/components/com\_foos/Extension/FoosComponent.php]{#Creating_administrator.2Fcomponents.2Fcom_foos.2FExtension.2FFoosComponent.php .mw-headline}

The `administrator/components/com_foos/Extension/FoosComponent.php` file
is the Component class for com\_foos.

#### [Completed administrator/components/com\_foos/Extension/FoosComponent.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FExtension.2FFoosComponent.php_file .mw-headline}

The code for the
`administrator/components/com_foos/Extension/FoosComponent.php` file is
as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\Extension;

    defined('JPATH_PLATFORM') or die;

    use Joomla\CMS\Categories\CategoryServiceInterface;
    use Joomla\CMS\Categories\CategoryServiceTrait;
    use Joomla\CMS\Extension\BootableExtensionInterface;
    use Joomla\CMS\Extension\MVCComponent;
    use Joomla\CMS\HTML\HTMLRegistryAwareTrait;
    use Psr\Container\ContainerInterface;
    use Joomla\Component\Foos\Administrator\Service\HTML\AdministratorService;

    /**
     * Component class for com_foos
     *
     * @since  1.0.0
     */
    class FoosComponent extends MVCComponent implements BootableExtensionInterface, CategoryServiceInterface
    {
        use CategoryServiceTrait;
        use HTMLRegistryAwareTrait;

        /**
        * Booting the extension. This is the function to set up the environment of the extension like
        * registering new class loaders, etc.
        *
        * If required, some initial set up can be done from services of the container, eg.
        * registering HTML services.
        *
        * @param   ContainerInterface  $container  The container
        *
        * @return  void
        *
        * @since   1.0.0
        */
        public function boot(ContainerInterface $container)
        {
            $this->getRegistry()->register('foosadministrator', new AdministratorService);
        }
    }

</div>

### [Creating administrator/components/com\_foos/Service/HTML/AdministratorService.php]{#Creating_administrator.2Fcomponents.2Fcom_foos.2FService.2FHTML.2FAdministratorService.php .mw-headline}

The
`administrator/components/com_foos/Service/HTML/AdministratorService.php`
file is ....

#### [Completed administrator/components/com\_foos/Service/HTML/AdministratorService.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FService.2FHTML.2FAdministratorService.php_file .mw-headline}

The code for the
`administrator/components/com_foos/Service/HTML/AdministratorService.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\Service\HTML;

    defined('JPATH_BASE') or die;

    /**
     * Foo HTML class.
     *
     * @since  1.0
     */
    class AdministratorService
    {
    }

</div>

### [Creating administrator/components/com\_foos/View/Foos/HtmlView.php]{#Creating_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php .mw-headline}

The `administrator/components/com_foos/View/Foos/HtmlView.php` file is
....

#### [Completed administrator/components/com\_foos/View/Foos/HtmlView.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_file .mw-headline}

The code for the
`administrator/components/com_foos/View/Foos/HtmlView.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\View\Foos;

    defined('_JEXEC') or die;

    use Joomla\CMS\MVC\View\HtmlView as BaseHtmlView;

    /**
     * View class for a list of foos.
     *
     * @since  1.0
     */
    class HtmlView extends BaseHtmlView
    {
        /**
        * Method to display the view.
        *
        * @param   string  $tpl  A template file to load. [optional]
        *
        * @return  mixed  A string if successful, otherwise an \Exception object.
        *
        * @since   1.0
        */
        public function display($tpl = null)
        {
            return parent::display($tpl);
        }
    }

</div>

### [Creating administrator/components/com\_foos/services/provider.php]{#Creating_administrator.2Fcomponents.2Fcom_foos.2Fservices.2Fprovider.php .mw-headline}

The `administrator/components/com_foos/services/provider.php` file is
....

#### [Completed administrator/components/com\_foos/services/provider.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Fservices.2Fprovider.php_file .mw-headline}

The code for the
`administrator/components/com_foos/services/provider.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    defined('_JEXEC') or die;

    use Joomla\CMS\Dispatcher\ComponentDispatcherFactoryInterface;
    use Joomla\CMS\Extension\ComponentInterface;
    use Joomla\CMS\Extension\Service\Provider\CategoryFactory;
    use Joomla\CMS\Extension\Service\Provider\ComponentDispatcherFactory;
    use Joomla\CMS\Extension\Service\Provider\MVCFactory;
    use Joomla\CMS\HTML\Registry;
    use Joomla\DI\Container;
    use Joomla\DI\ServiceProviderInterface;
    use Joomla\Component\Foos\Administrator\Extension\FoosComponent;

    /**
     * The foos service provider.
     * https://github.com/joomla/joomla-cms/pull/20217
     *
     * @since  1.0.0
     */
    return new class implements ServiceProviderInterface
    {
        /**
        * Registers the service provider with a DI container.
        *
        * @param   Container  $container  The DI container.
        *
        * @return  void
        *
        * @since   1.0.0
        */
        public function register(Container $container)
        {
            $container->registerServiceProvider(new CategoryFactory('\\Joomla\\Component\\Foos'));
            $container->registerServiceProvider(new MVCFactory('\\Joomla\\Component\\Foos'));
            $container->registerServiceProvider(new ComponentDispatcherFactory('\\Joomla\\Component\\Foos'));

            $container->set(
                ComponentInterface::class,
                function (Container $container)
                {
                    $component = new FoosComponent($container->get(ComponentDispatcherFactoryInterface::class));

                    $component->setRegistry($container->get(Registry::class));

                    return $component;
                }
            );
        }
    };

</div>

### [Creating administrator/components/com\_foos/tmpl/foos/default.php]{#Creating_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php .mw-headline}

The `administrator/components/com_foos/tmpl/foos/default.php` file is
....

#### [Completed administrator/components/com\_foos/tmpl/foos/default.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_file .mw-headline}

The code for the
`administrator/components/com_foos/tmpl/foos/default.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    Hello Foos

</div>

### [Creating script.php]{#Creating_script.php .mw-headline}

The `script.php` file is .... Most entries are self-explanatory.

#### [Completed script.php file]{#Completed_script.php_file .mw-headline}

The code for the `script.php` file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php

    /**
     * @package    [PACKAGE_NAME]
     *
     * @author     [AUTHOR] <[AUTHOR_EMAIL]>
     * @copyright  [COPYRIGHT]
     * @license    GNU General Public License version 2 or later; see LICENSE.txt
     * @link       [AUTHOR_URL]
     */
    // No direct access to this file
    defined('_JEXEC') or die;

    use Joomla\CMS\Language\Text;
    use Joomla\CMS\Log\Log;

    /**
     * Script file of Foo Component
     *
     * @since  1.0.0
     *
     */
    class FoosInstallerScript
    {
        /**
        * Extension script constructor.
        *
        * @since  1.0.0
        *
        */
        public function __construct()
        {
            $this->minimumJoomla = '4.0';
            $this->minimumPhp = JOOMLA_MINIMUM_PHP;
        }

        /**
        * Method to install the extension
        *
        * @param   InstallerAdapter  $parent  The class calling this method
        *
        * @return  boolean  True on success
        *
        * @since  1.0.0
        *
        */
        public function install($parent)
        {
            echo Text::_('COM_FOOS_INSTALLERSCRIPT_UNINSTALL');

            return true;
        }

        /**
        * Method to uninstall the extension
        *
        * @param   InstallerAdapter  $parent  The class calling this method
        *
        * @return  boolean  True on success
        *
        * @since  1.0.0
        *
        */
        public function uninstall($parent)
        {
            echo Text::_('COM_FOOS_INSTALLERSCRIPT_UNINSTALL');

            return true;
        }

        /**
        * Method to update the extension
        *
        * @param   InstallerAdapter  $parent  The class calling this method
        *
        * @return  boolean  True on success
        *
        * @since  1.0.0
        *
        */
        public function update($parent)
        {
            echo Text::_('COM_FOOS_INSTALLERSCRIPT_UPDATE');

            return true;
        }

        /**
        * Function called before extension installation/update/removal procedure commences
        *
        * @param   string            $type    The type of change (install, update or discover_install, not uninstall)
        * @param   InstallerAdapter  $parent  The class calling this method
        *
        * @return  boolean  True on success
        *
        * @since  1.0.0
        *
        */
        public function preflight($type, $parent)
        {
            // Check for the minimum PHP version before continuing
            if (!empty($this->minimumPhp) && version_compare(PHP_VERSION, $this->minimumPhp, '<'))
            {
                Log::add(Text::sprintf('JLIB_INSTALLER_MINIMUM_PHP', $this->minimumPhp), Log::WARNING, 'jerror');

                return false;
            }

            // Check for the minimum Joomla version before continuing
            if (!empty($this->minimumJoomla) && version_compare(JVERSION, $this->minimumJoomla, '<'))
            {
                Log::add(Text::sprintf('JLIB_INSTALLER_MINIMUM_JOOMLA', $this->minimumJoomla), Log::WARNING, 'jerror');

                return false;
            }

            echo Text::_('COM_FOOS_INSTALLERSCRIPT_PREFLIGHT');

            return true;
        }

        /**
        * Function called after extension installation/update/removal procedure commences
        *
        * @param   string            $type    The type of change (install, update or discover_install, not uninstall)
        * @param   InstallerAdapter  $parent  The class calling this method
        *
        * @return  boolean  True on success
        *
        * @since  1.0.0
        *
        */
        public function postflight($type, $parent)
        {
            echo Text::_('COM_FOOS_INSTALLERSCRIPT_POSTFLIGHT');

            return true;
        }
    }

</div>

### [Creating com\_foos.xml]{#Creating_com_foos.xml .mw-headline}

The `foo.xml` file is .... Most entries are self-explanatory.

#### [Completed foo.xml file]{#Completed_foo.xml_file .mw-headline}

The code for the `foo.xml` file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8" ?>
    <extension type="component" method="upgrade">
        <name>COM_FOOS</name>
        <creationDate>[DATE]</creationDate>
        <author>[AUTHOR]</author>
        <authorEmail>[AUTHOR_EMAIL]</authorEmail>
        <authorUrl>[AUTHOR_URL]</authorUrl>
        <copyright>[COPYRIGHT]</copyright>
        <license>GNU General Public License version 2 or later;</license>
        <version>1.0.0</version>
        <description>COM_FOOS_XML_DESCRIPTION</description>
        <namespace>Joomla\Component\Foos</namespace>
            <scriptfile>script.php</scriptfile>
        <!-- Back-end files -->
        <administration>
            <!-- Menu entries -->
            <menu view="foos">COM_FOOS</menu>
            <submenu>
                <menu link="option=com_foos">COM_FOOS</menu>
            </submenu>
            <files folder="administrator/components/com_foos">
                <filename>foos.xml</filename>
                <folder>Controller</folder>
                <folder>Extension</folder>
                <folder>Service</folder>
                <folder>View</folder>
                <folder>services</folder>
                <folder>tmpl</folder>
            </files>
        </administration>
    </extension>

</div>

[Test your componente]{#Test_your_componente .mw-headline}
----------------------------------------------------------

Now you can zip all files and install them via Joomla Extension Manager.

After that you can choose your component in the menu of the
Joomlaǃbackend.

[![As j4 t 1
1.png](/images/thumb/3/3d/As_j4_t_1_1.png/700px-As_j4_t_1_1.png){width="700"
height="341"
srcset="/images/thumb/3/3d/As_j4_t_1_1.png/1050px-As_j4_t_1_1.png 1.5x, /images/3/3d/As_j4_t_1_1.png 2x"}](/File:As_j4_t_1_1.png){.image}

In the front end there is no change up to now. We are going to work on
this in the next chapter.

[Note]{#Note .mw-headline}
--------------------------

### [Version Number]{#Version_Number .mw-headline}

If you ask yourself what version number you should take: Joomla strictly
follows Semantic Versioning (2.0.0) and it be good if you do this, too.
See
<https://developer.joomla.org/news/586-joomla-development-strategy.html#version_numbering>
and <https://semver.org/spec/v2.0.0.html> for more informations.

### [index.html File]{#index.html_File .mw-headline}

Why was there an index.html file in almost every folder in Joomla in the
past? The blank index.html file in each folder was to prevent directory
browsing via web address. On a poorly configured web server someone
could see all the files contained in a folder by simply browsing to the
path, such as www.example.org/images/. This could be a potential
security problem on servers without directory browsing (indexing) turned
off. Having the blank `index.html` file returns a blank white screen to
the browser rather than displaying the contents of the folder.

So, from a technical aspect, `index.html` files are not required on a
good configured web server, but do prevent directory access on badly
configured environments as already noted.

If you're looking to list an extension on the Joomla! Extensions
Directory, (JED) it is not required to have `index.html` files.

If you want to add `index.html` files to your site, you can copy the
script at
<https://github.com/joomla/joomla-cms/blob/staging/build/indexmaker.php>
and run it from a command line session on your server.

### [Joomla! Extensions Directory]{#Joomla.21_Extensions_Directory .mw-headline}

You can use the JEDChecker extension at
<http://extensions.joomla.org/extensions/miscellaneous/development/21336>
to check JED requirements.

[Component Contents]{#Component_Contents .mw-headline}
------------------------------------------------------

At this point in the tutorial, your component should contain the
following files:

  --- -------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----
  1   administrator/components/com\_foos/Controller/DisplayController.php        this is the administrator entry point to the Foo component                                                                                                                            new
  1   administrator/components/com\_foos/Extension/FoosComponent.php             the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   new
  1   administrator/components/com\_foos/Service/HTML/AdministratorService.php   the html service see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                                new
  1   administrator/components/com\_foos/View/Foos/HtmlView.php                  file representing the view in the back end                                                                                                                                            new
  1   administrator/components/com\_foos/services/provider.php                   the service provider interface see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                  new
  1   administrator/components/com\_foos/tmpl/foos/default.php                   the default view in the back end                                                                                                                                                      new
  1   administrator/components/com\_foos/foos.xml                                this is an XML (manifest) file that tells Joomla! how to install our component.                                                                                                       new
  1   administrator/components/com\_foos/script.php                              the installer script                                                                                                                                                                  new
  --- -------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----

\

[Conclusion]{#Conclusion .mw-headline}
--------------------------------------

Component development for Joomla! is a fairly simple, straightforward
process. Using the techniques described in this tutorial, an endless
variety of componentes can be developed with little hassle.

Boilerplates you can find hereː

-   <https://github.com/joomla-extensions/boilerplate/tree/master/plugins/system>

The sample files for this Tutorial you can find hereː

-   <https://github.com/astridx/boilerplate/tree/tutorial/tutorial/component/>

\

\

\

\

\

\

\

\

\

\

\

\

\

[Adding a view to the site part - Part 2]{#Adding_a_view_to_the_site_part_-_Part_2 .mw-headline}
================================================================================================

[Requirements]{#Requirements_2 .mw-headline}
--------------------------------------------

You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev)

[File Structure]{#File_Structure_2 .mw-headline}
------------------------------------------------

### [Changing administrator/components/com\_foos/foos.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml .mw-headline}

The `administrator/components/com_foos/foos.xml` file is ....

#### [Completed administrator/components/com\_foos/foos.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file .mw-headline}

The code for the `administrator/components/com_foos/foos.xml` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8" ?>
    <extension type="component" method="upgrade">
        <name>COM_FOOS</name>
        <creationDate>[DATE]</creationDate>
        <author>[AUTHOR]</author>
        <authorEmail>[AUTHOR_EMAIL]</authorEmail>
        <authorUrl>[AUTHOR_URL]</authorUrl>
        <copyright>[COPYRIGHT]</copyright>
        <license>GNU General Public License version 2 or later;</license>
      <version>2.0.0</version>
     <description>COM_FOOS_XML_DESCRIPTION</description>
        <namespace>Joomla\Component\Foos</namespace>
        <scriptfile>script.php</scriptfile>
      <!-- Frond-end files -->
       <files folder="components/com_foos">
           <folder>Controller</folder>
           <folder>View</folder>
           <folder>tmpl</folder>
       </files>
     <!-- Back-end files -->
        <administration>
            <!-- Menu entries -->
            <menu view="foos">COM_FOOS</menu>
            <submenu>
                <menu link="option=com_foos">COM_FOOS</menu>
            </submenu>
            <files folder="administrator/components/com_foos">
                <filename>foos.xml</filename>
                <folder>Controller</folder>
                <folder>Extension</folder>
                <folder>Service</folder>
                <folder>View</folder>
                <folder>services</folder>
                <folder>tmpl</folder>
            </files>
        </administration>
    </extension>

</div>

\

### [Creating components/com\_foos/Controller/DisplayController.php]{#Creating_components.2Fcom_foos.2FController.2FDisplayController.php .mw-headline}

The `components/com_foos/Controller/DisplayController.php` file is the
main controller file for the frond end.

#### [Completed components/com\_foos/Controller/DisplayController.php file]{#Completed_components.2Fcom_foos.2FController.2FDisplayController.php_file .mw-headline}

The code for the `components/com_foos/Controller/DisplayController.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Site
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Site\Controller;

    defined('_JEXEC') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\MVC\Controller\BaseController;
    use Joomla\CMS\MVC\Factory\MVCFactoryInterface;

    /**
     * Foos Component Controller
     *
     * @since  1.0
     */
    class DisplayController extends BaseController
    {
        /**
        * Constructor.
        *
        * @param   array                $config   An optional associative array of configuration settings.
        * Recognized key values include 'name', 'default_task', 'model_path', and
        * 'view_path' (this list is not meant to be comprehensive).
        * @param   MVCFactoryInterface  $factory  The factory.
        * @param   CMSApplication       $app      The JApplication for the dispatcher
        * @param   \JInput              $input    Input
        *
        * @since   1.0
        */
        public function __construct($config = array(), MVCFactoryInterface $factory = null, $app = null, $input = null)
        {
            parent::__construct($config, $factory, $app, $input);
        }

        /**
        * Method to display a view.
        *
        * @param   boolean  $cachable   If true, the view output will be cached
        * @param   array    $urlparams  An array of safe URL parameters and their variable types, for valid values see {@link \JFilterInput::clean()}.
        *
        * @return  static  This object to support chaining.
        *
        * @since   1.0
        */
        public function display($cachable = false, $urlparams = array())
        {
            parent::display($cachable);

            return $this;
        }
    }

</div>

### [Creating components/com\_foos/View/Foo/HtmlView.php]{#Creating_components.2Fcom_foos.2FView.2FFoo.2FHtmlView.php .mw-headline}

The `components/com_foos/View/Foo/HtmlView.php` file is ....

#### [Completed components/com\_foos/View/Foo/HtmlView.php file]{#Completed_components.2Fcom_foos.2FView.2FFoo.2FHtmlView.php_file .mw-headline}

The code for the `components/com_foos/View/Foo/HtmlView.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Site
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Site\View\Foo;

    defined('_JEXEC') or die;

    use Joomla\CMS\MVC\View\HtmlView as BaseHtmlView;

    /**
     * HTML Foos View class for the Foo component
     *
     * @since  1.0
     */
    class HtmlView extends BaseHtmlView
    {
        /**
        * Execute and display a template script.
        *
        * @param   string  $tpl  The name of the template file to parse; automatically searches through the template paths.
        *
        * @return  mixed  A string if successful, otherwise an Error object.
        */
        public function display($tpl = null)
        {
            return parent::display($tpl);
        }
    }

</div>

### [Creating components/com\_foos/tmpl/foo/default.php]{#Creating_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php .mw-headline}

The `components/com_foos/tmpl/foo/default.php` file is .... Most entries
are self-explanatory.

#### [Completed components/com\_foos/tmpl/foo/default.php file]{#Completed_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php_file .mw-headline}

The code for the `components/com_foos/tmpl/foo/default.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    Hallo

</div>

[Test your component]{#Test_your_component .mw-headline}
--------------------------------------------------------

Now you can zip all files and install them via Joomla Extension Manager.

After that you can see the view in the front end.

In the front end you can see the view if you open the address
joomla-cms4/index.php?option=com\_foos&view=foo.

[![As j4 t 2
1.png](/images/thumb/a/af/As_j4_t_2_1.png/700px-As_j4_t_2_1.png){width="700"
height="341"
srcset="/images/thumb/a/af/As_j4_t_2_1.png/1050px-As_j4_t_2_1.png 1.5x, /images/a/af/As_j4_t_2_1.png 2x"}](/File:As_j4_t_2_1.png){.image}

At the moment you have enter the address manually. It would be nicer to
have a menu item. We are going to work on this in the next chapter.

[Component Contents]{#Component_Contents_2 .mw-headline}
--------------------------------------------------------

At this point in the tutorial, your component should contain the
following files:

  --- -------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------
  1   administrator/components/com\_foos/Controller/DisplayController.php        this is the administrator entry point to the Foo component                                                                                                                            unchanged
  1   administrator/components/com\_foos/Extension/FoosComponent.php             the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  1   administrator/components/com\_foos/Service/HTML/AdministratorService.php   the html service see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                                unchanged
  1   administrator/components/com\_foos/View/Foos/HtmlView.php                  file representing the view in the back end                                                                                                                                            unchanged
  1   administrator/components/com\_foos/services/provider.php                   the service provider interface see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                  unchanged
  1   administrator/components/com\_foos/tmpl/foos/default.php                   the default view in the back end                                                                                                                                                      unchanged
  1   administrator/components/com\_foos/foos.xml                                this is an XML (manifest) file that tells Joomla! how to install our component.                                                                                                       changed
  1   administrator/components/com\_foos/script.php                              the installer script                                                                                                                                                                  unchanged
  2   components/com\_foos/Controller/DisplayController.php                      this is the frond end entry point to the Foo component                                                                                                                                new
  2   components/com\_foos/View/Foo/HtmlView.php                                 file representing the view in the frond end                                                                                                                                           new
  2   components/com\_foos/tmpl/foo/default.php                                  the default view in the frond end                                                                                                                                                     new
  --- -------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------

[Conclusion]{#Conclusion_2 .mw-headline}
----------------------------------------

Now we have a basic view in the backend and in the front end.

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

[Adding a menu type to the site part - Part 3]{#Adding_a_menu_type_to_the_site_part_-_Part_3 .mw-headline}
==========================================================================================================

In this article we will cover how to add a menu item to a basic Joomla!
component.

[Requirements]{#Requirements_3 .mw-headline}
--------------------------------------------

You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev)

[File Structure]{#File_Structure_3 .mw-headline}
------------------------------------------------

### [Creating components/com\_foos/tmpl/foo/default.xml]{#Creating_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.xml .mw-headline}

The `components/com_foos/tmpl/foo/default.xml` file is ....

#### [Completed components/com\_foos/tmpl/foo/default.xml file]{#Completed_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.xml_file .mw-headline}

The code for the `components/com_foos/tmpl/foo/default.xml` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8"?>
    <metadata>
        <layout title="COM_FOOS_FOO_VIEW_DEFAULT_TITLE">
            <message>
                <![CDATA[COM_FOOS_FOO_VIEW_DEFAULT_DESC]]>
            </message>
        </layout>
    </metadata>

</div>

### [Changing administrator/components/com\_foos/foos.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_2 .mw-headline}

The `administrator/components/com_foos/foos.xml` file is ....

#### [Completed administrator/components/com\_foos/foos.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_2 .mw-headline}

The code for the `administrator/components/com_foos/foos.xml` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8" ?>
    <extension type="component" method="upgrade">
        <name>COM_FOOS</name>
        <creationDate>[DATE]</creationDate>
        <author>[AUTHOR]</author>
        <authorEmail>[AUTHOR_EMAIL]</authorEmail>
        <authorUrl>[AUTHOR_URL]</authorUrl>
        <copyright>[COPYRIGHT]</copyright>
        <license>GNU General Public License version 2 or later;</license>
      <version>3.0.0</version>
     <description>COM_FOOS_XML_DESCRIPTION</description>
        <namespace>Joomla\Component\Foos</namespace>
        <scriptfile>script.php</scriptfile>
        <!-- Frond-end files -->
        <files folder="components/com_foos">
            <folder>Controller</folder>
            <folder>View</folder>
            <folder>tmpl</folder>
        </files>
        <!-- Back-end files -->
        <administration>
            <!-- Menu entries -->
            <menu view="foos">COM_FOOS</menu>
            <submenu>
                <menu link="option=com_foos">COM_FOOS</menu>
            </submenu>
            <files folder="administrator/components/com_foos">
                <filename>foos.xml</filename>
                <folder>Controller</folder>
                <folder>Extension</folder>
                <folder>Service</folder>
                <folder>View</folder>
                <folder>services</folder>
                <folder>tmpl</folder>
            </files>
        </administration>
    </extension>

</div>

[Test your component]{#Test_your_component_2 .mw-headline}
----------------------------------------------------------

Now you can zip all files and install them via Joomla Extension Manager.

After that you can create a menu item in the menu manager.

[![As j4 t 3
1.png](/images/thumb/4/45/As_j4_t_3_1.png/700px-As_j4_t_3_1.png){width="700"
height="341"
srcset="/images/thumb/4/45/As_j4_t_3_1.png/1050px-As_j4_t_3_1.png 1.5x, /images/4/45/As_j4_t_3_1.png 2x"}](/File:As_j4_t_3_1.png){.image}

Save the menu item.

[![As j4 t 3
2.png](/images/thumb/3/30/As_j4_t_3_2.png/700px-As_j4_t_3_2.png){width="700"
height="341"
srcset="/images/thumb/3/30/As_j4_t_3_2.png/1050px-As_j4_t_3_2.png 1.5x, /images/3/30/As_j4_t_3_2.png 2x"}](/File:As_j4_t_3_2.png){.image}

Now you can see the view in the front using a menu item. In the front
end you can see the menu item and you can open the view with the help of
the menu item.

[![As j4 t 3
3.png](/images/thumb/c/c7/As_j4_t_3_3.png/700px-As_j4_t_3_3.png){width="700"
height="341"
srcset="/images/thumb/c/c7/As_j4_t_3_3.png/1050px-As_j4_t_3_3.png 1.5x, /images/c/c7/As_j4_t_3_3.png 2x"}](/File:As_j4_t_3_3.png){.image}

\

[Component Contents]{#Component_Contents_3 .mw-headline}
--------------------------------------------------------

At this point in the tutorial, your component should contain the
following files:

  --- -------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------
  1   administrator/components/com\_foos/Controller/DisplayController.php        this is the administrator entry point to the Foo component                                                                                                                            unchanged
  1   administrator/components/com\_foos/Extension/FoosComponent.php             the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  1   administrator/components/com\_foos/Service/HTML/AdministratorService.php   the html service see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                                unchanged
  1   administrator/components/com\_foos/View/Foos/HtmlView.php                  file representing the view in the back end                                                                                                                                            unchanged
  1   administrator/components/com\_foos/services/provider.php                   the service provider interface see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                  unchanged
  1   administrator/components/com\_foos/tmpl/foos/default.php                   the default view in the back end                                                                                                                                                      unchanged
  1   administrator/components/com\_foos/foos.xml                                this is an XML (manifest) file that tells Joomla! how to install our component.                                                                                                       changed
  1   administrator/components/com\_foos/script.php                              the installer script                                                                                                                                                                  unchanged
  2   components/com\_foos/Controller/DisplayController.php                      this is the frond end entry point to the Foo component                                                                                                                                unchanged
  2   components/com\_foos/View/Foo/HtmlView.php                                 file representing the view in the frond end                                                                                                                                           unchanged
  2   components/com\_foos/tmpl/foo/default.php                                  the default view in the frond end                                                                                                                                                     unchanged
  3   components/com\_foos/tmpl/foo/default.xml                                  the xml for the menu item                                                                                                                                                             new
  --- -------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------

\

[Conclusion]{#Conclusion_3 .mw-headline}
----------------------------------------

Now we are able to add a Menu Item to our component. This will allow us
to access our component a menu item rather than having to remember what
to type into the address bar. Currently the view does not show any data
yet. In order to work with data, we will add a model to our component in
the next chapter.

\

\

\

\

\

\

\

\

\

\

\

\

\

[Adding a model to the site part - Part 4]{#Adding_a_model_to_the_site_part_-_Part_4 .mw-headline}
==================================================================================================

[Requirements]{#Requirements_4 .mw-headline}
--------------------------------------------

You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev)

[File Structure]{#File_Structure_4 .mw-headline}
------------------------------------------------

### [Changing administrator/components/com\_foos/foos.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_3 .mw-headline}

The `administrator/components/com_foos/foos.xml` file is ....

#### [Completed administrator/components/com\_foos/foos.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_3 .mw-headline}

The code for the `administrator/components/com_foos/foos.xml` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8" ?>
    <extension type="component" method="upgrade">
        <name>COM_FOOS</name>
        <creationDate>[DATE]</creationDate>
        <author>[AUTHOR]</author>
        <authorEmail>[AUTHOR_EMAIL]</authorEmail>
        <authorUrl>[AUTHOR_URL]</authorUrl>
        <copyright>[COPYRIGHT]</copyright>
        <license>GNU General Public License version 2 or later;</license>
      <version>4.0.0</version>
     <description>COM_FOOS_XML_DESCRIPTION</description>
        <namespace>Joomla\Component\Foos</namespace>
        <scriptfile>script.php</scriptfile>
        <!-- Frond-end files -->
        <files folder="components/com_foos">
            <folder>Controller</folder>
          <folder>Model</folder>
         <folder>View</folder>
            <folder>tmpl</folder>
        </files>
        <!-- Back-end files -->
        <administration>
            <!-- Menu entries -->
            <menu view="foos">COM_FOOS</menu>
            <submenu>
                <menu link="option=com_foos">COM_FOOS</menu>
            </submenu>
            <files folder="administrator/components/com_foos">
                <filename>foos.xml</filename>
                <folder>Controller</folder>
                <folder>Extension</folder>
                <folder>Service</folder>
                <folder>View</folder>
                <folder>services</folder>
                <folder>tmpl</folder>
            </files>
        </administration>
    </extension>

</div>

### [Creating components/com\_foos/Model/FooModel.php]{#Creating_components.2Fcom_foos.2FModel.2FFooModel.php .mw-headline}

The `components/com_foos/Model/FooModel.php` file is ....

#### [Completed components/com\_foos/Model/FooModel.php file]{#Completed_components.2Fcom_foos.2FModel.2FFooModel.php_file .mw-headline}

The code for the `components/com_foos/Model/FooModel.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php

    /**
     * @package     Joomla.Site
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Site\Model;

    defined('_JEXEC') or die;

    use Joomla\CMS\MVC\Model\BaseDatabaseModel;

    /**
     * Foo model for the Joomla Foos component.
     *
     * @since  1.0
     */
    class FooModel extends BaseDatabaseModel
    {
        /**
        * @var string message
        */
        protected $message;

        /**
        * Get the message
        *
        * @return  string  The message to be displayed to the user
        */
        public function getMsg()
        {
            if (!isset($this->message))
            {
                $this->message = 'Hello Foo!';
            }

            return $this->message;
        }
    }

</div>

### [Changing components/com\_foos/View/Foo/HtmlView.php]{#Changing_components.2Fcom_foos.2FView.2FFoo.2FHtmlView.php .mw-headline}

The `components/com_foos/View/Foo/HtmlView.php` file is ....

#### [Completed components/com\_foos/View/Foo/HtmlView.php file]{#Completed_components.2Fcom_foos.2FView.2FFoo.2FHtmlView.php_file_2 .mw-headline}

The code for the `components/com_foos/View/Foo/HtmlView.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Site
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Site\View\Foo;

    defined('_JEXEC') or die;

    use Joomla\CMS\MVC\View\HtmlView as BaseHtmlView;

    /**
     * HTML Foos View class for the Foo component
     *
     * @since  1.0
     */
    class HtmlView extends BaseHtmlView
    {
        /**
        * Execute and display a template script.
        *
        * @param   string  $tpl  The name of the template file to parse; automatically searches through the template paths.
        *
        * @return  mixed  A string if successful, otherwise an Error object.
        */
        public function display($tpl = null)
        {
          $this->msg = $this->get('Msg');

            return parent::display($tpl);
        }
    }

</div>

### [Changing components/com\_foos/tmpl/foo/default.php]{#Changing_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php .mw-headline}

The `components/com_foos/tmpl/foo/default.php` file is .... Most entries
are self-explanatory.

#### [Completed components/com\_foos/tmpl/foo/default.php file]{#Completed_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php_file_2 .mw-headline}

The code for the `components/com_foos/tmpl/foo/default.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php echo $this->msg;

</div>

[Test your component]{#Test_your_component_3 .mw-headline}
----------------------------------------------------------

Now you can zip all files and install them via Joomla Extension Manager.

After that you can see the view in the front using a model.

[![As j4 t 4
1.png](/images/thumb/2/2e/As_j4_t_4_1.png/700px-As_j4_t_4_1.png){width="700"
height="341"
srcset="/images/thumb/2/2e/As_j4_t_4_1.png/1050px-As_j4_t_4_1.png 1.5x, /images/2/2e/As_j4_t_4_1.png 2x"}](/File:As_j4_t_4_1.png){.image}

[Component Contents]{#Component_Contents_4 .mw-headline}
--------------------------------------------------------

At this point in the tutorial, your component should contain the
following files:

  --- -------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------
  1   administrator/components/com\_foos/Controller/DisplayController.php        this is the administrator entry point to the Foo component                                                                                                                            unchanged
  1   administrator/components/com\_foos/Extension/FoosComponent.php             the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  1   administrator/components/com\_foos/Service/HTML/AdministratorService.php   the html service see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                                unchanged
  1   administrator/components/com\_foos/View/Foos/HtmlView.php                  file representing the view in the back end                                                                                                                                            unchanged
  1   administrator/components/com\_foos/services/provider.php                   the service provider interface see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                  unchanged
  1   administrator/components/com\_foos/tmpl/foos/default.php                   the default view in the back end                                                                                                                                                      unchanged
  1   administrator/components/com\_foos/foos.xml                                this is an XML (manifest) file that tells Joomla! how to install our component.                                                                                                       changed
  1   administrator/components/com\_foos/script.php                              the installer script                                                                                                                                                                  unchanged
  2   components/com\_foos/Controller/DisplayController.php                      this is the frond end entry point to the Foo component                                                                                                                                unchanged
  4   components/com\_foos/Model/FooModel.php                                    this is the frond end model for the Foo component                                                                                                                                     new
  2   components/com\_foos/View/Foo/HtmlView.php                                 file representing the view in the frond end                                                                                                                                           changed
  2   components/com\_foos/tmpl/foo/default.php                                  the default view in the frond end                                                                                                                                                     changed
  3   components/com\_foos/tmpl/foo/default.xml                                  the xml for the menu item                                                                                                                                                             unchanged
  --- -------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------

\

[Conclusion]{#Conclusion_4 .mw-headline}
----------------------------------------

At the moment you can create a menu item, that shows a special view of
your component. What, if you want to show a view depending on a
parameter? That is easy. You can add a variable request in the menu
item. We are going to work on this in the next chapter.

\

\

\

\

\

\

\

\

\

\

\

\

\

\

[Adding a variable request in the menu type - Part 5]{#Adding_a_variable_request_in_the_menu_type_-_Part_5 .mw-headline}
========================================================================================================================

For the moment, the displayed message is always fix. In Joomla! it is
possible to add parameters to menu types.

[Requirements]{#Requirements_5 .mw-headline}
--------------------------------------------

You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev)

[File Structure]{#File_Structure_5 .mw-headline}
------------------------------------------------

### [Changing administrator/components/com\_foos/foos.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_4 .mw-headline}

The `administrator/components/com_foos/foos.xml` file is ....

#### [Completed administrator/components/com\_foos/foos.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_4 .mw-headline}

The code for the `administrator/components/com_foos/foos.xml` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8" ?>
    <extension type="component" method="upgrade">
        <name>COM_FOOS</name>
        <creationDate>[DATE]</creationDate>
        <author>[AUTHOR]</author>
        <authorEmail>[AUTHOR_EMAIL]</authorEmail>
        <authorUrl>[AUTHOR_URL]</authorUrl>
        <copyright>[COPYRIGHT]</copyright>
        <license>GNU General Public License version 2 or later;</license>
      <version>5.0.0</version>
     <description>COM_FOOS_XML_DESCRIPTION</description>
        <namespace>Joomla\Component\Foos</namespace>
        <scriptfile>script.php</scriptfile>
        <!-- Frond-end files -->
        <files folder="components/com_foos">
            <folder>Controller</folder>
            <folder>Model</folder>
            <folder>View</folder>
            <folder>tmpl</folder>
        </files>
        <!-- Back-end files -->
        <administration>
            <!-- Menu entries -->
            <menu view="foos">COM_FOOS</menu>
            <submenu>
                <menu link="option=com_foos">COM_FOOS</menu>
            </submenu>
            <files folder="administrator/components/com_foos">
                <filename>foos.xml</filename>
                <folder>Controller</folder>
                <folder>Extension</folder>
                <folder>Service</folder>
                <folder>View</folder>
                <folder>services</folder>
                <folder>tmpl</folder>
            </files>
        </administration>
    </extension>

</div>

\

### [Changing components/com\_foos/Model/FooModel.php]{#Changing_components.2Fcom_foos.2FModel.2FFooModel.php .mw-headline}

The `components/com_foos/Model/FooModel.php` file is ....

#### [Completed components/com\_foos/Model/FooModel.php file]{#Completed_components.2Fcom_foos.2FModel.2FFooModel.php_file_2 .mw-headline}

The code for the `components/com_foos/Model/FooModel.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php

    /**
     * @package     Joomla.Site
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Site\Model;

    defined('_JEXEC') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\MVC\Model\BaseDatabaseModel;

    /**
     * Foo model for the Joomla Foos component.
     *
     * @since  1.0
     */
    class FooModel extends BaseDatabaseModel
    {
        /**
        * @var string message
        */
        protected $message;

        /**
        * Get the message
        *
        * @return  string  The message to be displayed to the user
        */
        public function getMsg()
        {
          $app = Factory::getApplication();
           $this->message = $app->input->get('show_text', "Hi");

            return $this->message;
        }
    }

</div>

### [Changing components/com\_foos/tmpl/foo/default.xml]{#Changing_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.xml .mw-headline}

The `components/com_foos/tmpl/foo/default.xml` file is ....

#### [Completed components/com\_foos/tmpl/foo/default.xml file]{#Completed_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.xml_file_2 .mw-headline}

The code for the `components/com_foos/tmpl/foo/default.xml` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8"?>
    <metadata>
        <layout title="COM_FOOS_FOO_VIEW_DEFAULT_TITLE">
            <message>
                <![CDATA[COM_FOOS_FOO_VIEW_DEFAULT_DESC]]>
            </message>
        </layout>
      <!-- Add fields to the request variables for the layout. -->
       <fields name="request">
           <fieldset name="request">
               <field
                   name="show_text"
                   type="text"
                   label="COM_FOOS_FIELD_TEXT_SHOW_LABEL"
                   default="Hi" 
               />
           </fieldset>
       </fields>
    </metadata>

</div>

[Test your component]{#Test_your_component_4 .mw-headline}
----------------------------------------------------------

Now you can zip all files and install them via Joomla Extension Manager.
A new installation of the extension is necessary.

After that you can add a parameter to the menu item. This parameter is
set in a text field.

[![As j4 t 5
1.png](/images/thumb/e/e0/As_j4_t_5_1.png/700px-As_j4_t_5_1.png){width="700"
height="341"
srcset="/images/thumb/e/e0/As_j4_t_5_1.png/1050px-As_j4_t_5_1.png 1.5x, /images/e/e0/As_j4_t_5_1.png 2x"}](/File:As_j4_t_5_1.png){.image}

The text you entered in this text field is shown in the front end.
Depending on the parameter, the view is set up in the front end.

[![As j4 t 5
2.png](/images/thumb/f/f6/As_j4_t_5_2.png/700px-As_j4_t_5_2.png){width="700"
height="341"
srcset="/images/thumb/f/f6/As_j4_t_5_2.png/1050px-As_j4_t_5_2.png 1.5x, /images/f/f6/As_j4_t_5_2.png 2x"}](/File:As_j4_t_5_2.png){.image}

\

[Note]{#Note_2 .mw-headline}
----------------------------

### [Why do we omit the close tag?]{#Why_do_we_omit_the_close_tag.3F .mw-headline}

Omitting the closing tag helps you prevent accidental whitespace or
newlines from being added to the end of the file. See:
<https://www.php.net/manual/en/language.basic-syntax.instruction-separation.php>

\

[Component Contents]{#Component_Contents_5 .mw-headline}
--------------------------------------------------------

At this point in the tutorial, your component should contain the
following files:

  --- -------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------
  1   administrator/components/com\_foos/Controller/DisplayController.php        this is the administrator entry point to the Foo component                                                                                                                            unchanged
  1   administrator/components/com\_foos/Extension/FoosComponent.php             the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  1   administrator/components/com\_foos/Service/HTML/AdministratorService.php   the html service see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                                unchanged
  1   administrator/components/com\_foos/View/Foos/HtmlView.php                  file representing the view in the back end                                                                                                                                            unchanged
  1   administrator/components/com\_foos/services/provider.php                   the service provider interface see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                  unchanged
  1   administrator/components/com\_foos/tmpl/foos/default.php                   the default view in the back end                                                                                                                                                      unchanged
  1   administrator/components/com\_foos/foos.xml                                this is an XML (manifest) file that tells Joomla! how to install our component.                                                                                                       changed
  1   administrator/components/com\_foos/script.php                              the installer script                                                                                                                                                                  unchanged
  2   components/com\_foos/Controller/DisplayController.php                      this is the frond end entry point to the Foo component                                                                                                                                unchanged
  4   components/com\_foos/Model/FooModel.php                                    this is the frond end model for the Foo component                                                                                                                                     changed
  2   components/com\_foos/View/Foo/HtmlView.php                                 file representing the view in the frond end                                                                                                                                           unchanged
  2   components/com\_foos/tmpl/foo/default.php                                  the default view in the frond end                                                                                                                                                     unchanged
  3   components/com\_foos/tmpl/foo/default.xml                                  the xml for the menu item                                                                                                                                                             changed
  --- -------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------

\

[Conclusion]{#Conclusion_5 .mw-headline}
----------------------------------------

For the moment, the parameter (messages) is hard coded or entered
manually. We would like to store this value in the Joomla database.
Therefore, in the next chapter, we will add database access to the
component.

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

[Using the database in the backend - Part 6]{#Using_the_database_in_the_backend_-_Part_6 .mw-headline}
======================================================================================================

[Requirements]{#Requirements_6 .mw-headline}
--------------------------------------------

You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev)

[File Structure]{#File_Structure_6 .mw-headline}
------------------------------------------------

### [Creating administrator/components/com\_foos/Model/FoosModel.php]{#Creating_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php .mw-headline}

The `administrator/components/com_foos/Model/FoosModel.php` file is ....

#### [Completed administrator/components/com\_foos/Model/FoosModel.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_file .mw-headline}

The code for the `administrator/components/com_foos/Model/FoosModel.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\Model;

    defined('_JEXEC') or die;

    use Joomla\CMS\MVC\Model\ListModel;

    /**
     * Methods supporting a list of foo records.
     *
     * @since  1.0
     */
    class FoosModel extends ListModel
    {
        /**
        * Constructor.
        *
        * @param   array  $config  An optional associative array of configuration settings.
        *
        * @see     \JControllerLegacy
        * @since   1.0
        */
        public function __construct($config = array())
        {
            parent::__construct($config);
        }
        /**
        * Build an SQL query to load the list data.
        *
        * @return  \JDatabaseQuery
        *
        * @since   1.0
        */
        protected function getListQuery()
        {
            // Create a new query object.
            $db = $this->getDbo();
            $query = $db->getQuery(true);

            // Select the required fields from the table.
            $query->select(
                $db->quoteName(array('id', 'name'))
            );
            $query->from($db->quoteName('#__foos_details'));

            return $query;
        }
    }

</div>

### [Changing administrator/components/com\_foos/View/Foos/HtmlView.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php .mw-headline}

The `administrator/components/com_foos/View/Foos/HtmlView.php` file is
....

#### [Completed administrator/components/com\_foos/View/Foos/HtmlView.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_file_2 .mw-headline}

The code for the
`administrator/components/com_foos/View/Foos/HtmlView.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\View\Foos;

    defined('_JEXEC') or die;

    use Joomla\CMS\MVC\View\HtmlView as BaseHtmlView;

    /**
     * View class for a list of foos.
     *
     * @since  1.0
     */
    class HtmlView extends BaseHtmlView
    {
      /**
       * An array of items
       *
       * @var  array
       */
       protected $items;

        /**
        * Method to display the view.
        *
        * @param   string  $tpl  A template file to load. [optional]
        *
        * @return  mixed  A string if successful, otherwise an \Exception object.
        *
        * @since   1.0
        */
        public function display($tpl = null)
        {
          $this->items = $this->get('Items');

            return parent::display($tpl);
        }
    }

</div>

### [Changing administrator/components/com\_foos/services/provider.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Fservices.2Fprovider.php .mw-headline}

The `administrator/components/com_foos/services/provider.php` file is
....

#### [Completed administrator/components/com\_foos/services/provider.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Fservices.2Fprovider.php_file_2 .mw-headline}

The code for the
`administrator/components/com_foos/services/provider.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    defined('_JEXEC') or die;

    use Joomla\CMS\Dispatcher\ComponentDispatcherFactoryInterface;
    use Joomla\CMS\Extension\ComponentInterface;
    use Joomla\CMS\Extension\Service\Provider\CategoryFactory;
    use Joomla\CMS\Extension\Service\Provider\ComponentDispatcherFactory;
    use Joomla\CMS\Extension\Service\Provider\MVCFactory;
    use Joomla\CMS\HTML\Registry;
    use Joomla\CMS\MVC\Factory\MVCFactoryInterface;
    use Joomla\DI\Container;
    use Joomla\DI\ServiceProviderInterface;
    use Joomla\Component\Foos\Administrator\Extension\FoosComponent;

    /**
     * The foos service provider.
     * https://github.com/joomla/joomla-cms/pull/20217
     *
     * @since  1.0.0
     */
    return new class implements ServiceProviderInterface
    {
        /**
        * Registers the service provider with a DI container.
        *
        * @param   Container  $container  The DI container.
        *
        * @return  void
        *
        * @since   1.0.0
        */
        public function register(Container $container)
        {
            $container->registerServiceProvider(new CategoryFactory('\\Joomla\\Component\\Foos'));
            $container->registerServiceProvider(new MVCFactory('\\Joomla\\Component\\Foos'));
            $container->registerServiceProvider(new ComponentDispatcherFactory('\\Joomla\\Component\\Foos'));

            $container->set(
                ComponentInterface::class,
                function (Container $container)
                {
                    $component = new FoosComponent($container->get(ComponentDispatcherFactoryInterface::class));

                    $component->setRegistry($container->get(Registry::class));
                  $component->setMVCFactory($container->get(MVCFactoryInterface::class));

                    return $component;
                }
            );
        }
    };

</div>

### [Creating administrator/components/com\_foos/sql/install.mysql.utf8.sql]{#Creating_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Finstall.mysql.utf8.sql .mw-headline}

The `administrator/components/com_foos/sql/install.mysql.utf8.sql` file
is ....

#### [Completed administrator/components/com\_foos/sql/install.mysql.utf8.sql file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Finstall.mysql.utf8.sql_file .mw-headline}

The code for the
`administrator/components/com_foos/sql/install.mysql.utf8.sql` file is
as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    CREATE TABLE IF NOT EXISTS `#__foos_details` (
      `id` int(11) NOT NULL AUTO_INCREMENT,
      `alias` varchar(400) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL DEFAULT '',
      `name` varchar(255) NOT NULL DEFAULT '',
      PRIMARY KEY (`id`)
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 DEFAULT COLLATE=utf8mb4_unicode_ci;

    INSERT INTO `#__foos_details` (`name`) VALUES
    ('Nina'),
    ('Astrid'),
    ('Elmar');

</div>

### [Creating administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql]{#Creating_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Funinstall.mysql.utf8.sql .mw-headline}

The `administrator/components/com_foos/sql/uninstall.mysql.utf8.sql`
file is ....

#### [Completed administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Funinstall.mysql.utf8.sql_file .mw-headline}

The code for the
`administrator/components/com_foos/sql/uninstall.mysql.utf8.sql` file is
as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    DROP TABLE IF EXISTS `#__foos_details`;

</div>

### [Changing administrator/components/com\_foos/tmpl/foos/default.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php .mw-headline}

The `administrator/components/com_foos/tmpl/foos/default.php` file is
....

#### [Completed administrator/components/com\_foos/tmpl/foos/default.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_file_2 .mw-headline}

The code for the
`administrator/components/com_foos/tmpl/foos/default.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    defined('_JEXEC') or die;
    ?>
    <?php foreach ($this->items as $i => $item) : ?>
    <?php echo $item->name; ?>
    </br>
    <?php endforeach; ?>

</div>

### [Changing administrator/components/com\_foos/foos.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_5 .mw-headline}

The `administrator/components/com_foos/foos.xml` file is ....

#### [Completed administrator/components/com\_foos/foos.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_5 .mw-headline}

The code for the `administrator/components/com_foos/foos.xml` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8" ?>
    <extension type="component" method="upgrade">
        <name>COM_FOOS</name>
        <creationDate>[DATE]</creationDate>
        <author>[AUTHOR]</author>
        <authorEmail>[AUTHOR_EMAIL]</authorEmail>
        <authorUrl>[AUTHOR_URL]</authorUrl>
        <copyright>[COPYRIGHT]</copyright>
        <license>GNU General Public License version 2 or later;</license>
      <version>6.0.0</version>
     <description>COM_FOOS_XML_DESCRIPTION</description>
        <namespace>Joomla\Component\Foos</namespace>
        <scriptfile>script.php</scriptfile>
      <install> <!-- Runs on install -->
           <sql>
               <file driver="mysql" charset="utf8">sql/install.mysql.utf8.sql</file>
           </sql>
       </install>
       <uninstall> <!-- Runs on uninstall -->
           <sql>
               <file driver="mysql" charset="utf8">sql/uninstall.mysql.utf8.sql</file>
           </sql>
       </uninstall>
     <!-- Frond-end files -->
        <files folder="components/com_foos">
            <folder>Controller</folder>
            <folder>Model</folder>
            <folder>View</folder>
            <folder>tmpl</folder>
        </files>
        <!-- Back-end files -->
        <administration>
            <!-- Menu entries -->
            <menu view="foos">COM_FOOS</menu>
            <submenu>
                <menu link="option=com_foos">COM_FOOS</menu>
            </submenu>
            <files folder="administrator/components/com_foos">
                <filename>foos.xml</filename>
                <folder>Controller</folder>
                <folder>Extension</folder>
              <folder>Model</folder>
             <folder>Service</folder>
                <folder>View</folder>
                <folder>services</folder>
              <folder>sql</folder>
             <folder>tmpl</folder>
            </files>
        </administration>
    </extension>

</div>

\

[Test your component]{#Test_your_component_5 .mw-headline}
----------------------------------------------------------

Now you can zip all files and install them via Joomla Extension Manager.

You have to run a new installation or fix the database due to the
changes in the database.

After that the data for this component is stored in the database.

In the next picture you can see how the data is retrieved and listed. In
the next chapters, we are working to make the data changeable in the
backend.

[![As j4 t 6
1.png](/images/thumb/0/03/As_j4_t_6_1.png/700px-As_j4_t_6_1.png){width="700"
height="341"
srcset="/images/thumb/0/03/As_j4_t_6_1.png/1050px-As_j4_t_6_1.png 1.5x, /images/0/03/As_j4_t_6_1.png 2x"}](/File:As_j4_t_6_1.png){.image}

\

[Component Contents]{#Component_Contents_6 .mw-headline}
--------------------------------------------------------

At this point in the tutorial, your component should contain the
following files:

  --- -------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------
  1   administrator/components/com\_foos/Controller/DisplayController.php        this is the administrator entry point to the Foo component                                                                                                                            unchanged
  1   administrator/components/com\_foos/Extension/FoosComponent.php             the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  6   administrator/components/com\_foos/Model/FoosModel.php                     this is the model of the Foo component                                                                                                                                                new
  1   administrator/components/com\_foos/Service/HTML/AdministratorService.php   the html service see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                                unchanged
  1   administrator/components/com\_foos/View/Foos/HtmlView.php                  file representing the view in the back end                                                                                                                                            changed
  1   administrator/components/com\_foos/services/provider.php                   the service provider interface see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                  changed
  6   administrator/components/com\_foos/sql/install.mysql.utf8.sql              During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           new
  6   administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql            During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           new
  1   administrator/components/com\_foos/tmpl/foos/default.php                   the default view in the back end                                                                                                                                                      changed
  1   administrator/components/com\_foos/foos.xml                                this is an XML (manifest) file that tells Joomla! how to install our component.                                                                                                       changed
  1   administrator/components/com\_foos/script.php                              the installer script                                                                                                                                                                  unchanged
  2   components/com\_foos/Controller/DisplayController.php                      this is the frond end entry point to the Foo component                                                                                                                                unchanged
  4   components/com\_foos/Model/FooModel.php                                    this is the frond end model for the Foo component                                                                                                                                     unchanged
  2   components/com\_foos/View/Foo/HtmlView.php                                 file representing the view in the frond end                                                                                                                                           unchanged
  2   components/com\_foos/tmpl/foo/default.php                                  the default view in the frond end                                                                                                                                                     unchanged
  3   components/com\_foos/tmpl/foo/default.xml                                  the xml for the menu item                                                                                                                                                             unchanged
  --- -------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------

\

[Conclusion]{#Conclusion_6 .mw-headline}
----------------------------------------

Now our component has a database table where it can store data. In this
chapter we have seen, how we can display this data in the backend. In
the next chapter we will go on an check, how we can use the data in the
front end.

\

\

\

\

\

\

\

\

\

\

\

\

\

[Using the database in the frontend - Part 7]{#Using_the_database_in_the_frontend_-_Part_7 .mw-headline}
========================================================================================================

[Requirements]{#Requirements_7 .mw-headline}
--------------------------------------------

You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev)

[File Structure]{#File_Structure_7 .mw-headline}
------------------------------------------------

### [Creating administrator/components/com\_foos/Controller/FooController.php]{#Creating_administrator.2Fcomponents.2Fcom_foos.2FController.2FFooController.php .mw-headline}

The `administrator/components/com_foos/Controller/FooController.php`
file is the controller file.

#### [Completed administrator/components/com\_foos/Controller/FooController.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FController.2FFooController.php_file .mw-headline}

The code for the
`administrator/components/com_foos/Controller/FooController.php` file is
as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\Controller;

    defined('_JEXEC') or die;

    use Joomla\CMS\MVC\Controller\FormController;

    /**
     * Controller for a single foo
     *
     * @since  1.0
     */
    class FooController extends FormController
    {
    }

</div>

### [Creating administrator/components/com\_foos/Field/Modal/FooField.php]{#Creating_administrator.2Fcomponents.2Fcom_foos.2FField.2FModal.2FFooField.php .mw-headline}

The `administrator/components/com_foos/Field/Modal/FooField.php` file is
contains the modal field.

#### [Completed administrator/components/com\_foos/Field/Modal/FooField.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FField.2FModal.2FFooField.php_file .mw-headline}

The code for the
`administrator/components/com_foos/Field/Modal/FooField.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\Field\Modal;

    defined('JPATH_BASE') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\Form\FormField;
    use Joomla\CMS\HTML\HTMLHelper;
    use Joomla\CMS\Language\Text;
    use Joomla\CMS\Session\Session;

    /**
     * Supports a modal foo picker.
     *
     * @since  1.0
     */
    class FooField extends FormField
    {
        /**
        * The form field type.
        *
        * @var     string
        * @since   1.0
        */
        protected $type = 'Modal_Foo';

        /**
        * Method to get the field input markup.
        *
        * @return  string  The field input markup.
        *
        * @since   1.0
        */
        protected function getInput()
        {
            $allowClear  = ((string) $this->element['clear'] != 'false');
            $allowSelect = ((string) $this->element['select'] != 'false');

            // The active foo id field.
            $value = (int) $this->value > 0 ? (int) $this->value : '';

            // Create the modal id.
            $modalId = 'Foo_' . $this->id;

            // Add the modal field script to the document head.
            HTMLHelper::_('script', 'system/fields/modal-fields.min.js', array('version' => 'auto', 'relative' => true));

            // Script to proxy the select modal function to the modal-fields.js file.
            if ($allowSelect)
            {
                static $scriptSelect = null;

                if (is_null($scriptSelect))
                {
                    $scriptSelect = array();
                }

                if (!isset($scriptSelect[$this->id]))
                {
                    Factory::getDocument()->addScriptDeclaration("
                   function jSelectFoo_" . $this->id . "(id, title, object) {
                       window.processModalSelect('Foo', '" . $this->id . "', id, title, '', object);
                   }
                   "
                    );

                    $scriptSelect[$this->id] = true;
                }
            }

            // Setup variables for display.
            $linkFoos = 'index.php?option=com_foos&amp;view=foos&amp;layout=modal&amp;tmpl=component&amp;' . Session::getFormToken() . '=1';
            $linkFoo  = 'index.php?option=com_foos&amp;view=foo&amp;layout=modal&amp;tmpl=component&amp;' . Session::getFormToken() . '=1';
            $modalTitle   = Text::_('COM_FOOS_CHANGE_FOO');

            $urlSelect = $linkFoos . '&amp;function=jSelectFoo_' . $this->id;

            if ($value)
            {
                $db    = Factory::getDbo();
                $query = $db->getQuery(true)
                    ->select($db->quoteName('name'))
                    ->from($db->quoteName('#__foos_details'))
                    ->where($db->quoteName('id') . ' = ' . (int) $value);
                $db->setQuery($query);

                try
                {
                    $title = $db->loadResult();
                }
                catch (\RuntimeException $e)
                {
                    Factory::getApplication()->enqueueMessage($e->getMessage(), 'error');
                }
            }

            $title = empty($title) ? Text::_('COM_FOOS_SELECT_A_FOO') : htmlspecialchars($title, ENT_QUOTES, 'UTF-8');

            // The current foo display field.
            $html  = '';

            if ($allowSelect || $allowNew || $allowEdit || $allowClear)
            {
                $html .= '<span class="input-group">';
            }

            $html .= '<input class="form-control" id="' . $this->id . '_name" type="text" value="' . $title . '" disabled="disabled" size="35">';

            if ($allowSelect || $allowNew || $allowEdit || $allowClear)
            {
                $html .= '<span class="input-group-append">';
            }

            // Select foo button
            if ($allowSelect)
            {
                $html .= '<button'
                    . ' class="btn btn-primary hasTooltip' . ($value ? ' hidden' : '') . '"'
                    . ' id="' . $this->id . '_select"'
                    . ' data-toggle="modal"'
                    . ' type="button"'
                    . ' data-target="#ModalSelect' . $modalId . '"'
                    . ' title="' . HTMLHelper::tooltipText('COM_FOOS_CHANGE_FOO') . '">'
                    . '<span class="icon-file" aria-hidden="true"></span> ' . Text::_('JSELECT')
                    . '</button>';
            }

            // Clear foo button
            if ($allowClear)
            {
                $html .= '<button'
                    . ' class="btn btn-secondary' . ($value ? '' : ' hidden') . '"'
                    . ' id="' . $this->id . '_clear"'
                    . ' type="button"'
                    . ' onclick="window.processModalParent(\'' . $this->id . '\'); return false;">'
                    . '<span class="icon-remove" aria-hidden="true"></span>' . Text::_('JCLEAR')
                    . '</button>';
            }

            if ($allowSelect || $allowNew || $allowEdit || $allowClear)
            {
                $html .= '</span></span>';
            }

            // Select foo modal
            if ($allowSelect)
            {
                $html .= HTMLHelper::_(
                    'bootstrap.renderModal',
                    'ModalSelect' . $modalId,
                    array(
                        'title'       => $modalTitle,
                        'url'         => $urlSelect,
                        'height'      => '400px',
                        'width'       => '800px',
                        'bodyHeight'  => 70,
                        'modalWidth'  => 80,
                        'footer'      => '<a role="button" class="btn btn-secondary" data-dismiss="modal" aria-hidden="true">'
                                            . Text::_('JLIB_HTML_BEHAVIOR_CLOSE') . '</a>',
                    )
                );
            }

            // Note: class='required' for client side validation.
            $class = $this->required ? ' class="required modal-value"' : '';

            $html .= '<input type="hidden" id="' . $this->id . '_id"' . $class . ' data-required="' . (int) $this->required . '" name="' . $this->name
                . '" data-text="' . htmlspecialchars(Text::_('COM_FOOS_SELECT_A_FOO', true), ENT_COMPAT, 'UTF-8') . '" value="' . $value . '">';

            return $html;
        }

        /**
        * Method to get the field label markup.
        *
        * @return  string  The field label markup.
        *
        * @since   1.0
        */
        protected function getLabel()
        {
            return str_replace($this->id, $this->id . '_name', parent::getLabel());
        }
    }

</div>

### [Creating administrator/components/com\_foos/Model/FooModel.php]{#Creating_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFooModel.php .mw-headline}

The `administrator/components/com_foos/Model/FooModel.php` file is the
model for a foo item.

#### [Completed administrator/components/com\_foos/Model/FooModel.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFooModel.php_file .mw-headline}

The code for the `administrator/components/com_foos/Model/FooModel.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\Model;

    defined('_JEXEC') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\MVC\Model\AdminModel;

    /**
     * Item Model for a Foo.
     *
     * @since  1.0
     */
    class FooModel extends AdminModel
    {
        /**
        * The type alias for this content type.
        *
        * @var    string
        * @since  1.0
        */
        public $typeAlias = 'com_foos.foo';


        /**
        * Method to get the row form.
        *
        * @param   array    $data      Data for the form.
        * @param   boolean  $loadData  True if the form is to load its own data (default case), false if not.
        *
        * @return  \JForm|boolean  A \JForm object on success, false on failure
        *
        * @since   1.0
        */
        public function getForm($data = array(), $loadData = true)
        {
            // Get the form.
            $form = $this->loadForm('com_foos.foo', 'foo', array('control' => 'jform', 'load_data' => $loadData));

            if (empty($form))
            {
                return false;
            }

            return $form;
        }
        /**
        * Method to get the data that should be injected in the form.
        *
        * @return  mixed  The data for the form.
        *
        * @since   1.0
        */
        protected function loadFormData()
        {
            $app = Factory::getApplication();

            $data = $this->getItem();

            $this->preprocessData('com_foos.foo', $data);

            return $data;
        }
    }

</div>

### [Changing administrator/components/com\_foos/View/Foos/HtmlView.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_2 .mw-headline}

The `administrator/components/com_foos/View/Foos/HtmlView.php` file is
....

#### [Completed administrator/components/com\_foos/View/Foos/HtmlView.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_file_3 .mw-headline}

The code for the
`administrator/components/com_foos/View/Foos/HtmlView.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php

</div>

### [Changing administrator/components/com\_foos/tmpl/foos/default.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_2 .mw-headline}

The `administrator/components/com_foos/tmpl/foos/default.php` file is
....

#### [Completed administrator/components/com\_foos/tmpl/foos/default.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_file_3 .mw-headline}

The code for the
`administrator/components/com_foos/tmpl/foos/default.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php

</div>

### [Creating administrator/components/com\_foos/Table/FooTable.php]{#Creating_administrator.2Fcomponents.2Fcom_foos.2FTable.2FFooTable.php .mw-headline}

The `administrator/components/com_foos/Table/FooTable.php` file is ....

#### [Completed administrator/components/com\_foos/Table/FooTable.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FTable.2FFooTable.php_file .mw-headline}

The code for the `administrator/components/com_foos/Table/FooTable.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\Table;

    defined('_JEXEC') or die;

    use Joomla\CMS\Table\Table;
    use Joomla\Database\DatabaseDriver;

    /**
     * Foos Table class.
     *
     * @since  1.0
     */
    class FooTable extends Table
    {
        /**
        * Constructor
        *
        * @param   DatabaseDriver  $db  Database connector object
        *
        * @since   1.0
        */
        public function __construct(DatabaseDriver $db)
        {
            $this->typeAlias = 'com_foos.foo';

            parent::__construct('#__foos_details', 'id', $db);
        }
    }

</div>

### [Changing administrator/components/com\_foos/foos.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_6 .mw-headline}

The `administrator/components/com_foos/foos.xml` file is ....

#### [Completed administrator/components/com\_foos/foos.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_6 .mw-headline}

The code for the `administrator/components/com_foos/foos.xml` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8" ?>
    <extension type="component" method="upgrade">
        <name>COM_FOOS</name>
        <creationDate>[DATE]</creationDate>
        <author>[AUTHOR]</author>
        <authorEmail>[AUTHOR_EMAIL]</authorEmail>
        <authorUrl>[AUTHOR_URL]</authorUrl>
        <copyright>[COPYRIGHT]</copyright>
        <license>GNU General Public License version 2 or later;</license>
      <version>7.0.0</version>
     <description>COM_FOOS_XML_DESCRIPTION</description>
        <namespace>Joomla\Component\Foos</namespace>
        <scriptfile>script.php</scriptfile>
        <install> <!-- Runs on install -->
            <sql>
                <file driver="mysql" charset="utf8">sql/install.mysql.utf8.sql</file>
            </sql>
        </install>
        <uninstall> <!-- Runs on uninstall -->
            <sql>
                <file driver="mysql" charset="utf8">sql/uninstall.mysql.utf8.sql</file>
            </sql>
        </uninstall>
        <!-- Frond-end files -->
        <files folder="components/com_foos">
            <folder>Controller</folder>
            <folder>Model</folder>
            <folder>View</folder>
            <folder>tmpl</folder>
        </files>
        <media folder="media/com_foos" destination="com_foos">
           <folder>js</folder>
        </media>
     <!-- Back-end files -->
        <administration>
            <!-- Menu entries -->
            <menu view="foos">COM_FOOS</menu>
            <submenu>
                <menu link="option=com_foos">COM_FOOS</menu>
            </submenu>
            <files folder="administrator/components/com_foos">
                <filename>foos.xml</filename>
                <folder>Controller</folder>
                <folder>Extension</folder>
              <folder>Field</folder>
             <folder>Model</folder>
                <folder>Service</folder>
              <folder>Table</folder>
             <folder>View</folder>
              <folder>forms</folder>
             <folder>services</folder>
                <folder>sql</folder>
                <folder>tmpl</folder>
            </files>
        </administration>
    </extension>

</div>

### [Creating administrator/components/com\_foos/forms/foo.xml]{#Creating_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml .mw-headline}

The `administrator/components/com_foos/forms/foo.xml` file is ....

#### [Completed administrator/components/com\_foos/forms/foo.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_file .mw-headline}

The code for the `administrator/components/com_foos/forms/foo.xml` file
is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8"?>
    <form>

        <fieldset>

            <field
                name="id"
                type="number"
                label="JGLOBAL_FIELD_ID_LABEL"
                default="0"
                class="readonly"
                readonly="true"
            />

            <field
                name="name"
                type="text"
                label="COM_FOOS_FIELD_NAME_LABEL"
                size="40"
                required="true"
             />
        </fieldset>


    </form>

</div>

### [Changing components/com\_foos/Model/FooModel.php]{#Changing_components.2Fcom_foos.2FModel.2FFooModel.php_2 .mw-headline}

The `components/com_foos/Model/FooModel.php` file is ....

#### [Completed components/com\_foos/Model/FooModel.php file]{#Completed_components.2Fcom_foos.2FModel.2FFooModel.php_file_3 .mw-headline}

The code for the `components/com_foos/Model/FooModel.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php

    /**
     * @package     Joomla.Site
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Site\Model;

    defined('_JEXEC') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\MVC\Model\BaseDatabaseModel;
    use Joomla\CMS\Language\Text;
    use Joomla\Registry\Registry;

    /**
     * Foo model for the Joomla Foos component.
     *
     * @since  1.0
     */
    class FooModel extends BaseDatabaseModel
    {
        /**
        * @var string item
        */
        protected $_item = null;

        /**
        * Gets a foo
        *
        * @param   integer  $pk  Id for the foo
        *
        * @return  mixed Object or null
        *
        * @since   1.0
        */
      public function getItem($pk = null)
       {
           $app = Factory::getApplication();
           $pk = $app->input->getInt('id');

           if ($this->_item === null)
           {
               $this->_item = array();
           }

           if (!isset($this->_item[$pk]))
           {
               try
               {
                   $db    = $this->getDbo();
                   $query = $db->getQuery(true);

                   $query->select('*')
                       ->from($db->quoteName('#__foos_details', 'a'))
                       ->where('a.id = ' . (int) $pk);

                   $db->setQuery($query);
                   $data = $db->loadObject();

                   if (empty($data))
                   {
                       throw new \Exception(Text::_('COM_FOOS_ERROR_FOO_NOT_FOUND'), 404);
                   }

                   $this->_item[$pk] = $data;
               }
               catch (\Exception $e)
               {
                   $this->setError($e);
                   $this->_item[$pk] = false;
               }
           }

           return $this->_item[$pk];
       }
    }

</div>

### [Changing administrator/components/com\_foos/View/Foos/HtmlView.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_3 .mw-headline}

The `administrator/components/com_foos/View/Foos/HtmlView.php` file is
....

#### [Completed administrator/components/com\_foos/View/Foos/HtmlView.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_file_4 .mw-headline}

The code for the
`administrator/components/com_foos/View/Foos/HtmlView.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php

    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\View\Foos;

    defined('_JEXEC') or die;

    use Joomla\CMS\Language\Text;
    use Joomla\CMS\MVC\View\HtmlView as BaseHtmlView;
    use Joomla\CMS\Toolbar\Toolbar;
    use Joomla\CMS\Toolbar\ToolbarHelper;

    /**
     * View class for a list of foos.
     *
     * @since  1.0
     */
    class HtmlView extends BaseHtmlView
    {
        /**
        * An array of items
        *
        * @var  array
        */
        protected $items;

        /**
        * Display the view.
        *
        * @param   string  $tpl  The name of the template file to parse; automatically searches through the template paths.
        *
        * @return  mixed  A string if successful, otherwise an Error object.
        */
        public function display($tpl = null)
        {

            $this->items = $this->get('Items');

            $this->addToolbar();

            return parent::display($tpl);
        }

        /**
        * Add the page title and toolbar.
        *
        * @return  void
        *
        * @since   1.0
        */
        protected function addToolbar()
        {
            // Get the toolbar object instance
            $toolbar = Toolbar::getInstance('toolbar');

            ToolbarHelper::title(Text::_('COM_FOOS_MANAGER_FOOS'), 'address foo');

            $toolbar->addNew('foo.add');
        }

    }

</div>

### [Changing components/com\_foos/View/Foo/HtmlView.php]{#Changing_components.2Fcom_foos.2FView.2FFoo.2FHtmlView.php_2 .mw-headline}

The `components/com_foos/View/Foo/HtmlView.php` file is ....

#### [Completed components/com\_foos/View/Foo/HtmlView.php file]{#Completed_components.2Fcom_foos.2FView.2FFoo.2FHtmlView.php_file_3 .mw-headline}

The code for the `components/com_foos/View/Foo/HtmlView.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Site
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Site\View\Foo;

    defined('_JEXEC') or die;

    use Joomla\CMS\MVC\View\HtmlView as BaseHtmlView;

    /**
     * HTML Foos View class for the Foo component
     *
     * @since  1.0
     */
    class HtmlView extends BaseHtmlView
    {
        /**
        * The item object details
        *
        * @var    \JObject
        * @since  1.0.0
        */
      protected $item;

        /**
        * Execute and display a template script.
        *
        * @param   string  $tpl  The name of the template file to parse; automatically searches through the template paths.
        *
        * @return  mixed  A string if successful, otherwise an Error object.
        */
        public function display($tpl = null)
        {
          $this->item = $this->get('Item');

            return parent::display($tpl);
        }
    }

</div>

### [Creating administrator/components/com\_foos/tmpl/foo/edit.php]{#Creating_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php .mw-headline}

The `administrator/components/com_foos/tmpl/foo/edit.php` file is ....

#### [Completed administrator/components/com\_foos/tmpl/foo/edit.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php_file .mw-headline}

The code for the `components/com_foos/tmpl/foos/edit.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    defined('_JEXEC') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\HTML\HTMLHelper;
    use Joomla\CMS\Router\Route;

    $app = Factory::getApplication();
    $input = $app->input;

    // In case of modal
    $isModal = $input->get('layout') == 'modal' ? true : false;
    $layout  = $isModal ? 'modal' : 'edit';
    $tmpl    = $isModal || $input->get('tmpl', '', 'cmd') === 'component' ? '&tmpl=component' : '';
    ?>

    <form action="<?php echo Route::_('index.php?option=com_foos&layout=' . $layout . $tmpl . '&id=' . (int) $this->item->id); ?>" method="post" name="adminForm" id="foo-form" class="form-validate">
        <?php echo $this->getForm()->renderField('name'); ?>
        <input type="hidden" name="task" value="">
        <?php echo HTMLHelper::_('form.token'); ?>
    </form>

</div>

### [Creating Creating administrator/components/com\_foos/tmpl/foo/modal.php]{#Creating_Creating_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fmodal.php .mw-headline}

The `Creating administrator/components/com_foos/tmpl/foo/modal.php` file
is ....

#### [Completed Creating administrator/components/com\_foo/tmpl/foos/modal.php file]{#Completed_Creating_administrator.2Fcomponents.2Fcom_foo.2Ftmpl.2Ffoos.2Fmodal.php_file .mw-headline}

The code for the `Creating components/com_foos/tmpl/foo/modal.php` file
is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    defined('_JEXEC') or die;
    ?>
    <div class="container-popup">
        <?php $this->setLayout('edit'); ?>
        <?php echo $this->loadTemplate(); ?>
    </div>

</div>

### [Changing components/com\_foos/tmpl/foo/default.php]{#Changing_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php_2 .mw-headline}

The `components/com_foos/tmpl/foo/default.php` file is ....

#### [Completed components/com\_foos/tmpl/foo/default.php file]{#Completed_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php_file_3 .mw-headline}

The code for the `components/com_foos/tmpl/foo/default.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php 
    echo $this->item->name;

</div>

### [Creating administrator/components/com\_foos/tmpl/foos/modal.php]{#Creating_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fmodal.php .mw-headline}

The `administrator/components/com_foos/tmpl/foos/modal.php` file is ....

#### [Completed administrator/components/com\_foos/tmpl/foos/modal.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fmodal.php_file .mw-headline}

The code for the `administrator/components/com_foos/tmpl/foos/modal.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    defined('_JEXEC') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\HTML\HTMLHelper;
    use Joomla\CMS\Language\Multilanguage;
    use Joomla\CMS\Language\Text;
    use Joomla\CMS\Layout\LayoutHelper;
    use Joomla\CMS\Router\Route;
    use Joomla\CMS\Session\Session;

    $app = Factory::getApplication();

    HTMLHelper::_('script', 'com_foos/admin-foos-modal.min.js', array('version' => 'auto', 'relative' => true));

    $function  = $app->input->getCmd('function', 'jSelectFoos');
    $onclick   = $this->escape($function);
    ?>
    <div class="container-popup">

        <form action="<?php echo Route::_('index.php?option=com_foos&view=foos&layout=modal&tmpl=component&function=' . $function . '&' . Session::getFormToken() . '=1'); ?>" method="post" name="adminForm" id="adminForm" class="form-inline">

            <?php if (empty($this->items)) : ?>
                <div class="alert alert-warning">
                    <?php echo Text::_('JGLOBAL_NO_MATCHING_RESULTS'); ?>
                </div>
            <?php else : ?>
                <table class="table table-sm">
                    <thead>
                        <tr>
                            <th scope="col" style="width:10%" class="d-none d-md-table-cell">
                            </th>
                            <th scope="col" style="width:1%">
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                    <?php
                    $iconStates = array(
                        -2 => 'icon-trash',
                        0  => 'icon-unpublish',
                        1  => 'icon-publish',
                        2  => 'icon-archive',
                    );
                    ?>
                    <?php foreach ($this->items as $i => $item) : ?>
                        <?php $lang = ''; ?>
                        <tr class="row<?php echo $i % 2; ?>">
                            <th scope="row">
                                <a class="select-link" href="javascript:void(0)" data-function="<?php echo $this->escape($onclick); ?>" data-id="<?php echo $item->id; ?>" data-title="<?php echo $this->escape($item->name); ?>">
                                    <?php echo $this->escape($item->name); ?>
                                </a>
                            </th>
                            <td>
                                <?php echo (int) $item->id; ?>
                            </td>
                        </tr>
                    <?php endforeach; ?>
                    </tbody>
                </table>

            <?php endif; ?>

            <input type="hidden" name="task" value="">
            <input type="hidden" name="forcedLanguage" value="<?php echo $app->input->get('forcedLanguage', '', 'CMD'); ?>">
            <?php echo HTMLHelper::_('form.token'); ?>

        </form>
    </div>

</div>

### [Changing components/com\_foos/tmpl/foo/default.php]{#Changing_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php_3 .mw-headline}

The `components/com_foos/tmpl/foo/default.php` file is ....

#### [Completed components/com\_foos/tmpl/foo/default.php file]{#Completed_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php_file_4 .mw-headline}

The code for the `components/com_foos/tmpl/foo/default.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php 
    echo $this->item->name;

</div>

### [Changing components/com\_foos/tmpl/foo/default.xml]{#Changing_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.xml_2 .mw-headline}

The `components/com_foos/tmpl/foo/default.xml` file is ....

#### [Completed components/com\_foos/tmpl/foo/default.xml file]{#Completed_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.xml_file_3 .mw-headline}

The code for the `components/com_foos/tmpl/foo/default.xml` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8"?>
    <metadata>
        <layout title="COM_FOOS_FOO_VIEW_DEFAULT_TITLE">
            <message>
                <![CDATA[COM_FOOS_FOO_VIEW_DEFAULT_DESC]]>
            </message>
        </layout>
        <!-- Add fields to the request variables for the layout. -->
        <fields name="request">
            <fieldset name="request"
                addfieldprefix="Joomla\Component\Foos\Administrator\Field"
            >
                <field
                    name="id"
                    type="modal_foo"
                    label="COM_FOOS_SELECT_FOO_LABEL"
                    required="true"
                    select="true"
                    new="true"
                    edit="true"
                    clear="true"
                />
            </fieldset>
        </fields>
    </metadata>

</div>

### [Creating media/com\_foos/js/admin-foos-modal.js]{#Creating_media.2Fcom_foos.2Fjs.2Fadmin-foos-modal.js .mw-headline}

The `media/com_foos/js/admin-foos-modal.js` file is ....

#### [Completed media/com\_foos/js/admin-foos-modal.js file]{#Completed_media.2Fcom_foos.2Fjs.2Fadmin-foos-modal.js_file .mw-headline}

The code for the `media/com_foos/js/admin-foos-modal.js` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    (function () {
      'use strict';
      /**
        * Javascript to insert the link
        * View element calls jSelectFoo when a foo is clicked
        * jSelectFoo creates the link tag, sends it to the editor,
        * and closes the select frame.
        */

      window.jSelectFoo = function (id, title, catid, object, link, lang) {
        var hreflang = '';

        if (!Joomla.getOptions('xtd-foos')) {
          // Something went wrong
          window.parent.Joomla.Modal.getCurrent().close();
          return false;
        }

        var _Joomla$getOptions = Joomla.getOptions('xtd-foos'),
            editor = _Joomla$getOptions.editor;

        if (lang !== '') {
          hreflang = "hreflang = \"".concat(lang, "\"");
        }

        var tag = "<a ".concat(hreflang, "  href=\"").concat(link, "\">").concat(title, "</a>");
        window.parent.Joomla.editors.instances[editor].replaceSelection(tag);
        window.parent.Joomla.Modal.getCurrent().close();
        return true;
      };

      document.addEventListener('DOMContentLoaded', function () {
        // Get the elements
        var elements = document.querySelectorAll('.select-link');

        for (var i = 0, l = elements.length; l > i; i += 1) {
          // Listen for click event
          elements[i].addEventListener('click', function (event) {
            event.preventDefault();
            var functionName = event.target.getAttribute('data-function');

            if (functionName === 'jSelectFoo') {
              // Used in xtd_foos
              window[functionName](event.target.getAttribute('data-id'), event.target.getAttribute('data-title'), null, null, event.target.getAttribute('data-uri'), event.target.getAttribute('data-language'), null);
            } else {
              // Used in com_menus
              window.parent[functionName](event.target.getAttribute('data-id'), event.target.getAttribute('data-title'), null, null, event.target.getAttribute('data-uri'), event.target.getAttribute('data-language'), null);
            }

            if (window.parent.Joomla.Modal) {
              window.parent.Joomla.Modal.getCurrent().close();
            }
          });
        }
      });
    })();

</div>

[Test your component]{#Test_your_component_6 .mw-headline}
----------------------------------------------------------

This chapter contains a lot of work. It is the most extensive chapter in
this tutorial.

Now you can zip all files and install them via Joomla Extension Manager.
After that you

[![As j4 t 7
1.png](/images/thumb/9/95/As_j4_t_7_1.png/700px-As_j4_t_7_1.png){width="700"
height="341"
srcset="/images/thumb/9/95/As_j4_t_7_1.png/1050px-As_j4_t_7_1.png 1.5x, /images/9/95/As_j4_t_7_1.png 2x"}](/File:As_j4_t_7_1.png){.image}

[![As j4 t 7
2.png](/images/thumb/2/24/As_j4_t_7_2.png/700px-As_j4_t_7_2.png){width="700"
height="341"
srcset="/images/thumb/2/24/As_j4_t_7_2.png/1050px-As_j4_t_7_2.png 1.5x, /images/2/24/As_j4_t_7_2.png 2x"}](/File:As_j4_t_7_2.png){.image}

[![As j4 t 7
3.png](/images/thumb/2/27/As_j4_t_7_3.png/700px-As_j4_t_7_3.png){width="700"
height="341"
srcset="/images/thumb/2/27/As_j4_t_7_3.png/1050px-As_j4_t_7_3.png 1.5x, /images/2/27/As_j4_t_7_3.png 2x"}](/File:As_j4_t_7_3.png){.image}

[![As j4 t 7
4.png](/images/thumb/6/69/As_j4_t_7_4.png/700px-As_j4_t_7_4.png){width="700"
height="341"
srcset="/images/thumb/6/69/As_j4_t_7_4.png/1050px-As_j4_t_7_4.png 1.5x, /images/6/69/As_j4_t_7_4.png 2x"}](/File:As_j4_t_7_4.png){.image}

[![As j4 t 7
5.png](/images/thumb/a/a7/As_j4_t_7_5.png/700px-As_j4_t_7_5.png){width="700"
height="341"
srcset="/images/thumb/a/a7/As_j4_t_7_5.png/1050px-As_j4_t_7_5.png 1.5x, /images/a/a7/As_j4_t_7_5.png 2x"}](/File:As_j4_t_7_5.png){.image}

[![As j4 t 7
6.png](/images/thumb/f/f5/As_j4_t_7_6.png/700px-As_j4_t_7_6.png){width="700"
height="341"
srcset="/images/thumb/f/f5/As_j4_t_7_6.png/1050px-As_j4_t_7_6.png 1.5x, /images/f/f5/As_j4_t_7_6.png 2x"}](/File:As_j4_t_7_6.png){.image}

[![As j4 t 7
7.png](/images/thumb/1/1a/As_j4_t_7_7.png/700px-As_j4_t_7_7.png){width="700"
height="341"
srcset="/images/thumb/1/1a/As_j4_t_7_7.png/1050px-As_j4_t_7_7.png 1.5x, /images/1/1a/As_j4_t_7_7.png 2x"}](/File:As_j4_t_7_7.png){.image}

[Component Contents]{#Component_Contents_7 .mw-headline}
--------------------------------------------------------

At this point in the tutorial, your component should contain the
following files:

  --- -------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------
  1   administrator/components/com\_foos/Controller/DisplayController.php        this is the administrator entry point to the Foo component                                                                                                                            unchanged
  7   administrator/components/com\_foos/Controller/FooController.php            this is the entry point to the Foo component                                                                                                                                          new
  1   administrator/components/com\_foos/Extension/FoosComponent.php             the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  7   administrator/components/com\_foos/Field/FooField.php                      the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   new
  7   administrator/components/com\_foos/Model/FooModel.php                      this is the model of the Foo component item                                                                                                                                           new
  6   administrator/components/com\_foos/Model/FoosModel.php                     this is the model of the Foo component                                                                                                                                                unchanged
  1   administrator/components/com\_foos/Service/HTML/AdministratorService.php   the html service see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                                unchanged
  7   administrator/components/com\_foos/Table/FooTable.php                      the database table                                                                                                                                                                    new
  1   administrator/components/com\_foos/View/Foos/HtmlView.php                  file representing the view in the back end                                                                                                                                            changed
  1   administrator/components/com\_foos/services/provider.php                   the service provider interface see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                  changed
  6   administrator/components/com\_foos/sql/install.mysql.utf8.sql              During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           unchanged
  6   administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql            During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           unchanged
  7   administrator/components/com\_foos/forms/foo.xml                           the default form in the back end                                                                                                                                                      new
  7   administrator/components/com\_foos/tmpl/foo/edit.php                       the default view in the back end                                                                                                                                                      new
  7   administrator/components/com\_foos/tmpl/foo/modal.php                      the default view in the back end                                                                                                                                                      new
  1   administrator/components/com\_foos/tmpl/foos/default.php                   the default view in the back end                                                                                                                                                      changed
  7   administrator/components/com\_foos/tmpl/foos/modal.php                     the default view in the back end                                                                                                                                                      new
  1   administrator/components/com\_foos/foos.xml                                this is an XML (manifest) file that tells Joomla! how to install our component.                                                                                                       changed
  1   administrator/components/com\_foos/script.php                              the installer script                                                                                                                                                                  unchanged
  2   components/com\_foos/Controller/DisplayController.php                      this is the frond end entry point to the Foo component                                                                                                                                unchanged
  4   components/com\_foos/Model/FooModel.php                                    this is the frond end model for the Foo component                                                                                                                                     changed
  2   components/com\_foos/View/Foo/HtmlView.php                                 file representing the view in the frond end                                                                                                                                           changed
  7   components/com\_foos/View/Foos/HtmlView.php                                file representing the view in the frond end                                                                                                                                           new
  2   components/com\_foos/tmpl/foo/default.php                                  the default view in the frond end                                                                                                                                                     changed
  3   components/com\_foos/tmpl/foo/default.xml                                  the xml for the menu item                                                                                                                                                             changed
  7   media/com\_foos/js/admin-foos-modal.js                                     the javascript file                                                                                                                                                                   new
  --- -------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------

\

[Conclusion]{#Conclusion_7 .mw-headline}
----------------------------------------

[Using languages files - Part 8]{#Using_languages_files_-_Part_8 .mw-headline}
==============================================================================

[Requirements]{#Requirements_8 .mw-headline}
--------------------------------------------

You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev)

[File Structure]{#File_Structure_8 .mw-headline}
------------------------------------------------

### [Changing administrator/components/com\_foos/foos.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_7 .mw-headline}

The `administrator/components/com_foos/foos.xml` file is ....

#### [Completed administrator/components/com\_foos/foos.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_7 .mw-headline}

The code for the `administrator/components/com_foos/foos.xml` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8" ?>
    <extension type="component" method="upgrade">
        <name>COM_FOOS</name>
        <creationDate>[DATE]</creationDate>
        <author>[AUTHOR]</author>
        <authorEmail>[AUTHOR_EMAIL]</authorEmail>
        <authorUrl>[AUTHOR_URL]</authorUrl>
        <copyright>[COPYRIGHT]</copyright>
        <license>GNU General Public License version 2 or later;</license>
      <version>8.0.0</version>
     <description>COM_FOOS_XML_DESCRIPTION</description>
        <namespace>Joomla\Component\Foos</namespace>
        <scriptfile>script.php</scriptfile>
        <install> <!-- Runs on install -->
            <sql>
                <file driver="mysql" charset="utf8">sql/install.mysql.utf8.sql</file>
            </sql>
        </install>
        <uninstall> <!-- Runs on uninstall -->
            <sql>
                <file driver="mysql" charset="utf8">sql/uninstall.mysql.utf8.sql</file>
            </sql>
        </uninstall>
        <!-- Frond-end files -->
        <files folder="components/com_foos">
            <folder>Controller</folder>
            <folder>Model</folder>
            <folder>View</folder>
            <folder>tmpl</folder>
          <folder>language</folder>
     </files>
        <media folder="media/com_foos" destination="com_foos">
            <folder>js</folder>
        </media>
        <!-- Back-end files -->
        <administration>
            <!-- Menu entries -->
            <menu view="foos">COM_FOOS</menu>
            <submenu>
                <menu link="option=com_foos">COM_FOOS</menu>
            </submenu>
            <files folder="administrator/components/com_foos">
                <filename>foos.xml</filename>
                <folder>Controller</folder>
                <folder>Extension</folder>
                <folder>Model</folder>
                <folder>Service</folder>
                <folder>View</folder>
                <folder>services</folder>
                <folder>tmpl</folder>
                <folder>sql</folder>
              <folder>language</folder>
         </files>
        </administration>
    </extension>

</div>

\

### [Changing components/com\_foos/tmpl/foo/default.php]{#Changing_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php_4 .mw-headline}

The `components/com_foos/tmpl/foo/default.php` file is ....

#### [Completed components/com\_foos/tmpl/foo/default.php file]{#Completed_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php_file_5 .mw-headline}

The code for the `components/com_foos/tmpl/foo/default.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php defined('_JEXEC') or die;

    use Joomla\CMS\Language\Text;

    echo Text::_('COM_FOOS_NAME') . $this->item->name;

</div>

### [Creating components/com\_foos/language/en-GB/en-GB.com\_foo.ini]{#Creating_components.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foo.ini .mw-headline}

The `components/com_foos/language/en-GB/en-GB.com_foo.ini` file is ....

#### [Completed components/com\_foos/language/en-GB/en-GB.com\_foo.ini file]{#Completed_components.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foo.ini_file .mw-headline}

The code for the `components/com_foos/language/en-GB/en-GB.com_foo.ini`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    COM_FOOS_NAME="Name: "

</div>

### [Creating administrator/components/com\_foos/language/en-GB/en-GB.com\_foo.ini]{#Creating_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foo.ini .mw-headline}

The `administrator/components/com_foos/language/en-GB/en-GB.com_foo.ini`
file is ....

#### [Completed administrator/components/com\_foos/language/en-GB/en-GB.com\_foo.ini file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foo.ini_file .mw-headline}

The code for the
`administrator/components/com_foos/language/en-GB/en-GB.com_foo.ini`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    COM_FOOS="[PROJECT_NAME]"
    COM_FOOS_CONFIGURATION="Foo Options"

    COM_FOOS_MANAGER_FOO_NEW="New"
    COM_FOOS_MANAGER_FOO_EDIT="Edit"
    COM_FOOS_MANAGER_FOOS="Foo Manager"

    COM_FOOS_TABLE_TABLEHEAD_NAME="Name"
    COM_FOOS_TABLE_TABLEHEAD_ID="ID"
    COM_FOOS_ERROR_FOO_NOT_FOUND="Foo not found"

    COM_FOOS_FIELD_NAME_LABEL="Name"

</div>

### [Creating administrator/components/com\_foos/language/en-GB/en-GB.com\_foo.sys.ini]{#Creating_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foo.sys.ini .mw-headline}

The
`administrator/components/com_foos/language/en-GB/en-GB.com_foo.sys.ini`
file is ....

#### [Completed administrator/components/com\_foos/language/en-GB/en-GB.com\_foo.sys.ini file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foo.sys.ini_file .mw-headline}

The code for the
`administrator/components/com_foos/language/en-GB/en-GB.com_foo.sys.ini`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    COM_FOOS="[PROJECT_NAME]"
    COM_FOOS_XML_DESCRIPTION="Foo Component"

    COM_FOOS_INSTALLERSCRIPT_PREFLIGHT="<p>Anything here happens before the installation/update/uninstallation of the component</p>"
    COM_FOOS_INSTALLERSCRIPT_UPDATE="<p>The component has been updated</p>"
    COM_FOOS_INSTALLERSCRIPT_UNINSTALL="<p>The component has been uninstalled</p>"
    COM_FOOS_INSTALLERSCRIPT_INSTALL="<p>The component has been installed</p>"
    COM_FOOS_INSTALLERSCRIPT_POSTFLIGHT="<p>Anything here happens after the installation/update/uninstallation of the component</p>"

    COM_FOOS_FOO_VIEW_DEFAULT_TITLE="Single Foo"
    COM_FOOS_FOO_VIEW_DEFAULT_DESC="This links to the information for one foo."
    COM_FOOS_SELECT_FOO_LABEL="Select a foo"

    COM_FOOS_CHANGE_FOO="Change a foo"
    COM_FOOS_SELECT_A_FOO="Select a foo"

</div>

[Test your component]{#Test_your_component_7 .mw-headline}
----------------------------------------------------------

Now you can zip all files and install them via Joomla Extension Manager.

After that, all language strings are translated for all installed
languages.

[![As j4 t 8
1.png](/images/thumb/6/61/As_j4_t_8_1.png/700px-As_j4_t_8_1.png){width="700"
height="341"
srcset="/images/thumb/6/61/As_j4_t_8_1.png/1050px-As_j4_t_8_1.png 1.5x, /images/6/61/As_j4_t_8_1.png 2x"}](/File:As_j4_t_8_1.png){.image}

[![As j4 t 8
2.png](/images/thumb/0/05/As_j4_t_8_2.png/700px-As_j4_t_8_2.png){width="700"
height="341"
srcset="/images/thumb/0/05/As_j4_t_8_2.png/1050px-As_j4_t_8_2.png 1.5x, /images/0/05/As_j4_t_8_2.png 2x"}](/File:As_j4_t_8_2.png){.image}

[Component Contents]{#Component_Contents_8 .mw-headline}
--------------------------------------------------------

At this point in the tutorial, your component should contain the
following files:

  --- --------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------
  1   administrator/components/com\_foos/Controller/DisplayController.php         this is the administrator entry point to the Foo component                                                                                                                            unchanged
  7   administrator/components/com\_foos/Controller/FooController.php             this is the entry point to the Foo component                                                                                                                                          unchanged
  1   administrator/components/com\_foos/Extension/FoosComponent.php              the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  7   administrator/components/com\_foos/Field/FooField.php                       the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  7   administrator/components/com\_foos/Model/FooModel.php                       this is the model of the Foo component item                                                                                                                                           unchanged
  6   administrator/components/com\_foos/Model/FoosModel.php                      this is the model of the Foo component                                                                                                                                                unchanged
  1   administrator/components/com\_foos/Service/HTML/AdministratorService.php    the html service see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                                unchanged
  7   administrator/components/com\_foos/Table/FooTable.php                       the database table                                                                                                                                                                    unchanged
  1   administrator/components/com\_foos/View/Foos/HtmlView.php                   file representing the view in the back end                                                                                                                                            unchanged
  1   administrator/components/com\_foos/services/provider.php                    the service provider interface see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                  unchanged
  6   administrator/components/com\_foos/sql/install.mysql.utf8.sql               During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           unchanged
  6   administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql             During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           unchanged
  7   administrator/components/com\_foos/forms/foo.xml                            the default form in the back end                                                                                                                                                      unchanged
  7   administrator/components/com\_foos/tmpl/foo/edit.php                        the default view in the back end                                                                                                                                                      unchanged
  7   administrator/components/com\_foos/tmpl/foo/modal.php                       the default view in the back end                                                                                                                                                      unchanged
  1   administrator/components/com\_foos/tmpl/foos/default.php                    the default view in the back end                                                                                                                                                      unchanged
  7   administrator/components/com\_foos/tmpl/foos/modal.php                      the default view in the back end                                                                                                                                                      unchanged
  1   administrator/components/com\_foos/foos.xml                                 this is an XML (manifest) file that tells Joomla! how to install our component.                                                                                                       changed
  1   administrator/components/com\_foos/script.php                               the installer script                                                                                                                                                                  unchanged
  8   administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini       the language file                                                                                                                                                                     new
  8   administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini   the language file                                                                                                                                                                     new
  2   components/com\_foos/Controller/DisplayController.php                       this is the frond end entry point to the Foo component                                                                                                                                unchanged
  4   components/com\_foos/Model/FooModel.php                                     this is the frond end model for the Foo component                                                                                                                                     unchanged
  2   components/com\_foos/View/Foo/HtmlView.php                                  file representing the view in the frond end                                                                                                                                           unchanged
  7   components/com\_foos/View/Foos/HtmlView.php                                 file representing the view in the frond end                                                                                                                                           unchanged
  2   components/com\_foos/tmpl/foo/default.php                                   the default view in the frond end                                                                                                                                                     changed
  3   components/com\_foos/tmpl/foo/default.xml                                   the xml for the menu item                                                                                                                                                             unchanged
  8   components/com\_foos/language/en-GB/en-GB.com\_foos.ini                     the language file                                                                                                                                                                     new
  8   components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini                 the language file                                                                                                                                                                     new
  7   media/com\_foos/js/admin-foos-modal.js                                      the javascript file                                                                                                                                                                   unchanged
  --- --------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------

\

[Conclusion]{#Conclusion_8 .mw-headline}
----------------------------------------

[Adding configuration - Part 9]{#Adding_configuration_-_Part_9 .mw-headline}
============================================================================

[Requirements]{#Requirements_9 .mw-headline}
--------------------------------------------

You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev)

[File Structure]{#File_Structure_9 .mw-headline}
------------------------------------------------

### [Creating administrator/components/com\_foos/config.php]{#Creating_administrator.2Fcomponents.2Fcom_foos.2Fconfig.php .mw-headline}

The `administrator/components/com_foos/config.php` file is ....

#### [Completed administrator/components/com\_foos/config.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Fconfig.php_file .mw-headline}

The code for the `administrator/components/com_foos/config.php` file is
as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8"?>
    <config>

        <fieldset
            name="foo"
            label="COM_FOOS_FIELD_CONFIG_INDIVIDUAL_FOO_DISPLAY"
            description="COM_FOOS_FIELD_CONFIG_INDIVIDUAL_FOO_DESC"
            >
            <field
                name="show_foo_name_label"
                type="list"
                label="COM_FOOS_FIELD_FOO_SHOW_CATEGORY_LABEL"
                default="1"
                >
                <option value="0">JNO</option>
                <option value="1">JYES</option>
            </field>
        </fieldset>
    </config>

</div>

### [Changing administrator/components/com\_foos/foos.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_8 .mw-headline}

The `administrator/components/com_foos/foos.xml` file is ....

#### [Completed administrator/components/com\_foos/foos.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_8 .mw-headline}

The code for the `administrator/components/com_foos/foos.xml` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8" ?>
    <extension type="component" method="upgrade">
        <name>COM_FOOS</name>
        <creationDate>[DATE]</creationDate>
        <author>[AUTHOR]</author>
        <authorEmail>[AUTHOR_EMAIL]</authorEmail>
        <authorUrl>[AUTHOR_URL]</authorUrl>
        <copyright>[COPYRIGHT]</copyright>
        <license>GNU General Public License version 2 or later;</license>
      <version>9.0.0</version>
     <description>COM_FOOS_XML_DESCRIPTION</description>
        <namespace>Joomla\Component\Foos</namespace>
        <scriptfile>script.php</scriptfile>
        <install> <!-- Runs on install -->
            <sql>
                <file driver="mysql" charset="utf8">sql/install.mysql.utf8.sql</file>
            </sql>
        </install>
        <uninstall> <!-- Runs on uninstall -->
            <sql>
                <file driver="mysql" charset="utf8">sql/uninstall.mysql.utf8.sql</file>
            </sql>
        </uninstall>
        <!-- Frond-end files -->
        <files folder="components/com_foos">
            <folder>Controller</folder>
            <folder>Model</folder>
            <folder>View</folder>
            <folder>tmpl</folder>
            <folder>language</folder>
        </files>
        <media folder="media/com_foos" destination="com_foos">
            <folder>js</folder>
        </media>
        <!-- Back-end files -->
        <administration>
            <!-- Menu entries -->
            <menu view="foos">COM_FOOS</menu>
            <submenu>
                <menu link="option=com_foos">COM_FOOS</menu>
            </submenu>
            <files folder="administrator/components/com_foos">
              <filename>config.xml</filename>
             <filename>foos.xml</filename>
                <folder>Controller</folder>
                <folder>Extension</folder>
                <folder>Model</folder>
                <folder>Service</folder>
                <folder>View</folder>
                <folder>services</folder>
                <folder>tmpl</folder>
                <folder>sql</folder>
                <folder>language</folder>
            </files>
        </administration>
    </extension>

</div>

### [Changing administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.ini .mw-headline}

The
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.ini`
file is ....

#### [Completed administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.ini_file .mw-headline}

The code for the
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.ini`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    COM_FOOS="[PROJECT_NAME]"
    COM_FOOS_CONFIGURATION="Foo Options"

    COM_FOOS_MANAGER_FOO_NEW="New"
    COM_FOOS_MANAGER_FOO_EDIT="Edit"
    COM_FOOS_MANAGER_FOOS="Foo Manager"

    COM_FOOS_TABLE_TABLEHEAD_NAME="Name"
    COM_FOOS_TABLE_TABLEHEAD_ID="ID"
    COM_FOOS_ERROR_FOO_NOT_FOUND="Foo not found"

    COM_FOOS_FIELD_NAME_LABEL="Name"

    COM_FOOS_FIELD_FOO_SHOW_CATEGORY_LABEL="Show name label"
    COM_FOOS_FIELD_CONFIG_INDIVIDUAL_FOO_DESC="These settings apply for all foo."
    COM_FOOS_FIELD_CONFIG_INDIVIDUAL_FOO_DISPLAY="Foo"

</div>

### [Changing administrator/components/com\_foos/Model/FooModel.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFooModel.php .mw-headline}

The `administrator/components/com_foos/Model/FooModel.php` file is ....

#### [Completed administrator/components/com\_foos/Model/FooModel.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFooModel.php_file_2 .mw-headline}

The code for the `administrator/components/com_foos/Model/FooModel.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php

</div>

### [Changing administrator/components/com\_foos/View/Foos/HtmlView.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_4 .mw-headline}

The `administrator/components/com_foos/View/Foos/HtmlView.php` file is
....

#### [Completed administrator/components/com\_foos/View/Foos/HtmlView.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_file_5 .mw-headline}

The code for the
`administrator/components/com_foos/View/Foos/HtmlView.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php

    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\View\Foos;

    defined('_JEXEC') or die;

    use Joomla\CMS\Language\Text;
    use Joomla\CMS\MVC\View\HtmlView as BaseHtmlView;
    use Joomla\CMS\Toolbar\Toolbar;
    use Joomla\CMS\Toolbar\ToolbarHelper;

    /**
     * View class for a list of foos.
     *
     * @since  1.0
     */
    class HtmlView extends BaseHtmlView
    {
        /**
        * An array of items
        *
        * @var  array
        */
        protected $items;

        /**
        * Display the view.
        *
        * @param   string  $tpl  The name of the template file to parse; automatically searches through the template paths.
        *
        * @return  mixed  A string if successful, otherwise an Error object.
        */
        public function display($tpl = null)
        {

            $this->items = $this->get('Items');

            $this->addToolbar();

            return parent::display($tpl);
        }

        /**
        * Add the page title and toolbar.
        *
        * @return  void
        *
        * @since   1.0
        */
        protected function addToolbar()
        {
            // Get the toolbar object instance
            $toolbar = Toolbar::getInstance('toolbar');

            ToolbarHelper::title(Text::_('COM_FOOS_MANAGER_FOOS'), 'address foo');

            $toolbar->addNew('foo.add');
          $toolbar->preferences('com_foos');
     }

    }

</div>

### [Changing components/com\_foos/Model/FooModel.php]{#Changing_components.2Fcom_foos.2FModel.2FFooModel.php_3 .mw-headline}

The `components/com_foos/Model/FooModel.php` file is ....

#### [Completed components/com\_foos/Model/FooModel.php file]{#Completed_components.2Fcom_foos.2FModel.2FFooModel.php_file_4 .mw-headline}

The code for the `components/com_foos/Model/FooModel.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php

    /**
     * @package     Joomla.Site
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Site\Model;

    defined('_JEXEC') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\MVC\Model\BaseDatabaseModel;
    use Joomla\CMS\Language\Text;
    use Joomla\Registry\Registry;

    /**
     * Foo model for the Joomla Foos component.
     *
     * @since  1.0
     */
    class FooModel extends BaseDatabaseModel
    {
        /**
        * @var string item
        */
        protected $_item = null;

        /**
        * Gets a foo
        *
        * @param   integer  $pk  Id for the foo
        *
        * @return  mixed Object or null
        *
        * @since   1.0.0
        */
        public function getItem($pk = null)
        {
            $app = Factory::getApplication();
            $pk = $app->input->getInt('id');

            if ($this->_item === null)
            {
                $this->_item = array();
            }

            if (!isset($this->_item[$pk]))
            {
                try
                {
                    $db    = $this->getDbo();
                    $query = $db->getQuery(true);

                    $query->select('*')
                        ->from($db->quoteName('#__foos_details', 'a'))
                        ->where('a.id = ' . (int) $pk);

                    $db->setQuery($query);
                    $data = $db->loadObject();

                    if (empty($data))
                    {
                        throw new \Exception(Text::_('COM_FOOS_ERROR_FOO_NOT_FOUND'), 404);
                    }

                    $this->_item[$pk] = $data;
                }
                catch (\Exception $e)
                {
                    $this->setError($e);
                    $this->_item[$pk] = false;
                }
            }

            return $this->_item[$pk];
        }
        /**
        * Method to auto-populate the model state.
        *
        * Note. Calling getState in this method will result in recursion.
        *
        * @return  void
        *
        * @since   1.0
        */
      protected function populateState()
       {
           $app = Factory::getApplication();

           $this->setState('foo.id', $app->input->getInt('id'));
           $this->setState('params', $app->getParams());
       }
    }

</div>

### [Changing components/com\_foos/tmpl/foo/default.php]{#Changing_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php_5 .mw-headline}

The `components/com_foos/tmpl/foo/default.php` file is ....

#### [Completed components/com\_foos/tmpl/foo/default.php file]{#Completed_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php_file_6 .mw-headline}

The code for the `components/com_foos/tmpl/foo/default.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php

    defined('_JEXEC') or die;

    use Joomla\CMS\Language\Text;

    if ($this->get('State')->get('params')->get('show_foo_name_label')) {
       echo Text::_('COM_FOOS_NAME') . $this->item->name;
    } else {
       echo $this->item->name;
    }

</div>

[Test your component]{#Test_your_component_8 .mw-headline}
----------------------------------------------------------

Now you can zip all files and install them via Joomla Extension Manager.

Now you can globally use settings for your extension. You will find a
button in the top right corner of the backend where you can open the
options.

[![As j4 t 9
1.png](/images/thumb/b/bf/As_j4_t_9_1.png/700px-As_j4_t_9_1.png){width="700"
height="341"
srcset="/images/thumb/b/bf/As_j4_t_9_1.png/1050px-As_j4_t_9_1.png 1.5x, /images/b/bf/As_j4_t_9_1.png 2x"}](/File:As_j4_t_9_1.png){.image}

The options are the configuration that you can use for all the items in
your extension.

[![As j4 t 9
2.png](/images/thumb/9/9a/As_j4_t_9_2.png/700px-As_j4_t_9_2.png){width="700"
height="341"
srcset="/images/thumb/9/9a/As_j4_t_9_2.png/1050px-As_j4_t_9_2.png 1.5x, /images/9/9a/As_j4_t_9_2.png 2x"}](/File:As_j4_t_9_2.png){.image}

[Component Contents]{#Component_Contents_9 .mw-headline}
--------------------------------------------------------

At this point in the tutorial, your component should contain the
following files:

  --- --------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------
  1   administrator/components/com\_foos/Controller/DisplayController.php         this is the administrator entry point to the Foo component                                                                                                                            unchanged
  7   administrator/components/com\_foos/Controller/FooController.php             this is the entry point to the Foo component                                                                                                                                          unchanged
  1   administrator/components/com\_foos/Extension/FoosComponent.php              the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  7   administrator/components/com\_foos/Field/FooField.php                       the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  7   administrator/components/com\_foos/Model/FooModel.php                       this is the model of the Foo component item                                                                                                                                           changed
  6   administrator/components/com\_foos/Model/FoosModel.php                      this is the model of the Foo component                                                                                                                                                unchanged
  1   administrator/components/com\_foos/Service/HTML/AdministratorService.php    the html service see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                                unchanged
  7   administrator/components/com\_foos/Table/FooTable.php                       the database table                                                                                                                                                                    unchanged
  1   administrator/components/com\_foos/View/Foos/HtmlView.php                   file representing the view in the back end                                                                                                                                            changed
  1   administrator/components/com\_foos/services/provider.php                    the service provider interface see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                  unchanged
  6   administrator/components/com\_foos/sql/install.mysql.utf8.sql               During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           unchanged
  6   administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql             During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           unchanged
  7   administrator/components/com\_foos/forms/foo.xml                            the default form in the back end                                                                                                                                                      unchanged
  7   administrator/components/com\_foos/tmpl/foo/edit.php                        the default view in the back end                                                                                                                                                      unchanged
  7   administrator/components/com\_foos/tmpl/foo/modal.php                       the default view in the back end                                                                                                                                                      unchanged
  1   administrator/components/com\_foos/tmpl/foos/default.php                    the default view in the back end                                                                                                                                                      unchanged
  7   administrator/components/com\_foos/tmpl/foos/modal.php                      the default view in the back end                                                                                                                                                      unchanged
  1   administrator/components/com\_foos/foos.xml                                 this is an XML (manifest) file that tells Joomla! how to install our component.                                                                                                       unchanged
  1   administrator/components/com\_foos/script.php                               the installer script                                                                                                                                                                  unchanged
  8   administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini       the language file                                                                                                                                                                     changed
  8   administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini   the language file                                                                                                                                                                     unchanged
  9   administrator/components/com\_foos/config.php                               the configuration                                                                                                                                                                     new
  2   components/com\_foos/Controller/DisplayController.php                       this is the frond end entry point to the Foo component                                                                                                                                unchanged
  4   components/com\_foos/Model/FooModel.php                                     this is the frond end model for the Foo component                                                                                                                                     changed
  2   components/com\_foos/View/Foo/HtmlView.php                                  file representing the view in the frond end                                                                                                                                           unchanged
  7   components/com\_foos/View/Foos/HtmlView.php                                 file representing the view in the frond end                                                                                                                                           unchanged
  2   components/com\_foos/tmpl/foo/default.php                                   the default view in the frond end                                                                                                                                                     changed
  3   components/com\_foos/tmpl/foo/default.xml                                   the xml for the menu item                                                                                                                                                             unchanged
  8   components/com\_foos/language/en-GB/en-GB.com\_foos.ini                     the language file                                                                                                                                                                     unchanged
  8   components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini                 the language file                                                                                                                                                                     unchanged
  7   media/com\_foos/js/admin-foos-modal.js                                      the javascript file                                                                                                                                                                   unchanged
  --- --------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------

[Conclusion]{#Conclusion_9 .mw-headline}
----------------------------------------

You can now use your component very flexibly. Maybe you like to offer
some settings only to a limited number of users. How to do this is the
topic of the next chapter.

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

[Adding ACL - Part 10]{#Adding_ACL_-_Part_10 .mw-headline}
==========================================================

[Requirements]{#Requirements_10 .mw-headline}
---------------------------------------------

You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev)

[File Structure]{#File_Structure_10 .mw-headline}
-------------------------------------------------

### [Creating administrator/components/com\_foos/access.xml]{#Creating_administrator.2Fcomponents.2Fcom_foos.2Faccess.xml .mw-headline}

The `administrator/components/com_foos/access.xml` file is ....

#### [Completed administrator/components/com\_foos/access.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Faccess.xml_file .mw-headline}

The code for the `administrator/components/com_foos/access.xml` file is
as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8"?>
    <access component="com_foos">
        <section name="component">
            <action name="core.admin" title="JACTION_ADMIN" />
            <action name="core.options" title="JACTION_OPTIONS" />
            <action name="core.manage" title="JACTION_MANAGE" />
            <action name="core.create" title="JACTION_CREATE" />
            <action name="core.delete" title="JACTION_DELETE" />
            <action name="core.edit" title="JACTION_EDIT" />
            <action name="core.edit.state" title="JACTION_EDITSTATE" />
            <action name="core.edit.own" title="JACTION_EDITOWN" />
        </section>
    </access>

</div>

### [Changing administrator/components/com\_foos/foos.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_9 .mw-headline}

The `administrator/components/com_foos/foos.xml` file is ....

#### [Completed administrator/components/com\_foos/foos.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_9 .mw-headline}

The code for the `administrator/components/com_foos/foos.xml` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8" ?>
    <extension type="component" method="upgrade">
        <name>COM_FOOS</name>
        <creationDate>[DATE]</creationDate>
        <author>[AUTHOR]</author>
        <authorEmail>[AUTHOR_EMAIL]</authorEmail>
        <authorUrl>[AUTHOR_URL]</authorUrl>
        <copyright>[COPYRIGHT]</copyright>
        <license>GNU General Public License version 2 or later;</license>
      <version>1.10.0</version>
     <description>COM_FOOS_XML_DESCRIPTION</description>
        <namespace>Joomla\Component\Foos</namespace>
        <scriptfile>script.php</scriptfile>
        <install> <!-- Runs on install -->
            <sql>
                <file driver="mysql" charset="utf8">sql/install.mysql.utf8.sql</file>
            </sql>
        </install>
        <uninstall> <!-- Runs on uninstall -->
            <sql>
                <file driver="mysql" charset="utf8">sql/uninstall.mysql.utf8.sql</file>
            </sql>
        </uninstall>
      <update>  <!-- Runs on update -->
           <schemas>
               <schemapath type="mysql">sql/updates/mysql</schemapath>
           </schemas>
       </update> 
     <!-- Frond-end files -->
        <files folder="components/com_foos">
            <folder>Controller</folder>
            <folder>Model</folder>
            <folder>View</folder>
            <folder>tmpl</folder>
            <folder>language</folder>
        </files>
        <media folder="media/com_foos" destination="com_foos">
            <folder>js</folder>
        </media>
        <!-- Back-end files -->
        <administration>
            <!-- Menu entries -->
            <menu view="foos">COM_FOOS</menu>
            <submenu>
                <menu link="option=com_foos">COM_FOOS</menu>
            </submenu>
            <files folder="administrator/components/com_foos">
              <filename>access.xml</filename>
             <filename>config.xml</filename>
                <filename>foos.xml</filename>
                <folder>Controller</folder>
                <folder>Extension</folder>
                <folder>Model</folder>
                <folder>Service</folder>
                <folder>View</folder>
                <folder>services</folder>
                <folder>tmpl</folder>
                <folder>sql</folder>
                <folder>language</folder>
            </files>
        </administration>
    </extension>

</div>

### [Changing administrator/components/com\_foos/Model/FoosModel.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php .mw-headline}

The `administrator/components/com_foos/Model/FoosModel.php` file is ....

#### [Completed administrator/components/com\_foos/Model/FoosModel.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_file_2 .mw-headline}

The code for the `administrator/components/com_foos/Model/FoosModel.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\Model;

    defined('_JEXEC') or die;

    use Joomla\CMS\MVC\Model\ListModel;

    /**
     * Methods supporting a list of foo records.
     *
     * @since  1.0
     */
    class FoosModel extends ListModel
    {
        /**
        * Constructor.
        *
        * @param   array  $config  An optional associative array of configuration settings.
        *
        * @see     \JControllerLegacy
        * @since   1.0
        */
        public function __construct($config = array())
        {
            parent::__construct($config);
        }
        /**
        * Build an SQL query to load the list data.
        *
        * @return  \JDatabaseQuery
        *
        * @since   1.0
        */
        protected function getListQuery()
        {
            // Create a new query object.
            $db = $this->getDbo();
            $query = $db->getQuery(true);

            // Select the required fields from the table.
            $query->select(
              $db->quoteName(array('a.id', 'a.name', 'a.access'))
         );

          $query->from($db->quoteName('#__foos_details', 'a'));

           // Join over the asset groups.
           $query->select($db->quoteName('ag.title', 'access_level'))
               ->join(
                   'LEFT',
                   $db->quoteName('#__viewlevels', 'ag') . ' ON ' . $db->quoteName('ag.id') . ' = ' . $db->quoteName('a.access')
               );

         return $query;
        }
    }

</div>

### [Changing administrator/components/com\_foos/View/Foos/HtmlView.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_5 .mw-headline}

The `administrator/components/com_foos/View/Foos/HtmlView.php` file is
....

#### [Completed administrator/components/com\_foos/View/Foos/HtmlView.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_file_6 .mw-headline}

The code for the
`administrator/components/com_foos/View/Foos/HtmlView.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php

    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\View\Foos;

    defined('_JEXEC') or die;

    use Joomla\CMS\Helper\ContentHelper;
    use Joomla\CMS\Language\Text;
    use Joomla\CMS\MVC\View\HtmlView as BaseHtmlView;
    use Joomla\CMS\Toolbar\Toolbar;
    use Joomla\CMS\Toolbar\ToolbarHelper;

    /**
     * View class for a list of foos.
     *
     * @since  1.0
     */
    class HtmlView extends BaseHtmlView
    {
        /**
        * An array of items
        *
        * @var  array
        */
        protected $items;

        /**
        * Display the view.
        *
        * @param   string  $tpl  The name of the template file to parse; automatically searches through the template paths.
        *
        * @return  mixed  A string if successful, otherwise an Error object.
        */
        public function display($tpl = null)
        {
            $this->items = $this->get('Items');

            $this->addToolbar();

            return parent::display($tpl);
        }

        /**
        * Add the page title and toolbar.
        *
        * @return  void
        *
        * @since   1.0
        */
        protected function addToolbar()
        {
          $canDo = ContentHelper::getActions('com_foos');

            // Get the toolbar object instance
            $toolbar = Toolbar::getInstance('toolbar');

            ToolbarHelper::title(Text::_('COM_FOOS_MANAGER_FOOS'), 'address foo');

          if ($canDo->get('core.create'))
         {
                $toolbar->addNew('foo.add');
            }

          if ($canDo->get('core.options'))
         {
                $toolbar->preferences('com_foos');
            }
        }
    }

</div>

### [Changing administrator/components/com\_foos/config.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Fconfig.xml .mw-headline}

The `administrator/components/com_foos/config.xml` file is ....

#### [Completed administrator/components/com\_foos/config.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Fconfig.xml_file .mw-headline}

The code for the `administrator/components/com_foos/config.xml` file is
as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8"?>
    <config>

        <fieldset
            name="foo"
            label="COM_FOOS_FIELD_CONFIG_INDIVIDUAL_FOO_DISPLAY"
            description="COM_FOOS_FIELD_CONFIG_INDIVIDUAL_FOO_DESC"
            >

            <field
                name="show_foo_name_label"
                type="list"
                label="COM_FOOS_FIELD_FOO_SHOW_CATEGORY_LABEL"
                default="1"
                >
                <option value="0">JNO</option>
                <option value="1">JYES</option>
            </field>

        </fieldset>
        <fieldset
            name="permissions"
            label="JCONFIG_PERMISSIONS_LABEL"
            description="JCONFIG_PERMISSIONS_DESC"
            >

            <field
                name="rules"
                type="rules"
                label="JCONFIG_PERMISSIONS_LABEL"
                validate="rules"
                filter="rules"
                component="com_foos"
                section="component"
            />

        </fieldset>
    </config>

</div>

### [Changing administrator/components/com\_foos/forms/foo.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml .mw-headline}

The `administrator/components/com_foos/forms/foo.xml` file is ....

#### [Completed administrator/components/com\_foos/forms/foo.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_file_2 .mw-headline}

The code for the `administrator/components/com_foos/forms/foo.xml` file
is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8"?>
    <form>
        <fieldset>
            <field
                name="id"
                type="number"
                label="JGLOBAL_FIELD_ID_LABEL"
                default="0"
                class="readonly"
                readonly="true"
            />

            <field
                name="name"
                type="text"
                label="COM_FOOS_FIELD_NAME_LABEL"
                size="40"
                required="true"
             />

          <field
               name="access"
               type="accesslevel"
               label="JFIELD_ACCESS_LABEL"
               size="1"
           />
       </fieldset>
    </form>

</div>

### [Creating administrator/components/com\_foos/sql/updates/mysql/1.10.0.sql]{#Creating_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Fupdates.2Fmysql.2F1.10.0.sql .mw-headline}

The `administrator/components/com_foos/sql/updates/mysql/1.10.0.sql`
file is ....

#### [Completed administrator/components/com\_foos/sql/updates/mysql/1.10.0.sql file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Fupdates.2Fmysql.2F1.10.0.sql_file .mw-headline}

The code for the
`administrator/components/com_foos/sql/updates/mysql/1.10.0.sql` file is
as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    ALTER TABLE `#__foos_details` ADD COLUMN  `access` int(10) unsigned NOT NULL DEFAULT 0 AFTER `alias`;

    ALTER TABLE `#__foos_details` ADD KEY `idx_access` (`access`);

</div>

### [Changing administrator/components/com\_foos/tmpl/foo/edit.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php .mw-headline}

The `administrator/components/com_foos/tmpl/foo/edit.php` file is ....

#### [Completed administrator/components/com\_foos/tmpl/foo/edit.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php_file_2 .mw-headline}

The code for the `administrator/components/com_foos/tmpl/foo/edit.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    defined('_JEXEC') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\HTML\HTMLHelper;
    use Joomla\CMS\Router\Route;

    $app = Factory::getApplication();
    $input = $app->input;

    // In case of modal
    $isModal = $input->get('layout') == 'modal' ? true : false;
    $layout  = $isModal ? 'modal' : 'edit';
    $tmpl    = $isModal || $input->get('tmpl', '', 'cmd') === 'component' ? '&tmpl=component' : '';
    ?>

    <form action="<?php echo Route::_('index.php?option=com_foos&layout=' . $layout . $tmpl . '&id=' . (int) $this->item->id); ?>" method="post" name="adminForm" id="foo-form" class="form-validate">
        <?php echo $this->getForm()->renderField('name'); ?>
        <?php echo $this->getForm()->renderField('access'); ?>
        <input type="hidden" name="task" value="">
        <?php echo HTMLHelper::_('form.token'); ?>
    </form>

</div>

### [Changing administrator/components/com\_foos/tmpl/foo/default.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php .mw-headline}

The `administrator/components/com_foos/tmpl/foo/default.php` file is
....

#### [Completed administrator/components/com\_foos/tmpl/foo/default.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php_file .mw-headline}

The code for the
`administrator/components/com_foos/tmpl/foo/default.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    defined('_JEXEC') or die;

    use Joomla\CMS\HTML\HTMLHelper;
    use Joomla\CMS\Language\Text;
    use Joomla\CMS\Router\Route;
    ?>
    <form action="<?php echo Route::_('index.php?option=com_foos'); ?>" method="post" name="adminForm" id="adminForm">
        <div class="row">
            <div class="col-md-10">
             <div id="j-main-container" class="j-main-container">
                    <?php if (empty($this->items)) : ?>
                        <div class="alert alert-warning">
                            <?php echo Text::_('JGLOBAL_NO_MATCHING_RESULTS'); ?>
                        </div>
                    <?php else : ?>
                        <table class="table" id="fooList">
                            <thead>
                                <tr>
                                    <th scope="col" style="width:1%" class="text-center d-none d-md-table-cell">
                                        <?php echo Text::_('COM_FOOS_TABLE_TABLEHEAD_NAME'); ?>
                                    </th>
                                  <th scope="col" style="width:10%" class="d-none d-md-table-cell">
                                       <?php echo TEXT::_('JGRID_HEADING_ACCESS') ?>
                                   </th>
                                 <th scope="col">
                                        <?php echo Text::_('COM_FOOS_TABLE_TABLEHEAD_ID'); ?>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                            <?php
                           $n = count($this->items);
                           foreach ($this->items as $i => $item) :
                               ?>
                                <tr class="row<?php echo $i % 2; ?>">
                                  <td scope="row" class="has-context">
                                     <div>
                                            <?php echo $this->escape($item->name); ?>
                                        </div>
                                        <?php $editIcon = '<span class="fa fa-pencil-square mr-2" aria-hidden="true"></span>'; ?>
                                        <a class="hasTooltip" href="<?php echo Route::_('index.php?option=com_foos&task=foo.edit&id=' . (int) $item->id); ?>" title="<?php echo Text::_('JACTION_EDIT'); ?> <?php echo $this->escape(addslashes($item->name)); ?>">
                                            <?php echo $editIcon; ?><?php echo $this->escape($item->name); ?></a>

                                    </td>
                                  <td class="small d-none d-md-table-cell">
                                       <?php echo $item->access_level; ?>
                                   </td>
                                 <td class="d-none d-md-table-cell">
                                        <?php echo $item->id; ?>
                                    </td>
                                </tr>
                                <?php endforeach; ?>
                            </tbody>
                        </table>

                    <?php endif; ?>
                    <input type="hidden" name="task" value="">
                    <input type="hidden" name="boxchecked" value="0">
                    <?php echo HTMLHelper::_('form.token'); ?>
                </div>
            </div>
        </div>
    </form>

</div>

[Note]{#Note_3 .mw-headline}
----------------------------

In this tutorial we only cover MySql. How to handle postgrep you can
find in the file joomla-cms4/administrator/manifests/files/joomla.xml

[Test your component]{#Test_your_component_9 .mw-headline}
----------------------------------------------------------

Now you can zip all files and install them via Joomla Extension Manager.

You have to run a new installation or fix the database due to the
changes in the database.

Now you can set the permissions for the component in the configuration
(options).

[![As j4 t 10
1.png](/images/thumb/6/6a/As_j4_t_10_1.png/700px-As_j4_t_10_1.png){width="700"
height="341"
srcset="/images/thumb/6/6a/As_j4_t_10_1.png/1050px-As_j4_t_10_1.png 1.5x, /images/6/6a/As_j4_t_10_1.png 2x"}](/File:As_j4_t_10_1.png){.image}

In the overview in the backend you can see a new table column. This is a
value entered if a specific authorization has been set for an item.

[![As j4 t 10
2.png](/images/thumb/f/fe/As_j4_t_10_2.png/700px-As_j4_t_10_2.png){width="700"
height="341"
srcset="/images/thumb/f/fe/As_j4_t_10_2.png/1050px-As_j4_t_10_2.png 1.5x, /images/f/fe/As_j4_t_10_2.png 2x"}](/File:As_j4_t_10_2.png){.image}

You can specify a special permission when editing a item. You can see
that in the next picture.

[![As j4 t 10
3.png](/images/thumb/1/11/As_j4_t_10_3.png/700px-As_j4_t_10_3.png){width="700"
height="341"
srcset="/images/thumb/1/11/As_j4_t_10_3.png/1050px-As_j4_t_10_3.png 1.5x, /images/1/11/As_j4_t_10_3.png 2x"}](/File:As_j4_t_10_3.png){.image}

[Example in Joomla!]{#Example_in_Joomla.21 .mw-headline}
--------------------------------------------------------

[Note]{#Note_4 .mw-headline}
----------------------------

[Component Contents]{#Component_Contents_10 .mw-headline}
---------------------------------------------------------

At this point in the tutorial, your component should contain the
following files:

  ---- --------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------
  1    administrator/components/com\_foos/Controller/DisplayController.php         this is the administrator entry point to the Foo component                                                                                                                            unchanged
  7    administrator/components/com\_foos/Controller/FooController.php             this is the entry point to the Foo component                                                                                                                                          unchanged
  1    administrator/components/com\_foos/Extension/FoosComponent.php              the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  7    administrator/components/com\_foos/Field/FooField.php                       the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  7    administrator/components/com\_foos/Model/FooModel.php                       this is the model of the Foo component item                                                                                                                                           unchanged
  6    administrator/components/com\_foos/Model/FoosModel.php                      this is the model of the Foo component                                                                                                                                                changed
  1    administrator/components/com\_foos/Service/HTML/AdministratorService.php    the html service see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                                unchanged
  7    administrator/components/com\_foos/Table/FooTable.php                       the database table                                                                                                                                                                    unchanged
  1    administrator/components/com\_foos/View/Foos/HtmlView.php                   file representing the view in the back end                                                                                                                                            changed
  1    administrator/components/com\_foos/services/provider.php                    the service provider interface see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                  unchanged
  6    administrator/components/com\_foos/sql/install.mysql.utf8.sql               During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           changed
  6    administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql             During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           unchanged
  7    administrator/components/com\_foos/forms/foo.xml                            the default form in the back end                                                                                                                                                      changed
  7    administrator/components/com\_foos/tmpl/foo/edit.php                        the default view in the back end                                                                                                                                                      changed
  7    administrator/components/com\_foos/tmpl/foo/modal.php                       the default view in the back end                                                                                                                                                      unchanged
  1    administrator/components/com\_foos/tmpl/foos/default.php                    the default view in the back end                                                                                                                                                      changed
  7    administrator/components/com\_foos/tmpl/foos/modal.php                      the default view in the back end                                                                                                                                                      unchanged
  1    administrator/components/com\_foos/foos.xml                                 this is an XML (manifest) file that tells Joomla! how to install our component.                                                                                                       changed
  1    administrator/components/com\_foos/script.php                               the installer script                                                                                                                                                                  unchanged
  8    administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini       the language file                                                                                                                                                                     unchanged
  8    administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini   the language file                                                                                                                                                                     unchanged
  9    administrator/components/com\_foos/config.php                               the configuration                                                                                                                                                                     changed
  10   administrator/components/com\_foos/access.xml                               the ACL file for permissen handling                                                                                                                                                   new
  2    components/com\_foos/Controller/DisplayController.php                       this is the frond end entry point to the Foo component                                                                                                                                unchanged
  4    components/com\_foos/Model/FooModel.php                                     this is the frond end model for the Foo component                                                                                                                                     unchanged
  2    components/com\_foos/View/Foo/HtmlView.php                                  file representing the view in the frond end                                                                                                                                           unchanged
  7    components/com\_foos/View/Foos/HtmlView.php                                 file representing the view in the frond end                                                                                                                                           unchanged
  2    components/com\_foos/tmpl/foo/default.php                                   the default view in the frond end                                                                                                                                                     unchanged
  3    components/com\_foos/tmpl/foo/default.xml                                   the xml for the menu item                                                                                                                                                             unchanged
  8    components/com\_foos/language/en-GB/en-GB.com\_foos.ini                     the language file                                                                                                                                                                     unchanged
  8    components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini                 the language file                                                                                                                                                                     unchanged
  7    media/com\_foos/js/admin-foos-modal.js                                      the javascript file                                                                                                                                                                   unchanged
  ---- --------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------

\

[Conclusion]{#Conclusion_10 .mw-headline}
-----------------------------------------

You can now accomplish many things with your component. It is very
important, however, to make the component user-friendly. The next two
chapters deal with validation for this reason.

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

[Adding Server side validation - Part 11a]{#Adding_Server_side_validation_-_Part_11a .mw-headline}
==================================================================================================

[Requirements]{#Requirements_11 .mw-headline}
---------------------------------------------

You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev)

[File Structure]{#File_Structure_11 .mw-headline}
-------------------------------------------------

### [Create administrator/components/com\_foos/Rule/LetterRule.php]{#Create_administrator.2Fcomponents.2Fcom_foos.2FRule.2FLetterRule.php .mw-headline}

The `administrator/components/com_foos/Rule/LetterRule.php` file is ....

#### [Completed administrator/components/com\_foos/Rule/LetterRule.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FRule.2FLetterRule.php_file .mw-headline}

The code for the `administrator/components/com_foos/Rule/LetterRule.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * Joomla! Content Management System
     *
     * @copyright  Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license    GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\Rule;

    defined('JPATH_PLATFORM') or die;

    use Joomla\CMS\Form\FormRule;

    /**
     * Form Rule class for the Joomla Platform.
     *
     * @since  1.7.0
     */
    class LetterRule extends FormRule
    {
        /**
        * The regular expression to use in testing a form field value.
        *
        * @var    string
        * @since  1.0.0
        */
        protected $regex = '^([a-z]+)$';

        /**
        * The regular expression modifiers to use when testing a form field value.
        *
        * @var    string
        * @since  1.0.0
        */
        protected $modifiers = 'i';
    }

</div>

### [Changing administrator/components/com\_foos/forms/foo.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_2 .mw-headline}

The `administrator/components/com_foos/forms/foo.xml` file is ....

#### [Completed administrator/components/com\_foos/forms/foo.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_file_3 .mw-headline}

The code for the `administrator/components/com_foos/forms/foo.xml` file
is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8"?>
    <form>
        <fieldset addruleprefix="Joomla\Component\Foos\Administrator\Rule">
            <field
                name="id"
                type="number"
                label="JGLOBAL_FIELD_ID_LABEL"
                default="0"
                class="readonly"
                readonly="true"
            />

            <field
                name="name"
                type="text"
                validate="Letter"
                label="COM_FOOS_FIELD_NAME_LABEL"
                size="40"
                required="true"
             />

            <field
                name="access"
                type="accesslevel"
                label="JFIELD_ACCESS_LABEL"
                size="1"
            />
        </fieldset>
    </form>

</div>

### [Changing administrator/components/com\_foos/foo.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoo.xml .mw-headline}

The `administrator/components/com_foos/foo.xml` file is ....

#### [Completed administrator/components/com\_foos/foo.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoo.xml_file .mw-headline}

The code for the `administrator/components/com_foos/foo.xml` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8" ?>
    <extension type="component" method="upgrade">
        <name>COM_FOOS</name>
        <creationDate>[DATE]</creationDate>
        <author>[AUTHOR]</author>
        <authorEmail>[AUTHOR_EMAIL]</authorEmail>
        <authorUrl>[AUTHOR_URL]</authorUrl>
        <copyright>[COPYRIGHT]</copyright>
        <license>GNU General Public License version 2 or later;</license>
      <version>1.11.0</version>
     <description>COM_FOOS_XML_DESCRIPTION</description>
        <namespace>Joomla\Component\Foos</namespace>
        <scriptfile>script.php</scriptfile>
        <install> <!-- Runs on install -->
            <sql>
                <file driver="mysql" charset="utf8">sql/install.mysql.utf8.sql</file>
            </sql>
        </install>
        <uninstall> <!-- Runs on uninstall -->
            <sql>
                <file driver="mysql" charset="utf8">sql/uninstall.mysql.utf8.sql</file>
            </sql>
        </uninstall>
        <update>  <!-- Runs on update -->
            <schemas>
                <schemapath type="mysql">sql/updates/mysql</schemapath>
            </schemas>
        </update>
        <!-- Frond-end files -->
        <files folder="components/com_foos">
            <folder>Controller</folder>
            <folder>Model</folder>
            <folder>View</folder>
            <folder>tmpl</folder>
            <folder>language</folder>
        </files>
        <media folder="media/com_foos" destination="com_foos">
            <folder>js</folder>
        </media>
        <!-- Back-end files -->
        <administration>
            <!-- Menu entries -->
            <menu view="foos">COM_FOOS</menu>
            <submenu>
                <menu link="option=com_foos">COM_FOOS</menu>
            </submenu>
            <files folder="administrator/components/com_foos">
                <filename>access.xml</filename>
                <filename>config.xml</filename>
                <filename>foos.xml</filename>
                <folder>Controller</folder>
                <folder>Extension</folder>
                <folder>Model</folder>
              <folder>Rule</folder>
             <folder>Service</folder>
                <folder>View</folder>
                <folder>services</folder>
                <folder>tmpl</folder>
                <folder>sql</folder>
                <folder>language</folder>
            </files>
        </administration>
    </extension>

</div>

[Test your component]{#Test_your_component_10 .mw-headline}
-----------------------------------------------------------

Now you can zip all files and install them via Joomla Extension Manager.

After that you can

\

[Example in Joomla!]{#Example_in_Joomla.21_2 .mw-headline}
----------------------------------------------------------

If you want to save a letter in the name, this is not possible. You will
now see an error message after clicking the Save button

[![As j4 t 11a
1.png](/images/thumb/6/63/As_j4_t_11a_1.png/700px-As_j4_t_11a_1.png){width="700"
height="341"
srcset="/images/thumb/6/63/As_j4_t_11a_1.png/1050px-As_j4_t_11a_1.png 1.5x, /images/6/63/As_j4_t_11a_1.png 2x"}](/File:As_j4_t_11a_1.png){.image}

\

[Component Contents]{#Component_Contents_11 .mw-headline}
---------------------------------------------------------

At this point in the tutorial, your component should contain the
following files:

  ----- --------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------
  1     administrator/components/com\_foos/Controller/DisplayController.php         this is the administrator entry point to the Foo component                                                                                                                            unchanged
  7     administrator/components/com\_foos/Controller/FooController.php             this is the entry point to the Foo component                                                                                                                                          unchanged
  1     administrator/components/com\_foos/Extension/FoosComponent.php              the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  7     administrator/components/com\_foos/Field/FooField.php                       the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  7     administrator/components/com\_foos/Model/FooModel.php                       this is the model of the Foo component item                                                                                                                                           unchanged
  6     administrator/components/com\_foos/Model/FoosModel.php                      this is the model of the Foo component                                                                                                                                                unchanged
  1     administrator/components/com\_foos/Service/HTML/AdministratorService.php    the html service see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                                unchanged
  7     administrator/components/com\_foos/Table/FooTable.php                       the database table                                                                                                                                                                    unchanged
  1     administrator/components/com\_foos/View/Foos/HtmlView.php                   file representing the view in the back end                                                                                                                                            unchanged
  1     administrator/components/com\_foos/services/provider.php                    the service provider interface see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                  unchanged
  6     administrator/components/com\_foos/sql/install.mysql.utf8.sql               During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           unchanged
  6     administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql             During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           unchanged
  7     administrator/components/com\_foos/forms/foo.xml                            the default form in the back end                                                                                                                                                      changed
  7     administrator/components/com\_foos/tmpl/foo/edit.php                        the default view in the back end                                                                                                                                                      unchanged
  7     administrator/components/com\_foos/tmpl/foo/modal.php                       the default view in the back end                                                                                                                                                      unchanged
  1     administrator/components/com\_foos/tmpl/foos/default.php                    the default view in the back end                                                                                                                                                      unchanged
  7     administrator/components/com\_foos/tmpl/foos/modal.php                      the default view in the back end                                                                                                                                                      unchanged
  1     administrator/components/com\_foos/foos.xml                                 this is an XML (manifest) file that tells Joomla! how to install our component.                                                                                                       changed
  1     administrator/components/com\_foos/script.php                               the installer script                                                                                                                                                                  unchanged
  8     administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini       the language file                                                                                                                                                                     unchanged
  8     administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini   the language file                                                                                                                                                                     unchanged
  9     administrator/components/com\_foos/config.php                               the configuration                                                                                                                                                                     unchanged
  10    administrator/components/com\_foos/access.xml                               the ACL file for permissen handling                                                                                                                                                   unchanged
  11a   administrator/components/com\_foos/Rule/LetterRule.php                      the server side validation rule                                                                                                                                                       new
  2     components/com\_foos/Controller/DisplayController.php                       this is the frond end entry point to the Foo component                                                                                                                                unchanged
  4     components/com\_foos/Model/FooModel.php                                     this is the frond end model for the Foo component                                                                                                                                     unchanged
  2     components/com\_foos/View/Foo/HtmlView.php                                  file representing the view in the frond end                                                                                                                                           unchanged
  7     components/com\_foos/View/Foos/HtmlView.php                                 file representing the view in the frond end                                                                                                                                           unchanged
  2     components/com\_foos/tmpl/foo/default.php                                   the default view in the frond end                                                                                                                                                     unchanged
  3     components/com\_foos/tmpl/foo/default.xml                                   the xml for the menu item                                                                                                                                                             unchanged
  8     components/com\_foos/language/en-GB/en-GB.com\_foos.ini                     the language file                                                                                                                                                                     unchanged
  8     components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini                 the language file                                                                                                                                                                     unchanged
  7     media/com\_foos/js/admin-foos-modal.js                                      the javascript file                                                                                                                                                                   unchanged
  ----- --------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------

\

[Conclusion]{#Conclusion_11 .mw-headline}
-----------------------------------------

It is no longer possible to save an invalid value. In large forms, it is
not user-friendly to display all errors at the very end. Therefore,
server-side validation is often supplemented with client-side
validation, which checks during input. You can read more on this topic
in the next chapter.

\

\

\

\

\

\

\

\

[Adding Client side validation - Part 11b]{#Adding_Client_side_validation_-_Part_11b .mw-headline}
==================================================================================================

[Requirements]{#Requirements_12 .mw-headline}
---------------------------------------------

You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev)

[File Structure]{#File_Structure_12 .mw-headline}
-------------------------------------------------

### [Changing administrator/components/com\_foos/foo.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoo.xml_2 .mw-headline}

The `administrator/components/com_foos/foo.xml` file is ....

#### [Completed administrator/components/com\_foos/foo.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoo.xml_file_2 .mw-headline}

The code for the `administrator/components/com_foos/foo.xml` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8" ?>
    <extension type="component" method="upgrade">
        <name>COM_FOOS</name>
        <creationDate>[DATE]</creationDate>
        <author>[AUTHOR]</author>
        <authorEmail>[AUTHOR_EMAIL]</authorEmail>
        <authorUrl>[AUTHOR_URL]</authorUrl>
        <copyright>[COPYRIGHT]</copyright>
        <license>GNU General Public License version 2 or later;</license>
      <version>1.11.1</version>
     <description>COM_FOOS_XML_DESCRIPTION</description>
        <namespace>Joomla\Component\Foos</namespace>
        <scriptfile>script.php</scriptfile>
        <install> <!-- Runs on install -->
            <sql>
                <file driver="mysql" charset="utf8">sql/install.mysql.utf8.sql</file>
            </sql>
        </install>
        <uninstall> <!-- Runs on uninstall -->
            <sql>
                <file driver="mysql" charset="utf8">sql/uninstall.mysql.utf8.sql</file>
            </sql>
        </uninstall>
        <update>  <!-- Runs on update -->
            <schemas>
                <schemapath type="mysql">sql/updates/mysql</schemapath>
            </schemas>
        </update>
        <!-- Frond-end files -->
        <files folder="components/com_foos">
            <folder>Controller</folder>
            <folder>Model</folder>
            <folder>View</folder>
            <folder>tmpl</folder>
            <folder>language</folder>
        </files>
        <media folder="media/com_foos" destination="com_foos">
            <folder>js</folder>
        </media>
        <!-- Back-end files -->
        <administration>
            <!-- Menu entries -->
            <menu view="foos">COM_FOOS</menu>
            <submenu>
                <menu link="option=com_foos">COM_FOOS</menu>
            </submenu>
            <files folder="administrator/components/com_foos">
                <filename>access.xml</filename>
                <filename>config.xml</filename>
                <filename>foos.xml</filename>
                <folder>Controller</folder>
                <folder>Extension</folder>
                <folder>Model</folder>
              <folder>Rule</folder>
             <folder>Service</folder>
                <folder>View</folder>
                <folder>services</folder>
                <folder>tmpl</folder>
                <folder>sql</folder>
                <folder>language</folder>
            </files>
        </administration>
    </extension>

</div>

\

### [Create media/com\_foos/js/admin-foos-letter.js]{#Create_media.2Fcom_foos.2Fjs.2Fadmin-foos-letter.js .mw-headline}

The `media/com_foos/js/admin-foos-letter.js` file is ....

#### [Completed media/com\_foos/js/admin-foos-letter.js file]{#Completed_media.2Fcom_foos.2Fjs.2Fadmin-foos-letter.js_file .mw-headline}

The code for the `media/com_foos/js/admin-foos-letter.js` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    document.addEventListener('DOMContentLoaded', function(){
        "use strict";
        if (document.formvalidator) {
            document.formvalidator.setHandler('letter', function (value) {

                var returnedValue = false;

                var regex = /^([a-z]+)$/i;

                if (regex.test(value))
                    returnedValue = true;

                return returnedValue;
            });
            //console.log(document.formvalidator);
        } 
    });

</div>

### [Changing administrator/components/com\_foos/forms/foo.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_3 .mw-headline}

The `administrator/components/com_foos/forms/foo.xml` file is ....

#### [Completed administrator/components/com\_foos/forms/foo.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_file_4 .mw-headline}

The code for the `administrator/components/com_foos/forms/foo.xml` file
is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8"?>
    <form>
        <fieldset addruleprefix="Joomla\Component\Foos\Administrator\Rule">
            <field
                name="id"
                type="number"
                label="JGLOBAL_FIELD_ID_LABEL"
                default="0"
                class="readonly"
                readonly="true"
            />

            <field
                name="name"
                type="text"
                validate="Letter"
              class="validate-letter"
             label="COM_FOOS_FIELD_NAME_LABEL"
                size="40"
                required="true"
             />

            <field
                name="access"
                type="accesslevel"
                label="JFIELD_ACCESS_LABEL"
                size="1"
            />
        </fieldset>
    </form>

</div>

### [Changing administrator/components/com\_foos/tmpl/foo/edit.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php_2 .mw-headline}

The `administrator/components/com_foos/tmpl/foo/edit.php` file is ....

#### [Completed administrator/components/com\_foos/tmpl/foo/edit.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php_file_3 .mw-headline}

The code for the `administrator/components/com_foos/tmpl/foo/edit.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    defined('_JEXEC') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\HTML\HTMLHelper;
    use Joomla\CMS\Router\Route;

    HTMLHelper::_('behavior.formvalidator');
    HTMLHelper::_('script', 'com_foos/admin-foos-letter.js', array('version' => 'auto', 'relative' => true));

    $app = Factory::getApplication();
    $input = $app->input;

    // In case of modal
    $isModal = $input->get('layout') == 'modal' ? true : false;
    $layout  = $isModal ? 'modal' : 'edit';
    $tmpl    = $isModal || $input->get('tmpl', '', 'cmd') === 'component' ? '&tmpl=component' : '';
    ?>

    <form action="<?php echo Route::_('index.php?option=com_foos&layout=' . $layout . $tmpl . '&id=' . (int) $this->item->id); ?>" method="post" name="adminForm" id="foo-form" class="form-validate">
        <?php echo $this->getForm()->renderField('name'); ?>
        <?php echo $this->getForm()->renderField('access'); ?>
        <input type="hidden" name="task" value="">
        <?php echo HTMLHelper::_('form.token'); ?>
    </form>

</div>

[Test your component]{#Test_your_component_11 .mw-headline}
-----------------------------------------------------------

Now you can zip all files and install them via Joomla Extension Manager.

If you now enter a number in the name field, you will see an error
message immediately after leaving the field. For server-side validation,
you only saw the error message after you submitted the form to the
server using the Save button.

[![As j4 t 11b
1.png.png](/images/thumb/9/99/As_j4_t_11b_1.png.png/700px-As_j4_t_11b_1.png.png){width="700"
height="341"
srcset="/images/thumb/9/99/As_j4_t_11b_1.png.png/1050px-As_j4_t_11b_1.png.png 1.5x, /images/9/99/As_j4_t_11b_1.png.png 2x"}](/File:As_j4_t_11b_1.png.png){.image}

\

[Example in Joomla]{#Example_in_Joomla .mw-headline}
----------------------------------------------------

/media/system/js/fields/passwordstrength.js
/administrator/components/com\_users/forms/user.xml

[Component Contents]{#Component_Contents_12 .mw-headline}
---------------------------------------------------------

At this point in the tutorial, your component should contain the
following files:

  ----- --------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------
  1     administrator/components/com\_foos/Controller/DisplayController.php         this is the administrator entry point to the Foo component                                                                                                                            unchanged
  7     administrator/components/com\_foos/Controller/FooController.php             this is the entry point to the Foo component                                                                                                                                          unchanged
  1     administrator/components/com\_foos/Extension/FoosComponent.php              the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  7     administrator/components/com\_foos/Field/FooField.php                       the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  7     administrator/components/com\_foos/Model/FooModel.php                       this is the model of the Foo component item                                                                                                                                           unchanged
  6     administrator/components/com\_foos/Model/FoosModel.php                      this is the model of the Foo component                                                                                                                                                unchanged
  1     administrator/components/com\_foos/Service/HTML/AdministratorService.php    the html service see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                                unchanged
  7     administrator/components/com\_foos/Table/FooTable.php                       the database table                                                                                                                                                                    unchanged
  1     administrator/components/com\_foos/View/Foos/HtmlView.php                   file representing the view in the back end                                                                                                                                            unchanged
  1     administrator/components/com\_foos/services/provider.php                    the service provider interface see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                  unchanged
  6     administrator/components/com\_foos/sql/install.mysql.utf8.sql               During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           unchanged
  6     administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql             During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           unchanged
  7     administrator/components/com\_foos/forms/foo.xml                            the default form in the back end                                                                                                                                                      unchanged
  7     administrator/components/com\_foos/tmpl/foo/edit.php                        the default view in the back end                                                                                                                                                      changed
  7     administrator/components/com\_foos/tmpl/foo/modal.php                       the default view in the back end                                                                                                                                                      unchanged
  1     administrator/components/com\_foos/tmpl/foos/default.php                    the default view in the back end                                                                                                                                                      unchanged
  7     administrator/components/com\_foos/tmpl/foos/modal.php                      the default view in the back end                                                                                                                                                      unchanged
  1     administrator/components/com\_foos/foos.xml                                 this is an XML (manifest) file that tells Joomla! how to install our component.                                                                                                       unchanged
  1     administrator/components/com\_foos/script.php                               the installer script                                                                                                                                                                  unchanged
  8     administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini       the language file                                                                                                                                                                     unchanged
  8     administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini   the language file                                                                                                                                                                     unchanged
  9     administrator/components/com\_foos/config.php                               the configuration                                                                                                                                                                     unchanged
  10    administrator/components/com\_foos/access.xml                               the ACL file for permissen handling                                                                                                                                                   unchanged
  11a   administrator/components/com\_foos/Rule/LetterRule.php                      the server side validation rule                                                                                                                                                       unchanged
  2     components/com\_foos/Controller/DisplayController.php                       this is the frond end entry point to the Foo component                                                                                                                                unchanged
  4     components/com\_foos/Model/FooModel.php                                     this is the frond end model for the Foo component                                                                                                                                     unchanged
  2     components/com\_foos/View/Foo/HtmlView.php                                  file representing the view in the frond end                                                                                                                                           unchanged
  7     components/com\_foos/View/Foos/HtmlView.php                                 file representing the view in the frond end                                                                                                                                           unchanged
  2     components/com\_foos/tmpl/foo/default.php                                   the default view in the frond end                                                                                                                                                     unchanged
  3     components/com\_foos/tmpl/foo/default.xml                                   the xml for the menu item                                                                                                                                                             unchanged
  8     components/com\_foos/language/en-GB/en-GB.com\_foos.ini                     the language file                                                                                                                                                                     unchanged
  8     components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini                 the language file                                                                                                                                                                     unchanged
  7     media/com\_foos/js/admin-foos-modal.js                                      the javascript file                                                                                                                                                                   unchanged
  11b   media/com\_foos/js/admin-foos-letter.js                                     the client side validation rule                                                                                                                                                       new
  ----- --------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------

\

[Conclusion]{#Conclusion_12 .mw-headline}
-----------------------------------------

You now know the validation very well. Next, we'll look at how you can
create categories and easily map your items.

\

\

\

\

\

\

\

\

\

\

\

[Adding categories - Part 12]{#Adding_categories_-_Part_12 .mw-headline}
========================================================================

[Requirements]{#Requirements_13 .mw-headline}
---------------------------------------------

You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev)

[File Structure]{#File_Structure_13 .mw-headline}
-------------------------------------------------

### [Changing administrator/components/com\_foos/Model/FoosModel.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_2 .mw-headline}

The `administrator/components/com_foos/Model/FoosModel.php` file is ....

#### [Completed administrator/components/com\_foos/Model/FoosModel.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_file_3 .mw-headline}

The code for the `administrator/components/com_foos/Model/FoosModel.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\Model;

    defined('_JEXEC') or die;

    use Joomla\CMS\MVC\Model\ListModel;

    /**
     * Methods supporting a list of foo records.
     *
     * @since  1.0
     */
    class FoosModel extends ListModel
    {
        /**
        * Constructor.
        *
        * @param   array  $config  An optional associative array of configuration settings.
        *
        * @see     \JControllerLegacy
        * @since   1.0
        */
        public function __construct($config = array())
        {
            parent::__construct($config);
        }
        /**
        * Build an SQL query to load the list data.
        *
        * @return  \JDatabaseQuery
        *
        * @since   1.0
        */
        protected function getListQuery()
        {
            // Create a new query object.
            $db = $this->getDbo();
            $query = $db->getQuery(true);

            // Select the required fields from the table.
            $query->select(
                $db->quoteName(array('a.id', 'a.name', 'a.catid', 'a.access'))
            );

            $query->from($db->quoteName('#__foos_details', 'a'));

            // Join over the asset groups.
            $query->select($db->quoteName('ag.title', 'access_level'))
                ->join(
                    'LEFT',
                    $db->quoteName('#__viewlevels', 'ag') . ' ON ' . $db->quoteName('ag.id') . ' = ' . $db->quoteName('a.access')
                );

          // Join over the categories.
           $query->select($db->quoteName('c.title', 'category_title'))
               ->join(
                   'LEFT',
                   $db->quoteName('#__categories', 'c') . ' ON ' . $db->quoteName('c.id') . ' = ' . $db->quoteName('a.catid')
               );

         return $query;
        }
    }

</div>

### [Changing administrator/components/com\_foos/access.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Faccess.xml .mw-headline}

The `administrator/components/com_foos/access.xml` file is ....

#### [Completed administrator/components/com\_foos/access.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Faccess.xml_file_2 .mw-headline}

The code for the `administrator/components/com_foos/access.xml` file is
as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8"?>
    <access component="com_foos">
        <section name="component">
            <action name="core.admin" title="JACTION_ADMIN" />
            <action name="core.options" title="JACTION_OPTIONS" />
            <action name="core.manage" title="JACTION_MANAGE" />
            <action name="core.create" title="JACTION_CREATE" />
            <action name="core.delete" title="JACTION_DELETE" />
            <action name="core.edit" title="JACTION_EDIT" />
            <action name="core.edit.state" title="JACTION_EDITSTATE" />
            <action name="core.edit.own" title="JACTION_EDITOWN" />
        </section>
      <section name="category">
           <action name="core.create" title="JACTION_CREATE" />
           <action name="core.delete" title="JACTION_DELETE" />
           <action name="core.edit" title="JACTION_EDIT" />
           <action name="core.edit.state" title="JACTION_EDITSTATE" />
           <action name="core.edit.own" title="JACTION_EDITOWN" />
       </section>
    </access>

</div>

### [Changing administrator/components/com\_foos/foos.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_10 .mw-headline}

The `administrator/components/com_foos/foos.xml` file is ....

#### [Completed administrator/components/com\_foos/foos.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_10 .mw-headline}

The code for the `administrator/components/com_foos/foos.xml` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php

</div>

### [Changing administrator/components/com\_foos/forms/foo.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_4 .mw-headline}

The `administrator/components/com_foos/forms/foo.xml` file is ....

#### [Completed administrator/components/com\_foos/forms/foo.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_file_5 .mw-headline}

The code for the `administrator/components/com_foos/forms/foo.xml` file
is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8"?>
    <form>
        <fieldset addruleprefix="Joomla\Component\Foos\Administrator\Rule">
            <field
                name="id"
                type="number"
                label="JGLOBAL_FIELD_ID_LABEL"
                default="0"
                class="readonly"
                readonly="true"
            />

            <field
                name="name"
                type="text"
                validate="Letter"
                class="validate-letter"
                label="COM_FOOS_FIELD_NAME_LABEL"
                size="40"
                required="true"
             />

          <field
               name="catid"
               type="categoryedit"
               label="JCATEGORY"
               extension="com_foos"
               addfieldprefix="Joomla\Component\Categories\Administrator\Field"
               required="true"
               default=""
         />

            <field
                name="access"
                type="accesslevel"
                label="JFIELD_ACCESS_LABEL"
                size="1"
            />
        </fieldset>
    </form>

</div>

### [Changing administrator/components/com\_foos/sql/update/1.12.0.sql]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Fupdate.2F1.12.0.sql .mw-headline}

We will implement `state` later.

The `administrator/components/com_foos/sql/update/1.12.0.sql` file is
....

#### [Completed administrator/components/com\_foos/sql/update/1.12.0.sql file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Fupdate.2F1.12.0.sql_file .mw-headline}

The code for the
`administrator/components/com_foos/sql/update/1.12.0.sql` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    ALTER TABLE `#__foos_details` ADD COLUMN  `catid` int(11) NOT NULL DEFAULT 0 AFTER `alias`;

    ALTER TABLE `#__foos_details` ADD COLUMN  `state` tinyint(3) NOT NULL DEFAULT 0 AFTER `alias`;

    ALTER TABLE `#__foos_details` ADD KEY `idx_catid` (`catid`);

</div>

### [Changing administrator/components/com\_foos/Extension/FoosComponent.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FExtension.2FFoosComponent.php .mw-headline}

The `administrator/components/com_foos/Extension/FoosComponent.php` file
is ....

#### [Completed administrator/components/com\_foos/Extension/FoosComponent.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FExtension.2FFoosComponent.php_file_2 .mw-headline}

The code for the
`administrator/components/com_foos/Extension/FoosComponent.php` file is
as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\Extension;

    defined('JPATH_PLATFORM') or die;

    use Joomla\CMS\Categories\CategoryServiceInterface;
    use Joomla\CMS\Categories\CategoryServiceTrait;
    use Joomla\CMS\Extension\BootableExtensionInterface;
    use Joomla\CMS\Extension\MVCComponent;
    use Joomla\CMS\HTML\HTMLRegistryAwareTrait;
    use Psr\Container\ContainerInterface;
    use Joomla\Component\Foos\Administrator\Service\HTML\AdministratorService;

    /**
     * Component class for com_foos
     *
     * @since  1.0.0
     */
    class FoosComponent extends MVCComponent implements BootableExtensionInterface, CategoryServiceInterface
    {
        use CategoryServiceTrait;
        use HTMLRegistryAwareTrait;

        /**
        * Booting the extension. This is the function to set up the environment of the extension like
        * registering new class loaders, etc.
        *
        * If required, some initial set up can be done from services of the container, eg.
        * registering HTML services.
        *
        * @param   ContainerInterface  $container  The container
        *
        * @return  void
        *
        * @since   1.0.0
        */
        public function boot(ContainerInterface $container)
        {
            $this->getRegistry()->register('foosadministrator', new AdministratorService);
        }

      /**
       * Returns the table for the count items functions for the given section.
       *
       * @param   string  $section  The section
       *
       * @return  string|null
       *
       * @since   1.0.0
       */
       protected function getTableNameForSection(string $section = null)
       {
           return ($section === 'category' ? 'categories' : 'foos_details');
           
       }
    }

</div>

### [Changing administrator/components/com\_foos/tmpl/foo/edit.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php_3 .mw-headline}

The `administrator/components/com_foos/tmpl/foo/edit.php` file is ....

#### [Completed administrator/components/com\_foos/tmpl/foo/edit.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php_file_4 .mw-headline}

The code for the `administrator/components/com_foos/tmpl/foo/edit.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    defined('_JEXEC') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\HTML\HTMLHelper;
    use Joomla\CMS\Router\Route;

    HTMLHelper::_('behavior.formvalidator');
    HTMLHelper::_('script', 'com_foos/admin-foos-letter.js', array('version' => 'auto', 'relative' => true));

    $app = Factory::getApplication();
    $input = $app->input;

    // In case of modal
    $isModal = $input->get('layout') == 'modal' ? true : false;
    $layout  = $isModal ? 'modal' : 'edit';
    $tmpl    = $isModal || $input->get('tmpl', '', 'cmd') === 'component' ? '&tmpl=component' : '';
    ?>

    <form action="<?php echo Route::_('index.php?option=com_foos&layout=' . $layout . $tmpl . '&id=' . (int) $this->item->id); ?>" method="post" name="adminForm" id="foo-form" class="form-validate">
        <?php echo $this->getForm()->renderField('name'); ?>
        <?php echo $this->getForm()->renderField('access'); ?>
      <?php echo $this->getForm()->renderField('catid'); ?>
     <input type="hidden" name="task" value="">
        <?php echo HTMLHelper::_('form.token'); ?>
    </form>

</div>

### [Changing administrator/components/com\_foos/tmpl/foos/default.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_3 .mw-headline}

The `administrator/components/com_foos/tmpl/foos/default.php` file is
....

#### [Completed administrator/components/com\_foos/tmpl/foos/default.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_file_4 .mw-headline}

The code for the
`administrator/components/com_foos/tmpl/foos/default.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    defined('_JEXEC') or die;

    use Joomla\CMS\HTML\HTMLHelper;
    use Joomla\CMS\Language\Text;
    use Joomla\CMS\Router\Route;
    ?>
    <form action="<?php echo Route::_('index.php?option=com_foos'); ?>" method="post" name="adminForm" id="adminForm">
        <div class="row">
            <div class="col-md-10">
                <div id="j-main-container" class="j-main-container">
                    <?php if (empty($this->items)) : ?>
                        <div class="alert alert-warning">
                            <?php echo Text::_('JGLOBAL_NO_MATCHING_RESULTS'); ?>
                        </div>
                    <?php else : ?>
                        <table class="table" id="fooList">
                            <thead>
                                <tr>
                                    <th scope="col" style="width:1%" class="text-center d-none d-md-table-cell">
                                        <?php echo Text::_('COM_FOOS_TABLE_TABLEHEAD_NAME'); ?>
                                    </th>
                                    <th scope="col" style="width:10%" class="d-none d-md-table-cell">
                                        <?php echo TEXT::_('JGRID_HEADING_ACCESS') ?>
                                    </th>
                                    <th scope="col">
                                        <?php echo Text::_('COM_FOOS_TABLE_TABLEHEAD_ID'); ?>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                            <?php
                            $n = count($this->items);
                            foreach ($this->items as $i => $item) :
                                ?>
                                <tr class="row<?php echo $i % 2; ?>">
                                    <td scope="row" class="has-context">
                                        <div>
                                            <?php echo $this->escape($item->name); ?>
                                        </div>
                                        <?php $editIcon = '<span class="fa fa-pencil-square mr-2" aria-hidden="true"></span>'; ?>
                                        <a class="hasTooltip" href="<?php echo Route::_('index.php?option=com_foos&task=foo.edit&id=' . (int) $item->id); ?>" title="<?php echo Text::_('JACTION_EDIT'); ?> <?php echo $this->escape(addslashes($item->name)); ?>">
                                          <?php echo $editIcon; ?><?php echo $this->escape($item->name); ?>
                                       </a>
                                       <div class="small">
                                           <?php echo Text::_('JCATEGORY') . ': ' . $this->escape($item->category_title); ?>
                                       </div>

                                    </td>
                                    <td class="small d-none d-md-table-cell">
                                        <?php echo $item->access_level; ?>
                                    </td>
                                    <td class="d-none d-md-table-cell">
                                        <?php echo $item->id; ?>
                                    </td>
                                </tr>
                                <?php endforeach; ?>
                            </tbody>
                        </table>

                    <?php endif; ?>
                    <input type="hidden" name="task" value="">
                    <input type="hidden" name="boxchecked" value="0">
                    <?php echo HTMLHelper::_('form.token'); ?>
                </div>
            </div>
        </div>
    </form>

</div>

[Test your component]{#Test_your_component_12 .mw-headline}
-----------------------------------------------------------

Now you can zip all files and install them via Joomla Extension Manager.

You have to run a new installation or fix the database due to the
changes in the database.

After that you can

It would be good, to set a default categorie while installing your
component. You can do this in the file `script.php`

[Example in Joomla!]{#Example_in_Joomla.21_3 .mw-headline}
----------------------------------------------------------

In the sidebar you now see another menu item. With this menu item you
can create categories for your extension.

[![As j4 t 12b
1.png](/images/thumb/1/1f/As_j4_t_12b_1.png/700px-As_j4_t_12b_1.png){width="700"
height="341"
srcset="/images/thumb/1/1f/As_j4_t_12b_1.png/1050px-As_j4_t_12b_1.png 1.5x, /images/1/1f/As_j4_t_12b_1.png 2x"}](/File:As_j4_t_12b_1.png){.image}

You can select this category when editing an item.

[![As j4 t 12b
2.png](/images/thumb/f/fa/As_j4_t_12b_2.png/700px-As_j4_t_12b_2.png){width="700"
height="341"
srcset="/images/thumb/f/fa/As_j4_t_12b_2.png/1050px-As_j4_t_12b_2.png 1.5x, /images/f/fa/As_j4_t_12b_2.png 2x"}](/File:As_j4_t_12b_2.png){.image}

If a category is assigned, it will be displayed in the overview.

[![As j4 t 12b
3.png](/images/thumb/c/cd/As_j4_t_12b_3.png/700px-As_j4_t_12b_3.png){width="700"
height="341"
srcset="/images/thumb/c/cd/As_j4_t_12b_3.png/1050px-As_j4_t_12b_3.png 1.5x, /images/c/cd/As_j4_t_12b_3.png 2x"}](/File:As_j4_t_12b_3.png){.image}

\

[Component Contents]{#Component_Contents_13 .mw-headline}
---------------------------------------------------------

At this point in the tutorial, your component should contain the
following files:

  ----- --------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------
  1     administrator/components/com\_foos/Controller/DisplayController.php         this is the administrator entry point to the Foo component                                                                                                                            unchanged
  7     administrator/components/com\_foos/Controller/FooController.php             this is the entry point to the Foo component                                                                                                                                          unchanged
  1     administrator/components/com\_foos/Extension/FoosComponent.php              the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   changed
  7     administrator/components/com\_foos/Field/FooField.php                       the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  7     administrator/components/com\_foos/Model/FooModel.php                       this is the model of the Foo component item                                                                                                                                           unchanged
  6     administrator/components/com\_foos/Model/FoosModel.php                      this is the model of the Foo component                                                                                                                                                unchanged
  1     administrator/components/com\_foos/Service/HTML/AdministratorService.php    the html service see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                                unchanged
  7     administrator/components/com\_foos/Table/FooTable.php                       the database table                                                                                                                                                                    unchanged
  1     administrator/components/com\_foos/View/Foos/HtmlView.php                   file representing the view in the back end                                                                                                                                            unchanged
  1     administrator/components/com\_foos/services/provider.php                    the service provider interface see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                  unchanged
  6     administrator/components/com\_foos/sql/install.mysql.utf8.sql               During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           unchanged
  6     administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql             During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           unchanged
  7     administrator/components/com\_foos/forms/foo.xml                            the default form in the back end                                                                                                                                                      unchanged
  7     administrator/components/com\_foos/tmpl/foo/edit.php                        the default view in the back end                                                                                                                                                      unchanged
  7     administrator/components/com\_foos/tmpl/foo/modal.php                       the default view in the back end                                                                                                                                                      unchanged
  1     administrator/components/com\_foos/tmpl/foos/default.php                    the default view in the back end                                                                                                                                                      unchanged
  7     administrator/components/com\_foos/tmpl/foos/modal.php                      the default view in the back end                                                                                                                                                      unchanged
  1     administrator/components/com\_foos/foos.xml                                 this is an XML (manifest) file that tells Joomla! how to install our component.                                                                                                       unchanged
  1     administrator/components/com\_foos/script.php                               the installer script                                                                                                                                                                  unchanged
  8     administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini       the language file                                                                                                                                                                     unchanged
  8     administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini   the language file                                                                                                                                                                     unchanged
  9     administrator/components/com\_foos/config.php                               the configuration                                                                                                                                                                     unchanged
  10    administrator/components/com\_foos/access.xml                               the ACL file for permissen handling                                                                                                                                                   unchanged
  11a   administrator/components/com\_foos/Rule/LetterRule.php                      the server side validation rule                                                                                                                                                       unchanged
  2     components/com\_foos/Controller/DisplayController.php                       this is the frond end entry point to the Foo component                                                                                                                                unchanged
  4     components/com\_foos/Model/FooModel.php                                     this is the frond end model for the Foo component                                                                                                                                     unchanged
  2     components/com\_foos/View/Foo/HtmlView.php                                  file representing the view in the frond end                                                                                                                                           unchanged
  7     components/com\_foos/View/Foos/HtmlView.php                                 file representing the view in the frond end                                                                                                                                           unchanged
  2     components/com\_foos/tmpl/foo/default.php                                   the default view in the frond end                                                                                                                                                     unchanged
  3     components/com\_foos/tmpl/foo/default.xml                                   the xml for the menu item                                                                                                                                                             unchanged
  8     components/com\_foos/language/en-GB/en-GB.com\_foos.ini                     the language file                                                                                                                                                                     unchanged
  8     components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini                 the language file                                                                                                                                                                     unchanged
  7     media/com\_foos/js/admin-foos-modal.js                                      the javascript file                                                                                                                                                                   unchanged
  11b   media/com\_foos/js/admin-foos-letter.js                                     the client side validation rule                                                                                                                                                       unchanged
  ----- --------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------

\

[Conclusion]{#Conclusion_13 .mw-headline}
-----------------------------------------

You can now classify the items into categories. Next, we'll look at how
to change the state of an item.

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

[Adding Published/Unpublished - Part 13]{#Adding_Published.2FUnpublished_-_Part_13 .mw-headline}
================================================================================================

[Requirements]{#Requirements_14 .mw-headline}
---------------------------------------------

You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev)

[File Structure]{#File_Structure_14 .mw-headline}
-------------------------------------------------

### [Creating administrator/components/com\_foos/Controller/FoosController.php]{#Creating_administrator.2Fcomponents.2Fcom_foos.2FController.2FFoosController.php .mw-headline}

The `administrator/components/com_foos/Controller/FoosController.php`
file is ....

#### [Completed administrator/components/com\_foos/Controller/FoosController.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FController.2FFoosController.php_file .mw-headline}

The code for the
`administrator/components/com_foos/Controller/FoosController.php` file
is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\Controller;

    defined('_JEXEC') or die;

    use Joomla\CMS\Application\CmsApplication;
    use Joomla\CMS\MVC\Controller\AdminController;
    use Joomla\CMS\MVC\Factory\MVCFactoryInterface;

    /**
     * Contacts list controller class.
     *
     * @since  1.0
     */
    class FoosController extends AdminController
    {
        /**
        * The prefix to use with controller messages.
        *
        * @var    string
        * @since  1.0
        */
        protected $text_prefix = 'COM_FOOS_FOOS';

        /**
        * Constructor.
        *
        * @param   array                $config   An optional associative array of configuration settings.
        * Recognized key values include 'name', 'default_task', 'model_path', and
        * 'view_path' (this list is not meant to be comprehensive).
        * @param   MVCFactoryInterface  $factory  The factory.
        * @param   CMSApplication       $app      The JApplication for the dispatcher
        * @param   \JInput              $input    Input
        *
        * @since   1.0
        */
        public function __construct($config = array(), MVCFactoryInterface $factory = null, $app = null, $input = null)
        {
            parent::__construct($config, $factory, $app, $input);

        }

        /**
        * Proxy for getModel.
        *
        * @param   string  $name    The name of the model.
        * @param   string  $prefix  The prefix for the PHP class name.
        * @param   array   $config  Array of configuration parameters.
        *
        * @return  \Joomla\CMS\MVC\Model\BaseDatabaseModel
        *
        * @since   1.0
        */
        public function getModel($name = 'Foo', $prefix = 'Administrator', $config = array('ignore_request' => true))
        {
            return parent::getModel($name, $prefix, $config);
        }
    }

</div>

### [Changing administrator/components/com\_foos/Model/FoosModel.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_3 .mw-headline}

The `administrator/components/com_foos/Model/FoosModel.php` file is ....

#### [Completed administrator/components/com\_foos/Model/FoosModel.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_file_4 .mw-headline}

The code for the `administrator/components/com_foos/Model/FoosModel.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\Model;

    defined('_JEXEC') or die;

    use Joomla\CMS\MVC\Model\ListModel;

    /**
     * Methods supporting a list of foo records.
     *
     * @since  1.0
     */
    class FoosModel extends ListModel
    {
        /**
        * Constructor.
        *
        * @param   array  $config  An optional associative array of configuration settings.
        *
        * @see     \JControllerLegacy
        * @since   1.0
        */
        public function __construct($config = array())
        {
            parent::__construct($config);
        }
        /**
        * Build an SQL query to load the list data.
        *
        * @return  \JDatabaseQuery
        *
        * @since   1.0
        */
        protected function getListQuery()
        {
            // Create a new query object.
            $db = $this->getDbo();
            $query = $db->getQuery(true);

            // Select the required fields from the table.
            $query->select(
              $db->quoteName(
                   explode(
                       ', ',
                       $this->getState(
                           'list.select',
                           'a.id, a.name, a.catid' .
                           ', a.access' .
                           ', a.published' .
                           ', a.publish_up, a.publish_down'
                       )
                   )
               )
         );

            $query->from($db->quoteName('#__foos_details', 'a'));

            // Join over the asset groups.
            $query->select($db->quoteName('ag.title', 'access_level'))
                ->join(
                    'LEFT',
                    $db->quoteName('#__viewlevels', 'ag') . ' ON ' . $db->quoteName('ag.id') . ' = ' . $db->quoteName('a.access')
                );

            // Join over the categories.
            $query->select($db->quoteName('c.title', 'category_title'))
                ->join(
                    'LEFT',
                    $db->quoteName('#__categories', 'c') . ' ON ' . $db->quoteName('c.id') . ' = ' . $db->quoteName('a.catid')
                );

            return $query;
        }
    }

</div>

### [Changing administrator/components/com\_foos/Table/FooTable.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FTable.2FFooTable.php .mw-headline}

The `administrator/components/com_foos/Table/FooTable.php` file is ....

#### [Completed administrator/components/com\_foos/Table/FooTable.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FTable.2FFooTable.php_file_2 .mw-headline}

The code for the `administrator/components/com_foos/Table/FooTable.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\Table;

    defined('_JEXEC') or die;

    use Joomla\CMS\Table\Table;
    use Joomla\Database\DatabaseDriver;

    /**
     * Foos Table class.
     *
     * @since  1.0
     */
    class FooTable extends Table
    {
        /**
        * Constructor
        *
        * @param   DatabaseDriver  $db  Database connector object
        *
        * @since   1.0
        */
        public function __construct(DatabaseDriver $db)
        {
            $this->typeAlias = 'com_foos.foo';

            parent::__construct('#__foos_details', 'id', $db);

            
       }

       /**
       * Overloaded check function
       *
       * @return  boolean
       *
       * @see     Table::check
       * @since   1.5
       */
       public function check()
       {
           try
           {
               parent::check();
           }
           catch (\Exception $e)
           {
               $this->setError($e->getMessage());

               return false;
           }

           // Set name
           $this->name = htmlspecialchars_decode($this->name, ENT_QUOTES);

           // Check the publish down date is not earlier than publish up.
           if ($this->publish_down > $this->_db->getNullDate() && $this->publish_down < $this->publish_up)
           {
               $this->setError(Text::_('JGLOBAL_START_PUBLISH_AFTER_FINISH'));

               return false;
           }

           if (empty($this->publish_up))
           {
               $this->publish_up = $this->getDbo()->getNullDate();
           }

           if (empty($this->publish_down))
           {
               $this->publish_down = $this->getDbo()->getNullDate();
           }

           return true;
       }
    }

</div>

### [Changing administrator/components/com\_foos/forms/foo.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_5 .mw-headline}

The `administrator/components/com_foos/forms/foo.xml` file is ....

#### [Completed administrator/components/com\_foos/forms/foo.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_file_6 .mw-headline}

The code for the `administrator/components/com_foos/forms/foo.xml` file
is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8"?>
    <form>
        <fieldset addruleprefix="Joomla\Component\Foos\Administrator\Rule">
            <field
                name="id"
                type="number"
                label="JGLOBAL_FIELD_ID_LABEL"
                default="0"
                class="readonly"
                readonly="true"
            />

            <field
                name="name"
                type="text"
                validate="Letter"
                class="validate-letter"
                label="COM_FOOS_FIELD_NAME_LABEL"
                size="40"
                required="true"
             />

          <field
               name="published"
               type="list"
               label="JSTATUS"
               default="1"
               id="published"
               class="custom-select-color-state"
               size="1"
               >
               <option value="1">JPUBLISHED</option>
               <option value="0">JUNPUBLISHED</option>
               <option value="2">JARCHIVED</option>
               <option value="-2">JTRASHED</option>
           </field>

           <field
               name="publish_up"
               type="calendar"
               label="COM_FOOS_FIELD_PUBLISH_UP_LABEL"
               translateformat="true"
               showtime="true"
               size="22"
               filter="user_utc"
           />

           <field
               name="publish_down"
               type="calendar"
               label="COM_FOOS_FIELD_PUBLISH_DOWN_LABEL"
               translateformat="true"
               showtime="true"
               size="22"
               filter="user_utc"
           />

            <field
                name="catid"
                type="categoryedit"
                label="JCATEGORY"
                extension="com_foos"
                addfieldprefix="Joomla\Component\Categories\Administrator\Field"
                required="true"
                default=""
            />

            <field
                name="access"
                type="accesslevel"
                label="JFIELD_ACCESS_LABEL"
                size="1"
            />
        </fieldset>
    </form>

</div>

### [Changing administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.ini_2 .mw-headline}

The
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.ini`
file translation file. In this part you can learn how to use this with
plural.

#### [Completed administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.ini_file_2 .mw-headline}

The code for the
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.ini`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    COM_FOOS="[PROJECT_NAME]"
    COM_FOOS_CONFIGURATION="Foo Options"

    COM_FOOS_MANAGER_FOO_NEW="New"
    COM_FOOS_MANAGER_FOO_EDIT="Edit"
    COM_FOOS_MANAGER_FOOS="Foo Manager"

    COM_FOOS_TABLE_TABLEHEAD_NAME="Name"
    COM_FOOS_TABLE_TABLEHEAD_ID="ID"
    COM_FOOS_ERROR_FOO_NOT_FOUND="Foo not found"

    COM_FOOS_FIELD_NAME_LABEL="Name"

    COM_FOOS_FIELD_FOO_SHOW_CATEGORY_LABEL="Show name label"
    COM_FOOS_FIELD_CONFIG_INDIVIDUAL_FOO_DESC="These settings apply for all foo."
    COM_FOOS_FIELD_CONFIG_INDIVIDUAL_FOO_DISPLAY="Foo"

    COM_FOOS_FIELD_PUBLISH_DOWN_LABEL="Finish Publishing"
    COM_FOOS_FIELD_PUBLISH_UP_LABEL="Start Publishing"
    COM_FOOS_N_ITEMS_PUBLISHED="%d foos published."
    COM_FOOS_N_ITEMS_PUBLISHED_1="%d foo published."
    COM_FOOS_N_ITEMS_UNPUBLISHED="%d foos unpublished."
    COM_FOOS_N_ITEMS_UNPUBLISHED_1="%d foo unpublished."

    COM_FOOS_FOOS_FIELD_PUBLISH_DOWN_LABEL="Finish Publishing"
    COM_FOOS_FOOS_FIELD_PUBLISH_UP_LABEL="Start Publishing"
    COM_FOOS_FOOS_N_ITEMS_PUBLISHED="%d foos published."
    COM_FOOS_FOOS_N_ITEMS_PUBLISHED_1="%d foo published."
    COM_FOOS_FOOS_N_ITEMS_UNPUBLISHED="%d foos unpublished."
    COM_FOOS_FOOS_N_ITEMS_UNPUBLISHED_1="%d foo unpublished."

</div>

### [Create administrator/components/com\_foos/sql/updates/1.13.0.sql]{#Create_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Fupdates.2F1.13.0.sql .mw-headline}

The `administrator/components/com_foos/sql/updates/1.13.0.sql` file is
....

#### [Completed administrator/components/com\_foos/sql/updates/1.13.0.sql file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Fupdates.2F1.13.0.sql_file .mw-headline}

The code for the
`administrator/components/com_foos/sql/updates/1.13.0.sql` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    ALTER TABLE `#__foos_details` ADD COLUMN  `published` tinyint(1) NOT NULL DEFAULT 0 AFTER `alias`;

    ALTER TABLE `#__foos_details` ADD COLUMN  `publish_up` datetime NOT NULL DEFAULT '0000-00-00 00:00:00' AFTER `alias`;

    ALTER TABLE `#__foos_details` ADD COLUMN  `publish_down` datetime NOT NULL DEFAULT '0000-00-00 00:00:00' AFTER `alias`;

    ALTER TABLE `#__foos_details` ADD KEY `idx_state` (`published`);

</div>

### [Changing administrator/components/com\_foos/tmpl/foo/edit.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php_4 .mw-headline}

The `administrator/components/com_foos/tmpl/foo/edit.php` file is ....

#### [Completed administrator/components/com\_foos/tmpl/foo/edit.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php_file_5 .mw-headline}

The code for the `administrator/components/com_foos/tmpl/foo/edit.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    defined('_JEXEC') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\HTML\HTMLHelper;
    use Joomla\CMS\Router\Route;

    HTMLHelper::_('behavior.formvalidator');
    HTMLHelper::_('script', 'com_foos/admin-foos-letter.js', array('version' => 'auto', 'relative' => true));

    $app = Factory::getApplication();
    $input = $app->input;

    // In case of modal
    $isModal = $input->get('layout') == 'modal' ? true : false;
    $layout  = $isModal ? 'modal' : 'edit';
    $tmpl    = $isModal || $input->get('tmpl', '', 'cmd') === 'component' ? '&tmpl=component' : '';
    ?>

    <form action="<?php echo Route::_('index.php?option=com_foos&layout=' . $layout . $tmpl . '&id=' . (int) $this->item->id); ?>" method="post" name="adminForm" id="foo-form" class="form-validate">
        <?php echo $this->getForm()->renderField('name'); ?>
        <?php echo $this->getForm()->renderField('access'); ?>
      <?php echo $this->getForm()->renderField('published'); ?>
       <?php echo $this->getForm()->renderField('publish_up'); ?>
       <?php echo $this->getForm()->renderField('publish_down'); ?>
     <?php echo $this->getForm()->renderField('catid'); ?>
        <input type="hidden" name="task" value="">
        <?php echo HTMLHelper::_('form.token'); ?>
    </form>

</div>

### [Changing administrator/components/com\_foos/tmpl/foos/default.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_4 .mw-headline}

The `administrator/components/com_foos/tmpl/foos/default.php` file is
....

#### [Completed administrator/components/com\_foos/tmpl/foos/default.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_file_5 .mw-headline}

The code for the
`administrator/components/com_foos/tmpl/foos/default.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    defined('_JEXEC') or die;

    use Joomla\CMS\HTML\HTMLHelper;
    use Joomla\CMS\Language\Text;
    use Joomla\CMS\Router\Route;

    $canChange  = true;
    ?>
    <form action="<?php echo Route::_('index.php?option=com_foos'); ?>" method="post" name="adminForm" id="adminForm">
        <div class="row">
            <div class="col-md-10">
                <div id="j-main-container" class="j-main-container">
                    <?php if (empty($this->items)) : ?>
                        <div class="alert alert-warning">
                            <?php echo Text::_('JGLOBAL_NO_MATCHING_RESULTS'); ?>
                        </div>
                    <?php else : ?>
                        <table class="table" id="fooList">
                            <thead>
                                <tr>
                                  <td style="width:1%" class="text-center">
                                       <?php echo HTMLHelper::_('grid.checkall'); ?>
                                   </td>
                                 <th scope="col" style="width:1%" class="text-center d-none d-md-table-cell">
                                        <?php echo Text::_('COM_FOOS_TABLE_TABLEHEAD_NAME'); ?>
                                    </th>
                                    <th scope="col" style="width:10%" class="d-none d-md-table-cell">
                                        <?php echo TEXT::_('JGRID_HEADING_ACCESS') ?>
                                    </th>
                                    <th scope="col" style="width:1%; min-width:85px" class="text-center">
                                        <?php echo Text::_('JSTATUS'); ?>
                                    </th>
                                    <th scope="col">
                                        <?php echo Text::_('COM_FOOS_TABLE_TABLEHEAD_ID'); ?>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                            <?php
                            $n = count($this->items);
                            foreach ($this->items as $i => $item) :
                                ?>
                                <tr class="row<?php echo $i % 2; ?>">
                                  <td class="text-center">
                                       <?php echo HTMLHelper::_('grid.id', $i, $item->id); ?>
                                   </td>
                                 <td scope="row" class="has-context">
                                        <div>
                                            <?php echo $this->escape($item->name); ?>
                                        </div>
                                        <?php $editIcon = '<span class="fa fa-pencil-square mr-2" aria-hidden="true"></span>'; ?>
                                        <a class="hasTooltip" href="<?php echo Route::_('index.php?option=com_foos&task=foo.edit&id=' . (int) $item->id); ?>" title="<?php echo Text::_('JACTION_EDIT'); ?> <?php echo $this->escape(addslashes($item->name)); ?>">
                                            <?php echo $editIcon; ?><?php echo $this->escape($item->name); ?>
                                        </a>
                                        <div class="small">
                                            <?php echo Text::_('JCATEGORY') . ': ' . $this->escape($item->category_title); ?>
                                        </div>

                                    </td>
                                    <td class="small d-none d-md-table-cell">
                                        <?php echo $item->access_level; ?>
                                    </td>
                                  <td class="text-center">
                                       <div class="btn-group">
                                           <?php echo HTMLHelper::_('jgrid.published', $item->published, $i, 'foos.', $canChange, 'cb', $item->publish_up, $item->publish_down); ?>
                                       </div>    
                                   </td>
                                 <td class="d-none d-md-table-cell">
                                        <?php echo $item->id; ?>
                                    </td>
                                </tr>
                                <?php endforeach; ?>
                            </tbody>
                        </table>

                    <?php endif; ?>
                    <input type="hidden" name="task" value="">
                    <input type="hidden" name="boxchecked" value="0">
                    <?php echo HTMLHelper::_('form.token'); ?>
                </div>
            </div>
        </div>
    </form>

</div>

[Test your component]{#Test_your_component_13 .mw-headline}
-----------------------------------------------------------

Now you can zip all files and install them via Joomla Extension Manager.

You have to run a new installation or fix the database due to the
changes in the database.

After that you can

\

[Example in Joomla!]{#Example_in_Joomla.21_4 .mw-headline}
----------------------------------------------------------

If you edit an item, you can now also specify the period to which it
should be published.

[![As j4 t 13
1.png](/images/thumb/6/61/As_j4_t_13_1.png/700px-As_j4_t_13_1.png){width="700"
height="341"
srcset="/images/thumb/6/61/As_j4_t_13_1.png/1050px-As_j4_t_13_1.png 1.5x, /images/6/61/As_j4_t_13_1.png 2x"}](/File:As_j4_t_13_1.png){.image}

In the overview you can see if an item is published or not. If you click
the symbol the state is changed.

[![As j4 t 13
1.png](/images/thumb/6/61/As_j4_t_13_1.png/700px-As_j4_t_13_1.png){width="700"
height="341"
srcset="/images/thumb/6/61/As_j4_t_13_1.png/1050px-As_j4_t_13_1.png 1.5x, /images/6/61/As_j4_t_13_1.png 2x"}](/File:As_j4_t_13_1.png){.image}

In category manager, the items are now also displayed with the correct
state.

[![As j4 t 13
1.png](/images/thumb/6/61/As_j4_t_13_1.png/700px-As_j4_t_13_1.png){width="700"
height="341"
srcset="/images/thumb/6/61/As_j4_t_13_1.png/1050px-As_j4_t_13_1.png 1.5x, /images/6/61/As_j4_t_13_1.png 2x"}](/File:As_j4_t_13_1.png){.image}

\

[Component Contents]{#Component_Contents_14 .mw-headline}
---------------------------------------------------------

At this point in the tutorial, your component should contain the
following files:

  ----- --------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------
  1     administrator/components/com\_foos/Controller/DisplayController.php         this is the administrator entry point to the Foo component                                                                                                                            unchanged
  7     administrator/components/com\_foos/Controller/FooController.php             this is the entry point to the Foo component                                                                                                                                          unchanged
  1     administrator/components/com\_foos/Extension/FoosComponent.php              the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  7     administrator/components/com\_foos/Field/FooField.php                       the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  7     administrator/components/com\_foos/Model/FooModel.php                       this is the model of the Foo component item                                                                                                                                           unchanged
  6     administrator/components/com\_foos/Model/FoosModel.php                      this is the model of the Foo component                                                                                                                                                unchanged
  1     administrator/components/com\_foos/Service/HTML/AdministratorService.php    the html service see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                                unchanged
  7     administrator/components/com\_foos/Table/FooTable.php                       the database table                                                                                                                                                                    unchanged
  1     administrator/components/com\_foos/View/Foos/HtmlView.php                   file representing the view in the back end                                                                                                                                            unchanged
  1     administrator/components/com\_foos/services/provider.php                    the service provider interface see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                  unchanged
  6     administrator/components/com\_foos/sql/install.mysql.utf8.sql               During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           unchanged
  6     administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql             During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           unchanged
  7     administrator/components/com\_foos/forms/foo.xml                            the default form in the back end                                                                                                                                                      unchanged
  7     administrator/components/com\_foos/tmpl/foo/edit.php                        the default view in the back end                                                                                                                                                      unchanged
  7     administrator/components/com\_foos/tmpl/foo/modal.php                       the default view in the back end                                                                                                                                                      unchanged
  1     administrator/components/com\_foos/tmpl/foos/default.php                    the default view in the back end                                                                                                                                                      unchanged
  7     administrator/components/com\_foos/tmpl/foos/modal.php                      the default view in the back end                                                                                                                                                      unchanged
  1     administrator/components/com\_foos/foos.xml                                 this is an XML (manifest) file that tells Joomla! how to install our component.                                                                                                       unchanged
  1     administrator/components/com\_foos/script.php                               the installer script                                                                                                                                                                  unchanged
  8     administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini       the language file                                                                                                                                                                     unchanged
  8     administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini   the language file                                                                                                                                                                     unchanged
  9     administrator/components/com\_foos/config.php                               the configuration                                                                                                                                                                     unchanged
  10    administrator/components/com\_foos/access.xml                               the ACL file for permissen handling                                                                                                                                                   unchanged
  11a   administrator/components/com\_foos/Rule/LetterRule.php                      the server side validation rule                                                                                                                                                       unchanged
  2     components/com\_foos/Controller/DisplayController.php                       this is the frond end entry point to the Foo component                                                                                                                                unchanged
  4     components/com\_foos/Model/FooModel.php                                     this is the frond end model for the Foo component                                                                                                                                     unchanged
  2     components/com\_foos/View/Foo/HtmlView.php                                  file representing the view in the frond end                                                                                                                                           unchanged
  7     components/com\_foos/View/Foos/HtmlView.php                                 file representing the view in the frond end                                                                                                                                           unchanged
  2     components/com\_foos/tmpl/foo/default.php                                   the default view in the frond end                                                                                                                                                     unchanged
  3     components/com\_foos/tmpl/foo/default.xml                                   the xml for the menu item                                                                                                                                                             unchanged
  8     components/com\_foos/language/en-GB/en-GB.com\_foos.ini                     the language file                                                                                                                                                                     unchanged
  8     components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini                 the language file                                                                                                                                                                     unchanged
  7     media/com\_foos/js/admin-foos-modal.js                                      the javascript file                                                                                                                                                                   unchanged
  11b   media/com\_foos/js/admin-foos-letter.js                                     the client side validation rule                                                                                                                                                       unchanged
  ----- --------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------

\

[Conclusion]{#Conclusion_14 .mw-headline}
-----------------------------------------

Now you can schedule the publication of your items. Now we continue with
custom fields

\

\

\

\

\

\

\

\

\

\

\

\

\

\

[Adding Custom Fields in the backend - Part 14a]{#Adding_Custom_Fields_in_the_backend_-_Part_14a .mw-headline}
==============================================================================================================

[Requirements]{#Requirements_15 .mw-headline}
---------------------------------------------

You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev)

[File Structure]{#File_Structure_15 .mw-headline}
-------------------------------------------------

### [Changing administrator/components/com\_foos/View/Foos/HtmlView.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_6 .mw-headline}

The `administrator/components/com_foos/View/Foos/HtmlView.php` file is
....

#### [Completed administrator/components/com\_foos/View/Foos/HtmlView.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_file_7 .mw-headline}

The code for the
`administrator/components/com_foos/View/Foos/HtmlView.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php

    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\View\Foos;

    defined('_JEXEC') or die;

    use Joomla\CMS\HTML\HTMLHelper;
    use Joomla\CMS\Helper\ContentHelper;
    use Joomla\CMS\Language\Text;
    use Joomla\CMS\MVC\View\HtmlView as BaseHtmlView;
    use Joomla\CMS\Toolbar\Toolbar;
    use Joomla\CMS\Toolbar\ToolbarHelper;
    use Joomla\Component\Foos\Administrator\Helper\FooHelper;

    /**
     * View class for a list of foos.
     *
     * @since  1.0
     */
    class HtmlView extends BaseHtmlView
    {
        /**
         * An array of items
         *
         * @var  array
         */
        protected $items;

        /**
       * The sidebar markup
        *
        * @var  string
        */
       protected $sidebar;

        /**
         * Display the view.
         *
         * @param   string  $tpl  The name of the template file to parse; automatically searches through the template paths.
         *
         * @return  mixed  A string if successful, otherwise an Error object.
         */
        public function display($tpl = null)
        {
            $this->items = $this->get('Items');

            $this->addToolbar();

            return parent::display($tpl);
        }

        /**
         * Add the page title and toolbar.
         *
         * @return  void
         *
         * @since   1.0
         */
        protected function addToolbar()
        {
          FooHelper::addSubmenu('foos');
           $this->sidebar = \JHtmlSidebar::render();

            $canDo = ContentHelper::getActions('com_foos');

            // Get the toolbar object instance
            $toolbar = Toolbar::getInstance('toolbar');

            ToolbarHelper::title(Text::_('COM_FOOS_MANAGER_FOOS'), 'address foo');

            if ($canDo->get('core.create'))
            {
                $toolbar->addNew('foo.add');
            }

            if ($canDo->get('core.options'))
            {
                $toolbar->preferences('com_foos');
            }

          HTMLHelper::_('sidebar.setAction', 'index.php?option=com_foos');
     }
    }

</div>

### [Changing administrator/components/com\_foos/access.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Faccess.xml_2 .mw-headline}

The `administrator/components/com_foos/access.xml` file is ....

#### [Completed administrator/components/com\_foos/access.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Faccess.xml_file_3 .mw-headline}

The code for the `administrator/components/com_foos/access.xml` file is
as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8"?>
    <access component="com_foos">
        <section name="component">
            <action name="core.admin" title="JACTION_ADMIN" />
            <action name="core.options" title="JACTION_OPTIONS" />
            <action name="core.manage" title="JACTION_MANAGE" />
            <action name="core.create" title="JACTION_CREATE" />
            <action name="core.delete" title="JACTION_DELETE" />
            <action name="core.edit" title="JACTION_EDIT" />
            <action name="core.edit.state" title="JACTION_EDITSTATE" />
            <action name="core.edit.own" title="JACTION_EDITOWN" />
          <action name="core.edit.value" title="JACTION_EDITVALUE" />
     </section>
        <section name="category">
            <action name="core.create" title="JACTION_CREATE" />
            <action name="core.delete" title="JACTION_DELETE" />
            <action name="core.edit" title="JACTION_EDIT" />
            <action name="core.edit.state" title="JACTION_EDITSTATE" />
            <action name="core.edit.own" title="JACTION_EDITOWN" />
        </section>
      <section name="fieldgroup">
           <action name="core.create" title="JACTION_CREATE" />
           <action name="core.delete" title="JACTION_DELETE" />
           <action name="core.edit" title="JACTION_EDIT" />
           <action name="core.edit.state" title="JACTION_EDITSTATE" />
           <action name="core.edit.own" title="JACTION_EDITOWN" />
           <action name="core.edit.value" title="JACTION_EDITVALUE" />
       </section>
       <section name="field">
           <action name="core.delete" title="JACTION_DELETE" />
           <action name="core.edit" title="JACTION_EDIT" />
           <action name="core.edit.state" title="JACTION_EDITSTATE" />
           <action name="core.edit.value" title="JACTION_EDITVALUE" />
       </section>
    </access>

</div>

### [Changing administrator/components/com\_foos/config.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Fconfig.xml_2 .mw-headline}

The `administrator/components/com_foos/config.xml` file is ....

#### [Completed administrator/components/com\_foos/config.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Fconfig.xml_file_2 .mw-headline}

The code for the `administrator/components/com_foos/config.xml` file is
as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8"?>
    <config>

        <fieldset
            name="foo"
            label="COM_FOOS_FIELD_CONFIG_INDIVIDUAL_FOO_DISPLAY"
            description="COM_FOOS_FIELD_CONFIG_INDIVIDUAL_FOO_DESC"
            >

            <field
                name="show_foo_name_label"
                type="list"
                label="COM_FOOS_FIELD_FOO_SHOW_CATEGORY_LABEL"
                default="1"
                >
                <option value="0">JNO</option>
                <option value="1">JYES</option>
            </field>

          <field
               name="custom_fields_enable"
               type="radio"
               class="switcher"
               label="JGLOBAL_CUSTOM_FIELDS_ENABLE_LABEL"
               default="1"
               >
               <option value="0">JNO</option>
               <option value="1">JYES</option>
           </field>

     </fieldset>
        <fieldset
            name="permissions"
            label="JCONFIG_PERMISSIONS_LABEL"
            description="JCONFIG_PERMISSIONS_DESC"
            >

            <field
                name="rules"
                type="rules"
                label="JCONFIG_PERMISSIONS_LABEL"
                validate="rules"
                filter="rules"
                component="com_foos"
                section="component"
            />

        </fieldset>
    </config>

</div>

### [Changing administrator/components/com\_foos/foos.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_11 .mw-headline}

The `administrator/components/com_foos/foos.xml` file is ....

#### [Completed administrator/components/com\_foos/foos.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_11 .mw-headline}

The code for the `administrator/components/com_foos/foos.xml` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8" ?>
    <extension type="component" method="upgrade">
        <name>COM_FOOS</name>
        <creationDate>[DATE]</creationDate>
        <author>[AUTHOR]</author>
        <authorEmail>[AUTHOR_EMAIL]</authorEmail>
        <authorUrl>[AUTHOR_URL]</authorUrl>
        <copyright>[COPYRIGHT]</copyright>
        <license>GNU General Public License version 2 or later;</license>
      <version>1.14.0</version>
     <description>COM_FOOS_XML_DESCRIPTION</description>
        <namespace>Joomla\Component\Foos</namespace>
        <scriptfile>script.php</scriptfile>
        <install> <!-- Runs on install -->
            <sql>
                <file driver="mysql" charset="utf8">sql/install.mysql.utf8.sql</file>
            </sql>
        </install>
        <uninstall> <!-- Runs on uninstall -->
            <sql>
                <file driver="mysql" charset="utf8">sql/uninstall.mysql.utf8.sql</file>
            </sql>
        </uninstall>
        <update>  <!-- Runs on update -->
            <schemas>
                <schemapath type="mysql">sql/updates/mysql</schemapath>
            </schemas>
        </update>
        <!-- Frond-end files -->
        <files folder="components/com_foos">
            <folder>Controller</folder>
            <folder>Model</folder>
            <folder>View</folder>
            <folder>tmpl</folder>
            <folder>language</folder>
        </files>
        <media folder="media/com_foos" destination="com_foos">
            <folder>js</folder>
        </media>
        <!-- Back-end files -->
        <administration>
            <!-- Menu entries -->
            <menu view="foos">COM_FOOS</menu>
            <submenu>
                <menu link="option=com_foos">COM_FOOS</menu>
                <menu link="option=com_categories&amp;extension=com_foos"
                    view="categories" img="class:foos-cat" alt="Foos/Categories">JCATEGORY</menu>
            </submenu>
            <files folder="administrator/components/com_foos">
                <filename>access.xml</filename>
                <filename>config.xml</filename>
                <filename>foos.xml</filename>
                <folder>Controller</folder>
                <folder>Extension</folder>
                <folder>Model</folder>
                <folder>Rule</folder>
                <folder>Service</folder>
                <folder>View</folder>
                <folder>services</folder>
                <folder>tmpl</folder>
                <folder>sql</folder>
                <folder>language</folder>
            </files>
        </administration>
    </extension>

</div>

\

### [Changing administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.ini_3 .mw-headline}

The
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.ini`
file is ....

#### [Completed administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.ini_file_3 .mw-headline}

The code for the
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.ini`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    COM_FOOS="[PROJECT_NAME]"
    COM_FOOS_CONFIGURATION="Foo Options"

    COM_FOOS_MANAGER_FOO_NEW="New"
    COM_FOOS_MANAGER_FOO_EDIT="Edit"
    COM_FOOS_MANAGER_FOOS="Foo Manager"

    COM_FOOS_TABLE_TABLEHEAD_NAME="Name"
    COM_FOOS_TABLE_TABLEHEAD_ID="ID"
    COM_FOOS_ERROR_FOO_NOT_FOUND="Foo not found"

    COM_FOOS_FIELD_NAME_LABEL="Name"

    COM_FOOS_FIELD_FOO_SHOW_CATEGORY_LABEL="Show name label"
    COM_FOOS_FIELD_CONFIG_INDIVIDUAL_FOO_DESC="These settings apply for all foo."
    COM_FOOS_FIELD_CONFIG_INDIVIDUAL_FOO_DISPLAY="Foo"

    COM_FOOS_FIELD_PUBLISH_DOWN_LABEL="Finish Publishing"
    COM_FOOS_FIELD_PUBLISH_UP_LABEL="Start Publishing"
    COM_FOOS_N_ITEMS_PUBLISHED="%d foos published."
    COM_FOOS_N_ITEMS_PUBLISHED_1="%d foo published."
    COM_FOOS_N_ITEMS_UNPUBLISHED="%d foos unpublished."
    COM_FOOS_N_ITEMS_UNPUBLISHED_1="%d foo unpublished."

    COM_FOOS_FOOS_FIELD_PUBLISH_DOWN_LABEL="Finish Publishing"
    COM_FOOS_FOOS_FIELD_PUBLISH_UP_LABEL="Start Publishing"
    COM_FOOS_FOOS_N_ITEMS_PUBLISHED="%d foos published."
    COM_FOOS_FOOS_N_ITEMS_PUBLISHED_1="%d foo published."
    COM_FOOS_FOOS_N_ITEMS_UNPUBLISHED="%d foos unpublished."
    COM_FOOS_FOOS_N_ITEMS_UNPUBLISHED_1="%d foo unpublished."

    COM_FOOS_EDIT_FOO="Edit Foo"
    COM_FOOS_NEW_FOO="New Foo"

</div>

### [Changing administrator/components/com\_foos/tmpl/foo/edit.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php_5 .mw-headline}

The `administrator/components/com_foos/tmpl/foo/edit.php` file is ....

#### [Completed administrator/components/com\_foos/tmpl/foo/edit.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php_file_6 .mw-headline}

The code for the `administrator/components/com_foos/tmpl/foo/edit.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    defined('_JEXEC') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\HTML\HTMLHelper;
    use Joomla\CMS\Router\Route;
    use Joomla\CMS\Language\Text;
    use Joomla\CMS\Layout\LayoutHelper;

    HTMLHelper::_('behavior.formvalidator');
    HTMLHelper::_('script', 'com_foos/admin-foos-letter.js', array('version' => 'auto', 'relative' => true));

    $app = Factory::getApplication();
    $input = $app->input;

    $this->useCoreUI = true;

    // In case of modal
    $isModal = $input->get('layout') == 'modal' ? true : false;
    $layout  = $isModal ? 'modal' : 'edit';
    $tmpl    = $isModal || $input->get('tmpl', '', 'cmd') === 'component' ? '&tmpl=component' : '';
    ?>

    <form action="<?php echo Route::_('index.php?option=com_foos&layout=' . $layout . $tmpl . '&id=' . (int) $this->item->id); ?>" method="post" name="adminForm" id="foo-form" class="form-validate">
      <div>
           <?php echo HTMLHelper::_('uitab.startTabSet', 'myTab', array('active' => 'details')); ?>

           <?php echo HTMLHelper::_('uitab.addTab', 'myTab', 'details', empty($this->item->id) ? Text::_('COM_FOOS_NEW_FOO') : Text::_('COM_FOOS_EDIT_FOO')); ?>
           <div class="row">
               <div class="col-md-9">
                   <div class="row">
                       <div class="col-md-6">

     <?php echo $this->getForm()->renderField('name'); ?>
        <?php echo $this->getForm()->renderField('access'); ?>
        <?php echo $this->getForm()->renderField('published'); ?>
        <?php echo $this->getForm()->renderField('publish_up'); ?>
        <?php echo $this->getForm()->renderField('publish_down'); ?>
        <?php echo $this->getForm()->renderField('catid'); ?>
                      </div>
                   </div>
               </div>
           </div>
           <?php echo HTMLHelper::_('uitab.endTab'); ?>
           
           <?php echo LayoutHelper::render('joomla.edit.params', $this); ?>

           <?php echo HTMLHelper::_('uitab.endTabSet'); ?>
       </div>

         <input type="hidden" name="task" value="">
        <?php echo HTMLHelper::_('form.token'); ?>
    </form>

</div>

\

### [Changing administrator/components/com\_foos/tmpl/foos/default.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_5 .mw-headline}

The `administrator/components/com_foos/tmpl/foos/default.php` file is
....

#### [Completed administrator/components/com\_foos/tmpl/foos/default.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_file_6 .mw-headline}

The code for the
`administrator/components/com_foos/tmpl/foos/default.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    defined('_JEXEC') or die;

    use Joomla\CMS\HTML\HTMLHelper;
    use Joomla\CMS\Language\Text;
    use Joomla\CMS\Router\Route;

    $canChange  = true;
    ?>
    <form action="<?php echo Route::_('index.php?option=com_foos'); ?>" method="post" name="adminForm" id="adminForm">
        <div class="row">
          <?php if (!empty($this->sidebar)) : ?>
                <div id="j-sidebar-container" class="col-md-2">
                   <?php echo $this->sidebar; ?>
                </div>
           <?php endif; ?>
           <div class="<?php if (!empty($this->sidebar)) {echo 'col-md-10'; } else { echo 'col-md-12'; } ?>">
             <div id="j-main-container" class="j-main-container">
                    <?php if (empty($this->items)) : ?>
                        <div class="alert alert-warning">
                            <?php echo Text::_('JGLOBAL_NO_MATCHING_RESULTS'); ?>
                        </div>
                    <?php else : ?>
                        <table class="table" id="fooList">
                            <thead>
                                <tr>
                                    <td style="width:1%" class="text-center">
                                        <?php echo HTMLHelper::_('grid.checkall'); ?>
                                    </td>
                                    <th scope="col" style="width:1%" class="text-center d-none d-md-table-cell">
                                        <?php echo Text::_('COM_FOOS_TABLE_TABLEHEAD_NAME'); ?>
                                    </th>
                                    <th scope="col" style="width:10%" class="d-none d-md-table-cell">
                                        <?php echo TEXT::_('JGRID_HEADING_ACCESS') ?>
                                    </th>
                                    <th scope="col" style="width:1%; min-width:85px" class="text-center">
                                        <?php echo Text::_('JSTATUS'); ?>
                                    </th>
                                    <th scope="col">
                                        <?php echo Text::_('COM_FOOS_TABLE_TABLEHEAD_ID'); ?>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                            <?php
                           $n = count($this->items);
                           foreach ($this->items as $i => $item) :
                               ?>
                                <tr class="row<?php echo $i % 2; ?>">
                                    <td class="text-center">
                                        <?php echo HTMLHelper::_('grid.id', $i, $item->id); ?>
                                    </td>
                                    <td scope="row" class="has-context">
                                        <div>
                                            <?php echo $this->escape($item->name); ?>
                                        </div>
                                        <?php $editIcon = '<span class="fa fa-pencil-square mr-2" aria-hidden="true"></span>'; ?>
                                        <a class="hasTooltip" href="<?php echo Route::_('index.php?option=com_foos&task=foo.edit&id=' . (int) $item->id); ?>" title="<?php echo Text::_('JACTION_EDIT'); ?> <?php echo $this->escape(addslashes($item->name)); ?>">
                                            <?php echo $editIcon; ?><?php echo $this->escape($item->name); ?>
                                        </a>
                                        <div class="small">
                                            <?php echo Text::_('JCATEGORY') . ': ' . $this->escape($item->category_title); ?>
                                        </div>

                                    </td>
                                    <td class="small d-none d-md-table-cell">
                                        <?php echo $item->access_level; ?>
                                    </td>
                                    <td class="text-center">
                                        <div class="btn-group">
                                            <?php echo HTMLHelper::_('jgrid.published', $item->published, $i, 'foos.', $canChange, 'cb', $item->publish_up, $item->publish_down); ?>
                                        </div>    
                                    </td>
                                    <td class="d-none d-md-table-cell">
                                        <?php echo $item->id; ?>
                                    </td>
                                </tr>
                                <?php endforeach; ?>
                            </tbody>
                        </table>

                    <?php endif; ?>
                    <input type="hidden" name="task" value="">
                    <input type="hidden" name="boxchecked" value="0">
                    <?php echo HTMLHelper::_('form.token'); ?>
                </div>
            </div>
        </div>
    </form>

</div>

### [Creating administrator/components/com\_foos/Helper]{#Creating_administrator.2Fcomponents.2Fcom_foos.2FHelper .mw-headline}

The `administrator/components/com_foos/Helper` file is ....

#### [Completed administrator/components/com\_foos/Helper file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FHelper_file .mw-headline}

The code for the `administrator/components/com_foos/Helper` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\Helper;

    defined('_JEXEC') or die;

    use Joomla\CMS\Component\ComponentHelper;
    use Joomla\CMS\Helper\ContentHelper;
    use Joomla\CMS\Language\Text;

    /**
     * Foo component helper.
     *
     * @since  1.0
     */
    class FooHelper extends ContentHelper
    {
        /**
        * Configure the Linkbar.
        *
        * @param   string  $vName  The name of the active view.
        *
        * @return  void
        *
        * @since   1.0
        */
        public static function addSubmenu($vName)
        {
            if (ComponentHelper::isEnabled('com_fields') && ComponentHelper::getParams('com_foos')->get('custom_fields_enable', '1'))
            {
                \JHtmlSidebar::addEntry(
                    Text::_('JGLOBAL_FIELDS'),
                    'index.php?option=com_fields&context=com_foos.foo',
                    $vName == 'fields.fields'
                );
                \JHtmlSidebar::addEntry(
                    Text::_('JGLOBAL_FIELD_GROUPS'),
                    'index.php?option=com_fields&view=groups&context=com_foos.foo',
                    $vName == 'fields.groups'
                );
            }
        }
    }

</div>

\

[Test your component]{#Test_your_component_14 .mw-headline}
-----------------------------------------------------------

Now you can zip all files and install them via Joomla Extension Manager.

After that you have an option for activating custom fields in the
options of your component.

[![As j4 t 14
1.png](/images/thumb/2/25/As_j4_t_14_1.png/700px-As_j4_t_14_1.png){width="700"
height="341"
srcset="/images/thumb/2/25/As_j4_t_14_1.png/1050px-As_j4_t_14_1.png 1.5x, /images/2/25/As_j4_t_14_1.png 2x"}](/File:As_j4_t_14_1.png){.image}

If you activate the option for custom fields, then you see an submenu in
the backend.

[![As j4 t 14
2.png](/images/thumb/4/4c/As_j4_t_14_2.png/700px-As_j4_t_14_2.png){width="700"
height="341"
srcset="/images/thumb/4/4c/As_j4_t_14_2.png/1050px-As_j4_t_14_2.png 1.5x, /images/4/4c/As_j4_t_14_2.png 2x"}](/File:As_j4_t_14_2.png){.image}

While editing an foo item, you see a tab, with all available custom
fields for this item.

[![As j4 t 14
3.png](/images/thumb/9/9c/As_j4_t_14_3.png/700px-As_j4_t_14_3.png){width="700"
height="341"
srcset="/images/thumb/9/9c/As_j4_t_14_3.png/1050px-As_j4_t_14_3.png 1.5x, /images/9/9c/As_j4_t_14_3.png 2x"}](/File:As_j4_t_14_3.png){.image}

[Example in Joomla!]{#Example_in_Joomla.21_5 .mw-headline}
----------------------------------------------------------

[Component Contents]{#Component_Contents_15 .mw-headline}
---------------------------------------------------------

At this point in the tutorial, your component should contain the
following files:

  ----- --------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------
  1     administrator/components/com\_foos/Controller/DisplayController.php         this is the administrator entry point to the Foo component                                                                                                                            unchanged
  7     administrator/components/com\_foos/Controller/FooController.php             this is the entry point to the Foo component                                                                                                                                          unchanged
  1     administrator/components/com\_foos/Extension/FoosComponent.php              the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  7     administrator/components/com\_foos/Field/FooField.php                       the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  7     administrator/components/com\_foos/Model/FooModel.php                       this is the model of the Foo component item                                                                                                                                           unchanged
  6     administrator/components/com\_foos/Model/FoosModel.php                      this is the model of the Foo component                                                                                                                                                unchanged
  1     administrator/components/com\_foos/Service/HTML/AdministratorService.php    the html service see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                                unchanged
  7     administrator/components/com\_foos/Table/FooTable.php                       the database table                                                                                                                                                                    unchanged
  1     administrator/components/com\_foos/View/Foos/HtmlView.php                   file representing the view in the back end                                                                                                                                            unchanged
  1     administrator/components/com\_foos/services/provider.php                    the service provider interface see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                  unchanged
  6     administrator/components/com\_foos/sql/install.mysql.utf8.sql               During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           unchanged
  6     administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql             During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           unchanged
  7     administrator/components/com\_foos/forms/foo.xml                            the default form in the back end                                                                                                                                                      unchanged
  7     administrator/components/com\_foos/tmpl/foo/edit.php                        the default view in the back end                                                                                                                                                      unchanged
  7     administrator/components/com\_foos/tmpl/foo/modal.php                       the default view in the back end                                                                                                                                                      unchanged
  1     administrator/components/com\_foos/tmpl/foos/default.php                    the default view in the back end                                                                                                                                                      unchanged
  7     administrator/components/com\_foos/tmpl/foos/modal.php                      the default view in the back end                                                                                                                                                      unchanged
  1     administrator/components/com\_foos/foos.xml                                 this is an XML (manifest) file that tells Joomla! how to install our component.                                                                                                       unchanged
  1     administrator/components/com\_foos/script.php                               the installer script                                                                                                                                                                  unchanged
  8     administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini       the language file                                                                                                                                                                     unchanged
  8     administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini   the language file                                                                                                                                                                     unchanged
  9     administrator/components/com\_foos/config.php                               the configuration                                                                                                                                                                     unchanged
  10    administrator/components/com\_foos/access.xml                               the ACL file for permissen handling                                                                                                                                                   unchanged
  14a   administrator/components/com\_foos/Helper/FooHelper.php                     the helper file                                                                                                                                                                       unchanged
  11a   administrator/components/com\_foos/Rule/LetterRule.php                      the server side validation rule                                                                                                                                                       unchanged
  2     components/com\_foos/Controller/DisplayController.php                       this is the frond end entry point to the Foo component                                                                                                                                unchanged
  4     components/com\_foos/Model/FooModel.php                                     this is the frond end model for the Foo component                                                                                                                                     unchanged
  2     components/com\_foos/View/Foo/HtmlView.php                                  file representing the view in the frond end                                                                                                                                           unchanged
  7     components/com\_foos/View/Foos/HtmlView.php                                 file representing the view in the frond end                                                                                                                                           unchanged
  2     components/com\_foos/tmpl/foo/default.php                                   the default view in the frond end                                                                                                                                                     unchanged
  3     components/com\_foos/tmpl/foo/default.xml                                   the xml for the menu item                                                                                                                                                             unchanged
  8     components/com\_foos/language/en-GB/en-GB.com\_foos.ini                     the language file                                                                                                                                                                     unchanged
  8     components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini                 the language file                                                                                                                                                                     unchanged
  7     media/com\_foos/js/admin-foos-modal.js                                      the javascript file                                                                                                                                                                   unchanged
  11b   media/com\_foos/js/admin-foos-letter.js                                     the client side validation rule                                                                                                                                                       unchanged
  ----- --------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------

\

\

[Conclusion]{#Conclusion_15 .mw-headline}
-----------------------------------------

You never know how to integrate custom fields in the backend into your
component. In the next chapter, we'll look at how to display the values
in the frontend.

\

\

\

\

\

\

\

\

\

\

\

\

\

[Adding Custom Fields in the frontend - Part 14b]{#Adding_Custom_Fields_in_the_frontend_-_Part_14b .mw-headline}
================================================================================================================

[Requirements]{#Requirements_16 .mw-headline}
---------------------------------------------

You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev)

[File Structure]{#File_Structure_16 .mw-headline}
-------------------------------------------------

### [Changing administrator/components/com\_foos/foos.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_12 .mw-headline}

The `administrator/components/com_foos/foos.xml` file is ....

#### [Completed administrator/components/com\_foos/foos.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_12 .mw-headline}

The code for the `administrator/components/com_foos/foos.xml` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8" ?>
    <extension type="component" method="upgrade">
        <name>COM_FOOS</name>
        <creationDate>[DATE]</creationDate>
        <author>[AUTHOR]</author>
        <authorEmail>[AUTHOR_EMAIL]</authorEmail>
        <authorUrl>[AUTHOR_URL]</authorUrl>
        <copyright>[COPYRIGHT]</copyright>
        <license>GNU General Public License version 2 or later;</license>
      <version>1.14.1</version>
     <description>COM_FOOS_XML_DESCRIPTION</description>
        <namespace>Joomla\Component\Foos</namespace>
        <scriptfile>script.php</scriptfile>
        <install> <!-- Runs on install -->
            <sql>
                <file driver="mysql" charset="utf8">sql/install.mysql.utf8.sql</file>
            </sql>
        </install>
        <uninstall> <!-- Runs on uninstall -->
            <sql>
                <file driver="mysql" charset="utf8">sql/uninstall.mysql.utf8.sql</file>
            </sql>
        </uninstall>
        <update>  <!-- Runs on update -->
            <schemas>
                <schemapath type="mysql">sql/updates/mysql</schemapath>
            </schemas>
        </update>
        <!-- Frond-end files -->
        <files folder="components/com_foos">
            <folder>Controller</folder>
            <folder>Model</folder>
            <folder>View</folder>
            <folder>tmpl</folder>
            <folder>language</folder>
        </files>
        <media folder="media/com_foos" destination="com_foos">
            <folder>js</folder>
        </media>
        <!-- Back-end files -->
        <administration>
            <!-- Menu entries -->
            <menu view="foos">COM_FOOS</menu>
            <submenu>
                <menu link="option=com_foos">COM_FOOS</menu>
                <menu link="option=com_categories&amp;extension=com_foos"
                    view="categories" img="class:foos-cat" alt="Foos/Categories">JCATEGORY</menu>
            </submenu>
            <files folder="administrator/components/com_foos">
                <filename>access.xml</filename>
                <filename>config.xml</filename>
                <filename>foos.xml</filename>
                <folder>Controller</folder>
                <folder>Extension</folder>
                <folder>Model</folder>
                <folder>Rule</folder>
                <folder>Service</folder>
                <folder>View</folder>
                <folder>services</folder>
                <folder>tmpl</folder>
                <folder>sql</folder>
                <folder>language</folder>
            </files>
        </administration>
    </extension>

</div>

\

### [Changing components/com\_foos/tmpl/foo/default.php]{#Changing_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php_6 .mw-headline}

The `components/com_foos/tmpl/foo/default.php` file is ....

#### [Completed components/com\_foos/tmpl/foo/default.php file]{#Completed_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php_file_7 .mw-headline}

The code for the `components/com_foos/tmpl/foo/default.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php

    defined('_JEXEC') or die;

    use Joomla\CMS\Language\Text;

    if ($this->get('State')->get('params')->get('show_foo_name_label')) {
        echo Text::_('COM_FOOS_NAME') . $this->item->name;
    } else {
        echo $this->item->name;
    }
    echo $this->item->event->afterDisplayTitle; 
    echo $this->item->event->beforeDisplayContent;
    echo $this->item->event->afterDisplayContent;

</div>

### [Changing components/com\_foos/View/Foo/HtmlView.php]{#Changing_components.2Fcom_foos.2FView.2FFoo.2FHtmlView.php_3 .mw-headline}

The `components/com_foos/View/Foo/HtmlView.php` file is ....

#### [Completed components/com\_foos/View/Foo/HtmlView.php file]{#Completed_components.2Fcom_foos.2FView.2FFoo.2FHtmlView.php_file_4 .mw-headline}

The code for the `components/com_foos/View/Foo/HtmlView.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Site
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Site\View\Foo;

    defined('_JEXEC') or die;

    use Joomla\CMS\MVC\View\HtmlView as BaseHtmlView;
    use Joomla\CMS\Factory;

    /**
     * HTML Foos View class for the Foo component
     *
     * @since  1.0
     */
    class HtmlView extends BaseHtmlView
    {
        /**
        * The item object details
        *
        * @var    \JObject
        * @since  1.0.0
        */
        protected $item;

        /**
        * Execute and display a template script.
        *
        * @param   string  $tpl  The name of the template file to parse; automatically searches through the template paths.
        *
        * @return  mixed  A string if successful, otherwise an Error object.
        */
        public function display($tpl = null)
        {
          $item = $this->item = $this->get('Item');

           Factory::getApplication()->triggerEvent('onContentPrepare', array ('com_foos.foo', &$item));

           // Store the events for later
           $item->event = new \stdClass;
           $results = Factory::getApplication()->triggerEvent('onContentAfterTitle', array('com_foos.foo', &$item, &$item->params));
           $item->event->afterDisplayTitle = trim(implode("\n", $results));

           $results = Factory::getApplication()->triggerEvent('onContentBeforeDisplay', array('com_foos.foo', &$item, &$item->params));
           $item->event->beforeDisplayContent = trim(implode("\n", $results));

           $results = Factory::getApplication()->triggerEvent('onContentAfterDisplay', array('com_foos.foo', &$item, &$item->params));
           $item->event->afterDisplayContent = trim(implode("\n", $results));

         return parent::display($tpl);
        }
    }

</div>

[Test your component]{#Test_your_component_15 .mw-headline}
-----------------------------------------------------------

Now you can zip all files and install them via Joomla Extension Manager.

You can edit the value of a custom field in the backend.

[![As j4 t 14b
1.png](/images/thumb/4/41/As_j4_t_14b_1.png/700px-As_j4_t_14b_1.png){width="700"
height="341"
srcset="/images/thumb/4/41/As_j4_t_14b_1.png/1050px-As_j4_t_14b_1.png 1.5x, /images/4/41/As_j4_t_14b_1.png 2x"}](/File:As_j4_t_14b_1.png){.image}

After that you can show the value for a custom field in the front end.

[![As j4 t 14b
2.png](/images/thumb/c/c3/As_j4_t_14b_2.png/700px-As_j4_t_14b_2.png){width="700"
height="341"
srcset="/images/thumb/c/c3/As_j4_t_14b_2.png/1050px-As_j4_t_14b_2.png 1.5x, /images/c/c3/As_j4_t_14b_2.png 2x"}](/File:As_j4_t_14b_2.png){.image}

\

[Example in Joomla!]{#Example_in_Joomla.21_6 .mw-headline}
----------------------------------------------------------

[Component Contents]{#Component_Contents_16 .mw-headline}
---------------------------------------------------------

At this point in the tutorial, your component should contain the
following files:

  ----- --------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------
  1     administrator/components/com\_foos/Controller/DisplayController.php         this is the administrator entry point to the Foo component                                                                                                                            unchanged
  7     administrator/components/com\_foos/Controller/FooController.php             this is the entry point to the Foo component                                                                                                                                          unchanged
  1     administrator/components/com\_foos/Extension/FoosComponent.php              the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  7     administrator/components/com\_foos/Field/FooField.php                       the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  7     administrator/components/com\_foos/Model/FooModel.php                       this is the model of the Foo component item                                                                                                                                           unchanged
  6     administrator/components/com\_foos/Model/FoosModel.php                      this is the model of the Foo component                                                                                                                                                unchanged
  1     administrator/components/com\_foos/Service/HTML/AdministratorService.php    the html service see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                                unchanged
  7     administrator/components/com\_foos/Table/FooTable.php                       the database table                                                                                                                                                                    unchanged
  1     administrator/components/com\_foos/View/Foos/HtmlView.php                   file representing the view in the back end                                                                                                                                            unchanged
  1     administrator/components/com\_foos/services/provider.php                    the service provider interface see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                  unchanged
  6     administrator/components/com\_foos/sql/install.mysql.utf8.sql               During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           unchanged
  6     administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql             During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           unchanged
  7     administrator/components/com\_foos/forms/foo.xml                            the default form in the back end                                                                                                                                                      unchanged
  7     administrator/components/com\_foos/tmpl/foo/edit.php                        the default view in the back end                                                                                                                                                      unchanged
  7     administrator/components/com\_foos/tmpl/foo/modal.php                       the default view in the back end                                                                                                                                                      unchanged
  1     administrator/components/com\_foos/tmpl/foos/default.php                    the default view in the back end                                                                                                                                                      unchanged
  7     administrator/components/com\_foos/tmpl/foos/modal.php                      the default view in the back end                                                                                                                                                      unchanged
  1     administrator/components/com\_foos/foos.xml                                 this is an XML (manifest) file that tells Joomla! how to install our component.                                                                                                       unchanged
  1     administrator/components/com\_foos/script.php                               the installer script                                                                                                                                                                  unchanged
  8     administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini       the language file                                                                                                                                                                     unchanged
  8     administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini   the language file                                                                                                                                                                     unchanged
  9     administrator/components/com\_foos/config.php                               the configuration                                                                                                                                                                     unchanged
  10    administrator/components/com\_foos/access.xml                               the ACL file for permissen handling                                                                                                                                                   unchanged
  14a   administrator/components/com\_foos/Helper/FooHelper.php                     the helper file                                                                                                                                                                       unchanged
  11a   administrator/components/com\_foos/Rule/LetterRule.php                      the server side validation rule                                                                                                                                                       unchanged
  2     components/com\_foos/Controller/DisplayController.php                       this is the frond end entry point to the Foo component                                                                                                                                unchanged
  4     components/com\_foos/Model/FooModel.php                                     this is the frond end model for the Foo component                                                                                                                                     unchanged
  2     components/com\_foos/View/Foo/HtmlView.php                                  file representing the view in the frond end                                                                                                                                           unchanged
  7     components/com\_foos/View/Foos/HtmlView.php                                 file representing the view in the frond end                                                                                                                                           unchanged
  2     components/com\_foos/tmpl/foo/default.php                                   the default view in the frond end                                                                                                                                                     unchanged
  3     components/com\_foos/tmpl/foo/default.xml                                   the xml for the menu item                                                                                                                                                             unchanged
  8     components/com\_foos/language/en-GB/en-GB.com\_foos.ini                     the language file                                                                                                                                                                     unchanged
  8     components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini                 the language file                                                                                                                                                                     unchanged
  7     media/com\_foos/js/admin-foos-modal.js                                      the javascript file                                                                                                                                                                   unchanged
  11b   media/com\_foos/js/admin-foos-letter.js                                     the client side validation rule                                                                                                                                                       unchanged
  ----- --------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------

\

\

[Conclusion]{#Conclusion_16 .mw-headline}
-----------------------------------------

Your components can now fully use custom fields. This is a huge
advantage because cusotm fields make joomla and every component in
Joomla user friendly and customizable.

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

[Adding Associations I - Part 15a]{#Adding_Associations_I_-_Part_15a .mw-headline}
==================================================================================

[Requirements]{#Requirements_17 .mw-headline}
---------------------------------------------

You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev). The installation should be multilingual.

[File Structure]{#File_Structure_17 .mw-headline}
-------------------------------------------------

### [Changing administrator/components/com\_foos/Extension/FoosComponent.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FExtension.2FFoosComponent.php_2 .mw-headline}

The `administrator/components/com_foos/Extension/FoosComponent.php` file
is ....

#### [Completed administrator/components/com\_foos/Extension/FoosComponent.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FExtension.2FFoosComponent.php_file_3 .mw-headline}

The code for the
`administrator/components/com_foos/Extension/FoosComponent.php` file is
as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\Extension;

    defined('JPATH_PLATFORM') or die;

    use Joomla\CMS\Association\AssociationServiceInterface;
    use Joomla\CMS\Association\AssociationServiceTrait;
    use Joomla\CMS\Categories\CategoryServiceInterface;
    use Joomla\CMS\Categories\CategoryServiceTrait;
    use Joomla\CMS\Extension\BootableExtensionInterface;
    use Joomla\CMS\Extension\MVCComponent;
    use Joomla\CMS\HTML\HTMLRegistryAwareTrait;
    use Psr\Container\ContainerInterface;
    use Joomla\Component\Foos\Administrator\Service\HTML\AdministratorService;

    /**
     * Component class for com_foos
     *
     * @since  1.0.0
     */
    class FoosComponent extends MVCComponent
    implements BootableExtensionInterface, CategoryServiceInterface, AssociationServiceInterface
    {
        use CategoryServiceTrait;
      use AssociationServiceTrait;
     use HTMLRegistryAwareTrait;

        /**
         * Booting the extension. This is the function to set up the environment of the extension like
         * registering new class loaders, etc.
         *
         * If required, some initial set up can be done from services of the container, eg.
         * registering HTML services.
         *
         * @param   ContainerInterface  $container  The container
         *
         * @return  void
         *
         * @since   1.0.0
         */
        public function boot(ContainerInterface $container)
        {
            $this->getRegistry()->register('foosadministrator', new AdministratorService);
        }

        /**
         * Returns the table for the count items functions for the given section.
         *
         * @param   string  $section  The section
         *
         * @return  string|null
         *
         * @since   1.0.0
         */
        protected function getTableNameForSection(string $section = null)
        {
            return ($section === 'category' ? 'categories' : 'foos_details');
        }
    }

</div>

### [Changing administrator/components/com\_foos/Model/FooModel.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFooModel.php_2 .mw-headline}

The `administrator/components/com_foos/Model/FooModel.php` file is ....

#### [Completed administrator/components/com\_foos/Model/FooModel.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFooModel.php_file_3 .mw-headline}

The code for the `administrator/components/com_foos/Model/FooModel.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\Model;

    defined('_JEXEC') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\MVC\Model\AdminModel;
    use Joomla\CMS\Language\Associations;
    use Joomla\CMS\Language\LanguageHelper;

    /**
     * Item Model for a Foo.
     *
     * @since  1.0
     */
    class FooModel extends AdminModel
    {
        /**
        * The type alias for this content type.
        *
        * @var    string
        * @since  1.0
        */
        public $typeAlias = 'com_foos.foo';

        /**
        * The context used for the associations table
        *
        * @var    string
        * @since  3.4.4
        */
        protected $associationsContext = 'com_foos.item';

        /**
        * Method to get the row form.
        *
        * @param   array    $data      Data for the form.
        * @param   boolean  $loadData  True if the form is to load its own data (default case), false if not.
        *
        * @return  \JForm|boolean  A \JForm object on success, false on failure
        *
        * @since   1.0
        */
        public function getForm($data = array(), $loadData = true)
        {
            // Get the form.
            $form = $this->loadForm('com_foos.foo', 'foo', array('control' => 'jform', 'load_data' => $loadData));

            if (empty($form))
            {
                return false;
            }

            return $form;
        }

        /**
        * Method to get the data that should be injected in the form.
        *
        * @return  mixed  The data for the form.
        *
        * @since   1.0
        */
        protected function loadFormData()
        {
            $app = Factory::getApplication();

            $data = $this->getItem();

            $this->preprocessData('com_foos.foo', $data);

            return $data;
        }

        /**
        * Method to get a single record.
        *
        * @param   integer  $pk  The id of the primary key.
        *
        * @return  mixed  Object on success, false on failure.
        *
        * @since   1.0
        */
        public function getItem($pk = null)
        {
            $item = parent::getItem($pk);

            // Load associated foo items
            $assoc = Associations::isEnabled();

            if ($assoc)
            {
                $item->associations = array();
                $item->alias = "test";

                if ($item->id != null)
                {
                    $associations = Associations::getAssociations('com_foos', '#__foos_details', 'com_foos.item', $item->id, 'id', null);

                    foreach ($associations as $tag => $association)
                    {
                        $item->associations[$tag] = $association->id;
                    }
                }
            }

            return $item;
        }

        /**
        * Preprocess the form.
        *
        * @param   \JForm  $form   Form object.
        * @param   object  $data   Data object.
        * @param   string  $group  Group name.
        *
        * @return  void
        *
        * @since   1.0
        */
        protected function preprocessForm(\JForm $form, $data, $group = 'content')
        {
            // Association contact items
            if (Associations::isEnabled())
            {
                $languages = LanguageHelper::getContentLanguages(false, true, null, 'ordering', 'asc');

                if (count($languages) > 1)
                {
                    $addform = new \SimpleXMLElement('<form />');
                    $fields = $addform->addChild('fields');
                    $fields->addAttribute('name', 'associations');
                    $fieldset = $fields->addChild('fieldset');
                    $fieldset->addAttribute('name', 'item_associations');

                    foreach ($languages as $language)
                    {
                        $field = $fieldset->addChild('field');
                        $field->addAttribute('name', $language->lang_code);
                        $field->addAttribute('type', 'modal_foo');
                        $field->addAttribute('language', $language->lang_code);
                        $field->addAttribute('label', $language->title);
                        $field->addAttribute('translate_label', 'false');
                        $field->addAttribute('select', 'true');
                        $field->addAttribute('new', 'true');
                        $field->addAttribute('edit', 'true');
                        $field->addAttribute('clear', 'true');
                    }

                    $form->load($addform, false);
                }
            }

            parent::preprocessForm($form, $data, $group);
        }
    }

</div>

### [Changing administrator/components/com\_foos/Model/FoosModel.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_4 .mw-headline}

The `administrator/components/com_foos/Model/FoosModel.php` file is ....

#### [Completed administrator/components/com\_foos/Model/FoosModel.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_file_5 .mw-headline}

The code for the `administrator/components/com_foos/Model/FooModel.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\Model;

    defined('_JEXEC') or die;

    use Joomla\CMS\Language\Associations;
    use Joomla\CMS\MVC\Model\ListModel;

    /**
     * Methods supporting a list of foo records.
     *
     * @since  1.0
     */
    class FoosModel extends ListModel
    {
        /**
        * Constructor.
        *
        * @param   array  $config  An optional associative array of configuration settings.
        *
        * @see     \JControllerLegacy
        * @since   1.0
        */
        public function __construct($config = array())
        {
            parent::__construct($config);
        }
        /**
        * Build an SQL query to load the list data.
        *
        * @return  \JDatabaseQuery
        *
        * @since   1.0
        */
        protected function getListQuery()
        {
            // Create a new query object.
            $db = $this->getDbo();
            $query = $db->getQuery(true);

            // Select the required fields from the table.
            $query->select(
                $db->quoteName(array('a.id', 'a.name', 'a.catid', 'a.access', 'a.published', 'a.publish_up', 'a.publish_down', 'a.language'))
            );

            // Select the required fields from the table.
            $query->select(
                $db->quoteName(
                    explode(
                        ', ',
                        $this->getState(
                            'list.select',
                            'a.id, a.name, a.catid' .
                            ', a.access' .
                            ', a.language' .
                            ', a.published' .
                            ', a.publish_up, a.publish_down'
                        )
                    )
                )
            );

            $query->from($db->quoteName('#__foos_details', 'a'));

            // Join over the asset groups.
            $query->select($db->quoteName('ag.title', 'access_level'))
                ->join(
                    'LEFT',
                    $db->quoteName('#__viewlevels', 'ag') . ' ON ' . $db->quoteName('ag.id') . ' = ' . $db->quoteName('a.access')
                );

            // Join over the categories.
            $query->select($db->quoteName('c.title', 'category_title'))
                ->join(
                    'LEFT',
                    $db->quoteName('#__categories', 'c') . ' ON ' . $db->quoteName('c.id') . ' = ' . $db->quoteName('a.catid')
                );

            // Join over the language
            $query->select($db->quoteName('l.title', 'language_title'))
                ->select($db->quoteName('l.image', 'language_image'))
                ->join(
                    'LEFT',
                    $db->quoteName('#__languages', 'l') . ' ON ' . $db->quoteName('l.lang_code') . ' = ' . $db->quoteName('a.language')
                );

            // Join over the associations.
            $assoc = Associations::isEnabled();

            if ($assoc)
            {
                $query->select('COUNT(' . $db->quoteName('asso2.id') . ') > 1 as ' . $db->quoteName('association'))
                    ->join(
                        'LEFT',
                        $db->quoteName('#__associations', 'asso') . ' ON ' . $db->quoteName('asso.id') . ' = ' . $db->quoteName('a.id')
                        . ' AND ' . $db->quoteName('asso.context') . ' = ' . $db->quote('com_foos.item')
                    )
                    ->join(
                        'LEFT',
                        $db->quoteName('#__associations', 'asso2') . ' ON ' . $db->quoteName('asso2.key') . ' = ' . $db->quoteName('asso.key')
                    )
                    ->group(
                        $db->quoteName(
                            array(
                                'a.id',
                                'a.name',
                                'a.catid',
                                'a.published',
                                'a.access',
                                'a.language',
                                'a.publish_up',
                                'a.publish_down',
                                'l.title' ,
                                'l.image' ,
                                'ag.title' ,
                                'c.title'
                            )
                        )
                    );
            }

            return $query;
        }
    }

</div>

### [Changing administrator/components/com\_foos/Service/HTML/AdministratorService.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FService.2FHTML.2FAdministratorService.php .mw-headline}

The
`administrator/components/com_foos/Service/HTML/AdministratorService.php`
file is ....

#### [Completed administrator/components/com\_foos/Service/HTML/AdministratorService.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FService.2FHTML.2FAdministratorService.php_file_2 .mw-headline}

The code for the
`administrator/components/com_foos/Service/HTML/AdministratorService.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\Service\HTML;

    defined('_JEXEC') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\HTML\HTMLHelper;
    use Joomla\CMS\Language\Associations;
    use Joomla\CMS\Language\Text;
    use Joomla\CMS\Layout\LayoutHelper;
    use Joomla\CMS\Router\Route;

    /**
     * Foos HTML helper class.
     *
     * @since  1.0
     */
    class AdministratorService
    {
        /**
        * Get the associated language flags
        *
        * @param   integer  $fooid  The item id to search associations
        *
        * @return  string  The language HTML
        *
        * @throws  Exception
        */
        public function association($fooid)
        {
            // Defaults
            $html = '';

            // Get the associations
            if ($associations = Associations::getAssociations('com_foos', '#__foos_details', 'com_foos.item', $fooid, 'id', null))
            {
                foreach ($associations as $tag => $associated)
                {
                    $associations[$tag] = (int) $associated->id;
                }

                // Get the associated foo items
                $db = Factory::getDbo();
                $query = $db->getQuery(true)
                    ->select('c.id, c.name as title')
                    ->select('l.sef as lang_sef, lang_code')
                    ->from('#__foos_details as c')
                    ->select('cat.title as category_title')
                    ->join('LEFT', '#__categories as cat ON cat.id=c.catid')
                    ->where('c.id IN (' . implode(',', array_values($associations)) . ')')
                    ->where('c.id != ' . $fooid)
                    ->join('LEFT', '#__languages as l ON c.language=l.lang_code')
                    ->select('l.image')
                    ->select('l.title as language_title');
                $db->setQuery($query);

                try
                {
                    $items = $db->loadObjectList('id');
                }
                catch (\RuntimeException $e)
                {
                    throw new \Exception($e->getMessage(), 500, $e);
                }

                if ($items)
                {
                    foreach ($items as &$item)
                    {
                        $text = strtoupper($item->lang_sef);
                        $url = Route::_('index.php?option=com_foos&task=foo.edit&id=' . (int) $item->id);
                        $tooltip = htmlspecialchars($item->title, ENT_QUOTES, 'UTF-8') . '<br>' . Text::sprintf('JCATEGORY_SPRINTF', $item->category_title);
                        $classes = 'hasPopover badge badge-secondary';

                        $item->link = '<a href="' . $url . '" title="' . $item->language_title . '" class="' . $classes
                            . '" data-content="' . $tooltip . '" data-placement="top">'
                            . $text . '</a>';
                    }
                }

                HTMLHelper::_('bootstrap.popover');

                $html = LayoutHelper::render('joomla.content.associations', $items);
            }

            return $html;
        }
    }

</div>

### [Changing administrator/components/com\_foos/foos.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_13 .mw-headline}

The `administrator/components/com_foos/foos.xml` file is ....

#### [Completed administrator/components/com\_foos/foos.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_13 .mw-headline}

The code for the `administrator/components/com_foos/foos.xml` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8" ?>
    <extension type="component" method="upgrade">
        <name>COM_FOOS</name>
        <creationDate>[DATE]</creationDate>
        <author>[AUTHOR]</author>
        <authorEmail>[AUTHOR_EMAIL]</authorEmail>
        <authorUrl>[AUTHOR_URL]</authorUrl>
        <copyright>[COPYRIGHT]</copyright>
        <license>GNU General Public License version 2 or later;</license>
        <version>1.15.0</version>
        <description>COM_FOOS_XML_DESCRIPTION</description>
        <namespace>Joomla\Component\Foos</namespace>
        <scriptfile>script.php</scriptfile>
        <install> <!-- Runs on install -->
            <sql>
                <file driver="mysql" charset="utf8">sql/install.mysql.utf8.sql</file>
            </sql>
        </install>
        <uninstall> <!-- Runs on uninstall -->
            <sql>
                <file driver="mysql" charset="utf8">sql/uninstall.mysql.utf8.sql</file>
            </sql>
        </uninstall>
        <update>  <!-- Runs on update -->
            <schemas>
                <schemapath type="mysql">sql/updates/mysql</schemapath>
            </schemas>
        </update>
        <!-- Frond-end files -->
        <files folder="components/com_foos">
            <folder>Controller</folder>
            <folder>Model</folder>
            <folder>View</folder>
            <folder>tmpl</folder>
            <folder>language</folder>
        </files>
        <media folder="media/com_foos" destination="com_foos">
            <folder>js</folder>
        </media>
        <!-- Back-end files -->
        <administration>
            <!-- Menu entries -->
            <menu view="foos">COM_FOOS</menu>
            <submenu>
                <menu link="option=com_foos">COM_FOOS</menu>
                <menu link="option=com_categories&amp;extension=com_foos"
                    view="categories" img="class:foos-cat" alt="Foos/Categories">JCATEGORY</menu>
            </submenu>
            <files folder="administrator/components/com_foos">
                <filename>access.xml</filename>
                <filename>config.xml</filename>
                <filename>foos.xml</filename>
                <folder>Controller</folder>
                <folder>Extension</folder>
                <folder>Model</folder>
                <folder>Rule</folder>
                <folder>Service</folder>
                <folder>View</folder>
                <folder>services</folder>
                <folder>tmpl</folder>
                <folder>sql</folder>
                <folder>language</folder>
            </files>
        </administration>
    </extension>

</div>

### [Changing administrator/components/com\_foos/forms/foo.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_6 .mw-headline}

The `administrator/components/com_foos/forms/foo.xml` file is ....

#### [Completed administrator/components/com\_foos/forms/foo.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_file_7 .mw-headline}

The code for the `administrator/components/com_foos/forms/foo.xml` file
is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8"?>
    <form>
        <fieldset 
            addfieldprefix="Joomla\Component\Foos\Administrator\Field" 
            addruleprefix="Joomla\Component\Foos\Administrator\Rule"
        >
            <field
                name="id"
                type="number"
                label="JGLOBAL_FIELD_ID_LABEL"
                default="0"
                class="readonly"
                readonly="true"
            />

            <field
                name="name"
                type="text"
                validate="Letter"
                class="validate-letter"
                label="COM_FOOS_FIELD_NAME_LABEL"
                size="40"
                required="true"
             />

            <field
                name="language"
                type="contentlanguage"
                label="JFIELD_LANGUAGE_LABEL"
                >
                <option value="*">JALL</option>
            </field>

            <field
                name="published"
                type="list"
                label="JSTATUS"
                default="1"
                id="published"
                class="custom-select-color-state"
                size="1"
                >
                <option value="1">JPUBLISHED</option>
                <option value="0">JUNPUBLISHED</option>
                <option value="2">JARCHIVED</option>
                <option value="-2">JTRASHED</option>
            </field>

            <field
                name="publish_up"
                type="calendar"
                label="COM_FOOS_FIELD_PUBLISH_UP_LABEL"
                translateformat="true"
                showtime="true"
                size="22"
                filter="user_utc"
            />

            <field
                name="publish_down"
                type="calendar"
                label="COM_FOOS_FIELD_PUBLISH_DOWN_LABEL"
                translateformat="true"
                showtime="true"
                size="22"
                filter="user_utc"
            />

            <field
                name="catid"
                type="categoryedit"
                label="JCATEGORY"
                extension="com_foos"
                addfieldprefix="Joomla\Component\Categories\Administrator\Field"
                required="true"
                default=""
            />

            <field
                name="access"
                type="accesslevel"
                label="JFIELD_ACCESS_LABEL"
                size="1"
            />
        </fieldset>
    </form>

</div>

### [Changing administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.ini_4 .mw-headline}

The
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.ini`
file is ....

#### [Completed administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.ini_file_4 .mw-headline}

The code for the
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.ini`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    COM_FOOS="[PROJECT_NAME]"
    COM_FOOS_CONFIGURATION="Foo Options"

    COM_FOOS_MANAGER_FOO_NEW="New"
    COM_FOOS_MANAGER_FOO_EDIT="Edit"
    COM_FOOS_MANAGER_FOOS="Foo Manager"

    COM_FOOS_TABLE_TABLEHEAD_NAME="Name"
    COM_FOOS_TABLE_TABLEHEAD_ID="ID"
    COM_FOOS_ERROR_FOO_NOT_FOUND="Foo not found"

    COM_FOOS_FIELD_NAME_LABEL="Name"

    COM_FOOS_FIELD_FOO_SHOW_CATEGORY_LABEL="Show name label"
    COM_FOOS_FIELD_CONFIG_INDIVIDUAL_FOO_DESC="These settings apply for all foo."
    COM_FOOS_FIELD_CONFIG_INDIVIDUAL_FOO_DISPLAY="Foo"

    COM_FOOS_FIELD_PUBLISH_DOWN_LABEL="Finish Publishing"
    COM_FOOS_FIELD_PUBLISH_UP_LABEL="Start Publishing"
    COM_FOOS_N_ITEMS_PUBLISHED="%d foos published."
    COM_FOOS_N_ITEMS_PUBLISHED_1="%d foo published."
    COM_FOOS_N_ITEMS_UNPUBLISHED="%d foos unpublished."
    COM_FOOS_N_ITEMS_UNPUBLISHED_1="%d foo unpublished."

    COM_FOOS_FOOS_FIELD_PUBLISH_DOWN_LABEL="Finish Publishing"
    COM_FOOS_FOOS_FIELD_PUBLISH_UP_LABEL="Start Publishing"
    COM_FOOS_FOOS_N_ITEMS_PUBLISHED="%d foos published."
    COM_FOOS_FOOS_N_ITEMS_PUBLISHED_1="%d foo published."
    COM_FOOS_FOOS_N_ITEMS_UNPUBLISHED="%d foos unpublished."
    COM_FOOS_FOOS_N_ITEMS_UNPUBLISHED_1="%d foo unpublished."

    COM_FOOS_EDIT_FOO="Edit Foo"
    COM_FOOS_NEW_FOO="New Foo"

    COM_FOOS_HEADING_ASSOCIATION="Association"
    COM_FOOS_CHANGE_FOO="Change a foo"
    COM_FOOS_SELECT_A_FOO="Select a foo"

</div>

### [Changing administrator/components/com\_foos/services/provider.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Fservices.2Fprovider.php_2 .mw-headline}

The `administrator/components/com_foos/services/provider.php` file is
....

#### [Completed administrator/components/com\_foos/services/provider.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Fservices.2Fprovider.php_file_3 .mw-headline}

The code for the
`administrator/components/com_foos/services/provider.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    defined('_JEXEC') or die;

    use Joomla\Component\Foos\Administrator\Extension\FoosComponent;
    use Joomla\CMS\Categories\CategoryFactoryInterface;
    use Joomla\CMS\Dispatcher\ComponentDispatcherFactoryInterface;
    use Joomla\CMS\Extension\ComponentInterface;
    use Joomla\CMS\Extension\Service\Provider\CategoryFactory;
    use Joomla\CMS\Extension\Service\Provider\ComponentDispatcherFactory;
    use Joomla\CMS\Extension\Service\Provider\MVCFactory;
    use Joomla\CMS\HTML\Registry;
    use Joomla\CMS\MVC\Factory\MVCFactoryInterface;
    use Joomla\DI\Container;
    use Joomla\DI\ServiceProviderInterface;
    use Joomla\Component\Foos\Administrator\Helper\AssociationsHelper;
    use Joomla\CMS\Association\AssociationExtensionInterface;


    /**
     * The foos service provider.
     * https://github.com/joomla/joomla-cms/pull/20217
     *
     * @since  1.0.0
     */
    return new class implements ServiceProviderInterface
    {
        /**
        * Registers the service provider with a DI container.
        *
        * @param   Container  $container  The DI container.
        *
        * @return  void
        *
        * @since   1.0.0
        */
        public function register(Container $container)
        {
            $container->set(AssociationExtensionInterface::class, new AssociationsHelper);

            $container->registerServiceProvider(new CategoryFactory('\\Joomla\\Component\\Foos'));
            $container->registerServiceProvider(new MVCFactory('\\Joomla\\Component\\Foos'));
            $container->registerServiceProvider(new ComponentDispatcherFactory('\\Joomla\\Component\\Foos'));

            $container->set(
                ComponentInterface::class,
                function (Container $container)
                {
                    $component = new FoosComponent($container->get(ComponentDispatcherFactoryInterface::class));

                    $component->setRegistry($container->get(Registry::class));
                    $component->setMVCFactory($container->get(MVCFactoryInterface::class));
                    $component->setCategoryFactory($container->get(CategoryFactoryInterface::class));
                    $component->setAssociationExtension($container->get(AssociationExtensionInterface::class));

                    return $component;
                }
            );
        }
    };

</div>

### [Changing administrator/components/com\_foos/tmpl/foo/edit.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php_6 .mw-headline}

The `administrator/components/com_foos/tmpl/foo/edit.php` file is ....

#### [Completed administrator/components/com\_foos/tmpl/foo/edit.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php_file_7 .mw-headline}

The code for the `administrator/components/com_foos/tmpl/foo/edit.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    defined('_JEXEC') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\HTML\HTMLHelper;
    use Joomla\CMS\Language\Associations;
    use Joomla\CMS\Router\Route;
    use Joomla\CMS\Language\Text;
    use Joomla\CMS\Layout\LayoutHelper;

    HTMLHelper::_('behavior.formvalidator');
    HTMLHelper::_('script', 'com_foos/admin-foos-letter.js', array('version' => 'auto', 'relative' => true));

    $app = Factory::getApplication();
    $input = $app->input;

    $assoc = Associations::isEnabled();

    $this->ignore_fieldsets = array('item_associations');
    $this->useCoreUI = true;

    // In case of modal
    $isModal = $input->get('layout') == 'modal' ? true : false;
    $layout  = $isModal ? 'modal' : 'edit';
    $tmpl    = $isModal || $input->get('tmpl', '', 'cmd') === 'component' ? '&tmpl=component' : '';
    ?>

    <form action="<?php echo Route::_('index.php?option=com_foos&layout=' . $layout . $tmpl . '&id=' . (int) $this->item->id); ?>" method="post" name="adminForm" id="foo-form" class="form-validate">
        <div>
            <?php echo HTMLHelper::_('uitab.startTabSet', 'myTab', array('active' => 'details')); ?>

            <?php echo HTMLHelper::_('uitab.addTab', 'myTab', 'details', empty($this->item->id) ? Text::_('COM_FOOS_NEW_FOO') : Text::_('COM_FOOS_EDIT_FOO')); ?>
            <div class="row">
                <div class="col-md-9">
                    <div class="row">
                        <div class="col-md-6">
                            <?php echo $this->getForm()->renderField('name'); ?>
                            <?php echo $this->getForm()->renderField('access'); ?>
                            <?php echo $this->getForm()->renderField('published'); ?>
                            <?php echo $this->getForm()->renderField('publish_up'); ?>
                            <?php echo $this->getForm()->renderField('publish_down'); ?>
                            <?php echo $this->getForm()->renderField('catid'); ?>
                            <?php echo $this->getForm()->renderField('language'); ?>
                        </div>
                    </div>
                </div>
            </div>
            <?php echo HTMLHelper::_('uitab.endTab'); ?>

            <?php if ( ! $isModal && $assoc) : ?>
                <?php echo HTMLHelper::_('uitab.addTab', 'myTab', 'associations', Text::_('JGLOBAL_FIELDSET_ASSOCIATIONS')); ?>
                <?php echo $this->loadTemplate('associations'); ?>
                <?php echo HTMLHelper::_('uitab.endTab'); ?>
            <?php elseif ($isModal && $assoc) : ?>
                <div class="hidden"><?php echo $this->loadTemplate('associations'); ?></div>
            <?php endif; ?>
            
            <?php echo LayoutHelper::render('joomla.edit.params', $this); ?>

            <?php echo HTMLHelper::_('uitab.endTabSet'); ?>
        </div>

            <input type="hidden" name="task" value="">
        <?php echo HTMLHelper::_('form.token'); ?>
    </form>

</div>

### [Changing administrator/components/com\_foos/tmpl/foos/default.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_6 .mw-headline}

The `administrator/components/com_foos/tmpl/foos/default.php` file is
....

#### [Completed administrator/components/com\_foos/tmpl/foos/default.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_file_7 .mw-headline}

The code for the
`administrator/components/com_foos/tmpl/foos/default.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    defined('_JEXEC') or die;

    use Joomla\CMS\HTML\HTMLHelper;
    use Joomla\CMS\Language\Text;
    use Joomla\CMS\Router\Route;
    use Joomla\CMS\Language\Multilanguage;
    use Joomla\CMS\Language\Associations;
    use Joomla\CMS\Layout\LayoutHelper;

    $canChange  = true;
    $assoc = Associations::isEnabled();
    ?>
    <form action="<?php echo Route::_('index.php?option=com_foos'); ?>" method="post" name="adminForm" id="adminForm">
        <div class="row">
            <?php if (!empty($this->sidebar)) : ?>
                <div id="j-sidebar-container" class="col-md-2">
                    <?php echo $this->sidebar; ?>
                </div>
            <?php endif; ?>
            <div class="<?php if (!empty($this->sidebar)) {echo 'col-md-10'; } else { echo 'col-md-12'; } ?>">
                <div id="j-main-container" class="j-main-container">
                    <?php if (empty($this->items)) : ?>
                        <div class="alert alert-warning">
                            <?php echo Text::_('JGLOBAL_NO_MATCHING_RESULTS'); ?>
                        </div>
                    <?php else : ?>
                        <table class="table" id="fooList">
                            <thead>
                                <tr>
                                    <td style="width:1%" class="text-center">
                                        <?php echo HTMLHelper::_('grid.checkall'); ?>
                                    </td>
                                    <th scope="col" style="width:1%" class="text-center d-none d-md-table-cell">
                                        <?php echo Text::_('COM_FOOS_TABLE_TABLEHEAD_NAME'); ?>
                                    </th>
                                    <th scope="col" style="width:10%" class="d-none d-md-table-cell">
                                        <?php echo TEXT::_('JGRID_HEADING_ACCESS') ?>
                                    </th>
                                    <?php if ($assoc) : ?>
                                        <th scope="col" style="width:10%">
                                            <?php echo Text::_('COM_FOOS_HEADING_ASSOCIATION'); ?>
                                        </th>
                                    <?php endif; ?>
                                    <?php if (Multilanguage::isEnabled()) : ?>
                                        <th scope="col" style="width:10%" class="d-none d-md-table-cell">
                                            <?php echo Text::_('JGRID_HEADING_LANGUAGE'); ?>
                                        </th>
                                    <?php endif; ?>
                                    <th scope="col" style="width:1%; min-width:85px" class="text-center">
                                        <?php echo Text::_('JSTATUS'); ?>
                                    </th>
                                    <th scope="col">
                                        <?php echo Text::_('COM_FOOS_TABLE_TABLEHEAD_ID'); ?>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                            <?php
                            $n = count($this->items);
                            foreach ($this->items as $i => $item) :
                                ?>
                                <tr class="row<?php echo $i % 2; ?>">
                                    <td class="text-center">
                                        <?php echo HTMLHelper::_('grid.id', $i, $item->id); ?>
                                    </td>
                                    <td scope="row" class="has-context">
                                        <div>
                                            <?php echo $this->escape($item->name); ?>
                                        </div>
                                        <?php $editIcon = '<span class="fa fa-pencil-square mr-2" aria-hidden="true"></span>'; ?>
                                        <a class="hasTooltip" href="<?php echo Route::_('index.php?option=com_foos&task=foo.edit&id=' . (int) $item->id); ?>" title="<?php echo Text::_('JACTION_EDIT'); ?> <?php echo $this->escape(addslashes($item->name)); ?>">
                                            <?php echo $editIcon; ?><?php echo $this->escape($item->name); ?>
                                        </a>
                                        <div class="small">
                                            <?php echo Text::_('JCATEGORY') . ': ' . $this->escape($item->category_title); ?>
                                        </div>

                                    </td>
                                    <td class="small d-none d-md-table-cell">
                                        <?php echo $item->access_level; ?>
                                    </td>
                                    <?php if ($assoc) : ?>
                                    <td class="d-none d-md-table-cell">
                                        <?php if ($item->association) : ?>
                                            <?php 
                                            echo HTMLHelper::_('foosadministrator.association', $item->id); 
                                            ?>
                                        <?php endif; ?>
                                    </td>
                                    <?php endif; ?>
                                    <?php if (Multilanguage::isEnabled()) : ?>
                                        <td class="small d-none d-md-table-cell">
                                            <?php echo LayoutHelper::render('joomla.content.language', $item); ?>
                                        </td>
                                    <?php endif; ?>
                                    <td class="text-center">
                                        <div class="btn-group">
                                            <?php echo HTMLHelper::_('jgrid.published', $item->published, $i, 'foos.', $canChange, 'cb', $item->publish_up, $item->publish_down); ?>
                                        </div>    
                                    </td>
                                    <td class="d-none d-md-table-cell">
                                        <?php echo $item->id; ?>
                                    </td>
                                </tr>
                                <?php endforeach; ?>
                            </tbody>
                        </table>

                    <?php endif; ?>
                    <input type="hidden" name="task" value="">
                    <input type="hidden" name="boxchecked" value="0">
                    <?php echo HTMLHelper::_('form.token'); ?>
                </div>
            </div>
        </div>
    </form>

</div>

### [Creating administrator/components/com\_foos/Helper/AssociationsHelper.php]{#Creating_administrator.2Fcomponents.2Fcom_foos.2FHelper.2FAssociationsHelper.php .mw-headline}

The `administrator/components/com_foos/Helper/AssociationsHelper.php`
file is ....

#### [Completed administrator/components/com\_foos/Helper/AssociationsHelper.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FHelper.2FAssociationsHelper.php_file .mw-headline}

The code for the
`administrator/components/com_foos/Helper/AssociationsHelper.php` file
is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    defined('_JEXEC') or die;

    use Joomla\CMS\Layout\LayoutHelper;

    echo LayoutHelper::render('joomla.edit.associations', $this);

</div>

### [Creating administrator/components/com\_foos/sql/updates/mysql/1.15.0.sql]{#Creating_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Fupdates.2Fmysql.2F1.15.0.sql .mw-headline}

The `administrator/components/com_foos/sql/updates/mysql/1.15.0.sql`
file is ....

#### [Completed administrator/components/com\_foos/sql/updates/mysql/1.15.0.sql file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Fupdates.2Fmysql.2F1.15.0.sql_file .mw-headline}

The code for the
`administrator/components/com_foos/sql/updates/mysql/1.15.0.sql` file is
as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    ALTER TABLE `#__foos_details` ADD COLUMN  `language` char(7) NOT NULL DEFAULT '*' AFTER `alias`;

    ALTER TABLE `#__foos_details` ADD KEY `idx_language` (`language`);

</div>

### [Creating administrator/components/com\_foos/tmpl/foo/edit\_associations.php]{#Creating_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit_associations.php .mw-headline}

The `administrator/components/com_foos/tmpl/foo/edit_associations.php`
file is ....

#### [Completed administrator/components/com\_foos/tmpl/foo/edit\_associations.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit_associations.php_file .mw-headline}

The code for the
`administrator/components/com_foos/tmpl/foo/edit_associations.php` file
is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\Helper;

    defined('_JEXEC') or die;

    use Joomla\CMS\Association\AssociationExtensionHelper;
    use Joomla\CMS\Language\Associations;
    use Joomla\CMS\Table\Table;
    use Joomla\Component\Foos\Site\Helper\AssociationHelper;

    /**
     * Content associations helper.
     *
     * @since  3.7.0
     */
    class AssociationsHelper extends AssociationExtensionHelper
    {
        /**
        * The extension name
        *
        * @var     array   $extension
        *
        * @since   3.7.0
        */
        protected $extension = 'com_foos';

        /**
        * Array of item types
        *
        * @var     array   $itemTypes
        *
        * @since   3.7.0
        */
        protected $itemTypes = array('foo', 'category');

        /**
        * Has the extension association support
        *
        * @var     boolean   $associationsSupport
        *
        * @since   3.7.0
        */
        protected $associationsSupport = true;

        /**
        * Method to get the associations for a given item.
        *
        * @param   integer  $id    Id of the item
        * @param   string   $view  Name of the view
        *
        * @return  array   Array of associations for the item
        *
        * @since  1.0.0
        */
        public function getAssociationsForItem($id = 0, $view = null)
        {
            return AssociationHelper::getAssociations($id, $view);
        }

        /**
        * Get the associated items for an item
        *
        * @param   string  $typeName  The item type
        * @param   int     $id        The id of item for which we need the associated items
        *
        * @return  array
        *
        * @since   3.7.0
        */
        public function getAssociations($typeName, $id)
        {
            $type = $this->getType($typeName);

            $context    = $this->extension . '.item';
            $catidField = 'catid';

            if ($typeName === 'category')
            {
                $context    = 'com_categories.item';
                $catidField = '';
            }

            // Get the associations.
            $associations = Associations::getAssociations(
                $this->extension,
                $type['tables']['a'],
                $context,
                $id,
                'id',
                'alias',
                $catidField
            );

            return $associations;
        }

        /**
        * Get item information
        *
        * @param   string  $typeName  The item type
        * @param   int     $id        The id of item for which we need the associated items
        *
        * @return  Table|null
        *
        * @since   3.7.0
        */
        public function getItem($typeName, $id)
        {
            if (empty($id))
            {
                return null;
            }

            $table = null;

            switch ($typeName)
            {
                case 'foo':
                    $table = Table::getInstance('FooTable', 'Joomla\\Component\\Foos\\Administrator\\Table\\');
                    break;

                case 'category':
                    $table = Table::getInstance('Category');
                    break;
            }

            if (empty($table))
            {
                return null;
            }

            $table->load($id);

            return $table;
        }

        /**
        * Get information about the type
        *
        * @param   string  $typeName  The item type
        *
        * @return  array  Array of item types
        *
        * @since   3.7.0
        */
        public function getType($typeName = '')
        {
            $fields  = $this->getFieldsTemplate();
            $tables  = array();
            $joins   = array();
            $support = $this->getSupportTemplate();
            $title   = '';

            if (in_array($typeName, $this->itemTypes))
            {
                switch ($typeName)
                {
                    case 'foo':
                        $fields['title'] = 'a.name';
                        $fields['state'] = 'a.published';

                        $support['state'] = true;
                        $support['acl'] = true;
                        $support['category'] = true;
                        $support['save2copy'] = true;

                        $tables = array(
                            'a' => '#__foos_details'
                        );

                        $title = 'foo';
                        break;

                    case 'category':
                        $fields['created_user_id'] = 'a.created_user_id';
                        $fields['ordering'] = 'a.lft';
                        $fields['level'] = 'a.level';
                        $fields['catid'] = '';
                        $fields['state'] = 'a.published';

                        $support['state'] = true;
                        $support['acl'] = true;
                        $support['checkout'] = true;
                        $support['level'] = true;

                        $tables = array(
                            'a' => '#__categories'
                        );

                        $title = 'category';
                        break;
                }
            }

            return array(
                'fields'  => $fields,
                'support' => $support,
                'tables'  => $tables,
                'joins'   => $joins,
                'title'   => $title
            );
        }
    }

</div>

\

[Test your component]{#Test_your_component_16 .mw-headline}
-----------------------------------------------------------

Now you can zip all files and install them via Joomla Extension Manager.
It is also important that you have more than one language installed and
that the System - Language Filter plugin is enabled. Furthermore, it is
necessary that you create a content language.

[![As j4 t 15a
1.png](/images/thumb/1/11/As_j4_t_15a_1.png/700px-As_j4_t_15a_1.png){width="700"
height="341"
srcset="/images/thumb/1/11/As_j4_t_15a_1.png/1050px-As_j4_t_15a_1.png 1.5x, /images/1/11/As_j4_t_15a_1.png 2x"}](/File:As_j4_t_15a_1.png){.image}

You have to run a new installation or fix the database due to the
changes in the database.

[![As j4 t 15a
2.png](/images/thumb/0/06/As_j4_t_15a_2.png/700px-As_j4_t_15a_2.png){width="700"
height="341"
srcset="/images/thumb/0/06/As_j4_t_15a_2.png/1050px-As_j4_t_15a_2.png 1.5x, /images/0/06/As_j4_t_15a_2.png 2x"}](/File:As_j4_t_15a_2.png){.image}

After that you see a new tab with the name associations. Here you can
select an association.

[![As j4 t 15a
3.png](/images/thumb/9/97/As_j4_t_15a_3.png/700px-As_j4_t_15a_3.png){width="700"
height="341"
srcset="/images/thumb/9/97/As_j4_t_15a_3.png/1050px-As_j4_t_15a_3.png 1.5x, /images/9/97/As_j4_t_15a_3.png 2x"}](/File:As_j4_t_15a_3.png){.image}

[![As j4 t 15a
4.png](/images/thumb/9/91/As_j4_t_15a_4.png/700px-As_j4_t_15a_4.png){width="700"
height="341"
srcset="/images/thumb/9/91/As_j4_t_15a_4.png/1050px-As_j4_t_15a_4.png 1.5x, /images/9/91/As_j4_t_15a_4.png 2x"}](/File:As_j4_t_15a_4.png){.image}

At the moment all items are offered. Even those who are in the same
language. It would be ideal if only the items are offered, which also
match the linked language. We will do that later.

In the default view of com\_foo you can see a column where the
associations are shown.

[![As j4 t 15a
5.png](/images/thumb/7/76/As_j4_t_15a_5.png/700px-As_j4_t_15a_5.png){width="700"
height="341"
srcset="/images/thumb/7/76/As_j4_t_15a_5.png/1050px-As_j4_t_15a_5.png 1.5x, /images/7/76/As_j4_t_15a_5.png 2x"}](/File:As_j4_t_15a_5.png){.image}

And you can translate the items with the help of the component
Multilingual Assocciations.

[![As j4 t 15a
6.png](/images/thumb/d/d1/As_j4_t_15a_6.png/700px-As_j4_t_15a_6.png){width="700"
height="341"
srcset="/images/thumb/d/d1/As_j4_t_15a_6.png/1050px-As_j4_t_15a_6.png 1.5x, /images/d/d1/As_j4_t_15a_6.png 2x"}](/File:As_j4_t_15a_6.png){.image}

\

[Example in Joomla!]{#Example_in_Joomla.21_7 .mw-headline}
----------------------------------------------------------

[Component Contents]{#Component_Contents_17 .mw-headline}
---------------------------------------------------------

At this point in the tutorial, your component should contain the
following files:

  ----- --------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------
  1     administrator/components/com\_foos/Controller/DisplayController.php         this is the administrator entry point to the Foo component                                                                                                                            unchanged
  7     administrator/components/com\_foos/Controller/FooController.php             this is the entry point to the Foo component                                                                                                                                          unchanged
  1     administrator/components/com\_foos/Extension/FoosComponent.php              the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  7     administrator/components/com\_foos/Field/FooField.php                       the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  7     administrator/components/com\_foos/Model/FooModel.php                       this is the model of the Foo component item                                                                                                                                           unchanged
  6     administrator/components/com\_foos/Model/FoosModel.php                      this is the model of the Foo component                                                                                                                                                unchanged
  1     administrator/components/com\_foos/Service/HTML/AdministratorService.php    the html service see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                                unchanged
  7     administrator/components/com\_foos/Table/FooTable.php                       the database table                                                                                                                                                                    unchanged
  1     administrator/components/com\_foos/View/Foos/HtmlView.php                   file representing the view in the back end                                                                                                                                            unchanged
  1     administrator/components/com\_foos/services/provider.php                    the service provider interface see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                  unchanged
  6     administrator/components/com\_foos/sql/install.mysql.utf8.sql               During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           unchanged
  6     administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql             During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           unchanged
  7     administrator/components/com\_foos/forms/foo.xml                            the default form in the back end                                                                                                                                                      unchanged
  7     administrator/components/com\_foos/tmpl/foo/edit.php                        the default view in the back end                                                                                                                                                      unchanged
  7     administrator/components/com\_foos/tmpl/foo/modal.php                       the default view in the back end                                                                                                                                                      unchanged
  1     administrator/components/com\_foos/tmpl/foos/default.php                    the default view in the back end                                                                                                                                                      unchanged
  7     administrator/components/com\_foos/tmpl/foos/modal.php                      the default view in the back end                                                                                                                                                      unchanged
  1     administrator/components/com\_foos/foos.xml                                 this is an XML (manifest) file that tells Joomla! how to install our component.                                                                                                       unchanged
  1     administrator/components/com\_foos/script.php                               the installer script                                                                                                                                                                  unchanged
  8     administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini       the language file                                                                                                                                                                     unchanged
  8     administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini   the language file                                                                                                                                                                     unchanged
  9     administrator/components/com\_foos/config.php                               the configuration                                                                                                                                                                     unchanged
  10    administrator/components/com\_foos/access.xml                               the ACL file for permissen handling                                                                                                                                                   unchanged
  14a   administrator/components/com\_foos/Helper/FooHelper.php                     the helper file                                                                                                                                                                       unchanged
  11a   administrator/components/com\_foos/Rule/LetterRule.php                      the server side validation rule                                                                                                                                                       unchanged
  15    administrator/components/com\_foos/Helper/AssociationsHelper.php            the helper file for associations                                                                                                                                                      new
  15    administrator/components/com\_foos/tmpl/foo/edit\_associations.ph           the template for editing associations                                                                                                                                                 new
  2     components/com\_foos/Controller/DisplayController.php                       this is the frond end entry point to the Foo component                                                                                                                                unchanged
  4     components/com\_foos/Model/FooModel.php                                     this is the frond end model for the Foo component                                                                                                                                     unchanged
  2     components/com\_foos/View/Foo/HtmlView.php                                  file representing the view in the frond end                                                                                                                                           unchanged
  7     components/com\_foos/View/Foos/HtmlView.php                                 file representing the view in the frond end                                                                                                                                           unchanged
  2     components/com\_foos/tmpl/foo/default.php                                   the default view in the frond end                                                                                                                                                     unchanged
  3     components/com\_foos/tmpl/foo/default.xml                                   the xml for the menu item                                                                                                                                                             unchanged
  8     components/com\_foos/language/en-GB/en-GB.com\_foos.ini                     the language file                                                                                                                                                                     unchanged
  8     components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini                 the language file                                                                                                                                                                     unchanged
  7     media/com\_foos/js/admin-foos-modal.js                                      the javascript file                                                                                                                                                                   unchanged
  11b   media/com\_foos/js/admin-foos-letter.js                                     the client side validation rule                                                                                                                                                       unchanged
  ----- --------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------

\

[Conclusion]{#Conclusion_17 .mw-headline}
-----------------------------------------

Your component is now fit for Multilingual Website. You support the
Joomla own functions. In the next chapter we will make this even more
user-friendly.

\

\

\

\

\

\

\

\

\

\

\

\

\

[Adding Associations II - Part 15b]{#Adding_Associations_II_-_Part_15b .mw-headline}
====================================================================================

[Requirements]{#Requirements_18 .mw-headline}
---------------------------------------------

You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev)

[File Structure]{#File_Structure_18 .mw-headline}
-------------------------------------------------

### [Changing administrator/components/com\_foos/Field/Modal/FooField.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FField.2FModal.2FFooField.php .mw-headline}

The `administrator/components/com_foos/Field/Modal/FooField.php` file is
....

#### [Completed administrator/components/com\_foos/Field/Modal/FooField.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FField.2FModal.2FFooField.php_file_2 .mw-headline}

The code for the
`administrator/components/com_foos/Field/Modal/FooField.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\Field\Modal;

    defined('JPATH_BASE') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\Form\FormField;
    use Joomla\CMS\HTML\HTMLHelper;
    use Joomla\CMS\Language\Text;
    use Joomla\CMS\Session\Session;

    /**
     * Supports a modal foo picker.
     *
     * @since  1.0
     */
    class FooField extends FormField
    {
        /**
        * The form field type.
        *
        * @var     string
        * @since   1.0
        */
        protected $type = 'Modal_Foo';

        /**
        * Method to get the field input markup.
        *
        * @return  string  The field input markup.
        *
        * @since   1.0
        */
        protected function getInput()
        {
            $allowClear  = ((string) $this->element['clear'] != 'false');
            $allowSelect = ((string) $this->element['select'] != 'false');

            // The active foo id field.
            $value = (int) $this->value > 0 ? (int) $this->value : '';

            // Create the modal id.
            $modalId = 'Foo_' . $this->id;

            // Add the modal field script to the document head.
            HTMLHelper::_('script', 'system/fields/modal-fields.min.js', array('version' => 'auto', 'relative' => true));

            // Script to proxy the select modal function to the modal-fields.js file.
            if ($allowSelect)
            {
                static $scriptSelect = null;

                if (is_null($scriptSelect))
                {
                    $scriptSelect = array();
                }

                if (!isset($scriptSelect[$this->id]))
                {
                    Factory::getDocument()->addScriptDeclaration("
                   function jSelectFoo_" . $this->id . "(id, title, object) {
                       window.processModalSelect('Foo', '" . $this->id . "', id, title, '', object);
                   }
                   "
                    );

                    $scriptSelect[$this->id] = true;
                }
            }

            // Setup variables for display.
            $linkFoos = 'index.php?option=com_foos&amp;view=foos&amp;layout=modal&amp;tmpl=component&amp;' . Session::getFormToken() . '=1';
            $linkFoo  = 'index.php?option=com_foos&amp;view=foo&amp;layout=modal&amp;tmpl=component&amp;' . Session::getFormToken() . '=1';
            $modalTitle   = Text::_('COM_FOOS_CHANGE_FOO');

           if (isset($this->element['language']))
           {
               $linkFoos .= '&amp;forcedLanguage=' . $this->element['language'];
               $linkFoo   .= '&amp;forcedLanguage=' . $this->element['language'];
               $modalTitle     .= ' &#8212; ' . $this->element['label'];
           }

            $urlSelect = $linkFoos . '&amp;function=jSelectFoo_' . $this->id;

            if ($value)
            {
                $db    = Factory::getDbo();
                $query = $db->getQuery(true)
                    ->select($db->quoteName('name'))
                    ->from($db->quoteName('#__foos_details'))
                    ->where($db->quoteName('id') . ' = ' . (int) $value);
                $db->setQuery($query);

                try
                {
                    $title = $db->loadResult();
                }
                catch (\RuntimeException $e)
                {
                    Factory::getApplication()->enqueueMessage($e->getMessage(), 'error');
                }
            }

            $title = empty($title) ? Text::_('COM_FOOS_SELECT_A_FOO') : htmlspecialchars($title, ENT_QUOTES, 'UTF-8');

            // The current foo display field.
            $html  = '';

            if ($allowSelect || $allowNew || $allowEdit || $allowClear)
            {
                $html .= '<span class="input-group">';
            }

            $html .= '<input class="form-control" id="' . $this->id . '_name" type="text" value="' . $title . '" disabled="disabled" size="35">';

            if ($allowSelect || $allowNew || $allowEdit || $allowClear)
            {
                $html .= '<span class="input-group-append">';
            }

            // Select foo button
            if ($allowSelect)
            {
                $html .= '<button'
                    . ' class="btn btn-primary hasTooltip' . ($value ? ' hidden' : '') . '"'
                    . ' id="' . $this->id . '_select"'
                    . ' data-toggle="modal"'
                    . ' type="button"'
                    . ' data-target="#ModalSelect' . $modalId . '"'
                    . ' title="' . HTMLHelper::tooltipText('COM_FOOS_CHANGE_FOO') . '">'
                    . '<span class="icon-file" aria-hidden="true"></span> ' . Text::_('JSELECT')
                    . '</button>';
            }

            // Clear foo button
            if ($allowClear)
            {
                $html .= '<button'
                    . ' class="btn btn-secondary' . ($value ? '' : ' hidden') . '"'
                    . ' id="' . $this->id . '_clear"'
                    . ' type="button"'
                    . ' onclick="window.processModalParent(\'' . $this->id . '\'); return false;">'
                    . '<span class="icon-remove" aria-hidden="true"></span>' . Text::_('JCLEAR')
                    . '</button>';
            }

            if ($allowSelect || $allowNew || $allowEdit || $allowClear)
            {
                $html .= '</span></span>';
            }

            // Select foo modal
            if ($allowSelect)
            {
                $html .= HTMLHelper::_(
                    'bootstrap.renderModal',
                    'ModalSelect' . $modalId,
                    array(
                        'title'       => $modalTitle,
                        'url'         => $urlSelect,
                        'height'      => '400px',
                        'width'       => '800px',
                        'bodyHeight'  => 70,
                        'modalWidth'  => 80,
                        'footer'      => '<a role="button" class="btn btn-secondary" data-dismiss="modal" aria-hidden="true">'
                                            . Text::_('JLIB_HTML_BEHAVIOR_CLOSE') . '</a>',
                    )
                );
            }

            // Note: class='required' for client side validation.
            $class = $this->required ? ' class="required modal-value"' : '';

            $html .= '<input type="hidden" id="' . $this->id . '_id"' . $class . ' data-required="' . (int) $this->required . '" name="' . $this->name
                . '" data-text="' . htmlspecialchars(Text::_('COM_FOOS_SELECT_A_FOO', true), ENT_COMPAT, 'UTF-8') . '" value="' . $value . '">';

            return $html;
        }

        /**
        * Method to get the field label markup.
        *
        * @return  string  The field label markup.
        *
        * @since   1.0
        */
        protected function getLabel()
        {
            return str_replace($this->id, $this->id . '_name', parent::getLabel());
        }
    }

</div>

### [Changing administrator/components/com\_foos/Model/FoosModel.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_5 .mw-headline}

The `administrator/components/com_foos/Model/FoosModel.php` file is ....

#### [Completed administrator/components/com\_foos/Model/FoosModel.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_file_6 .mw-headline}

The code for the `administrator/components/com_foos/Model/FoosModel.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\Model;

    defined('_JEXEC') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\Language\Associations;
    use Joomla\CMS\MVC\Model\ListModel;

    /**
     * Methods supporting a list of foo records.
     *
     * @since  1.0
     */
    class FoosModel extends ListModel
    {
        /**
        * Constructor.
        *
        * @param   array  $config  An optional associative array of configuration settings.
        *
        * @see     \JControllerLegacy
        * @since   1.0
        */
        public function __construct($config = array())
        {
            parent::__construct($config);
        }
        /**
        * Build an SQL query to load the list data.
        *
        * @return  \JDatabaseQuery
        *
        * @since   1.0
        */
        protected function getListQuery()
        {
            // Create a new query object.
            $db = $this->getDbo();
            $query = $db->getQuery(true);

            // Select the required fields from the table.
            $query->select(
                $db->quoteName(array('a.id', 'a.name', 'a.catid', 'a.access', 'a.published', 'a.publish_up', 'a.publish_down', 'a.language'))
            );

            // Select the required fields from the table.
            $query->select(
                $this->getState(
                    'list.select',
                    'a.id AS id,'
                    . 'a.name AS name,'
                    . 'a.access,'
                    . 'a.language,'
                    . 'a.state AS state,'
                    . 'a.catid AS catid,'
                    . 'a.published AS published,'
                    . 'a.publish_up,'
                    . 'a.publish_down'
                )
            );

            $query->from($db->quoteName('#__foos_details', 'a'));

            // Join over the asset groups.
            $query->select($db->quoteName('ag.title', 'access_level'))
                ->join(
                    'LEFT',
                    $db->quoteName('#__viewlevels', 'ag') . ' ON ' . $db->quoteName('ag.id') . ' = ' . $db->quoteName('a.access')
                );

            // Join over the categories.
            $query->select($db->quoteName('c.title', 'category_title'))
                ->join(
                    'LEFT',
                    $db->quoteName('#__categories', 'c') . ' ON ' . $db->quoteName('c.id') . ' = ' . $db->quoteName('a.catid')
                );

            // Join over the language
            $query->select($db->quoteName('l.title', 'language_title'))
                ->select($db->quoteName('l.image', 'language_image'))
                ->join(
                    'LEFT',
                    $db->quoteName('#__languages', 'l') . ' ON ' . $db->quoteName('l.lang_code') . ' = ' . $db->quoteName('a.language')
                );

            // Join over the associations.
            $assoc = Associations::isEnabled();

            if ($assoc)
            {
                $query->select('COUNT(' . $db->quoteName('asso2.id') . ') > 1 as ' . $db->quoteName('association'))
                    ->join(
                        'LEFT',
                        $db->quoteName('#__associations', 'asso') . ' ON ' . $db->quoteName('asso.id') . ' = ' . $db->quoteName('a.id')
                        . ' AND ' . $db->quoteName('asso.context') . ' = ' . $db->quote('com_foos.item')
                    )
                    ->join(
                        'LEFT',
                        $db->quoteName('#__associations', 'asso2') . ' ON ' . $db->quoteName('asso2.key') . ' = ' . $db->quoteName('asso.key')
                    )
                    ->group(
                        $db->quoteName(
                            array(
                                'a.id',
                                'a.name',
                                'a.catid',
                                'a.published',
                                'a.access',
                                'a.language',
                                'a.publish_up',
                                'a.publish_down',
                                'l.title' ,
                                'l.image' ,
                                'ag.title' ,
                                'c.title'
                            )
                        )
                    );
            }

          // Filter on the language.
           if ($language = $this->getState('filter.language'))
           {
               $query->where($db->quoteName('a.language') . ' = :language');
               $query->bind(':language', $language);
           }
           
           return $query;
       }

       /**
       * Method to auto-populate the model state.
       *
       * Note. Calling getState in this method will result in recursion.
       *
       * @param   string  $ordering   An optional ordering field.
       * @param   string  $direction  An optional direction (asc|desc).
       *
       * @return  void
       *
       * @since   1.0
       */
       protected function populateState($ordering = 'a.name', $direction = 'asc')
       {
           $app = Factory::getApplication();

           $forcedLanguage = $app->input->get('forcedLanguage', '', 'cmd');

           // Adjust the context to support modal layouts.
           if ($layout = $app->input->get('layout'))
           {
               $this->context .= '.' . $layout;
           }

           // Adjust the context to support forced languages.
           if ($forcedLanguage)
           {
               $this->context .= '.' . $forcedLanguage;
           }

           // List state information.
           parent::populateState($ordering, $direction);

           // Force a language.
           if (!empty($forcedLanguage))
           {
               $this->setState('filter.language', $forcedLanguage);
           }
       }
    }

</div>

### [Changing administrator/components/com\_foos/View/Foo/HtmlView.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoo.2FHtmlView.php .mw-headline}

The `administrator/components/com_foos/View/Foo/HtmlView.php` file is
....

#### [Completed administrator/components/com\_foos/View/Foo/HtmlView.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoo.2FHtmlView.php_file .mw-headline}

The code for the
`administrator/components/com_foos/View/Foo/HtmlView.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\View\Foo;

    defined('_JEXEC') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\Language\Text;
    use Joomla\CMS\MVC\View\HtmlView as BaseHtmlView;
    use Joomla\CMS\Toolbar\ToolbarHelper;

    /**
     * View to edit a foo.
     *
     * @since  1.0
     */
    class HtmlView extends BaseHtmlView
    {
        /**
        * The \JForm object
        *
        * @var  \JForm
        */
        protected $form;

        /**
        * The active item
        *
        * @var  object
        */
        protected $item;

        /**
        * Display the view.
        *
        * @param   string  $tpl  The name of the template file to parse; automatically searches through the template paths.
        *
        * @return  mixed  A string if successful, otherwise an Error object.
        */
        public function display($tpl = null)
        {
            $this->item = $this->get('Item');

          // If we are forcing a language in modal (used for associations).
           if ($this->getLayout() === 'modal' && $forcedLanguage = Factory::getApplication()->input->get('forcedLanguage', '', 'cmd'))
           {
               // Set the language field to the forcedLanguage and disable changing it.
               $this->form->setValue('language', null, $forcedLanguage);
               $this->form->setFieldAttribute('language', 'readonly', 'true');

               // Only allow to select categories with All language or with the forced language.
               $this->form->setFieldAttribute('catid', 'language', '*,' . $forcedLanguage);
           }

         $this->addToolbar();

            return parent::display($tpl);
        }

        /**
        * Add the page title and toolbar.
        *
        * @return  void
        *
        * @since   1.0
        */
        protected function addToolbar()
        {
            Factory::getApplication()->input->set('hidemainmenu', true);

            $isNew = ($this->item->id == 0);

            ToolbarHelper::title($isNew ? Text::_('COM_FOOS_MANAGER_FOO_NEW') : Text::_('COM_FOOS_MANAGER_FOO_EDIT'), 'address foo');

            ToolbarHelper::apply('foo.apply');
            ToolbarHelper::cancel('foo.cancel', 'JTOOLBAR_CLOSE');
        }
    }

</div>

### [Changing administrator/components/com\_foos/View/Foos/HtmlView.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_7 .mw-headline}

The `administrator/components/com_foos/View/Foos/HtmlView.php` file is
....

#### [Completed administrator/components/com\_foos/View/Foos/HtmlView.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_file_8 .mw-headline}

The code for the
`administrator/components/com_foos/View/Foos/HtmlView.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php


    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\View\Foos;

    defined('_JEXEC') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\HTML\HTMLHelper;
    use Joomla\CMS\Helper\ContentHelper;
    use Joomla\CMS\Language\Text;
    use Joomla\CMS\MVC\View\HtmlView as BaseHtmlView;
    use Joomla\CMS\Toolbar\Toolbar;
    use Joomla\CMS\Toolbar\ToolbarHelper;
    use Joomla\Component\Foos\Administrator\Helper\FooHelper;
    use Joomla\CMS\Language\Multilanguage;


    /**
     * View class for a list of foos.
     *
     * @since  1.0
     */
    class HtmlView extends BaseHtmlView
    {
        /**
        * An array of items
        *
        * @var  array
        */
        protected $items;

        /**
        * The sidebar markup
        *
        * @var  string
        */
        protected $sidebar;

        /**
        * Display the view.
        *
        * @param   string  $tpl  The name of the template file to parse; automatically searches through the template paths.
        *
        * @return  mixed  A string if successful, otherwise an Error object.
        */
        public function display($tpl = null)
        {
            $this->items = $this->get('Items');

           // We don't need toolbar in the modal window.
           if ($this->getLayout() !== 'modal')
           {
               FooHelper::addSubmenu('foos');
               $this->addToolbar();
               $this->sidebar = \JHtmlSidebar::render();

               // We do not need to filter by language when multilingual is disabled
               if (!Multilanguage::isEnabled())
               {
                   unset($this->activeFilters['language']);
                   $this->filterForm->removeField('language', 'filter');
               }
           }
           else
           {
               // In article associations modal we need to remove language filter if forcing a language.
               // We also need to change the category filter to show show categories with All or the forced language.
               if ($forcedLanguage = Factory::getApplication()->input->get('forcedLanguage', '', 'CMD'))
               {
                   // If the language is forced we can't allow to select the language, so transform the language selector filter into a hidden field.
                   $languageXml = new \SimpleXMLElement('<field name="language" type="hidden" default="' . $forcedLanguage . '" />');
               }
           }

            return parent::display($tpl);
        }

        /**
        * Add the page title and toolbar.
        *
        * @return  void
        *
        * @since   1.0
        */
        protected function addToolbar()
        {
            $canDo = ContentHelper::getActions('com_foos');

            // Get the toolbar object instance
            $toolbar = Toolbar::getInstance('toolbar');

            ToolbarHelper::title(Text::_('COM_FOOS_MANAGER_FOOS'), 'address foo');

            if ($canDo->get('core.create'))
            {
                $toolbar->addNew('foo.add');
            }

            if ($canDo->get('core.options'))
            {
                $toolbar->preferences('com_foos');
            }

            HTMLHelper::_('sidebar.setAction', 'index.php?option=com_foos');
        }
    }

</div>

### [Changing administrator/components/com\_foos/foos.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_14 .mw-headline}

The `administrator/components/com_foos/foos.xml` file is ....

#### [Completed administrator/components/com\_foos/foos.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_14 .mw-headline}

The code for the `administrator/components/com_foos/foos.xml` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8" ?>
    <extension type="component" method="upgrade">
        <name>COM_FOOS</name>
        <creationDate>[DATE]</creationDate>
        <author>[AUTHOR]</author>
        <authorEmail>[AUTHOR_EMAIL]</authorEmail>
        <authorUrl>[AUTHOR_URL]</authorUrl>
        <copyright>[COPYRIGHT]</copyright>
        <license>GNU General Public License version 2 or later;</license>
      <version>1.15.1</version>
     <description>COM_FOOS_XML_DESCRIPTION</description>
        <namespace>Joomla\Component\Foos</namespace>
        <scriptfile>script.php</scriptfile>
        <install> <!-- Runs on install -->
            <sql>
                <file driver="mysql" charset="utf8">sql/install.mysql.utf8.sql</file>
            </sql>
        </install>
        <uninstall> <!-- Runs on uninstall -->
            <sql>
                <file driver="mysql" charset="utf8">sql/uninstall.mysql.utf8.sql</file>
            </sql>
        </uninstall>
        <update>  <!-- Runs on update -->
            <schemas>
                <schemapath type="mysql">sql/updates/mysql</schemapath>
            </schemas>
        </update>
        <!-- Frond-end files -->
        <files folder="components/com_foos">
            <folder>Controller</folder>
            <folder>Model</folder>
            <folder>View</folder>
            <folder>tmpl</folder>
            <folder>language</folder>
        </files>
        <media folder="media/com_foos" destination="com_foos">
            <folder>js</folder>
        </media>
        <!-- Back-end files -->
        <administration>
            <!-- Menu entries -->
            <menu view="foos">COM_FOOS</menu>
            <submenu>
                <menu link="option=com_foos">COM_FOOS</menu>
                <menu link="option=com_categories&amp;extension=com_foos"
                    view="categories" img="class:foos-cat" alt="Foos/Categories">JCATEGORY</menu>
            </submenu>
            <files folder="administrator/components/com_foos">
                <filename>access.xml</filename>
                <filename>config.xml</filename>
                <filename>foos.xml</filename>
                <folder>Controller</folder>
                <folder>Extension</folder>
                <folder>Model</folder>
                <folder>Rule</folder>
                <folder>Service</folder>
                <folder>View</folder>
                <folder>services</folder>
                <folder>tmpl</folder>
                <folder>sql</folder>
                <folder>language</folder>
            </files>
        </administration>
    </extension>

</div>

[Test your component]{#Test_your_component_17 .mw-headline}
-----------------------------------------------------------

Now you can zip all files and install them via Joomla Extension Manager.

Now the items in the modal are filtered.

[![As j4 t 15b
1.png](/images/thumb/b/b2/As_j4_t_15b_1.png/700px-As_j4_t_15b_1.png){width="700"
height="341"
srcset="/images/thumb/b/b2/As_j4_t_15b_1.png/1050px-As_j4_t_15b_1.png 1.5x, /images/b/b2/As_j4_t_15b_1.png 2x"}](/File:As_j4_t_15b_1.png){.image}

\

[Component Contents]{#Component_Contents_18 .mw-headline}
---------------------------------------------------------

[Adding Ordering and Filter - Part 16]{#Adding_Ordering_and_Filter_-_Part_16 .mw-headline}
==========================================================================================

[Requirements]{#Requirements_19 .mw-headline}
---------------------------------------------

You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev)

[File Structure]{#File_Structure_19 .mw-headline}
-------------------------------------------------

### [Changing administrator/components/com\_foos/Model/FoosModel.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_6 .mw-headline}

The `administrator/components/com_foos/Model/FoosModel.php` file is ....

#### [Completed administrator/components/com\_foos/Model/FoosModel.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_file_7 .mw-headline}

The code for the `administrator/components/com_foos/Model/FoosModel.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\Model;

    defined('_JEXEC') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\Language\Associations;
    use Joomla\CMS\MVC\Model\ListModel;

    /**
     * Methods supporting a list of foo records.
     *
     * @since  1.0
     */
    class FoosModel extends ListModel
    {
        /**
        * Constructor.
        *
        * @param   array  $config  An optional associative array of configuration settings.
        *
        * @see     \JControllerLegacy
        * @since   1.0
        */
        public function __construct($config = array())
        {
            if (empty($config['filter_fields']))
            {
                $config['filter_fields'] = array(
                    'id', 'a.id',
                    'name', 'a.name',
                    'catid', 'a.catid', 'category_id', 'category_title',
                    'published', 'a.published',
                    'access', 'a.access', 'access_level',
                    'ordering', 'a.ordering',
                    'language', 'a.language', 'language_title',
                    'publish_up', 'a.publish_up',
                    'publish_down', 'a.publish_down',
                );

                $assoc = Associations::isEnabled();

                if ($assoc)
                {
                    $config['filter_fields'][] = 'association';
                }
            }

            parent::__construct($config);
        }

        /**
        * Build an SQL query to load the list data.
        *
        * @return  \JDatabaseQuery
        *
        * @since   1.0
        */
        protected function getListQuery()
        {
            // Create a new query object.
            $db = $this->getDbo();
            $query = $db->getQuery(true);

            // Select the required fields from the table.
            $query->select(
                $this->getState(
                    'list.select',
                    'a.id AS id,'
                    . 'a.name AS name,'
                    . 'a.access,'
                    . 'a.language,'
                    . 'a.ordering AS ordering,'
                    . 'a.state AS state,'
                    . 'a.catid AS catid,'
                    . 'a.published AS published,'
                    . 'a.publish_up,'
                    . 'a.publish_down'
                )
            );

            $query->from($db->quoteName('#__foos_details', 'a'));

            // Join over the asset groups.
            $query->select($db->quoteName('ag.title', 'access_level'))
                ->join(
                    'LEFT',
                    $db->quoteName('#__viewlevels', 'ag') . ' ON ' . $db->quoteName('ag.id') . ' = ' . $db->quoteName('a.access')
                );

            // Join over the categories.
            $query->select($db->quoteName('c.title', 'category_title'))
                ->join(
                    'LEFT',
                    $db->quoteName('#__categories', 'c') . ' ON ' . $db->quoteName('c.id') . ' = ' . $db->quoteName('a.catid')
                );

            // Join over the language
            $query->select($db->quoteName('l.title', 'language_title'))
                ->select($db->quoteName('l.image', 'language_image'))
                ->join(
                    'LEFT',
                    $db->quoteName('#__languages', 'l') . ' ON ' . $db->quoteName('l.lang_code') . ' = ' . $db->quoteName('a.language')
                );

            // Join over the associations.
            $assoc = Associations::isEnabled();

            if ($assoc)
            {
                $query->select('COUNT(' . $db->quoteName('asso2.id') . ') > 1 as ' . $db->quoteName('association'))
                    ->join(
                        'LEFT',
                        $db->quoteName('#__associations', 'asso') . ' ON ' . $db->quoteName('asso.id') . ' = ' . $db->quoteName('a.id')
                        . ' AND ' . $db->quoteName('asso.context') . ' = ' . $db->quote('com_foos.item')
                    )
                    ->join(
                        'LEFT',
                        $db->quoteName('#__associations', 'asso2') . ' ON ' . $db->quoteName('asso2.key') . ' = ' . $db->quoteName('asso.key')
                    )
                    ->group(
                        $db->quoteName(
                            array(
                                'a.id',
                                'a.name',
                                'a.catid',
                                'a.published',
                                'a.access',
                                'a.language',
                                'a.publish_up',
                                'a.publish_down',
                                'l.title' ,
                                'l.image' ,
                                'ag.title' ,
                                'c.title'
                            )
                        )
                    );
            }

            // Filter by access level.
            if ($access = $this->getState('filter.access'))
            {
                $query->where($db->quoteName('a.access') . ' = ' . (int) $access);
            }

            // Filter by published state
            $published = (string) $this->getState('filter.published');

            if (is_numeric($published))
            {
                $query->where($db->quoteName('a.published') . ' = ' . (int) $published);
            }
            elseif ($published === '')
            {
                $query->where('(' . $db->quoteName('a.published') . ' = 0 OR ' . $db->quoteName('a.published') . ' = 1)');
            }

            // Filter by a single or group of categories.
            $categoryId = $this->getState('filter.category_id');

            if (is_numeric($categoryId))
            {
                $query->where($db->quoteName('a.catid') . ' = ' . (int) $categoryId);
            }
            elseif (is_array($categoryId))
            {
                $query->where($db->quoteName('a.catid') . ' IN (' . implode(',', ArrayHelper::toInteger($categoryId)) . ')');
            }

            // Filter by search in name.
            $search = $this->getState('filter.search');

            if (!empty($search))
            {
                if (stripos($search, 'id:') === 0)
                {
                    $query->where('a.id = ' . (int) substr($search, 3));
                }
                else
                {
                    $search = $db->quote('%' . str_replace(' ', '%', $db->escape(trim($search), true) . '%'));
                    $query->where(
                        '(' . $db->quoteName('a.name') . ' LIKE ' . $search . ')'
                    );
                }
            }

            // Filter on the language.
            if ($language = $this->getState('filter.language'))
            {
                $query->where($db->quoteName('a.language') . ' = ' . $db->quote($language));
            }

            // Add the list ordering clause.
            $orderCol = $this->state->get('list.ordering', 'a.name');
            $orderDirn = $this->state->get('list.direction', 'asc');

            if ($orderCol == 'a.ordering' || $orderCol == 'category_title')
            {
                $orderCol = $db->quoteName('c.title') . ' ' . $orderDirn . ', ' . $db->quoteName('a.ordering');
            }

            $query->order($db->escape($orderCol . ' ' . $orderDirn));

            return $query;
        }

        /**
        * Method to auto-populate the model state.
        *
        * Note. Calling getState in this method will result in recursion.
        *
        * @param   string  $ordering   An optional ordering field.
        * @param   string  $direction  An optional direction (asc|desc).
        *
        * @return  void
        *
        * @since   1.0
        */
        protected function populateState($ordering = 'a.name', $direction = 'asc')
        {
            $app = Factory::getApplication();

            $forcedLanguage = $app->input->get('forcedLanguage', '', 'cmd');

            // Adjust the context to support modal layouts.
            if ($layout = $app->input->get('layout'))
            {
                $this->context .= '.' . $layout;
            }

            // Adjust the context to support forced languages.
            if ($forcedLanguage)
            {
                $this->context .= '.' . $forcedLanguage;
            }

            // List state information.
            parent::populateState($ordering, $direction);

            // Force a language.
            if (!empty($forcedLanguage))
            {
                $this->setState('filter.language', $forcedLanguage);
            }
        }
    }

</div>

### [Changing administrator/components/com\_foos/View/Foos/HtmlView.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_8 .mw-headline}

The `administrator/components/com_foos/View/Foos/HtmlView.php` file is
....

#### [Completed administrator/components/com\_foos/View/Foos/HtmlView.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_file_9 .mw-headline}

The code for the
`administrator/components/com_foos/View/Foos/HtmlView.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php

    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\View\Foos;

    defined('_JEXEC') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\HTML\HTMLHelper;
    use Joomla\CMS\Helper\ContentHelper;
    use Joomla\CMS\Language\Text;
    use Joomla\CMS\MVC\View\HtmlView as BaseHtmlView;
    use Joomla\CMS\Toolbar\Toolbar;
    use Joomla\CMS\Toolbar\ToolbarHelper;
    use Joomla\Component\Foos\Administrator\Helper\FooHelper;
    use Joomla\CMS\Language\Multilanguage;

    /**
     * View class for a list of foos.
     *
     * @since  1.0
     */
    class HtmlView extends BaseHtmlView
    {
        /**
        * An array of items
        *
        * @var  array
        */
        protected $items;

        /**
        * The model state
        *
        * @var  \JObject
        */
        protected $state;

        /**
        * Form object for search filters
        *
        * @var  \JForm
        */
        public $filterForm;

        /**
        * The active search filters
        *
        * @var  array
        */
        public $activeFilters;

        /**
        * The sidebar markup
        *
        * @var  string
        */
        protected $sidebar;

        /**
        * Display the view.
        *
        * @param   string  $tpl  The name of the template file to parse; automatically searches through the template paths.
        *
        * @return  mixed  A string if successful, otherwise an Error object.
        */
        public function display($tpl = null)
        {
            $this->items = $this->get('Items');
            $this->filterForm = $this->get('FilterForm');
            $this->activeFilters = $this->get('ActiveFilters');
            $this->state = $this->get('State');

            // Check for errors.
            if (count($errors = $this->get('Errors')))
            {
                throw new \JViewGenericdataexception(implode("\n", $errors), 500);
            }

            // Preprocess the list of items to find ordering divisions.
            // TODO: Complete the ordering stuff with nested sets
            foreach ($this->items as &$item)
            {
                $item->order_up = true;
                $item->order_dn = true;
            }

            // We don't need toolbar in the modal window.
            if ($this->getLayout() !== 'modal')
            {
                FooHelper::addSubmenu('foos');
                $this->addToolbar();
                $this->sidebar = \JHtmlSidebar::render();

                // We do not need to filter by language when multilingual is disabled
                if (!Multilanguage::isEnabled())
                {
                    unset($this->activeFilters['language']);
                    $this->filterForm->removeField('language', 'filter');
                }
            }
            else
            {
                // In article associations modal we need to remove language filter if forcing a language.
                // We also need to change the category filter to show show categories with All or the forced language.
                if ($forcedLanguage = Factory::getApplication()->input->get('forcedLanguage', '', 'CMD'))
                {
                    // If the language is forced we can't allow to select the language, so transform the language selector filter into a hidden field.
                    $languageXml = new \SimpleXMLElement('<field name="language" type="hidden" default="' . $forcedLanguage . '" />');
                    $this->filterForm->setField($languageXml, 'filter', true);

                    // Also, unset the active language filter so the search tools is not open by default with this filter.
                    unset($this->activeFilters['language']);

                    // One last changes needed is to change the category filter to just show categories with All language or with the forced language.
                    $this->filterForm->setFieldAttribute('category_id', 'language', '*,' . $forcedLanguage, 'filter');
                }
            }

            return parent::display($tpl);
        }

        /**
        * Add the page title and toolbar.
        *
        * @return  void
        *
        * @since   1.0
        */
        protected function addToolbar()
        {
            $canDo = ContentHelper::getActions('com_foos');

            // Get the toolbar object instance
            $toolbar = Toolbar::getInstance('toolbar');

            ToolbarHelper::title(Text::_('COM_FOOS_MANAGER_FOOS'), 'address foo');

            if ($canDo->get('core.create'))
            {
                $toolbar->addNew('foo.add');
            }

            if ($canDo->get('core.options'))
            {
                $toolbar->preferences('com_foos');
            }

            HTMLHelper::_('sidebar.setAction', 'index.php?option=com_foos');
        }
        /**
        * Returns an array of fields the table can be sorted by
        *
        * @return  array  Array containing the field name to sort by as the key and display text as value
        *
        * @since   1.0
        */
        protected function getSortFields()
        {
            return array(
                'a.ordering'     => Text::_('JGRID_HEADING_ORDERING'),
                'a.published'    => Text::_('JSTATUS'),
                'a.name'         => Text::_('JGLOBAL_TITLE'),
                'category_title' => Text::_('JCATEGORY'),
                'a.access'       => Text::_('JGRID_HEADING_ACCESS'),
                'a.language'     => Text::_('JGRID_HEADING_LANGUAGE'),
                'a.id'           => Text::_('JGRID_HEADING_ID'),
            );
        }
    }

</div>

### [Changing administrator/components/com\_foos/foos.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_15 .mw-headline}

The `administrator/components/com_foos/foos.xml` file is ....

#### [Completed administrator/components/com\_foos/foos.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_15 .mw-headline}

The code for the `administrator/components/com_foos/foos.xml` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    <?xml version="1.0" encoding="utf-8" ?>
    <extension type="component" method="upgrade">
        <name>COM_FOOS</name>
        <creationDate>[DATE]</creationDate>
        <author>[AUTHOR]</author>
        <authorEmail>[AUTHOR_EMAIL]</authorEmail>
        <authorUrl>[AUTHOR_URL]</authorUrl>
        <copyright>[COPYRIGHT]</copyright>
        <license>GNU General Public License version 2 or later;</license>
        <version>1.16.0</version>
        <description>COM_FOOS_XML_DESCRIPTION</description>
        <namespace>Joomla\Component\Foos</namespace>
        <scriptfile>script.php</scriptfile>
        <install> <!-- Runs on install -->
            <sql>
                <file driver="mysql" charset="utf8">sql/install.mysql.utf8.sql</file>
            </sql>
        </install>
        <uninstall> <!-- Runs on uninstall -->
            <sql>
                <file driver="mysql" charset="utf8">sql/uninstall.mysql.utf8.sql</file>
            </sql>
        </uninstall>
        <update>  <!-- Runs on update -->
            <schemas>
                <schemapath type="mysql">sql/updates/mysql</schemapath>
            </schemas>
        </update>
        <!-- Frond-end files -->
        <files folder="components/com_foos">
            <folder>Controller</folder>
            <folder>Model</folder>
            <folder>View</folder>
            <folder>tmpl</folder>
            <folder>language</folder>
        </files>
        <media folder="media/com_foos" destination="com_foos">
            <folder>js</folder>
        </media>
        <!-- Back-end files -->
        <administration>
            <!-- Menu entries -->
            <menu view="foos">COM_FOOS</menu>
            <submenu>
                <menu link="option=com_foos">COM_FOOS</menu>
                <menu link="option=com_categories&amp;extension=com_foos"
                    view="categories" img="class:foos-cat" alt="Foos/Categories">JCATEGORY</menu>
            </submenu>
            <files folder="administrator/components/com_foos">
                <filename>access.xml</filename>
                <filename>config.xml</filename>
                <filename>foos.xml</filename>
                <folder>Controller</folder>
                <folder>Extension</folder>
                <folder>Model</folder>
                <folder>Rule</folder>
                <folder>Service</folder>
                <folder>View</folder>
                <folder>services</folder>
                <folder>tmpl</folder>
                <folder>sql</folder>
                <folder>language</folder>
            </files>
        </administration>
    </extension>

</div>

### [Changing administrator/components/com\_foos/forms/foo.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_7 .mw-headline}

The `administrator/components/com_foos/forms/foo.xml` file is ....

#### [Completed administrator/components/com\_foos/forms/foo.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_file_8 .mw-headline}

The code for the `administrator/components/com_foos/forms/foo.xml` file
is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8"?>
    <form>
        <fieldset 
            addfieldprefix="Joomla\Component\Foos\Administrator\Field" 
            addruleprefix="Joomla\Component\Foos\Administrator\Rule"
        >
            <field
                name="id"
                type="number"
                label="JGLOBAL_FIELD_ID_LABEL"
                default="0"
                class="readonly"
                readonly="true"
            />

            <field
                name="name"
                type="text"
                validate="Letter"
                class="validate-letter"
                label="COM_FOOS_FIELD_NAME_LABEL"
                size="40"
                required="true"
             />

            <field
                name="language"
                type="contentlanguage"
                label="JFIELD_LANGUAGE_LABEL"
                >
                <option value="*">JALL</option>
            </field>

            <field
                name="published"
                type="list"
                label="JSTATUS"
                default="1"
                id="published"
                class="custom-select-color-state"
                size="1"
                >
                <option value="1">JPUBLISHED</option>
                <option value="0">JUNPUBLISHED</option>
                <option value="2">JARCHIVED</option>
                <option value="-2">JTRASHED</option>
            </field>

            <field
                name="publish_up"
                type="calendar"
                label="COM_FOOS_FIELD_PUBLISH_UP_LABEL"
                translateformat="true"
                showtime="true"
                size="22"
                filter="user_utc"
            />

            <field
                name="publish_down"
                type="calendar"
                label="COM_FOOS_FIELD_PUBLISH_DOWN_LABEL"
                translateformat="true"
                showtime="true"
                size="22"
                filter="user_utc"
            />

            <field
                name="catid"
                type="categoryedit"
                label="JCATEGORY"
                extension="com_foos"
                addfieldprefix="Joomla\Component\Categories\Administrator\Field"
                required="true"
                default=""
            />

            <field
                name="access"
                type="accesslevel"
                label="JFIELD_ACCESS_LABEL"
                size="1"
            />

            <field
                name="ordering"
                type="ordering"
                label="JFIELD_ORDERING_LABEL"
                content_type="com_foos.foo"
            />

        </fieldset>
    </form>

</div>

### [Create administrator/components/com\_foos/sql/updates/mysql/1.16.0.sql]{#Create_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Fupdates.2Fmysql.2F1.16.0.sql .mw-headline}

The `administrator/components/com_foos/sql/updates/mysql/1.16.0.sql`
file is ....

#### [Completed administrator/components/com\_foos/sql/updates/mysql/1.16.0.sql file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Fupdates.2Fmysql.2F1.16.0.sql_file .mw-headline}

The code for the
`administrator/components/com_foos/sql/updates/mysql/1.16.0.sql` file is
as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    ALTER TABLE `#__foos_details` ADD COLUMN  `ordering` int(11) NOT NULL DEFAULT 0 AFTER `alias`;

</div>

### [Changing administrator/components/com\_foos/tmpl/foos/default.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_7 .mw-headline}

The `administrator/components/com_foos/tmpl/foos/default.php` file is
....

#### [Completed administrator/components/com\_foos/tmpl/foos/default.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_file_8 .mw-headline}

The code for the
`administrator/components/com_foos/tmpl/foos/default.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    defined('_JEXEC') or die;

    use Joomla\CMS\HTML\HTMLHelper;
    use Joomla\CMS\Language\Text;
    use Joomla\CMS\Router\Route;
    use Joomla\CMS\Language\Multilanguage;
    use Joomla\CMS\Language\Associations;
    use Joomla\CMS\Layout\LayoutHelper;
    use Joomla\CMS\Session\Session;

    $canChange  = true;
    $assoc = Associations::isEnabled();
    $listOrder = $this->escape($this->state->get('list.ordering'));
    $listDirn  = $this->escape($this->state->get('list.direction'));
    $saveOrder = $listOrder == 'a.ordering';

    if ($saveOrder && !empty($this->items))
    {
        $saveOrderingUrl = 'index.php?option=com_foos&task=foos.saveOrderAjax&tmpl=component&' . Session::getFormToken() . '=1';
    }
    ?>
    <form action="<?php echo Route::_('index.php?option=com_foos'); ?>" method="post" name="adminForm" id="adminForm">
        <div class="row">
            <?php if (!empty($this->sidebar)) : ?>
                <div id="j-sidebar-container" class="col-md-2">
                    <?php echo $this->sidebar; ?>
                </div>
            <?php endif; ?>
            <div class="<?php if (!empty($this->sidebar)) {echo 'col-md-10'; } else { echo 'col-md-12'; } ?>">
                <div id="j-main-container" class="j-main-container">
                    <?php echo LayoutHelper::render('joomla.searchtools.default', array('view' => $this)); ?>
                    <?php if (empty($this->items)) : ?>
                        <div class="alert alert-warning">
                            <?php echo Text::_('JGLOBAL_NO_MATCHING_RESULTS'); ?>
                        </div>
                    <?php else : ?>
                        <table class="table" id="fooList">
                            <caption id="captionTable" class="sr-only">
                                <?php echo Text::_('COM_FOOS_TABLE_CAPTION'); ?>, <?php echo Text::_('JGLOBAL_SORTED_BY'); ?>
                            </caption>
                            <thead>
                                <tr>
                                    <th scope="col" style="width:1%" class="text-center d-none d-md-table-cell">
                                        <?php echo HTMLHelper::_('searchtools.sort', '', 'a.ordering', $listDirn, $listOrder, null, 'asc', 'JGRID_HEADING_ORDERING', 'icon-menu-2'); ?>
                                    </th>
                                    <td style="width:1%" class="text-center">
                                        <?php echo HTMLHelper::_('grid.checkall'); ?>
                                    </td>
                                    <th scope="col" style="width:1%" class="text-center d-none d-md-table-cell">
                                        <?php echo HTMLHelper::_('searchtools.sort', 'COM_FOOS_TABLE_TABLEHEAD_NAME', 'a.name', $listDirn, $listOrder); ?>
                                    </th>
                                    <th scope="col" style="width:10%" class="d-none d-md-table-cell">
                                        <?php echo HTMLHelper::_('searchtools.sort', 'JGRID_HEADING_ACCESS', 'access_level', $listDirn, $listOrder); ?>
                                    </th>
                                    <?php if ($assoc) : ?>
                                        <th scope="col" style="width:10%">
                                            <?php echo HTMLHelper::_('searchtools.sort', 'COM_FOOS_HEADING_ASSOCIATION', 'association', $listDirn, $listOrder); ?>
                                        </th>
                                    <?php endif; ?>
                                    <?php if (Multilanguage::isEnabled()) : ?>
                                        <th scope="col" style="width:10%" class="d-none d-md-table-cell">
                                            <?php echo HTMLHelper::_('searchtools.sort', 'JGRID_HEADING_LANGUAGE', 'language_title', $listDirn, $listOrder); ?>
                                        </th>
                                    <?php endif; ?>
                                    <th scope="col" style="width:1%; min-width:85px" class="text-center">
                                        <?php echo HTMLHelper::_('searchtools.sort', 'JSTATUS', 'a.published', $listDirn, $listOrder); ?>
                                    </th>
                                    <th scope="col">
                                        <?php echo HTMLHelper::_('searchtools.sort', 'JGRID_HEADING_ID', 'a.id', $listDirn, $listOrder); ?>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                            <?php
                            $n = count($this->items);
                            foreach ($this->items as $i => $item) :
                                ?>
                                <tr class="row<?php echo $i % 2; ?>">
                                    <td class="order text-center d-none d-md-table-cell">
                                        <?php
                                        $iconClass = '';
                                        if (!$canChange)
                                        {
                                            $iconClass = ' inactive';
                                        }
                                        elseif (!$saveOrder)
                                        {
                                            $iconClass = ' inactive tip-top hasTooltip" title="' . HTMLHelper::_('tooltipText', 'JORDERINGDISABLED');
                                        }
                                        ?>
                                        <span class="sortable-handler<?php echo $iconClass; ?>">
                                            <span class="icon-menu" aria-hidden="true"></span>
                                        </span>
                                        <?php if ($canChange && $saveOrder) : ?>
                                            <input type="text" style="display:none" name="order[]" size="5"
                                                value="<?php echo $item->ordering; ?>" class="width-20 text-area-order">
                                        <?php endif; ?>
                                    </td>
                                    <td class="text-center">
                                        <?php echo HTMLHelper::_('grid.id', $i, $item->id); ?>
                                    </td>
                                    <td scope="row" class="has-context">
                                        <div>
                                            <?php echo $this->escape($item->name); ?>
                                        </div>
                                        <?php $editIcon = '<span class="fa fa-pencil-square mr-2" aria-hidden="true"></span>'; ?>
                                        <a class="hasTooltip" href="<?php echo Route::_('index.php?option=com_foos&task=foo.edit&id=' . (int) $item->id); ?>" title="<?php echo Text::_('JACTION_EDIT'); ?> <?php echo $this->escape(addslashes($item->name)); ?>">
                                            <?php echo $editIcon; ?><?php echo $this->escape($item->name); ?>
                                        </a>
                                        <div class="small">
                                            <?php echo Text::_('JCATEGORY') . ': ' . $this->escape($item->category_title); ?>
                                        </div>

                                    </td>
                                    <td class="small d-none d-md-table-cell">
                                        <?php echo $item->access_level; ?>
                                    </td>
                                    <?php if ($assoc) : ?>
                                    <td class="d-none d-md-table-cell">
                                        <?php if ($item->association) : ?>
                                            <?php 
                                            echo HTMLHelper::_('foosadministrator.association', $item->id); 
                                            ?>
                                        <?php endif; ?>
                                    </td>
                                    <?php endif; ?>
                                    <?php if (Multilanguage::isEnabled()) : ?>
                                        <td class="small d-none d-md-table-cell">
                                            <?php echo LayoutHelper::render('joomla.content.language', $item); ?>
                                        </td>
                                    <?php endif; ?>
                                    <td class="text-center">
                                        <div class="btn-group">
                                            <?php echo HTMLHelper::_('jgrid.published', $item->published, $i, 'foos.', $canChange, 'cb', $item->publish_up, $item->publish_down); ?>
                                        </div>    
                                    </td>
                                    <td class="d-none d-md-table-cell">
                                        <?php echo $item->id; ?>
                                    </td>
                                </tr>
                                <?php endforeach; ?>
                            </tbody>
                        </table>

                    <?php endif; ?>
                    <input type="hidden" name="task" value="">
                    <input type="hidden" name="boxchecked" value="0">
                    <?php echo HTMLHelper::_('form.token'); ?>
                </div>
            </div>
        </div>
    </form>

</div>

### [Changing administrator/components/com\_foos/tmpl/foos/modal.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fmodal.php .mw-headline}

The `administrator/components/com_foos/tmpl/foos/modal.php` file is ....

#### [Completed administrator/components/com\_foos/tmpl/foos/modal.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fmodal.php_file_2 .mw-headline}

The code for the `administrator/components/com_foos/tmpl/foos/modal.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    defined('_JEXEC') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\HTML\HTMLHelper;
    use Joomla\CMS\Language\Multilanguage;
    use Joomla\CMS\Language\Text;
    use Joomla\CMS\Layout\LayoutHelper;
    use Joomla\CMS\Router\Route;
    use Joomla\CMS\Session\Session;

    $app = Factory::getApplication();

    HTMLHelper::_('script', 'com_foos/admin-foos-modal.min.js', array('version' => 'auto', 'relative' => true));

    $function  = $app->input->getCmd('function', 'jSelectFoos');
    $onclick   = $this->escape($function);
    ?>
    <div class="container-popup">

        <form action="<?php echo Route::_('index.php?option=com_foos&view=foos&layout=modal&tmpl=component&function=' . $function . '&' . Session::getFormToken() . '=1'); ?>" method="post" name="adminForm" id="adminForm" class="form-inline">

            <?php if (empty($this->items)) : ?>
                <div class="alert alert-warning">
                    <?php echo Text::_('JGLOBAL_NO_MATCHING_RESULTS'); ?>
                </div>
            <?php else : ?>
                <table class="table table-sm">
                    <thead>
                        <caption id="captionTable" class="sr-only">
                            <?php echo Text::_('COM_FOOS_TABLE_CAPTION'); ?>, <?php echo Text::_('JGLOBAL_SORTED_BY'); ?>
                        </caption>
                        <tr>
                            <th scope="col" style="width:10%" class="d-none d-md-table-cell">
                            </th>
                            <th scope="col" style="width:1%">
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                    <?php
                    $iconStates = array(
                        -2 => 'icon-trash',
                        0  => 'icon-unpublish',
                        1  => 'icon-publish',
                        2  => 'icon-archive',
                    );
                    ?>
                    <?php foreach ($this->items as $i => $item) : ?>
                        <?php $lang = ''; ?>
                        <tr class="row<?php echo $i % 2; ?>">
                            <th scope="row">
                                <a class="select-link" href="javascript:void(0)" data-function="<?php echo $this->escape($onclick); ?>" data-id="<?php echo $item->id; ?>" data-title="<?php echo $this->escape($item->name); ?>">
                                    <?php echo $this->escape($item->name); ?>
                                </a>
                            </th>
                            <td>
                                <?php echo (int) $item->id; ?>
                            </td>
                        </tr>
                    <?php endforeach; ?>
                    </tbody>
                </table>

            <?php endif; ?>

            <input type="hidden" name="task" value="">
            <input type="hidden" name="forcedLanguage" value="<?php echo $app->input->get('forcedLanguage', '', 'CMD'); ?>">
            <?php echo HTMLHelper::_('form.token'); ?>

        </form>
    </div>

</div>

\

[Test your component]{#Test_your_component_18 .mw-headline}
-----------------------------------------------------------

Now you can zip all files and install them via Joomla Extension Manager.

You have to run a new installation or fix the database due to the
changes in the database.

These few changes allow you to sort and filter in your component. You
use Joomla functions here and do not have to invent the wheel yourself.

[Example in Joomla!]{#Example_in_Joomla.21_8 .mw-headline}
----------------------------------------------------------

[![As j4 t 16
1.png](/images/thumb/0/0a/As_j4_t_16_1.png/700px-As_j4_t_16_1.png){width="700"
height="341"
srcset="/images/thumb/0/0a/As_j4_t_16_1.png/1050px-As_j4_t_16_1.png 1.5x, /images/0/0a/As_j4_t_16_1.png 2x"}](/File:As_j4_t_16_1.png){.image}

\

[Component Contents]{#Component_Contents_19 .mw-headline}
---------------------------------------------------------

At this point in the tutorial, your component should contain the
following files:

  ----- --------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------
  1     administrator/components/com\_foos/Controller/DisplayController.php         this is the administrator entry point to the Foo component                                                                                                                            unchanged
  7     administrator/components/com\_foos/Controller/FooController.php             this is the entry point to the Foo component                                                                                                                                          unchanged
  1     administrator/components/com\_foos/Extension/FoosComponent.php              the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  7     administrator/components/com\_foos/Field/FooField.php                       the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  7     administrator/components/com\_foos/Model/FooModel.php                       this is the model of the Foo component item                                                                                                                                           unchanged
  6     administrator/components/com\_foos/Model/FoosModel.php                      this is the model of the Foo component                                                                                                                                                unchanged
  1     administrator/components/com\_foos/Service/HTML/AdministratorService.php    the html service see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                                unchanged
  7     administrator/components/com\_foos/Table/FooTable.php                       the database table                                                                                                                                                                    unchanged
  1     administrator/components/com\_foos/View/Foos/HtmlView.php                   file representing the view in the back end                                                                                                                                            unchanged
  1     administrator/components/com\_foos/services/provider.php                    the service provider interface see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                  unchanged
  6     administrator/components/com\_foos/sql/install.mysql.utf8.sql               During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           unchanged
  6     administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql             During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           unchanged
  7     administrator/components/com\_foos/forms/foo.xml                            the default form in the back end                                                                                                                                                      unchanged
  7     administrator/components/com\_foos/tmpl/foo/edit.php                        the default view in the back end                                                                                                                                                      unchanged
  7     administrator/components/com\_foos/tmpl/foo/modal.php                       the default view in the back end                                                                                                                                                      unchanged
  1     administrator/components/com\_foos/tmpl/foos/default.php                    the default view in the back end                                                                                                                                                      unchanged
  7     administrator/components/com\_foos/tmpl/foos/modal.php                      the default view in the back end                                                                                                                                                      unchanged
  1     administrator/components/com\_foos/foos.xml                                 this is an XML (manifest) file that tells Joomla! how to install our component.                                                                                                       unchanged
  1     administrator/components/com\_foos/script.php                               the installer script                                                                                                                                                                  unchanged
  8     administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini       the language file                                                                                                                                                                     unchanged
  8     administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini   the language file                                                                                                                                                                     unchanged
  9     administrator/components/com\_foos/config.php                               the configuration                                                                                                                                                                     unchanged
  10    administrator/components/com\_foos/access.xml                               the ACL file for permissen handling                                                                                                                                                   unchanged
  14a   administrator/components/com\_foos/Helper/FooHelper.php                     the helper file                                                                                                                                                                       unchanged
  11a   administrator/components/com\_foos/Rule/LetterRule.php                      the server side validation rule                                                                                                                                                       unchanged
  15    administrator/components/com\_foos/Helper/AssociationsHelper.php            the helper file for associations                                                                                                                                                      unchanged
  15    administrator/components/com\_foos/tmpl/foo/edit\_associations.php          the template for editing associations                                                                                                                                                 unchanged
  16    administrator/components/com\_foos/forms/filter\_foos.xml                   the form for the filter                                                                                                                                                               new
  2     components/com\_foos/Controller/DisplayController.php                       this is the frond end entry point to the Foo component                                                                                                                                unchanged
  4     components/com\_foos/Model/FooModel.php                                     this is the frond end model for the Foo component                                                                                                                                     unchanged
  2     components/com\_foos/View/Foo/HtmlView.php                                  file representing the view in the frond end                                                                                                                                           unchanged
  7     components/com\_foos/View/Foos/HtmlView.php                                 file representing the view in the frond end                                                                                                                                           unchanged
  2     components/com\_foos/tmpl/foo/default.php                                   the default view in the frond end                                                                                                                                                     unchanged
  3     components/com\_foos/tmpl/foo/default.xml                                   the xml for the menu item                                                                                                                                                             unchanged
  8     components/com\_foos/language/en-GB/en-GB.com\_foos.ini                     the language file                                                                                                                                                                     unchanged
  8     components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini                 the language file                                                                                                                                                                     unchanged
  7     media/com\_foos/js/admin-foos-modal.js                                      the javascript file                                                                                                                                                                   unchanged
  11b   media/com\_foos/js/admin-foos-letter.js                                     the client side validation rule                                                                                                                                                       unchanged
  ----- --------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------

\

[Conclusion]{#Conclusion_18 .mw-headline}
-----------------------------------------

[Adding Actions - Part 17]{#Adding_Actions_-_Part_17 .mw-headline}
==================================================================

[Requirements]{#Requirements_20 .mw-headline}
---------------------------------------------

You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev)

[File Structure]{#File_Structure_20 .mw-headline}
-------------------------------------------------

### [Changing administrator/components/com\_foos/View/Foo/HtmlView.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoo.2FHtmlView.php_2 .mw-headline}

The `administrator/components/com_foos/View/Foo/HtmlView.php` file is
....

#### [Completed administrator/components/com\_foos/View/Foo/HtmlView.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoo.2FHtmlView.php_file_2 .mw-headline}

The code for the
`administrator/components/com_foos/View/Foo/HtmlView.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\View\Foo;

    defined('_JEXEC') or die;

    use Joomla\CMS\Component\ComponentHelper;
    use Joomla\CMS\Helper\ContentHelper;
    use Joomla\CMS\Language\Associations;
    use Joomla\CMS\Factory;
    use Joomla\CMS\Language\Text;
    use Joomla\CMS\MVC\View\HtmlView as BaseHtmlView;
    use Joomla\CMS\Toolbar\ToolbarHelper;

    /**
     * View to edit a foo.
     *
     * @since  1.0
     */
    class HtmlView extends BaseHtmlView
    {
        /**
        * The \JForm object
        *
        * @var  \JForm
        */
        protected $form;

        /**
        * The active item
        *
        * @var  object
        */
        protected $item;

        /**
        * Display the view.
        *
        * @param   string  $tpl  The name of the template file to parse; automatically searches through the template paths.
        *
        * @return  mixed  A string if successful, otherwise an Error object.
        */
        public function display($tpl = null)
        {
            $this->item = $this->get('Item');

            // If we are forcing a language in modal (used for associations).
            if ($this->getLayout() === 'modal' && $forcedLanguage = Factory::getApplication()->input->get('forcedLanguage', '', 'cmd'))
            {
                // Set the language field to the forcedLanguage and disable changing it.
                $this->form->setValue('language', null, $forcedLanguage);
                $this->form->setFieldAttribute('language', 'readonly', 'true');

                // Only allow to select categories with All language or with the forced language.
                $this->form->setFieldAttribute('catid', 'language', '*,' . $forcedLanguage);
            }

            $this->addToolbar();

            return parent::display($tpl);
        }

        /**
        * Add the page title and toolbar.
        *
        * @return  void
        *
        * @since   1.0
        */
        protected function addToolbar()
        {
            Factory::getApplication()->input->set('hidemainmenu', true);

          $user       = Factory::getUser();
           $userId     = $user->id;
           $isNew      = ($this->item->id == 0);

            ToolbarHelper::title($isNew ? Text::_('COM_FOOS_MANAGER_FOO_NEW') : Text::_('COM_FOOS_MANAGER_FOO_EDIT'), 'address foo');

          // Since we don't track these assets at the item level, use the category id.
           $canDo = ContentHelper::getActions('com_foos', 'category', $this->item->catid);

           // Build the actions for new and existing records.
           if ($isNew)
           {
               // For new records, check the create permission.
               if ($isNew && (count($user->getAuthorisedCategories('com_foos', 'core.create')) > 0))
               {
                   ToolbarHelper::apply('foo.apply');

                   ToolbarHelper::saveGroup(
                       [
                           ['save', 'foo.save'],
                           ['save2new', 'foo.save2new']
                       ],
                       'btn-success'
                   );
               }

               ToolbarHelper::cancel('foo.cancel');
           }
           else
           {
               // Since it's an existing record, check the edit permission, or fall back to edit own if the owner.
               $itemEditable = $canDo->get('core.edit') || ($canDo->get('core.edit.own') && $this->item->created_by == $userId);

               $toolbarButtons = [];

               // Can't save the record if it's not editable
               if ($itemEditable)
               {
                   ToolbarHelper::apply('foo.apply');

                   $toolbarButtons[] = ['save', 'foo.save'];

                   // We can save this record, but check the create permission to see if we can return to make a new one.
                   if ($canDo->get('core.create'))
                   {
                       $toolbarButtons[] = ['save2new', 'foo.save2new'];
                   }
               }

               // If checked out, we can still save
               if ($canDo->get('core.create'))
               {
                   $toolbarButtons[] = ['save2copy', 'foo.save2copy'];
               }

               ToolbarHelper::saveGroup(
                   $toolbarButtons,
                   'btn-success'
               );

               if (Associations::isEnabled() && ComponentHelper::isEnabled('com_associations'))
               {
                   ToolbarHelper::custom('foo.editAssociations', 'contract', 'contract', 'JTOOLBAR_ASSOCIATIONS', false, false);
               }

             ToolbarHelper::cancel('foo.cancel', 'JTOOLBAR_CLOSE');
            }
        }
    }

</div>

### [Changing administrator/components/com\_foos/View/Foos/HtmlView.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_9 .mw-headline}

The `administrator/components/com_foos/View/Foos/HtmlView.php` file is
....

#### [Completed administrator/components/com\_foos/View/Foos/HtmlView.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_file_10 .mw-headline}

The code for the
`administrator/components/com_foos/View/Foos/HtmlView.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php

    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\View\Foos;

    defined('_JEXEC') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\HTML\HTMLHelper;
    use Joomla\CMS\Helper\ContentHelper;
    use Joomla\CMS\Language\Text;
    use Joomla\CMS\MVC\View\HtmlView as BaseHtmlView;
    use Joomla\CMS\Toolbar\Toolbar;
    use Joomla\CMS\Toolbar\ToolbarHelper;
    use Joomla\Component\Foos\Administrator\Helper\FooHelper;
    use Joomla\CMS\Language\Multilanguage;

    /**
     * View class for a list of foos.
     *
     * @since  1.0
     */
    class HtmlView extends BaseHtmlView
    {
        /**
        * An array of items
        *
        * @var  array
        */
        protected $items;

        /**
        * The model state
        *
        * @var  \JObject
        */
        protected $state;

        /**
        * Form object for search filters
        *
        * @var  \JForm
        */
        public $filterForm;

        /**
        * The active search filters
        *
        * @var  array
        */
        public $activeFilters;

        /**
        * The sidebar markup
        *
        * @var  string
        */
        protected $sidebar;

        /**
        * Display the view.
        *
        * @param   string  $tpl  The name of the template file to parse; automatically searches through the template paths.
        *
        * @return  mixed  A string if successful, otherwise an Error object.
        */
        public function display($tpl = null)
        {
            $this->items = $this->get('Items');
            $this->filterForm = $this->get('FilterForm');
            $this->activeFilters = $this->get('ActiveFilters');
            $this->state = $this->get('State');

            // Check for errors.
            if (count($errors = $this->get('Errors')))
            {
                throw new \JViewGenericdataexception(implode("\n", $errors), 500);
            }

            // Preprocess the list of items to find ordering divisions.
            // TODO: Complete the ordering stuff with nested sets
            foreach ($this->items as &$item)
            {
                $item->order_up = true;
                $item->order_dn = true;
            }

            // We don't need toolbar in the modal window.
            if ($this->getLayout() !== 'modal')
            {
                FooHelper::addSubmenu('foos');
                $this->addToolbar();
                $this->sidebar = \JHtmlSidebar::render();

                // We do not need to filter by language when multilingual is disabled
                if (!Multilanguage::isEnabled())
                {
                    unset($this->activeFilters['language']);
                    $this->filterForm->removeField('language', 'filter');
                }
            }
            else
            {
                // In article associations modal we need to remove language filter if forcing a language.
                // We also need to change the category filter to show show categories with All or the forced language.
                if ($forcedLanguage = Factory::getApplication()->input->get('forcedLanguage', '', 'CMD'))
                {
                    // If the language is forced we can't allow to select the language, so transform the language selector filter into a hidden field.
                    $languageXml = new \SimpleXMLElement('<field name="language" type="hidden" default="' . $forcedLanguage . '" />');
                    $this->filterForm->setField($languageXml, 'filter', true);

                    // Also, unset the active language filter so the search tools is not open by default with this filter.
                    unset($this->activeFilters['language']);

                    // One last changes needed is to change the category filter to just show categories with All language or with the forced language.
                    $this->filterForm->setFieldAttribute('category_id', 'language', '*,' . $forcedLanguage, 'filter');
                }
            }

            return parent::display($tpl);
        }

        /**
        * Add the page title and toolbar.
        *
        * @return  void
        *
        * @since   1.0
        */
        protected function addToolbar()
        {
            $canDo = ContentHelper::getActions('com_foos', 'category', $this->state->get('filter.category_id'));
            $user  = Factory::getUser();

            // Get the toolbar object instance
            $toolbar = Toolbar::getInstance('toolbar');

            ToolbarHelper::title(Text::_('COM_FOO_MANAGER_FOOS'), 'address foos');

            if ($canDo->get('core.create') || count($user->getAuthorisedCategories('com_foos', 'core.create')) > 0)
            {
                $toolbar->addNew('foo.add');
            }

            if ($canDo->get('core.edit.state'))
            {
              $dropdown = $toolbar->dropdownButton('status-group')
                   ->text('JTOOLBAR_CHANGE_STATUS')
                   ->toggleSplit(false)
                   ->icon('fa fa-globe')
                   ->buttonClass('btn btn-info')
                   ->listCheck(true);

               $childBar = $dropdown->getChildToolbar();

               $childBar->publish('foos.publish')->listCheck(true);

               $childBar->unpublish('foos.unpublish')->listCheck(true);

               $childBar->archive('foos.archive')->listCheck(true);

               if ($user->authorise('core.admin'))
               {
                   $childBar->checkin('foos.checkin')->listCheck(true);
               }

               if ($this->state->get('filter.published') != -2)
               {
                   $childBar->trash('foos.trash')->listCheck(true);
               }
           }

           if ($this->state->get('filter.published') == -2 && $canDo->get('core.delete'))
           {
               $toolbar->delete('foos.delete')
                   ->text('JTOOLBAR_EMPTY_TRASH')
                   ->message('JGLOBAL_CONFIRM_DELETE')
                   ->listCheck(true);
           }

           if ($user->authorise('core.admin', 'com_foos') || $user->authorise('core.options', 'com_foos'))
           {
             $toolbar->preferences('com_foos');
            }

            HTMLHelper::_('sidebar.setAction', 'index.php?option=com_foos');
        }

        /**
        * Returns an array of fields the table can be sorted by
        *
        * @return  array  Array containing the field name to sort by as the key and display text as value
        *
        * @since   1.0
        */
        protected function getSortFields()
        {
            return array(
                'a.ordering'     => Text::_('JGRID_HEADING_ORDERING'),
                'a.published'    => Text::_('JSTATUS'),
                'a.name'         => Text::_('JGLOBAL_TITLE'),
                'category_title' => Text::_('JCATEGORY'),
                'a.access'       => Text::_('JGRID_HEADING_ACCESS'),
                'a.language'     => Text::_('JGRID_HEADING_LANGUAGE'),
                'a.id'           => Text::_('JGRID_HEADING_ID'),
            );
        }
    }

</div>

### [Changing administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.ini_5 .mw-headline}

The
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.ini`
file is ....

#### [Completed administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.ini_file_5 .mw-headline}

The code for the
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.ini`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    COM_FOOS="[PROJECT_NAME]"
    COM_FOOS_CONFIGURATION="Foo Options"

    COM_FOOS_MANAGER_FOO_NEW="New"
    COM_FOOS_MANAGER_FOO_EDIT="Edit"
    COM_FOOS_MANAGER_FOOS="Foo Manager"

    COM_FOOS_TABLE_TABLEHEAD_NAME="Name"
    COM_FOOS_TABLE_TABLEHEAD_ID="ID"
    COM_FOOS_ERROR_FOO_NOT_FOUND="Foo not found"

    COM_FOOS_FIELD_NAME_LABEL="Name"

    COM_FOOS_FIELD_FOO_SHOW_CATEGORY_LABEL="Show name label"
    COM_FOOS_FIELD_CONFIG_INDIVIDUAL_FOO_DESC="These settings apply for all foo."
    COM_FOOS_FIELD_CONFIG_INDIVIDUAL_FOO_DISPLAY="Foo"

    COM_FOOS_FIELD_PUBLISH_DOWN_LABEL="Finish Publishing"
    COM_FOOS_FIELD_PUBLISH_UP_LABEL="Start Publishing"
    COM_FOOS_N_ITEMS_PUBLISHED="%d foos published."
    COM_FOOS_N_ITEMS_PUBLISHED_1="%d foo published."
    COM_FOOS_N_ITEMS_UNPUBLISHED="%d foos unpublished."
    COM_FOOS_N_ITEMS_UNPUBLISHED_1="%d foo unpublished."

    COM_FOOS_FOOS_FIELD_PUBLISH_DOWN_LABEL="Finish Publishing"
    COM_FOOS_FOOS_FIELD_PUBLISH_UP_LABEL="Start Publishing"
    COM_FOOS_FOOS_N_ITEMS_PUBLISHED="%d foos published."
    COM_FOOS_FOOS_N_ITEMS_PUBLISHED_1="%d foo published."
    COM_FOOS_FOOS_N_ITEMS_UNPUBLISHED="%d foos unpublished."
    COM_FOOS_FOOS_N_ITEMS_UNPUBLISHED_1="%d foo unpublished."

    COM_FOOS_EDIT_FOO="Edit Foo"
    COM_FOOS_NEW_FOO="New Foo"

    COM_FOOS_HEADING_ASSOCIATION="Association"
    COM_FOOS_CHANGE_FOO="Change a foo"
    COM_FOOS_SELECT_A_FOO="Select a foo"

    COM_FOOS_TABLE_CAPTION="Foo Table Caption"

    COM_FOOS_N_ITEMS_ARCHIVED="%d foos archived."
    COM_FOOS_N_ITEMS_ARCHIVED_1="%d foo archived."
    COM_FOOS_N_ITEMS_DELETED="%d foos deleted."
    COM_FOOS_N_ITEMS_DELETED_1="%d foo deleted."
    COM_FOOS_N_ITEMS_TRASHED="%d foos trashed."
    COM_FOOS_N_ITEMS_TRASHED_1="%d foo trashed."
    COM_FOO_MANAGER_FOOS="Foos"

</div>

### [Changing administrator/components/com\_foos/foos.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_16 .mw-headline}

The `administrator/components/com_foos/foos.xml` file is ....

#### [Completed administrator/components/com\_foos/foos.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_16 .mw-headline}

The code for the `administrator/components/com_foos/foos.xml` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8" ?>
    <extension type="component" method="upgrade">
        <name>COM_FOOS</name>
        <creationDate>[DATE]</creationDate>
        <author>[AUTHOR]</author>
        <authorEmail>[AUTHOR_EMAIL]</authorEmail>
        <authorUrl>[AUTHOR_URL]</authorUrl>
        <copyright>[COPYRIGHT]</copyright>
        <license>GNU General Public License version 2 or later;</license>
        <version>1.17.0</version>
        <description>COM_FOOS_XML_DESCRIPTION</description>
        <namespace>Joomla\Component\Foos</namespace>
        <scriptfile>script.php</scriptfile>
        <install> <!-- Runs on install -->
            <sql>
                <file driver="mysql" charset="utf8">sql/install.mysql.utf8.sql</file>
            </sql>
        </install>
        <uninstall> <!-- Runs on uninstall -->
            <sql>
                <file driver="mysql" charset="utf8">sql/uninstall.mysql.utf8.sql</file>
            </sql>
        </uninstall>
        <update>  <!-- Runs on update -->
            <schemas>
                <schemapath type="mysql">sql/updates/mysql</schemapath>
            </schemas>
        </update>
        <!-- Frond-end files -->
        <files folder="components/com_foos">
            <folder>Controller</folder>
            <folder>Model</folder>
            <folder>View</folder>
            <folder>tmpl</folder>
            <folder>language</folder>
        </files>
        <media folder="media/com_foos" destination="com_foos">
            <folder>js</folder>
        </media>
        <!-- Back-end files -->
        <administration>
            <!-- Menu entries -->
            <menu view="foos">COM_FOOS</menu>
            <submenu>
                <menu link="option=com_foos">COM_FOOS</menu>
                <menu link="option=com_categories&amp;extension=com_foos"
                    view="categories" img="class:foos-cat" alt="Foos/Categories">JCATEGORY</menu>
            </submenu>
            <files folder="administrator/components/com_foos">
                <filename>access.xml</filename>
                <filename>config.xml</filename>
                <filename>foos.xml</filename>
                <folder>Controller</folder>
                <folder>Extension</folder>
                <folder>Model</folder>
                <folder>Rule</folder>
                <folder>Service</folder>
                <folder>View</folder>
                <folder>services</folder>
                <folder>tmpl</folder>
                <folder>sql</folder>
                <folder>language</folder>
            </files>
        </administration>
    </extension>

</div>

[Test your component]{#Test_your_component_19 .mw-headline}
-----------------------------------------------------------

[Example in Joomla!]{#Example_in_Joomla.21_9 .mw-headline}
----------------------------------------------------------

Here you can see how you can use already implemented actions.

Here is an example of an actions in the edit view.

[![As j4-t 17
1.png](/images/thumb/a/a8/As_j4-t_17_1.png/700px-As_j4-t_17_1.png){width="700"
height="341"
srcset="/images/thumb/a/a8/As_j4-t_17_1.png/1050px-As_j4-t_17_1.png 1.5x, /images/a/a8/As_j4-t_17_1.png 2x"}](/File:As_j4-t_17_1.png){.image}

Here is an example of an actions in the default view.

[![As j4-t 17
2.png](/images/thumb/2/23/As_j4-t_17_2.png/700px-As_j4-t_17_2.png){width="700"
height="341"
srcset="/images/thumb/2/23/As_j4-t_17_2.png/1050px-As_j4-t_17_2.png 1.5x, /images/2/23/As_j4-t_17_2.png 2x"}](/File:As_j4-t_17_2.png){.image}

Do you have a specific problem? Then look at how the standard functions
are implemented in Joomla and apply this analogously to your problem.

\

[Component Contents]{#Component_Contents_20 .mw-headline}
---------------------------------------------------------

At this point in the tutorial, your component should contain the
following files:

  ----- --------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------
  1     administrator/components/com\_foos/Controller/DisplayController.php         this is the administrator entry point to the Foo component                                                                                                                            unchanged
  7     administrator/components/com\_foos/Controller/FooController.php             this is the entry point to the Foo component                                                                                                                                          unchanged
  1     administrator/components/com\_foos/Extension/FoosComponent.php              the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  7     administrator/components/com\_foos/Field/FooField.php                       the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  7     administrator/components/com\_foos/Model/FooModel.php                       this is the model of the Foo component item                                                                                                                                           unchanged
  6     administrator/components/com\_foos/Model/FoosModel.php                      this is the model of the Foo component                                                                                                                                                unchanged
  1     administrator/components/com\_foos/Service/HTML/AdministratorService.php    the html service see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                                unchanged
  7     administrator/components/com\_foos/Table/FooTable.php                       the database table                                                                                                                                                                    unchanged
  1     administrator/components/com\_foos/View/Foos/HtmlView.php                   file representing the view in the back end                                                                                                                                            unchanged
  1     administrator/components/com\_foos/services/provider.php                    the service provider interface see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                  unchanged
  6     administrator/components/com\_foos/sql/install.mysql.utf8.sql               During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           unchanged
  6     administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql             During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           unchanged
  7     administrator/components/com\_foos/forms/foo.xml                            the default form in the back end                                                                                                                                                      unchanged
  7     administrator/components/com\_foos/tmpl/foo/edit.php                        the default view in the back end                                                                                                                                                      unchanged
  7     administrator/components/com\_foos/tmpl/foo/modal.php                       the default view in the back end                                                                                                                                                      unchanged
  1     administrator/components/com\_foos/tmpl/foos/default.php                    the default view in the back end                                                                                                                                                      unchanged
  7     administrator/components/com\_foos/tmpl/foos/modal.php                      the default view in the back end                                                                                                                                                      unchanged
  1     administrator/components/com\_foos/foos.xml                                 this is an XML (manifest) file that tells Joomla! how to install our component.                                                                                                       unchanged
  1     administrator/components/com\_foos/script.php                               the installer script                                                                                                                                                                  unchanged
  8     administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini       the language file                                                                                                                                                                     unchanged
  8     administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini   the language file                                                                                                                                                                     unchanged
  9     administrator/components/com\_foos/config.php                               the configuration                                                                                                                                                                     unchanged
  10    administrator/components/com\_foos/access.xml                               the ACL file for permissen handling                                                                                                                                                   unchanged
  14a   administrator/components/com\_foos/Helper/FooHelper.php                     the helper file                                                                                                                                                                       unchanged
  11a   administrator/components/com\_foos/Rule/LetterRule.php                      the server side validation rule                                                                                                                                                       unchanged
  15    administrator/components/com\_foos/Helper/AssociationsHelper.php            the helper file for associations                                                                                                                                                      unchanged
  15    administrator/components/com\_foos/tmpl/foo/edit\_associations.php          the template for editing associations                                                                                                                                                 unchanged
  16    administrator/components/com\_foos/forms/filter\_foos.xml                   the form for the filter                                                                                                                                                               unchanged
  2     components/com\_foos/Controller/DisplayController.php                       this is the frond end entry point to the Foo component                                                                                                                                unchanged
  4     components/com\_foos/Model/FooModel.php                                     this is the frond end model for the Foo component                                                                                                                                     unchanged
  2     components/com\_foos/View/Foo/HtmlView.php                                  file representing the view in the frond end                                                                                                                                           unchanged
  7     components/com\_foos/View/Foos/HtmlView.php                                 file representing the view in the frond end                                                                                                                                           unchanged
  2     components/com\_foos/tmpl/foo/default.php                                   the default view in the frond end                                                                                                                                                     unchanged
  3     components/com\_foos/tmpl/foo/default.xml                                   the xml for the menu item                                                                                                                                                             unchanged
  8     components/com\_foos/language/en-GB/en-GB.com\_foos.ini                     the language file                                                                                                                                                                     unchanged
  8     components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini                 the language file                                                                                                                                                                     unchanged
  7     media/com\_foos/js/admin-foos-modal.js                                      the javascript file                                                                                                                                                                   unchanged
  11b   media/com\_foos/js/admin-foos-letter.js                                     the client side validation rule                                                                                                                                                       unchanged
  ----- --------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------

\

[Conclusion]{#Conclusion_19 .mw-headline}
-----------------------------------------

With its own functions, you can implement almost anything you want. You
may want to save parameters that control the function of your component
in addition to the data. This is the topic of the next chapter

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

[Adding Params - Part 18]{#Adding_Params_-_Part_18 .mw-headline}
================================================================

[Requirements]{#Requirements_21 .mw-headline}
---------------------------------------------

You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev)

[File Structure]{#File_Structure_21 .mw-headline}
-------------------------------------------------

### [Changing administrator/components/com\_foos/Model/FoosModel.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_7 .mw-headline}

The `administrator/components/com_foos/Model/FoosModel.php` file is ....

#### [Completed administrator/components/com\_foos/Model/FoosModel.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_file_8 .mw-headline}

The code for the `administrator/components/com_foos/Model/FoosModel.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\Model;

    defined('_JEXEC') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\Language\Associations;
    use Joomla\CMS\MVC\Model\ListModel;

    /**
     * Methods supporting a list of foo records.
     *
     * @since  1.0
     */
    class FoosModel extends ListModel
    {
        /**
        * Constructor.
        *
        * @param   array  $config  An optional associative array of configuration settings.
        *
        * @see     \JControllerLegacy
        * @since   1.0
        */
        public function __construct($config = array())
        {
            if (empty($config['filter_fields']))
            {
                $config['filter_fields'] = array(
                    'id', 'a.id',
                    'name', 'a.name',
                    'catid', 'a.catid', 'category_id', 'category_title',
                    'published', 'a.published',
                    'access', 'a.access', 'access_level',
                    'ordering', 'a.ordering',
                    'language', 'a.language', 'language_title',
                    'publish_up', 'a.publish_up',
                    'publish_down', 'a.publish_down',
                );

                $assoc = Associations::isEnabled();

                if ($assoc)
                {
                    $config['filter_fields'][] = 'association';
                }
            }

            parent::__construct($config);
        }

        /**
        * Build an SQL query to load the list data.
        *
        * @return  \JDatabaseQuery
        *
        * @since   1.0
        */
        protected function getListQuery()
        {
            // Create a new query object.
            $db = $this->getDbo();
            $query = $db->getQuery(true);

            // Select the required fields from the table.
            $query->select(
                $this->getState(
                    'list.select',
                    'a.id AS id,'
                    . 'a.name AS name,'
                    . 'a.access,'
                    . 'a.language,'
                    . 'a.ordering AS ordering,'
                    . 'a.state AS state,'
                    . 'a.catid AS catid,'
                    . 'a.published AS published,'
                    . 'a.publish_up,'
                    . 'a.publish_down'
                )
            );

            $query->from($db->quoteName('#__foos_details', 'a'));

            // Join over the asset groups.
            $query->select($db->quoteName('ag.title', 'access_level'))
                ->join(
                    'LEFT',
                    $db->quoteName('#__viewlevels', 'ag') . ' ON ' . $db->quoteName('ag.id') . ' = ' . $db->quoteName('a.access')
                );

            // Join over the categories.
            $query->select($db->quoteName('c.title', 'category_title'))
                ->join(
                    'LEFT',
                    $db->quoteName('#__categories', 'c') . ' ON ' . $db->quoteName('c.id') . ' = ' . $db->quoteName('a.catid')
                );

            // Join over the language
            $query->select($db->quoteName('l.title', 'language_title'))
                ->select($db->quoteName('l.image', 'language_image'))
                ->join(
                    'LEFT',
                    $db->quoteName('#__languages', 'l') . ' ON ' . $db->quoteName('l.lang_code') . ' = ' . $db->quoteName('a.language')
                );

            // Join over the associations.
            $assoc = Associations::isEnabled();

            if ($assoc)
            {
                $query->select('COUNT(' . $db->quoteName('asso2.id') . ') > 1 as ' . $db->quoteName('association'))
                    ->join(
                        'LEFT',
                        $db->quoteName('#__associations', 'asso') . ' ON ' . $db->quoteName('asso.id') . ' = ' . $db->quoteName('a.id')
                        . ' AND ' . $db->quoteName('asso.context') . ' = ' . $db->quote('com_foos.item')
                    )
                    ->join(
                        'LEFT',
                        $db->quoteName('#__associations', 'asso2') . ' ON ' . $db->quoteName('asso2.key') . ' = ' . $db->quoteName('asso.key')
                    )
                    ->group(
                        $db->quoteName(
                            array(
                                'a.id',
                                'a.name',
                                'a.catid',
                                'a.published',
                                'a.access',
                                'a.language',
                                'a.publish_up',
                                'a.publish_down',
                                'l.title' ,
                                'l.image' ,
                                'ag.title' ,
                                'c.title'
                            )
                        )
                    );
            }

            // Filter by access level.
            if ($access = $this->getState('filter.access'))
            {
                $query->where($db->quoteName('a.access') . ' = ' . (int) $access);
            }

            // Filter by published state
            $published = (string) $this->getState('filter.published');

            if (is_numeric($published))
            {
                $query->where($db->quoteName('a.published') . ' = ' . (int) $published);
            }
            elseif ($published === '')
            {
                $query->where('(' . $db->quoteName('a.published') . ' = 0 OR ' . $db->quoteName('a.published') . ' = 1)');
            }

            // Filter by a single or group of categories.
            $categoryId = $this->getState('filter.category_id');

            if (is_numeric($categoryId))
            {
                $query->where($db->quoteName('a.catid') . ' = ' . (int) $categoryId);
            }
            elseif (is_array($categoryId))
            {
                $query->where($db->quoteName('a.catid') . ' IN (' . implode(',', ArrayHelper::toInteger($categoryId)) . ')');
            }

            // Filter by search in name.
            $search = $this->getState('filter.search');

            if (!empty($search))
            {
                if (stripos($search, 'id:') === 0)
                {
                    $query->where('a.id = ' . (int) substr($search, 3));
                }
                else
                {
                    $search = $db->quote('%' . str_replace(' ', '%', $db->escape(trim($search), true) . '%'));
                    $query->where(
                        '(' . $db->quoteName('a.name') . ' LIKE ' . $search . ')'
                    );
                }
            }

            // Filter on the language.
            if ($language = $this->getState('filter.language'))
            {
                $query->where($db->quoteName('a.language') . ' = ' . $db->quote($language));
            }

          // Filter by a single tag.
           $tagId = $this->getState('filter.tag');

           if (is_numeric($tagId))
           {
               $query->where($db->quoteName('tagmap.tag_id') . ' = ' . (int) $tagId)
                   ->join(
                       'LEFT',
                       $db->quoteName('#__contentitem_tag_map', 'tagmap')
                       . ' ON ' . $db->quoteName('tagmap.content_item_id') . ' = ' . $db->quoteName('a.id')
                       . ' AND ' . $db->quoteName('tagmap.type_alias') . ' = ' . $db->quote('com_foos.contact')
                   );
           }

           // Filter on the level.
           if ($level = $this->getState('filter.level'))
           {
               $query->where('c.level <= ' . (int) $level);
           }

           // Add the list ordering clause.
         $orderCol = $this->state->get('list.ordering', 'a.name');
            $orderDirn = $this->state->get('list.direction', 'asc');

            if ($orderCol == 'a.ordering' || $orderCol == 'category_title')
            {
                $orderCol = $db->quoteName('c.title') . ' ' . $orderDirn . ', ' . $db->quoteName('a.ordering');
            }

            $query->order($db->escape($orderCol . ' ' . $orderDirn));

            return $query;
        }

        /**
        * Method to auto-populate the model state.
        *
        * Note. Calling getState in this method will result in recursion.
        *
        * @param   string  $ordering   An optional ordering field.
        * @param   string  $direction  An optional direction (asc|desc).
        *
        * @return  void
        *
        * @since   1.0
        */
        protected function populateState($ordering = 'a.name', $direction = 'asc')
        {
            $app = Factory::getApplication();

            $forcedLanguage = $app->input->get('forcedLanguage', '', 'cmd');

            // Adjust the context to support modal layouts.
            if ($layout = $app->input->get('layout'))
            {
                $this->context .= '.' . $layout;
            }

            // Adjust the context to support forced languages.
            if ($forcedLanguage)
            {
                $this->context .= '.' . $forcedLanguage;
            }

            // List state information.
            parent::populateState($ordering, $direction);

            // Force a language.
            if (!empty($forcedLanguage))
            {
                $this->setState('filter.language', $forcedLanguage);
            }
        }
    }

</div>

### [Changing administrator/components/com\_foos/Table/FooTable.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FTable.2FFooTable.php_2 .mw-headline}

The `administrator/components/com_foos/Table/FooTable.php` file is ....

#### [Completed administrator/components/com\_foos/Table/FooTable.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FTable.2FFooTable.php_file_3 .mw-headline}

The code for the `administrator/components/com_foos/Table/FooTable.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\Table;

    defined('_JEXEC') or die;

    use Joomla\CMS\Table\Table;
    use Joomla\Database\DatabaseDriver;
    use Joomla\Registry\Registry;

    /**
     * Foos Table class.
     *
     * @since  1.0
     */
    class FooTable extends Table
    {
        /**
        * Constructor
        *
        * @param   DatabaseDriver  $db  Database connector object
        *
        * @since   1.0
        */
        public function __construct(DatabaseDriver $db)
        {
            $this->typeAlias = 'com_foos.foo';

            parent::__construct('#__foos_details', 'id', $db);

             
        }

        /**
      * Stores a contact.
       *
       * @param   boolean  $updateNulls  True to update fields even if they are null.
       *
       * @return  boolean  True on success, false on failure.
       *
       * @since   1.0
       */
       public function store($updateNulls = false)
       {
           // Transform the params field
           if (is_array($this->params))
           {
               $registry = new Registry($this->params);
               $this->params = (string) $registry;
           }

           return parent::store($updateNulls);
       }

       /**
         * Overloaded check function
        *
        * @return  boolean
        *
        * @see     Table::check
        * @since   1.5
        */
        public function check()
        {
            try
            {
                parent::check();
            }
            catch (\Exception $e)
            {
                $this->setError($e->getMessage());

                return false;
            }

            // Set name
            $this->name = htmlspecialchars_decode($this->name, ENT_QUOTES);

            // Check the publish down date is not earlier than publish up.
            if ($this->publish_down > $this->_db->getNullDate() && $this->publish_down < $this->publish_up)
            {
                $this->setError(Text::_('JGLOBAL_START_PUBLISH_AFTER_FINISH'));

                return false;
            }

            if (empty($this->publish_up))
            {
                $this->publish_up = $this->getDbo()->getNullDate();
            }

            if (empty($this->publish_down))
            {
                $this->publish_down = $this->getDbo()->getNullDate();
            }

            return true;
        }
    }

</div>

### [Changing administrator/components/com\_foos/config.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Fconfig.xml_3 .mw-headline}

The `administrator/components/com_foos/config.xml` file is ....

#### [Completed administrator/components/com\_foos/config.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Fconfig.xml_file_3 .mw-headline}

The code for the `administrator/components/com_foos/config.xml` file is
as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8"?>
    <config>

        <fieldset
            name="foo"
            label="COM_FOOS_FIELD_CONFIG_INDIVIDUAL_FOO_DISPLAY"
            description="COM_FOOS_FIELD_CONFIG_INDIVIDUAL_FOO_DESC"
            >

            <field
                name="show_foo_name_label"
                type="list"
                label="COM_FOOS_FIELD_FOO_SHOW_CATEGORY_LABEL"
                default="1"
                >
                <option value="0">JNO</option>
                <option value="1">JYES</option>
            </field>

            <field
                name="custom_fields_enable"
                type="radio"
                class="switcher"
                label="JGLOBAL_CUSTOM_FIELDS_ENABLE_LABEL"
                default="1"
                >
                <option value="0">JNO</option>
                <option value="1">JYES</option>
            </field>

            <field
                name="show_name"
                type="radio"
                label="COM_FOOS_FIELD_PARAMS_NAME_LABEL"
                default="1"
                class="switcher"
                >
                <option value="0">JHIDE</option>
                <option value="1">JSHOW</option>
            </field>

       </fieldset>
       <fieldset
           name="permissions"
           label="JCONFIG_PERMISSIONS_LABEL"
           description="JCONFIG_PERMISSIONS_DESC"
           >

           <field
               name="rules"
               type="rules"
               label="JCONFIG_PERMISSIONS_LABEL"
               validate="rules"
               filter="rules"
               component="com_foos"
               section="component"
           />

       </fieldset>
    </config>

</div>

### [Changing administrator/components/com\_foos/foos.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_17 .mw-headline}

The `administrator/components/com_foos/foos.xml` file is ....

#### [Completed administrator/components/com\_foos/foos.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_17 .mw-headline}

The code for the `administrator/components/com_foos/foos.xml` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8" ?>
    <extension type="component" method="upgrade">
        <name>COM_FOOS</name>
        <creationDate>[DATE]</creationDate>
        <author>[AUTHOR]</author>
        <authorEmail>[AUTHOR_EMAIL]</authorEmail>
        <authorUrl>[AUTHOR_URL]</authorUrl>
        <copyright>[COPYRIGHT]</copyright>
        <license>GNU General Public License version 2 or later;</license>
      <version>1.18.0</version>
     <description>COM_FOOS_XML_DESCRIPTION</description>
        <namespace>Joomla\Component\Foos</namespace>
        <scriptfile>script.php</scriptfile>
        <install> <!-- Runs on install -->
            <sql>
                <file driver="mysql" charset="utf8">sql/install.mysql.utf8.sql</file>
            </sql>
        </install>
        <uninstall> <!-- Runs on uninstall -->
            <sql>
                <file driver="mysql" charset="utf8">sql/uninstall.mysql.utf8.sql</file>
            </sql>
        </uninstall>
        <update>  <!-- Runs on update -->
            <schemas>
                <schemapath type="mysql">sql/updates/mysql</schemapath>
            </schemas>
        </update>
        <!-- Frond-end files -->
        <files folder="components/com_foos">
            <folder>Controller</folder>
            <folder>Model</folder>
            <folder>View</folder>
            <folder>tmpl</folder>
            <folder>language</folder>
        </files>
        <media folder="media/com_foos" destination="com_foos">
            <folder>js</folder>
        </media>
        <!-- Back-end files -->
        <administration>
            <!-- Menu entries -->
            <menu view="foos">COM_FOOS</menu>
            <submenu>
                <menu link="option=com_foos">COM_FOOS</menu>
                <menu link="option=com_categories&amp;extension=com_foos"
                    view="categories" img="class:foos-cat" alt="Foos/Categories">JCATEGORY</menu>
            </submenu>
            <files folder="administrator/components/com_foos">
                <filename>access.xml</filename>
                <filename>config.xml</filename>
                <filename>foos.xml</filename>
                <folder>Controller</folder>
                <folder>Extension</folder>
                <folder>Model</folder>
                <folder>Rule</folder>
                <folder>Service</folder>
                <folder>View</folder>
                <folder>services</folder>
                <folder>tmpl</folder>
                <folder>sql</folder>
                <folder>language</folder>
            </files>
        </administration>
    </extension>

</div>

### [Changing administrator/components/com\_foos/forms/foo.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_8 .mw-headline}

The `administrator/components/com_foos/forms/foo.xml` file is ....

#### [Completed administrator/components/com\_foos/forms/foo.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_file_9 .mw-headline}

The code for the `administrator/components/com_foos/forms/foo.xml` file
is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8"?>
    <form>
        <fieldset 
            addfieldprefix="Joomla\Component\Foos\Administrator\Field" 
            addruleprefix="Joomla\Component\Foos\Administrator\Rule"
        >
            <field
                name="id"
                type="number"
                label="JGLOBAL_FIELD_ID_LABEL"
                default="0"
                class="readonly"
                readonly="true"
            />

            <field
                name="name"
                type="text"
                validate="Letter"
                class="validate-letter"
                label="COM_FOOS_FIELD_NAME_LABEL"
                size="40"
                required="true"
            />

            <field
                name="language"
                type="contentlanguage"
                label="JFIELD_LANGUAGE_LABEL"
            >
                <option value="*">JALL</option>
            </field>

            <field
                name="published"
                type="list"
                label="JSTATUS"
                default="1"
                id="published"
                class="custom-select-color-state"
                size="1"
            >
                <option value="1">JPUBLISHED</option>
                <option value="0">JUNPUBLISHED</option>
                <option value="2">JARCHIVED</option>
                <option value="-2">JTRASHED</option>
            </field>

            <field
                name="publish_up"
                type="calendar"
                label="COM_FOOS_FIELD_PUBLISH_UP_LABEL"
                translateformat="true"
                showtime="true"
                size="22"
                filter="user_utc"
            />

            <field
                name="publish_down"
                type="calendar"
                label="COM_FOOS_FIELD_PUBLISH_DOWN_LABEL"
                translateformat="true"
                showtime="true"
                size="22"
                filter="user_utc"
            />

            <field
                name="catid"
                type="categoryedit"
                label="JCATEGORY"
                extension="com_foos"
                addfieldprefix="Joomla\Component\Categories\Administrator\Field"
                required="true"
                default=""
            />

            <field
                name="access"
                type="accesslevel"
                label="JFIELD_ACCESS_LABEL"
                size="1"
            />

            <field
                name="ordering"
                type="ordering"
                label="JFIELD_ORDERING_LABEL"
                content_type="com_foos.foo"
            />

        </fieldset>
      <fields name="params" label="JGLOBAL_FIELDSET_DISPLAY_OPTIONS">
           <fieldset name="display" label="JGLOBAL_FIELDSET_DISPLAY_OPTIONS">
               <field
                   name="show_name"
                   type="list"
                   label="COM_FOOS_FIELD_PARAMS_NAME_LABEL"
                   useglobal="true"
               >
                   <option value="0">JHIDE</option>
                   <option value="1">JSHOW</option>
               </field>
           </fieldset>
       </fields>
    </form>

</div>

### [Changing administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.ini_6 .mw-headline}

The
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.ini`
file is ....

#### [Completed administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.ini_file_6 .mw-headline}

The code for the
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.ini`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    COM_FOOS="[PROJECT_NAME]"
    COM_FOOS_CONFIGURATION="Foo Options"

    COM_FOOS_MANAGER_FOO_NEW="New"
    COM_FOOS_MANAGER_FOO_EDIT="Edit"
    COM_FOOS_MANAGER_FOOS="Foo Manager"

    COM_FOOS_TABLE_TABLEHEAD_NAME="Name"
    COM_FOOS_TABLE_TABLEHEAD_ID="ID"
    COM_FOOS_ERROR_FOO_NOT_FOUND="Foo not found"

    COM_FOOS_FIELD_NAME_LABEL="Name"

    COM_FOOS_FIELD_FOO_SHOW_CATEGORY_LABEL="Show name label"
    COM_FOOS_FIELD_CONFIG_INDIVIDUAL_FOO_DESC="These settings apply for all foo."
    COM_FOOS_FIELD_CONFIG_INDIVIDUAL_FOO_DISPLAY="Foo"

    COM_FOOS_FIELD_PUBLISH_DOWN_LABEL="Finish Publishing"
    COM_FOOS_FIELD_PUBLISH_UP_LABEL="Start Publishing"
    COM_FOOS_N_ITEMS_PUBLISHED="%d foos published."
    COM_FOOS_N_ITEMS_PUBLISHED_1="%d foo published."
    COM_FOOS_N_ITEMS_UNPUBLISHED="%d foos unpublished."
    COM_FOOS_N_ITEMS_UNPUBLISHED_1="%d foo unpublished."

    COM_FOOS_FOOS_FIELD_PUBLISH_DOWN_LABEL="Finish Publishing"
    COM_FOOS_FOOS_FIELD_PUBLISH_UP_LABEL="Start Publishing"
    COM_FOOS_FOOS_N_ITEMS_PUBLISHED="%d foos published."
    COM_FOOS_FOOS_N_ITEMS_PUBLISHED_1="%d foo published."
    COM_FOOS_FOOS_N_ITEMS_UNPUBLISHED="%d foos unpublished."
    COM_FOOS_FOOS_N_ITEMS_UNPUBLISHED_1="%d foo unpublished."

    COM_FOOS_EDIT_FOO="Edit Foo"
    COM_FOOS_NEW_FOO="New Foo"

    COM_FOOS_HEADING_ASSOCIATION="Association"
    COM_FOOS_CHANGE_FOO="Change a foo"
    COM_FOOS_SELECT_A_FOO="Select a foo"

    COM_FOOS_TABLE_CAPTION="Foo Table Caption"

    COM_FOOS_N_ITEMS_ARCHIVED="%d foos archived."
    COM_FOOS_N_ITEMS_ARCHIVED_1="%d foo archived."
    COM_FOOS_N_ITEMS_DELETED="%d foos deleted."
    COM_FOOS_N_ITEMS_DELETED_1="%d foo deleted."
    COM_FOOS_N_ITEMS_TRASHED="%d foos trashed."
    COM_FOOS_N_ITEMS_TRASHED_1="%d foo trashed."
    COM_FOO_MANAGER_FOOS="Foos"

    COM_FOOS_FIELD_PARAMS_NAME_LABEL="Show Name"

</div>

### [Changing components/com\_foos/View/Foo/HtmlView.php]{#Changing_components.2Fcom_foos.2FView.2FFoo.2FHtmlView.php_4 .mw-headline}

The `components/com_foos/View/Foo/HtmlView.php` file is ....

#### [Completed components/com\_foos/View/Foo/HtmlView.php file]{#Completed_components.2Fcom_foos.2FView.2FFoo.2FHtmlView.php_file_5 .mw-headline}

The code for the `components/com_foos/View/Foo/HtmlView.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php

</div>

### [Changing x]{#Changing_x .mw-headline}

The `x` file is ....

#### [Completed x file]{#Completed_x_file .mw-headline}

The code for the `x` file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Site
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Site\View\Foo;

    defined('_JEXEC') or die;

    use Joomla\CMS\MVC\View\HtmlView as BaseHtmlView;
    use Joomla\CMS\Factory;
    use Joomla\Registry\Registry;

    /**
     * HTML Foos View class for the Foo component
     *
     * @since  1.0
     */
    class HtmlView extends BaseHtmlView
    {
        /**
      * The page parameters
       *
       * @var    \Joomla\Registry\Registry|null
       * @since  1.0.0
       */
       protected $params = null;

       /**
       * The item model state
       *
       * @var    \Joomla\Registry\Registry
       * @since  1.0.0
       */
       protected $state;

       /**
         * The item object details
        *
        * @var    \JObject
        * @since  1.0.0
        */
        protected $item;

        /**
        * Execute and display a template script.
        *
        * @param   string  $tpl  The name of the template file to parse; automatically searches through the template paths.
        *
        * @return  mixed  A string if successful, otherwise an Error object.
        */
        public function display($tpl = null)
        {
            $item = $this->item = $this->get('Item');
          $state = $this->State = $this->get('State');
           $params = $this->Params = $state->get('params');
           $itemparams = new Registry(json_decode($item->params));

           $temp = clone $params;
           $temp->merge($itemparams);
           $item->params = $temp;

         Factory::getApplication()->triggerEvent('onContentPrepare', array ('com_foos.foo', &$item));

            // Store the events for later
            $item->event = new \stdClass;
            $results = Factory::getApplication()->triggerEvent('onContentAfterTitle', array('com_foos.foo', &$item, &$item->params));
            $item->event->afterDisplayTitle = trim(implode("\n", $results));

            $results = Factory::getApplication()->triggerEvent('onContentBeforeDisplay', array('com_foos.foo', &$item, &$item->params));
            $item->event->beforeDisplayContent = trim(implode("\n", $results));

            $results = Factory::getApplication()->triggerEvent('onContentAfterDisplay', array('com_foos.foo', &$item, &$item->params));
            $item->event->afterDisplayContent = trim(implode("\n", $results));

            return parent::display($tpl);
        }
    }

</div>

\

### [Changing components/com\_foos/tmpl/foo/default.php]{#Changing_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php_7 .mw-headline}

The `components/com_foos/tmpl/foo/default.php` file is ....

#### [Completed components/com\_foos/tmpl/foo/default.php file]{#Completed_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fdefault.php_file_8 .mw-headline}

The code for the `components/com_foos/tmpl/foo/default.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php

    defined('_JEXEC') or die;

    use Joomla\CMS\Language\Text;

    if ($this->item->params->get('show_name')) {
       if ($this->Params->get('show_foo_name_label')) {
         echo Text::_('COM_FOOS_NAME') . $this->item->name;
        } else {
            echo $this->item->name;
        }
    }
    echo $this->item->event->afterDisplayTitle; 
    echo $this->item->event->beforeDisplayContent;
    echo $this->item->event->afterDisplayContent;

</div>

\

### [Creating administrator/components/com\_foos/sql/updates/mysql/1.18.0.sql]{#Creating_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Fupdates.2Fmysql.2F1.18.0.sql .mw-headline}

The `administrator/components/com_foos/sql/updates/mysql/1.18.0.sql`
file is ....

#### [Completed administrator/components/com\_foos/sql/updates/mysql/1.18.0.sql file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Fsql.2Fupdates.2Fmysql.2F1.18.0.sql_file .mw-headline}

The code for the
`administrator/components/com_foos/sql/updates/mysql/1.18.0.sql` file is
as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php

    ALTER TABLE `#__foos_details` ADD COLUMN  `params` text NOT NULL AFTER `alias`;

</div>

\

[Test your component]{#Test_your_component_20 .mw-headline}
-----------------------------------------------------------

Now you can save a parameter of the options separately for each item.

[![As j4-t 18
1.png](/images/thumb/2/2a/As_j4-t_18_1.png/700px-As_j4-t_18_1.png){width="700"
height="341"
srcset="/images/thumb/2/2a/As_j4-t_18_1.png/1050px-As_j4-t_18_1.png 1.5x, /images/2/2a/As_j4-t_18_1.png 2x"}](/File:As_j4-t_18_1.png){.image}

\

[Example in Joomla!]{#Example_in_Joomla.21_10 .mw-headline}
-----------------------------------------------------------

[Component Contents]{#Component_Contents_21 .mw-headline}
---------------------------------------------------------

At this point in the tutorial, your component should contain the
following files:

  --- -------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------
  1   administrator/components/com\_foos/Controller/DisplayController.php        this is the administrator entry point to the Foo component                                                                                                                            unchanged
  1   administrator/components/com\_foos/Extension/FoosComponent.php             the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  6   administrator/components/com\_foos/Model/FoosModel.php                     this is the model of the Foo component                                                                                                                                                new
  1   administrator/components/com\_foos/Service/HTML/AdministratorService.php   the html service see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                                unchanged
  1   administrator/components/com\_foos/View/Foos/HtmlView.php                  file representing the view in the back end                                                                                                                                            changed
  1   administrator/components/com\_foos/services/provider.php                   the service provider interface see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                  changed
  6   administrator/components/com\_foos/sql/install.mysql.utf8.sql              During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           new
  6   administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql            During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           new
  1   administrator/components/com\_foos/tmpl/foos/default.php                   the default view in the back end                                                                                                                                                      changed
  1   administrator/components/com\_foos/foos.xml                                this is an XML (manifest) file that tells Joomla! how to install our component.                                                                                                       changed
  1   administrator/components/com\_foos/script.php                              the installer script                                                                                                                                                                  unchanged
  2   components/com\_foos/Controller/DisplayController.php                      this is the frond end entry point to the Foo component                                                                                                                                unchanged
  4   components/com\_foos/Model/FooModel.php                                    this is the frond end model for the Foo component                                                                                                                                     unchanged
  2   components/com\_foos/View/Foo/HtmlView.php                                 file representing the view in the frond end                                                                                                                                           unchanged
  2   components/com\_foos/tmpl/foo/default.php                                  the default view in the frond end                                                                                                                                                     unchanged
  3   components/com\_foos/tmpl/foo/default.xml                                  the xml for the menu item                                                                                                                                                             unchanged
  --- -------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------

\

[Conclusion]{#Conclusion_20 .mw-headline}
-----------------------------------------

You now have many different ways to save data in a component. In the
next part, we'll look at how you can organize them on different
subpages: Pagination.

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\
geändert: src/administrator/components/com\_foos/View/Foos/HtmlView.php
geändert: src/administrator/components/com\_foos/tmpl/foos/default.php

[Adding Pagination - Part 19]{#Adding_Pagination_-_Part_19 .mw-headline}
========================================================================

[Requirements]{#Requirements_22 .mw-headline}
---------------------------------------------

You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev)

[File Structure]{#File_Structure_22 .mw-headline}
-------------------------------------------------

### [Changing administrator/components/com\_foos/foos.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_18 .mw-headline}

The `administrator/components/com_foos/foos.xml` file is ....

#### [Completed administrator/components/com\_foos/foos.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_18 .mw-headline}

The code for the `administrator/components/com_foos/foos.xml` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8" ?>
    <extension type="component" method="upgrade">
        <name>COM_FOOS</name>
        <creationDate>[DATE]</creationDate>
        <author>[AUTHOR]</author>
        <authorEmail>[AUTHOR_EMAIL]</authorEmail>
        <authorUrl>[AUTHOR_URL]</authorUrl>
        <copyright>[COPYRIGHT]</copyright>
        <license>GNU General Public License version 2 or later;</license>
      <version>1.19.0</version>
     <description>COM_FOOS_XML_DESCRIPTION</description>
        <namespace>Joomla\Component\Foos</namespace>
        <scriptfile>script.php</scriptfile>
        <install> <!-- Runs on install -->
            <sql>
                <file driver="mysql" charset="utf8">sql/install.mysql.utf8.sql</file>
            </sql>
        </install>
        <uninstall> <!-- Runs on uninstall -->
            <sql>
                <file driver="mysql" charset="utf8">sql/uninstall.mysql.utf8.sql</file>
            </sql>
        </uninstall>
        <update>  <!-- Runs on update -->
            <schemas>
                <schemapath type="mysql">sql/updates/mysql</schemapath>
            </schemas>
        </update>
        <!-- Frond-end files -->
        <files folder="components/com_foos">
            <folder>Controller</folder>
            <folder>Model</folder>
            <folder>View</folder>
            <folder>tmpl</folder>
            <folder>language</folder>
        </files>
        <media folder="media/com_foos" destination="com_foos">
            <folder>js</folder>
        </media>
        <!-- Back-end files -->
        <administration>
            <!-- Menu entries -->
            <menu view="foos">COM_FOOS</menu>
            <submenu>
                <menu link="option=com_foos">COM_FOOS</menu>
                <menu link="option=com_categories&amp;extension=com_foos"
                    view="categories" img="class:foos-cat" alt="Foos/Categories">JCATEGORY</menu>
            </submenu>
            <files folder="administrator/components/com_foos">
                <filename>access.xml</filename>
                <filename>config.xml</filename>
                <filename>foos.xml</filename>
                <folder>Controller</folder>
                <folder>Extension</folder>
                <folder>Model</folder>
                <folder>Rule</folder>
                <folder>Service</folder>
                <folder>View</folder>
                <folder>services</folder>
                <folder>tmpl</folder>
                <folder>sql</folder>
                <folder>language</folder>
            </files>
        </administration>
    </extension>

</div>

### [Changing administrator/components/com\_foos/View/Foos/HtmlView.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_10 .mw-headline}

The `administrator/components/com_foos/View/Foos/HtmlView.php` file is
....

#### [Completed administrator/components/com\_foos/View/Foos/HtmlView.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_file_11 .mw-headline}

The code for the
`administrator/components/com_foos/View/Foos/HtmlView.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php

    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\View\Foos;

    defined('_JEXEC') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\HTML\HTMLHelper;
    use Joomla\CMS\Helper\ContentHelper;
    use Joomla\CMS\Language\Text;
    use Joomla\CMS\MVC\View\HtmlView as BaseHtmlView;
    use Joomla\CMS\Toolbar\Toolbar;
    use Joomla\CMS\Toolbar\ToolbarHelper;
    use Joomla\Component\Foos\Administrator\Helper\FooHelper;
    use Joomla\CMS\Language\Multilanguage;

    /**
     * View class for a list of foos.
     *
     * @since  1.0
     */
    class HtmlView extends BaseHtmlView
    {
        /**
        * An array of items
        *
        * @var  array
        */
        protected $items;

        /**
      * The pagination object
       *
       * @var  \JPagination
       */
       protected $pagination;

       /**
         * The model state
        *
        * @var  \JObject
        */
        protected $state;

        /**
        * Form object for search filters
        *
        * @var  \JForm
        */
        public $filterForm;

        /**
        * The active search filters
        *
        * @var  array
        */
        public $activeFilters;

        /**
        * The sidebar markup
        *
        * @var  string
        */
        protected $sidebar;

        /**
        * Display the view.
        *
        * @param   string  $tpl  The name of the template file to parse; automatically searches through the template paths.
        *
        * @return  mixed  A string if successful, otherwise an Error object.
        */
        public function display($tpl = null)
        {
            $this->items = $this->get('Items');
          $this->pagination = $this->get('Pagination');
         $this->filterForm = $this->get('FilterForm');
            $this->activeFilters = $this->get('ActiveFilters');
            $this->state = $this->get('State');

            // Check for errors.
            if (count($errors = $this->get('Errors')))
            {
                throw new \JViewGenericdataexception(implode("\n", $errors), 500);
            }

            // Preprocess the list of items to find ordering divisions.
            // TODO: Complete the ordering stuff with nested sets
            foreach ($this->items as &$item)
            {
                $item->order_up = true;
                $item->order_dn = true;
            }

            // We don't need toolbar in the modal window.
            if ($this->getLayout() !== 'modal')
            {
                FooHelper::addSubmenu('foos');
                $this->addToolbar();
                $this->sidebar = \JHtmlSidebar::render();

                // We do not need to filter by language when multilingual is disabled
                if (!Multilanguage::isEnabled())
                {
                    unset($this->activeFilters['language']);
                    $this->filterForm->removeField('language', 'filter');
                }
            }
            else
            {
                // In article associations modal we need to remove language filter if forcing a language.
                // We also need to change the category filter to show show categories with All or the forced language.
                if ($forcedLanguage = Factory::getApplication()->input->get('forcedLanguage', '', 'CMD'))
                {
                    // If the language is forced we can't allow to select the language, so transform the language selector filter into a hidden field.
                    $languageXml = new \SimpleXMLElement('<field name="language" type="hidden" default="' . $forcedLanguage . '" />');
                    $this->filterForm->setField($languageXml, 'filter', true);

                    // Also, unset the active language filter so the search tools is not open by default with this filter.
                    unset($this->activeFilters['language']);

                    // One last changes needed is to change the category filter to just show categories with All language or with the forced language.
                    $this->filterForm->setFieldAttribute('category_id', 'language', '*,' . $forcedLanguage, 'filter');
                }
            }

            return parent::display($tpl);
        }

        /**
        * Add the page title and toolbar.
        *
        * @return  void
        *
        * @since   1.0
        */
        protected function addToolbar()
        {
            $canDo = ContentHelper::getActions('com_foos', 'category', $this->state->get('filter.category_id'));
            $user  = Factory::getUser();

            // Get the toolbar object instance
            $toolbar = Toolbar::getInstance('toolbar');

            ToolbarHelper::title(Text::_('COM_FOO_MANAGER_FOOS'), 'address foos');

            if ($canDo->get('core.create') || count($user->getAuthorisedCategories('com_foos', 'core.create')) > 0)
            {
                $toolbar->addNew('foo.add');
            }

            if ($canDo->get('core.edit.state'))
            {
                $dropdown = $toolbar->dropdownButton('status-group')
                    ->text('JTOOLBAR_CHANGE_STATUS')
                    ->toggleSplit(false)
                    ->icon('fa fa-globe')
                    ->buttonClass('btn btn-info')
                    ->listCheck(true);

                $childBar = $dropdown->getChildToolbar();

                $childBar->publish('foos.publish')->listCheck(true);

                $childBar->unpublish('foos.unpublish')->listCheck(true);

                $childBar->archive('foos.archive')->listCheck(true);

                if ($user->authorise('core.admin'))
                {
                    $childBar->checkin('foos.checkin')->listCheck(true);
                }

                if ($this->state->get('filter.published') != -2)
                {
                    $childBar->trash('foos.trash')->listCheck(true);
                }
            }

            if ($this->state->get('filter.published') == -2 && $canDo->get('core.delete'))
            {
                $toolbar->delete('foos.delete')
                    ->text('JTOOLBAR_EMPTY_TRASH')
                    ->message('JGLOBAL_CONFIRM_DELETE')
                    ->listCheck(true);
            }

            if ($user->authorise('core.admin', 'com_foos') || $user->authorise('core.options', 'com_foos'))
            {
                $toolbar->preferences('com_foos');
            }

            HTMLHelper::_('sidebar.setAction', 'index.php?option=com_foos');
        }

        /**
        * Returns an array of fields the table can be sorted by
        *
        * @return  array  Array containing the field name to sort by as the key and display text as value
        *
        * @since   1.0
        */
        protected function getSortFields()
        {
            return array(
                'a.ordering'     => Text::_('JGRID_HEADING_ORDERING'),
                'a.published'    => Text::_('JSTATUS'),
                'a.name'         => Text::_('JGLOBAL_TITLE'),
                'category_title' => Text::_('JCATEGORY'),
                'a.access'       => Text::_('JGRID_HEADING_ACCESS'),
                'a.language'     => Text::_('JGRID_HEADING_LANGUAGE'),
                'a.id'           => Text::_('JGRID_HEADING_ID'),
            );
        }
    }

</div>

### [Changing administrator/components/com\_foos/tmpl/foos/default.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_8 .mw-headline}

The `administrator/components/com_foos/tmpl/foos/default.php` file is
....

#### [Completed administrator/components/com\_foos/tmpl/foos/default.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_file_9 .mw-headline}

The code for the
`administrator/components/com_foos/tmpl/foos/default.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    defined('_JEXEC') or die;

    use Joomla\CMS\HTML\HTMLHelper;
    use Joomla\CMS\Language\Text;
    use Joomla\CMS\Router\Route;
    use Joomla\CMS\Language\Multilanguage;
    use Joomla\CMS\Language\Associations;
    use Joomla\CMS\Layout\LayoutHelper;
    use Joomla\CMS\Session\Session;

    $canChange  = true;
    $assoc = Associations::isEnabled();
    $listOrder = $this->escape($this->state->get('list.ordering'));
    $listDirn  = $this->escape($this->state->get('list.direction'));
    $saveOrder = $listOrder == 'a.ordering';

    if ($saveOrder && !empty($this->items))
    {
        $saveOrderingUrl = 'index.php?option=com_foos&task=foos.saveOrderAjax&tmpl=component&' . Session::getFormToken() . '=1';
    }
    ?>
    <form action="<?php echo Route::_('index.php?option=com_foos'); ?>" method="post" name="adminForm" id="adminForm">
        <div class="row">
            <?php if (!empty($this->sidebar)) : ?>
                <div id="j-sidebar-container" class="col-md-2">
                    <?php echo $this->sidebar; ?>
                </div>
            <?php endif; ?>
            <div class="<?php if (!empty($this->sidebar)) {echo 'col-md-10'; } else { echo 'col-md-12'; } ?>">
                <div id="j-main-container" class="j-main-container">
                    <?php echo LayoutHelper::render('joomla.searchtools.default', array('view' => $this)); ?>
                    <?php if (empty($this->items)) : ?>
                        <div class="alert alert-warning">
                            <?php echo Text::_('JGLOBAL_NO_MATCHING_RESULTS'); ?>
                        </div>
                    <?php else : ?>
                        <table class="table" id="fooList">
                            <caption id="captionTable" class="sr-only">
                                <?php echo Text::_('COM_FOOS_TABLE_CAPTION'); ?>, <?php echo Text::_('JGLOBAL_SORTED_BY'); ?>
                            </caption>
                            <thead>
                                <tr>
                                    <th scope="col" style="width:1%" class="text-center d-none d-md-table-cell">
                                        <?php echo HTMLHelper::_('searchtools.sort', '', 'a.ordering', $listDirn, $listOrder, null, 'asc', 'JGRID_HEADING_ORDERING', 'icon-menu-2'); ?>
                                    </th>
                                    <td style="width:1%" class="text-center">
                                        <?php echo HTMLHelper::_('grid.checkall'); ?>
                                    </td>
                                    <th scope="col" style="width:1%" class="text-center d-none d-md-table-cell">
                                        <?php echo HTMLHelper::_('searchtools.sort', 'COM_FOOS_TABLE_TABLEHEAD_NAME', 'a.name', $listDirn, $listOrder); ?>
                                    </th>
                                    <th scope="col" style="width:10%" class="d-none d-md-table-cell">
                                        <?php echo HTMLHelper::_('searchtools.sort', 'JGRID_HEADING_ACCESS', 'access_level', $listDirn, $listOrder); ?>
                                    </th>
                                    <?php if ($assoc) : ?>
                                        <th scope="col" style="width:10%">
                                            <?php echo HTMLHelper::_('searchtools.sort', 'COM_FOOS_HEADING_ASSOCIATION', 'association', $listDirn, $listOrder); ?>
                                        </th>
                                    <?php endif; ?>
                                    <?php if (Multilanguage::isEnabled()) : ?>
                                        <th scope="col" style="width:10%" class="d-none d-md-table-cell">
                                            <?php echo HTMLHelper::_('searchtools.sort', 'JGRID_HEADING_LANGUAGE', 'language_title', $listDirn, $listOrder); ?>
                                        </th>
                                    <?php endif; ?>
                                    <th scope="col" style="width:1%; min-width:85px" class="text-center">
                                        <?php echo HTMLHelper::_('searchtools.sort', 'JSTATUS', 'a.published', $listDirn, $listOrder); ?>
                                    </th>
                                    <th scope="col">
                                        <?php echo HTMLHelper::_('searchtools.sort', 'JGRID_HEADING_ID', 'a.id', $listDirn, $listOrder); ?>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                            <?php
                            $n = count($this->items);
                            foreach ($this->items as $i => $item) :
                                ?>
                                <tr class="row<?php echo $i % 2; ?>">
                                    <td class="order text-center d-none d-md-table-cell">
                                        <?php
                                        $iconClass = '';
                                        if (!$canChange)
                                        {
                                            $iconClass = ' inactive';
                                        }
                                        elseif (!$saveOrder)
                                        {
                                            $iconClass = ' inactive tip-top hasTooltip" title="' . HTMLHelper::_('tooltipText', 'JORDERINGDISABLED');
                                        }
                                        ?>
                                        <span class="sortable-handler<?php echo $iconClass; ?>">
                                            <span class="icon-menu" aria-hidden="true"></span>
                                        </span>
                                        <?php if ($canChange && $saveOrder) : ?>
                                            <input type="text" style="display:none" name="order[]" size="5"
                                                value="<?php echo $item->ordering; ?>" class="width-20 text-area-order">
                                        <?php endif; ?>
                                    </td>
                                    <td class="text-center">
                                        <?php echo HTMLHelper::_('grid.id', $i, $item->id); ?>
                                    </td>
                                    <td scope="row" class="has-context">
                                        <div>
                                            <?php echo $this->escape($item->name); ?>
                                        </div>
                                        <?php $editIcon = '<span class="fa fa-pencil-square mr-2" aria-hidden="true"></span>'; ?>
                                        <a class="hasTooltip" href="<?php echo Route::_('index.php?option=com_foos&task=foo.edit&id=' . (int) $item->id); ?>" title="<?php echo Text::_('JACTION_EDIT'); ?> <?php echo $this->escape(addslashes($item->name)); ?>">
                                            <?php echo $editIcon; ?><?php echo $this->escape($item->name); ?>
                                        </a>
                                        <div class="small">
                                            <?php echo Text::_('JCATEGORY') . ': ' . $this->escape($item->category_title); ?>
                                        </div>

                                    </td>
                                    <td class="small d-none d-md-table-cell">
                                        <?php echo $item->access_level; ?>
                                    </td>
                                    <?php if ($assoc) : ?>
                                    <td class="d-none d-md-table-cell">
                                        <?php if ($item->association) : ?>
                                            <?php 
                                            echo HTMLHelper::_('foosadministrator.association', $item->id); 
                                            ?>
                                        <?php endif; ?>
                                    </td>
                                    <?php endif; ?>
                                    <?php if (Multilanguage::isEnabled()) : ?>
                                        <td class="small d-none d-md-table-cell">
                                            <?php echo LayoutHelper::render('joomla.content.language', $item); ?>
                                        </td>
                                    <?php endif; ?>
                                    <td class="text-center">
                                        <div class="btn-group">
                                            <?php echo HTMLHelper::_('jgrid.published', $item->published, $i, 'foos.', $canChange, 'cb', $item->publish_up, $item->publish_down); ?>
                                        </div>    
                                    </td>
                                    <td class="d-none d-md-table-cell">
                                        <?php echo $item->id; ?>
                                    </td>
                                </tr>
                                <?php endforeach; ?>
                            </tbody>
                        </table>

                      <?php echo $this->pagination->getListFooter(); ?>
                 
                    <?php endif; ?>
                    <input type="hidden" name="task" value="">
                    <input type="hidden" name="boxchecked" value="0">
                    <?php echo HTMLHelper::_('form.token'); ?>
                </div>
            </div>
        </div>
    </form>

</div>

\

[Test your component]{#Test_your_component_21 .mw-headline}
-----------------------------------------------------------

Now you see the page numbering in the lower part of the backend and you
can scroll through the pages.

[![As j4-t 19
1.png](/images/thumb/f/fc/As_j4-t_19_1.png/700px-As_j4-t_19_1.png){width="700"
height="341"
srcset="/images/thumb/f/fc/As_j4-t_19_1.png/1050px-As_j4-t_19_1.png 1.5x, /images/f/fc/As_j4-t_19_1.png 2x"}](/File:As_j4-t_19_1.png){.image}

\

[Example in Joomla!]{#Example_in_Joomla.21_11 .mw-headline}
-----------------------------------------------------------

[Component Contents]{#Component_Contents_22 .mw-headline}
---------------------------------------------------------

At this point in the tutorial, your component should contain the
following files:

  --- -------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------
  1   administrator/components/com\_foos/Controller/DisplayController.php        this is the administrator entry point to the Foo component                                                                                                                            unchanged
  1   administrator/components/com\_foos/Extension/FoosComponent.php             the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  6   administrator/components/com\_foos/Model/FoosModel.php                     this is the model of the Foo component                                                                                                                                                new
  1   administrator/components/com\_foos/Service/HTML/AdministratorService.php   the html service see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                                unchanged
  1   administrator/components/com\_foos/View/Foos/HtmlView.php                  file representing the view in the back end                                                                                                                                            changed
  1   administrator/components/com\_foos/services/provider.php                   the service provider interface see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                  changed
  6   administrator/components/com\_foos/sql/install.mysql.utf8.sql              During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           new
  6   administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql            During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           new
  1   administrator/components/com\_foos/tmpl/foos/default.php                   the default view in the back end                                                                                                                                                      changed
  1   administrator/components/com\_foos/foos.xml                                this is an XML (manifest) file that tells Joomla! how to install our component.                                                                                                       changed
  1   administrator/components/com\_foos/script.php                              the installer script                                                                                                                                                                  unchanged
  2   components/com\_foos/Controller/DisplayController.php                      this is the frond end entry point to the Foo component                                                                                                                                unchanged
  4   components/com\_foos/Model/FooModel.php                                    this is the frond end model for the Foo component                                                                                                                                     unchanged
  2   components/com\_foos/View/Foo/HtmlView.php                                 file representing the view in the frond end                                                                                                                                           unchanged
  2   components/com\_foos/tmpl/foo/default.php                                  the default view in the frond end                                                                                                                                                     unchanged
  3   components/com\_foos/tmpl/foo/default.xml                                  the xml for the menu item                                                                                                                                                             unchanged
  --- -------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------

\

[Conclusion]{#Conclusion_21 .mw-headline}
-----------------------------------------

You see a pagination in the lower part of the backend and you can scroll
through the pages. In the next chapter, we'll look at how to make the
layout consistent while also saving lines of code.

\

\

\

\

\

\

\

\

\

\

\

\

\

\

[Adding a Layout - Part 20]{#Adding_a_Layout_-_Part_20 .mw-headline}
====================================================================

In this chapter, we'll look at how to make the layout consistent while
also saving lines of code.

[Requirements]{#Requirements_23 .mw-headline}
---------------------------------------------

You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev)

[File Structure]{#File_Structure_23 .mw-headline}
-------------------------------------------------

### [Changing administrator/components/com\_foos/foos.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_19 .mw-headline}

The `administrator/components/com_foos/foos.xml` file is ....

#### [Completed administrator/components/com\_foos/foos.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_19 .mw-headline}

The code for the `administrator/components/com_foos/foos.xml` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8" ?>
    <extension type="component" method="upgrade">
        <name>COM_FOOS</name>
        <creationDate>[DATE]</creationDate>
        <author>[AUTHOR]</author>
        <authorEmail>[AUTHOR_EMAIL]</authorEmail>
        <authorUrl>[AUTHOR_URL]</authorUrl>
        <copyright>[COPYRIGHT]</copyright>
        <license>GNU General Public License version 2 or later;</license>
      <version>1.20.0</version>
     <description>COM_FOOS_XML_DESCRIPTION</description>
        <namespace>Joomla\Component\Foos</namespace>
        <scriptfile>script.php</scriptfile>
        <install> <!-- Runs on install -->
            <sql>
                <file driver="mysql" charset="utf8">sql/install.mysql.utf8.sql</file>
            </sql>
        </install>
        <uninstall> <!-- Runs on uninstall -->
            <sql>
                <file driver="mysql" charset="utf8">sql/uninstall.mysql.utf8.sql</file>
            </sql>
        </uninstall>
        <update>  <!-- Runs on update -->
            <schemas>
                <schemapath type="mysql">sql/updates/mysql</schemapath>
            </schemas>
        </update>
        <!-- Frond-end files -->
        <files folder="components/com_foos">
            <folder>Controller</folder>
            <folder>Model</folder>
            <folder>View</folder>
            <folder>tmpl</folder>
            <folder>language</folder>
        </files>
        <media folder="media/com_foos" destination="com_foos">
            <folder>js</folder>
        </media>
        <!-- Back-end files -->
        <administration>
            <!-- Menu entries -->
            <menu view="foos">COM_FOOS</menu>
            <submenu>
                <menu link="option=com_foos">COM_FOOS</menu>
                <menu link="option=com_categories&amp;extension=com_foos"
                    view="categories" img="class:foos-cat" alt="Foos/Categories">JCATEGORY</menu>
            </submenu>
            <files folder="administrator/components/com_foos">
                <filename>access.xml</filename>
                <filename>config.xml</filename>
                <filename>foos.xml</filename>
                <folder>Controller</folder>
                <folder>Extension</folder>
                <folder>Model</folder>
                <folder>Rule</folder>
                <folder>Service</folder>
                <folder>View</folder>
                <folder>services</folder>
                <folder>tmpl</folder>
                <folder>sql</folder>
                <folder>language</folder>
            </files>
        </administration>
    </extension>

</div>

### [Changing administrator/components/com\_foos/forms/foo.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_9 .mw-headline}

The `administrator/components/com_foos/forms/foo.xml` file is ....

#### [Completed administrator/components/com\_foos/forms/foo.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_file_10 .mw-headline}

The code for the `administrator/components/com_foos/forms/foo.xml` file
is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8"?>
    <form>
        <fieldset 
            addfieldprefix="Joomla\Component\Foos\Administrator\Field" 
            addruleprefix="Joomla\Component\Foos\Administrator\Rule"
        >
            <field
                name="id"
                type="number"
                label="JGLOBAL_FIELD_ID_LABEL"
                default="0"
                class="readonly"
                readonly="true"
            />

            <field
                name="name"
                type="text"
                validate="Letter"
                class="validate-letter"
                label="COM_FOOS_FIELD_NAME_LABEL"
                size="40"
                required="true"
            />

            <field
                name="language"
                type="contentlanguage"
                label="JFIELD_LANGUAGE_LABEL"
            >
                <option value="*">JALL</option>
            </field>

            <field
                name="published"
                type="list"
                label="JSTATUS"
                default="1"
                id="published"
                class="custom-select-color-state"
                size="1"
            >
                <option value="1">JPUBLISHED</option>
                <option value="0">JUNPUBLISHED</option>
                <option value="2">JARCHIVED</option>
                <option value="-2">JTRASHED</option>
            </field>

            <field
                name="publish_up"
                type="calendar"
                label="COM_FOOS_FIELD_PUBLISH_UP_LABEL"
                translateformat="true"
                showtime="true"
                size="22"
                filter="user_utc"
            />

            <field
                name="publish_down"
                type="calendar"
                label="COM_FOOS_FIELD_PUBLISH_DOWN_LABEL"
                translateformat="true"
                showtime="true"
                size="22"
                filter="user_utc"
            />

            <field
                name="catid"
                type="categoryedit"
                label="JCATEGORY"
                extension="com_foos"
                addfieldprefix="Joomla\Component\Categories\Administrator\Field"
                required="true"
                default=""
            />

            <field
                name="access"
                type="accesslevel"
                label="JFIELD_ACCESS_LABEL"
                size="1"
            />

            <field
                name="ordering"
                type="ordering"
                label="JFIELD_ORDERING_LABEL"
                content_type="com_foos.foo"
            />

        </fieldset>
        <fields name="params" label="JGLOBAL_FIELDSET_DISPLAY_OPTIONS">
            <fieldset name="display" label="JGLOBAL_FIELDSET_DISPLAY_OPTIONS">

                <field
                    name="show_name"
                    type="list"
                    label="COM_FOOS_FIELD_PARAMS_NAME_LABEL"
                    useglobal="true"
                >
                    <option value="0">JHIDE</option>
                    <option value="1">JSHOW</option>
                </field>

               <field
                   name="foos_layout"
                   type="componentlayout"
                   label="JFIELD_ALT_LAYOUT_LABEL"
                   class="custom-select"
                   extension="com_foos"
                   view="foo"
                   useglobal="true"
               />

         </fieldset>
        </fields>
    </form>

</div>

### [Changing x]{#Changing_x_2 .mw-headline}

The `x` file is ....

#### [Completed x file]{#Completed_x_file_2 .mw-headline}

The code for the `x` file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php

</div>

### [Changing administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.sys.ini .mw-headline}

The
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.sys.ini`
file is ....

#### [Completed administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.sys.ini file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.sys.ini_file .mw-headline}

The code for the
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.sys.ini`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    COM_FOOS="[PROJECT_NAME]"
    COM_FOOS_XML_DESCRIPTION="Foo Component"

    COM_FOOS_INSTALLERSCRIPT_PREFLIGHT="<p>Anything here happens before the installation/update/uninstallation of the component</p>"
    COM_FOOS_INSTALLERSCRIPT_UPDATE="<p>The component has been updated</p>"
    COM_FOOS_INSTALLERSCRIPT_UNINSTALL="<p>The component has been uninstalled</p>"
    COM_FOOS_INSTALLERSCRIPT_INSTALL="<p>The component has been installed</p>"
    COM_FOOS_INSTALLERSCRIPT_POSTFLIGHT="<p>Anything here happens after the installation/update/uninstallation of the component</p>"

    COM_FOOS_FOO_VIEW_DEFAULT_TITLE="Single Foo"
    COM_FOOS_FOO_VIEW_DEFAULT_DESC="This links to the information for one foo."
    COM_FOOS_SELECT_FOO_LABEL="Select a foo"

    COM_FOOS_CHANGE_FOO="Change a foo"
    COM_FOOS_SELECT_A_FOO="Select a foo"

    COM_FOOS_FOO_VIEW_WITHHEAD_TITLE="Single Foo with a headertext"
    COM_FOOS_FOO_VIEW_WITHHEAD_DESC="This links to the information for one foo with a headertext."

</div>

### [Creating components/com\_foos/tmpl/foo/withhead.php]{#Creating_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fwithhead.php .mw-headline}

The `components/com_foos/tmpl/foo/withhead.php` file is ....

#### [Completed components/com\_foos/tmpl/foo/withhead.php file]{#Completed_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fwithhead.php_file .mw-headline}

The code for the `components/com_foos/tmpl/foo/withhead.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php

    defined('_JEXEC') or die;

    use Joomla\CMS\Language\Text;

    echo "<hr>Here you can show a headertext<hr>";

    if ($this->item->params->get('show_name')) {
        if ($this->Params->get('show_foo_name_label')) {
            echo Text::_('COM_FOOS_NAME') . $this->item->name;
        } else {
            echo $this->item->name;
        }
    }
    echo $this->item->event->afterDisplayTitle; 
    echo $this->item->event->beforeDisplayContent;
    echo $this->item->event->afterDisplayContent;

</div>

### [Creating components/com\_foos/tmpl/foo/withhead.xml]{#Creating_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fwithhead.xml .mw-headline}

The `components/com_foos/tmpl/foo/withhead.xml` file is ....

#### [Completed components/com\_foos/tmpl/foo/withhead.xml file]{#Completed_components.2Fcom_foos.2Ftmpl.2Ffoo.2Fwithhead.xml_file .mw-headline}

The code for the `components/com_foos/tmpl/foo/withhead.xml` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8"?>
    <metadata>
        <layout title="COM_FOOS_FOO_VIEW_WITHHEAD_TITLE">
            <message>
                <![CDATA[COM_FOOS_FOO_VIEW_WITHHEAD_DESC]]>
            </message>
        </layout>
        <!-- Add fields to the request variables for the layout. -->
        <fields name="request">
            <fieldset name="request"
                addfieldprefix="Joomla\Component\Foos\Administrator\Field"
            >
                <field
                    name="id"
                    type="modal_foo"
                    label="COM_FOOS_SELECT_FOO_LABEL"
                    required="true"
                    select="true"
                    new="true"
                    edit="true"
                    clear="true"
                />
            </fieldset>
        </fields>
    </metadata>

</div>

[Test your component]{#Test_your_component_22 .mw-headline}
-----------------------------------------------------------

[Example in Joomla!]{#Example_in_Joomla.21_12 .mw-headline}
-----------------------------------------------------------

[![Componenttutorial20a.png](/images/thumb/e/e8/Componenttutorial20a.png/700px-Componenttutorial20a.png){width="700"
height="341"
srcset="/images/thumb/e/e8/Componenttutorial20a.png/1050px-Componenttutorial20a.png 1.5x, /images/e/e8/Componenttutorial20a.png 2x"}](/File:Componenttutorial20a.png){.image}

\

[Component Contents]{#Component_Contents_23 .mw-headline}
---------------------------------------------------------

At this point in the tutorial, your component should contain the
following files:

  --- -------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------
  1   administrator/components/com\_foos/Controller/DisplayController.php        this is the administrator entry point to the Foo component                                                                                                                            unchanged
  1   administrator/components/com\_foos/Extension/FoosComponent.php             the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  6   administrator/components/com\_foos/Model/FoosModel.php                     this is the model of the Foo component                                                                                                                                                new
  1   administrator/components/com\_foos/Service/HTML/AdministratorService.php   the html service see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                                unchanged
  1   administrator/components/com\_foos/View/Foos/HtmlView.php                  file representing the view in the back end                                                                                                                                            changed
  1   administrator/components/com\_foos/services/provider.php                   the service provider interface see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                  changed
  6   administrator/components/com\_foos/sql/install.mysql.utf8.sql              During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           new
  6   administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql            During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           new
  1   administrator/components/com\_foos/tmpl/foos/default.php                   the default view in the back end                                                                                                                                                      changed
  1   administrator/components/com\_foos/foos.xml                                this is an XML (manifest) file that tells Joomla! how to install our component.                                                                                                       changed
  1   administrator/components/com\_foos/script.php                              the installer script                                                                                                                                                                  unchanged
  2   components/com\_foos/Controller/DisplayController.php                      this is the frond end entry point to the Foo component                                                                                                                                unchanged
  4   components/com\_foos/Model/FooModel.php                                    this is the frond end model for the Foo component                                                                                                                                     unchanged
  2   components/com\_foos/View/Foo/HtmlView.php                                 file representing the view in the frond end                                                                                                                                           unchanged
  2   components/com\_foos/tmpl/foo/default.php                                  the default view in the frond end                                                                                                                                                     unchanged
  3   components/com\_foos/tmpl/foo/default.xml                                  the xml for the menu item                                                                                                                                                             unchanged
  --- -------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------

\

[Conclusion]{#Conclusion_22 .mw-headline}
-----------------------------------------

[Adding Checkout - Part 21]{#Adding_Checkout_-_Part_21 .mw-headline}
====================================================================

[Requirements]{#Requirements_24 .mw-headline}
---------------------------------------------

You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev)

[File Structure]{#File_Structure_24 .mw-headline}
-------------------------------------------------

### [Changing administrator/components/com\_foos/Model/FoosModel.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_8 .mw-headline}

The `administrator/components/com_foos/Model/FoosModel.php` file is ....

#### [Completed administrator/components/com\_foos/Model/FoosModel.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_file_9 .mw-headline}

The code for the `administrator/components/com_foos/Model/FoosModel.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\Model;

    defined('_JEXEC') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\Language\Associations;
    use Joomla\CMS\MVC\Model\ListModel;

    /**
     * Methods supporting a list of foo records.
     *
     * @since  1.0
     */
    class FoosModel extends ListModel
    {
        /**
         * Constructor.
         *
         * @param   array  $config  An optional associative array of configuration settings.
         *
         * @see     \JControllerLegacy
         * @since   1.0
         */
        public function __construct($config = array())
        {
            if (empty($config['filter_fields']))
            {
                $config['filter_fields'] = array(
                    'id', 'a.id',
                    'name', 'a.name',
                    'catid', 'a.catid', 'category_id', 'category_title',
                  'checked_out', 'a.checked_out',
                   'checked_out_time', 'a.checked_out_time',
                 'published', 'a.published',
                    'access', 'a.access', 'access_level',
                    'ordering', 'a.ordering',
                    'language', 'a.language', 'language_title',
                    'publish_up', 'a.publish_up',
                    'publish_down', 'a.publish_down',
                );

                $assoc = Associations::isEnabled();

                if ($assoc)
                {
                    $config['filter_fields'][] = 'association';
                }
            }

            parent::__construct($config);
        }

        /**
         * Build an SQL query to load the list data.
         *
         * @return  \JDatabaseQuery
         *
         * @since   1.0
         */
        protected function getListQuery()
        {
            // Create a new query object.
            $db = $this->getDbo();
            $query = $db->getQuery(true);

            // Select the required fields from the table.
            $query->select(
                $this->getState(
                    'list.select',
                    'a.id AS id,'
                    . 'a.name AS name,'
                    . 'a.access,'
                    . 'a.language,'
                    . 'a.ordering AS ordering,'
                  . 'a.checked_out AS checked_out,'
                   . 'a.checked_out_time AS checked_out_time,'
                 . 'a.state AS state,'
                    . 'a.catid AS catid,'
                    . 'a.published AS published,'
                    . 'a.publish_up,'
                    . 'a.publish_down'
                )
            );

            $query->from($db->quoteName('#__foos_details', 'a'));

            // Join over the asset groups.
            $query->select($db->quoteName('ag.title', 'access_level'))
                ->join(
                    'LEFT',
                    $db->quoteName('#__viewlevels', 'ag') . ' ON ' . $db->quoteName('ag.id') . ' = ' . $db->quoteName('a.access')
                );

            // Join over the categories.
            $query->select($db->quoteName('c.title', 'category_title'))
                ->join(
                    'LEFT',
                    $db->quoteName('#__categories', 'c') . ' ON ' . $db->quoteName('c.id') . ' = ' . $db->quoteName('a.catid')
                );

            // Join over the language
            $query->select($db->quoteName('l.title', 'language_title'))
                ->select($db->quoteName('l.image', 'language_image'))
                ->join(
                    'LEFT',
                    $db->quoteName('#__languages', 'l') . ' ON ' . $db->quoteName('l.lang_code') . ' = ' . $db->quoteName('a.language')
                );

            // Join over the associations.
            $assoc = Associations::isEnabled();

            if ($assoc)
            {
                $query->select('COUNT(' . $db->quoteName('asso2.id') . ') > 1 as ' . $db->quoteName('association'))
                    ->join(
                        'LEFT',
                        $db->quoteName('#__associations', 'asso') . ' ON ' . $db->quoteName('asso.id') . ' = ' . $db->quoteName('a.id')
                        . ' AND ' . $db->quoteName('asso.context') . ' = ' . $db->quote('com_foos.item')
                    )
                    ->join(
                        'LEFT',
                        $db->quoteName('#__associations', 'asso2') . ' ON ' . $db->quoteName('asso2.key') . ' = ' . $db->quoteName('asso.key')
                    )
                    ->group(
                        $db->quoteName(
                            array(
                                'a.id',
                                'a.name',
                                'a.catid',
                              'a.checked_out',
                               'a.checked_out_time',
                             'a.published',
                                'a.access',
                                'a.language',
                                'a.publish_up',
                                'a.publish_down',
                                'l.title' ,
                                'l.image' ,
                                'ag.title' ,
                                'c.title'
                            )
                        )
                    );
            }

          // Join over the users for the checked out user.
           $query->select($db->quoteName('uc.name', 'editor'))
               ->join(
                   'LEFT',
                   $db->quoteName('#__users', 'uc') . ' ON ' . $db->quoteName('uc.id') . ' = ' . $db->quoteName('a.checked_out')
               );

         // Filter by access level.
            if ($access = $this->getState('filter.access'))
            {
                $query->where($db->quoteName('a.access') . ' = ' . (int) $access);
            }

            // Filter by published state
            $published = (string) $this->getState('filter.published');

            if (is_numeric($published))
            {
                $query->where($db->quoteName('a.published') . ' = ' . (int) $published);
            }
            elseif ($published === '')
            {
                $query->where('(' . $db->quoteName('a.published') . ' = 0 OR ' . $db->quoteName('a.published') . ' = 1)');
            }

            // Filter by a single or group of categories.
            $categoryId = $this->getState('filter.category_id');

            if (is_numeric($categoryId))
            {
                $query->where($db->quoteName('a.catid') . ' = ' . (int) $categoryId);
            }
            elseif (is_array($categoryId))
            {
                $query->where($db->quoteName('a.catid') . ' IN (' . implode(',', ArrayHelper::toInteger($categoryId)) . ')');
            }

            // Filter by search in name.
            $search = $this->getState('filter.search');

            if (!empty($search))
            {
                if (stripos($search, 'id:') === 0)
                {
                    $query->where('a.id = ' . (int) substr($search, 3));
                }
                else
                {
                    $search = $db->quote('%' . str_replace(' ', '%', $db->escape(trim($search), true) . '%'));
                    $query->where(
                        '(' . $db->quoteName('a.name') . ' LIKE ' . $search . ')'
                    );
                }
            }

            // Filter on the language.
            if ($language = $this->getState('filter.language'))
            {
                $query->where($db->quoteName('a.language') . ' = ' . $db->quote($language));
            }

            // Filter by a single tag.
            $tagId = $this->getState('filter.tag');

            if (is_numeric($tagId))
            {
                $query->where($db->quoteName('tagmap.tag_id') . ' = ' . (int) $tagId)
                    ->join(
                        'LEFT',
                        $db->quoteName('#__contentitem_tag_map', 'tagmap')
                        . ' ON ' . $db->quoteName('tagmap.content_item_id') . ' = ' . $db->quoteName('a.id')
                        . ' AND ' . $db->quoteName('tagmap.type_alias') . ' = ' . $db->quote('com_foos.contact')
                    );
            }

            // Filter on the level.
            if ($level = $this->getState('filter.level'))
            {
                $query->where('c.level <= ' . (int) $level);
            }

            // Add the list ordering clause.
            $orderCol = $this->state->get('list.ordering', 'a.name');
            $orderDirn = $this->state->get('list.direction', 'asc');

            if ($orderCol == 'a.ordering' || $orderCol == 'category_title')
            {
                $orderCol = $db->quoteName('c.title') . ' ' . $orderDirn . ', ' . $db->quoteName('a.ordering');
            }

            $query->order($db->escape($orderCol . ' ' . $orderDirn));

            return $query;
        }

        /**
         * Method to auto-populate the model state.
         *
         * Note. Calling getState in this method will result in recursion.
         *
         * @param   string  $ordering   An optional ordering field.
         * @param   string  $direction  An optional direction (asc|desc).
         *
         * @return  void
         *
         * @since   1.0
         */
        protected function populateState($ordering = 'a.name', $direction = 'asc')
        {
            $app = Factory::getApplication();

            $forcedLanguage = $app->input->get('forcedLanguage', '', 'cmd');

            // Adjust the context to support modal layouts.
            if ($layout = $app->input->get('layout'))
            {
                $this->context .= '.' . $layout;
            }

            // Adjust the context to support forced languages.
            if ($forcedLanguage)
            {
                $this->context .= '.' . $forcedLanguage;
            }

            // List state information.
            parent::populateState($ordering, $direction);

            // Force a language.
            if (!empty($forcedLanguage))
            {
                $this->setState('filter.language', $forcedLanguage);
            }
        }
    }

</div>

### [Changing administrator/components/com\_foos/View/Foos/HtmlView.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_11 .mw-headline}

The `administrator/components/com_foos/View/Foos/HtmlView.php` file is
....

#### [Completed administrator/components/com\_foos/View/Foos/HtmlView.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_file_12 .mw-headline}

The code for the
`administrator/components/com_foos/View/Foos/HtmlView.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php

    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\View\Foos;

    defined('_JEXEC') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\HTML\HTMLHelper;
    use Joomla\CMS\Helper\ContentHelper;
    use Joomla\CMS\Language\Text;
    use Joomla\CMS\MVC\View\HtmlView as BaseHtmlView;
    use Joomla\CMS\Toolbar\Toolbar;
    use Joomla\CMS\Toolbar\ToolbarHelper;
    use Joomla\Component\Foos\Administrator\Helper\FooHelper;
    use Joomla\CMS\Language\Multilanguage;

    /**
     * View class for a list of foos.
     *
     * @since  1.0
     */
    class HtmlView extends BaseHtmlView
    {
        /**
         * An array of items
         *
         * @var  array
         */
        protected $items;

        /**
         * The pagination object
         *
         * @var  \JPagination
         */
        protected $pagination;

        /**
         * The model state
         *
         * @var  \JObject
         */
        protected $state;

        /**
         * Form object for search filters
         *
         * @var  \JForm
         */
        public $filterForm;

        /**
         * The active search filters
         *
         * @var  array
         */
        public $activeFilters;

        /**
         * The sidebar markup
         *
         * @var  string
         */
        protected $sidebar;

        /**
         * Display the view.
         *
         * @param   string  $tpl  The name of the template file to parse; automatically searches through the template paths.
         *
         * @return  mixed  A string if successful, otherwise an Error object.
         */
        public function display($tpl = null)
        {
            $this->items = $this->get('Items');
            $this->pagination = $this->get('Pagination');
            $this->filterForm = $this->get('FilterForm');
            $this->activeFilters = $this->get('ActiveFilters');
            $this->state = $this->get('State');

            // Check for errors.
            if (count($errors = $this->get('Errors')))
            {
                throw new \JViewGenericdataexception(implode("\n", $errors), 500);
            }

            // Preprocess the list of items to find ordering divisions.
            // TODO: Complete the ordering stuff with nested sets
            foreach ($this->items as &$item)
            {
                $item->order_up = true;
                $item->order_dn = true;
            }

            // We don't need toolbar in the modal window.
            if ($this->getLayout() !== 'modal')
            {
                FooHelper::addSubmenu('foos');
                $this->addToolbar();
                $this->sidebar = \JHtmlSidebar::render();

                // We do not need to filter by language when multilingual is disabled
                if (!Multilanguage::isEnabled())
                {
                    unset($this->activeFilters['language']);
                    $this->filterForm->removeField('language', 'filter');
                }
            }
            else
            {
                // In article associations modal we need to remove language filter if forcing a language.
                // We also need to change the category filter to show show categories with All or the forced language.
                if ($forcedLanguage = Factory::getApplication()->input->get('forcedLanguage', '', 'CMD'))
                {
                    // If the language is forced we can't allow to select the language, so transform the language selector filter into a hidden field.
                    $languageXml = new \SimpleXMLElement('<field name="language" type="hidden" default="' . $forcedLanguage . '" />');
                    $this->filterForm->setField($languageXml, 'filter', true);

                    // Also, unset the active language filter so the search tools is not open by default with this filter.
                    unset($this->activeFilters['language']);

                    // One last changes needed is to change the category filter to just show categories with All language or with the forced language.
                    $this->filterForm->setFieldAttribute('category_id', 'language', '*,' . $forcedLanguage, 'filter');
                }
            }

            return parent::display($tpl);
        }

        /**
         * Add the page title and toolbar.
         *
         * @return  void
         *
         * @since   1.0
         */
        protected function addToolbar()
        {
            $canDo = ContentHelper::getActions('com_foos', 'category', $this->state->get('filter.category_id'));
            $user  = Factory::getUser();

            // Get the toolbar object instance
            $toolbar = Toolbar::getInstance('toolbar');

            ToolbarHelper::title(Text::_('COM_FOO_MANAGER_FOOS'), 'address foos');

            if ($canDo->get('core.create') || count($user->getAuthorisedCategories('com_foos', 'core.create')) > 0)
            {
                $toolbar->addNew('foo.add');
            }

            if ($canDo->get('core.edit.state'))
            {
                $dropdown = $toolbar->dropdownButton('status-group')
                    ->text('JTOOLBAR_CHANGE_STATUS')
                    ->toggleSplit(false)
                    ->icon('fa fa-globe')
                    ->buttonClass('btn btn-info')
                    ->listCheck(true);

                $childBar = $dropdown->getChildToolbar();

                $childBar->publish('foos.publish')->listCheck(true);

                $childBar->unpublish('foos.unpublish')->listCheck(true);

                $childBar->archive('foos.archive')->listCheck(true);

              if ($user->authorise('core.admin'))
               {
                   $childBar->checkin('foos.checkin')->listCheck(true);
               }

             if ($this->state->get('filter.published') != -2)
                {
                    $childBar->trash('foos.trash')->listCheck(true);
                }
            }

            if ($this->state->get('filter.published') == -2 && $canDo->get('core.delete'))
            {
                $toolbar->delete('foos.delete')
                    ->text('JTOOLBAR_EMPTY_TRASH')
                    ->message('JGLOBAL_CONFIRM_DELETE')
                    ->listCheck(true);
            }

            if ($user->authorise('core.admin', 'com_foos') || $user->authorise('core.options', 'com_foos'))
            {
                $toolbar->preferences('com_foos');
            }

            HTMLHelper::_('sidebar.setAction', 'index.php?option=com_foos');
        }

        /**
         * Returns an array of fields the table can be sorted by
         *
         * @return  array  Array containing the field name to sort by as the key and display text as value
         *
         * @since   1.0
         */
        protected function getSortFields()
        {
            return array(
                'a.ordering'     => Text::_('JGRID_HEADING_ORDERING'),
                'a.published'    => Text::_('JSTATUS'),
                'a.name'         => Text::_('JGLOBAL_TITLE'),
                'category_title' => Text::_('JCATEGORY'),
                'a.access'       => Text::_('JGRID_HEADING_ACCESS'),
                'a.language'     => Text::_('JGRID_HEADING_LANGUAGE'),
                'a.id'           => Text::_('JGRID_HEADING_ID'),
            );
        }
    }

</div>

### [Changing administrator/components/com\_foos/foos.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_20 .mw-headline}

The `administrator/components/com_foos/foos.xml` file is ....

#### [Completed administrator/components/com\_foos/foos.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_20 .mw-headline}

The code for the `administrator/components/com_foos/foos.xml` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8" ?>
    <extension type="component" method="upgrade">
        <name>COM_FOOS</name>
        <creationDate>[DATE]</creationDate>
        <author>[AUTHOR]</author>
        <authorEmail>[AUTHOR_EMAIL]</authorEmail>
        <authorUrl>[AUTHOR_URL]</authorUrl>
        <copyright>[COPYRIGHT]</copyright>
        <license>GNU General Public License version 2 or later;</license>
      <version>1.21.0</version>
     <description>COM_FOOS_XML_DESCRIPTION</description>
        <namespace>Joomla\Component\Foos</namespace>
        <scriptfile>script.php</scriptfile>
        <install> <!-- Runs on install -->
            <sql>
                <file driver="mysql" charset="utf8">sql/install.mysql.utf8.sql</file>
            </sql>
        </install>
        <uninstall> <!-- Runs on uninstall -->
            <sql>
                <file driver="mysql" charset="utf8">sql/uninstall.mysql.utf8.sql</file>
            </sql>
        </uninstall>
        <update>  <!-- Runs on update -->
            <schemas>
                <schemapath type="mysql">sql/updates/mysql</schemapath>
            </schemas>
        </update>
        <!-- Frond-end files -->
        <files folder="components/com_foos">
            <folder>Controller</folder>
            <folder>Model</folder>
            <folder>View</folder>
            <folder>tmpl</folder>
            <folder>language</folder>
        </files>
        <media folder="media/com_foos" destination="com_foos">
            <folder>js</folder>
        </media>
        <!-- Back-end files -->
        <administration>
            <!-- Menu entries -->
            <menu view="foos">COM_FOOS</menu>
            <submenu>
                <menu link="option=com_foos">COM_FOOS</menu>
                <menu link="option=com_categories&amp;extension=com_foos"
                    view="categories" img="class:foos-cat" alt="Foos/Categories">JCATEGORY</menu>
            </submenu>
            <files folder="administrator/components/com_foos">
                <filename>access.xml</filename>
                <filename>config.xml</filename>
                <filename>foos.xml</filename>
                <folder>Controller</folder>
                <folder>Extension</folder>
                <folder>Model</folder>
                <folder>Rule</folder>
                <folder>Service</folder>
                <folder>View</folder>
                <folder>services</folder>
                <folder>tmpl</folder>
                <folder>sql</folder>
                <folder>language</folder>
            </files>
        </administration>
    </extension>

</div>

### [Changing administrator/components/com\_foos/forms/foo.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_10 .mw-headline}

The `administrator/components/com_foos/forms/foo.xml` file is ....

#### [Completed administrator/components/com\_foos/forms/foo.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_file_11 .mw-headline}

The code for the `administrator/components/com_foos/forms/foo.xml` file
is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8"?>
    <form>
        <fieldset 
            addfieldprefix="Joomla\Component\Foos\Administrator\Field" 
            addruleprefix="Joomla\Component\Foos\Administrator\Rule"
        >
            <field
                name="id"
                type="number"
                label="JGLOBAL_FIELD_ID_LABEL"
                default="0"
                class="readonly"
                readonly="true"
            />

            <field
                name="name"
                type="text"
                validate="Letter"
                class="validate-letter"
                label="COM_FOOS_FIELD_NAME_LABEL"
                size="40"
                required="true"
            />

            <field
                name="language"
                type="contentlanguage"
                label="JFIELD_LANGUAGE_LABEL"
            >
                <option value="*">JALL</option>
            </field>

            <field
                name="published"
                type="list"
                label="JSTATUS"
                default="1"
                id="published"
                class="custom-select-color-state"
                size="1"
            >
                <option value="1">JPUBLISHED</option>
                <option value="0">JUNPUBLISHED</option>
                <option value="2">JARCHIVED</option>
                <option value="-2">JTRASHED</option>
            </field>

            <field
                name="publish_up"
                type="calendar"
                label="COM_FOOS_FIELD_PUBLISH_UP_LABEL"
                translateformat="true"
                showtime="true"
                size="22"
                filter="user_utc"
            />

            <field
                name="publish_down"
                type="calendar"
                label="COM_FOOS_FIELD_PUBLISH_DOWN_LABEL"
                translateformat="true"
                showtime="true"
                size="22"
                filter="user_utc"
            />

            <field
                name="catid"
                type="categoryedit"
                label="JCATEGORY"
                extension="com_foos"
                addfieldprefix="Joomla\Component\Categories\Administrator\Field"
                required="true"
                default=""
            />

            <field
                name="access"
                type="accesslevel"
                label="JFIELD_ACCESS_LABEL"
                size="1"
            />

          <field
               name="checked_out"
               type="hidden"
               filter="unset"
           />

           <field
               name="checked_out_time"
               type="hidden"
               filter="unset"
           />

           <field
             name="ordering"
                type="ordering"
                label="JFIELD_ORDERING_LABEL"
                content_type="com_foos.foo"
            />

        </fieldset>
        <fields name="params" label="JGLOBAL_FIELDSET_DISPLAY_OPTIONS">
            <fieldset name="display" label="JGLOBAL_FIELDSET_DISPLAY_OPTIONS">

                <field
                    name="show_name"
                    type="list"
                    label="COM_FOOS_FIELD_PARAMS_NAME_LABEL"
                    useglobal="true"
                >
                    <option value="0">JHIDE</option>
                    <option value="1">JSHOW</option>
                </field>

                <field
                    name="foos_layout"
                    type="componentlayout"
                    label="JFIELD_ALT_LAYOUT_LABEL"
                    class="custom-select"
                    extension="com_foos"
                    view="foo"
                    useglobal="true"
                />

            </fieldset>
        </fields>
    </form>

</div>

### [Changing administrator/components/com\_foos/tmpl/foos/default.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_9 .mw-headline}

The `administrator/components/com_foos/tmpl/foos/default.php` file is
....

#### [Completed administrator/components/com\_foos/tmpl/foos/default.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_file_10 .mw-headline}

The code for the
`administrator/components/com_foos/tmpl/foos/default.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    defined('_JEXEC') or die;

    use Joomla\CMS\HTML\HTMLHelper;
    use Joomla\CMS\Language\Text;
    use Joomla\CMS\Router\Route;
    use Joomla\CMS\Language\Multilanguage;
    use Joomla\CMS\Language\Associations;
    use Joomla\CMS\Layout\LayoutHelper;
    use Joomla\CMS\Session\Session;

    $canChange  = true;
    $assoc = Associations::isEnabled();
    $listOrder = $this->escape($this->state->get('list.ordering'));
    $listDirn  = $this->escape($this->state->get('list.direction'));
    $saveOrder = $listOrder == 'a.ordering';

    if ($saveOrder && !empty($this->items))
    {
       $saveOrderingUrl = 'index.php?option=com_foos&task=foos.saveOrderAjax&tmpl=component&' . Session::getFormToken() . '=1';
    }
    ?>
    <form action="<?php echo Route::_('index.php?option=com_foos'); ?>" method="post" name="adminForm" id="adminForm">
        <div class="row">
            <?php if (!empty($this->sidebar)) : ?>
                <div id="j-sidebar-container" class="col-md-2">
                    <?php echo $this->sidebar; ?>
                </div>
            <?php endif; ?>
            <div class="<?php if (!empty($this->sidebar)) {echo 'col-md-10'; } else { echo 'col-md-12'; } ?>">
                <div id="j-main-container" class="j-main-container">
                    <?php echo LayoutHelper::render('joomla.searchtools.default', array('view' => $this)); ?>
                    <?php if (empty($this->items)) : ?>
                        <div class="alert alert-warning">
                            <?php echo Text::_('JGLOBAL_NO_MATCHING_RESULTS'); ?>
                        </div>
                    <?php else : ?>
                        <table class="table" id="fooList">
                            <caption id="captionTable" class="sr-only">
                                <?php echo Text::_('COM_FOOS_TABLE_CAPTION'); ?>, <?php echo Text::_('JGLOBAL_SORTED_BY'); ?>
                            </caption>
                            <thead>
                                <tr>
                                    <th scope="col" style="width:1%" class="text-center d-none d-md-table-cell">
                                        <?php echo HTMLHelper::_('searchtools.sort', '', 'a.ordering', $listDirn, $listOrder, null, 'asc', 'JGRID_HEADING_ORDERING', 'icon-menu-2'); ?>
                                    </th>
                                    <td style="width:1%" class="text-center">
                                        <?php echo HTMLHelper::_('grid.checkall'); ?>
                                    </td>
                                    <th scope="col" style="width:1%" class="text-center d-none d-md-table-cell">
                                        <?php echo HTMLHelper::_('searchtools.sort', 'COM_FOOS_TABLE_TABLEHEAD_NAME', 'a.name', $listDirn, $listOrder); ?>
                                    </th>
                                    <th scope="col" style="width:10%" class="d-none d-md-table-cell">
                                        <?php echo HTMLHelper::_('searchtools.sort', 'JGRID_HEADING_ACCESS', 'access_level', $listDirn, $listOrder); ?>
                                    </th>
                                    <?php if ($assoc) : ?>
                                        <th scope="col" style="width:10%">
                                            <?php echo HTMLHelper::_('searchtools.sort', 'COM_FOOS_HEADING_ASSOCIATION', 'association', $listDirn, $listOrder); ?>
                                        </th>
                                    <?php endif; ?>
                                    <?php if (Multilanguage::isEnabled()) : ?>
                                        <th scope="col" style="width:10%" class="d-none d-md-table-cell">
                                            <?php echo HTMLHelper::_('searchtools.sort', 'JGRID_HEADING_LANGUAGE', 'language_title', $listDirn, $listOrder); ?>
                                        </th>
                                    <?php endif; ?>
                                    <th scope="col" style="width:1%; min-width:85px" class="text-center">
                                        <?php echo HTMLHelper::_('searchtools.sort', 'JSTATUS', 'a.published', $listDirn, $listOrder); ?>
                                    </th>
                                    <th scope="col">
                                        <?php echo HTMLHelper::_('searchtools.sort', 'JGRID_HEADING_ID', 'a.id', $listDirn, $listOrder); ?>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                            <?php
                           $n = count($this->items);
                           foreach ($this->items as $i => $item) :
                               ?>
                                <tr class="row<?php echo $i % 2; ?>">
                                    <td class="order text-center d-none d-md-table-cell">
                                        <?php
                                       $iconClass = '';
                                       if (!$canChange)
                                       {
                                           $iconClass = ' inactive';
                                       }
                                       elseif (!$saveOrder)
                                       {
                                           $iconClass = ' inactive tip-top hasTooltip" title="' . HTMLHelper::_('tooltipText', 'JORDERINGDISABLED');
                                       }
                                       ?>
                                        <span class="sortable-handler<?php echo $iconClass; ?>">
                                            <span class="icon-menu" aria-hidden="true"></span>
                                        </span>
                                        <?php if ($canChange && $saveOrder) : ?>
                                            <input type="text" style="display:none" name="order[]" size="5"
                                                value="<?php echo $item->ordering; ?>" class="width-20 text-area-order">
                                        <?php endif; ?>
                                    </td>
                                    <td class="text-center">
                                        <?php echo HTMLHelper::_('grid.id', $i, $item->id); ?>
                                    </td>
                                    <td scope="row" class="has-context">
                                      <?php if ($item->checked_out) : ?>
                                           <?php echo HTMLHelper::_('jgrid.checkedout', $i, $item->editor, $item->checked_out_time, 'foos.', true); ?>
                                       <?php endif; ?>
                                     <div>
                                            <?php echo $this->escape($item->name); ?>
                                        </div>
                                        <?php $editIcon = '<span class="fa fa-pencil-square mr-2" aria-hidden="true"></span>'; ?>
                                        <a class="hasTooltip" href="<?php echo Route::_('index.php?option=com_foos&task=foo.edit&id=' . (int) $item->id); ?>" title="<?php echo Text::_('JACTION_EDIT'); ?> <?php echo $this->escape(addslashes($item->name)); ?>">
                                            <?php echo $editIcon; ?><?php echo $this->escape($item->name); ?>
                                        </a>
                                        <div class="small">
                                            <?php echo Text::_('JCATEGORY') . ': ' . $this->escape($item->category_title); ?>
                                        </div>

                                    </td>
                                    <td class="small d-none d-md-table-cell">
                                        <?php echo $item->access_level; ?>
                                    </td>
                                    <?php if ($assoc) : ?>
                                    <td class="d-none d-md-table-cell">
                                        <?php if ($item->association) : ?>
                                            <?php 
                                           echo HTMLHelper::_('foosadministrator.association', $item->id); 
                                           ?>
                                        <?php endif; ?>
                                    </td>
                                    <?php endif; ?>
                                    <?php if (Multilanguage::isEnabled()) : ?>
                                        <td class="small d-none d-md-table-cell">
                                            <?php echo LayoutHelper::render('joomla.content.language', $item); ?>
                                        </td>
                                    <?php endif; ?>
                                    <td class="text-center">
                                        <div class="btn-group">
                                            <?php echo HTMLHelper::_('jgrid.published', $item->published, $i, 'foos.', $canChange, 'cb', $item->publish_up, $item->publish_down); ?>
                                        </div>    
                                    </td>
                                    <td class="d-none d-md-table-cell">
                                        <?php echo $item->id; ?>
                                    </td>
                                </tr>
                                <?php endforeach; ?>
                            </tbody>
                        </table>

                        <?php echo $this->pagination->getListFooter(); ?>
                    
                    <?php endif; ?>
                    <input type="hidden" name="task" value="">
                    <input type="hidden" name="boxchecked" value="0">
                    <?php echo HTMLHelper::_('form.token'); ?>
                </div>
            </div>
        </div>
    </form>

</div>

### [Changing administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.ini_7 .mw-headline}

The
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.ini`
file is ....

#### [Completed administrator/components/com\_foos/language/en-GB/en-GB.com\_foos.ini file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Flanguage.2Fen-GB.2Fen-GB.com_foos.ini_file_7 .mw-headline}

The code for the
`administrator/components/com_foos/language/en-GB/en-GB.com_foos.ini`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    COM_FOOS="[PROJECT_NAME]"
    COM_FOOS_CONFIGURATION="Foo Options"

    COM_FOOS_MANAGER_FOO_NEW="New"
    COM_FOOS_MANAGER_FOO_EDIT="Edit"
    COM_FOOS_MANAGER_FOOS="Foo Manager"

    COM_FOOS_TABLE_TABLEHEAD_NAME="Name"
    COM_FOOS_TABLE_TABLEHEAD_ID="ID"
    COM_FOOS_ERROR_FOO_NOT_FOUND="Foo not found"

    COM_FOOS_FIELD_NAME_LABEL="Name"

    COM_FOOS_FIELD_FOO_SHOW_CATEGORY_LABEL="Show name label"
    COM_FOOS_FIELD_CONFIG_INDIVIDUAL_FOO_DESC="These settings apply for all foo."
    COM_FOOS_FIELD_CONFIG_INDIVIDUAL_FOO_DISPLAY="Foo"

    COM_FOOS_FIELD_PUBLISH_DOWN_LABEL="Finish Publishing"
    COM_FOOS_FIELD_PUBLISH_UP_LABEL="Start Publishing"
    COM_FOOS_N_ITEMS_ARCHIVED="%s foos archived."
    COM_FOOS_N_ITEMS_ARCHIVED_1="%s foo archived."
    COM_FOOS_N_ITEMS_CHECKED_IN_1="%d foo checked in."
    COM_FOOS_N_ITEMS_CHECKED_IN_MORE="%d foos checked in."
    COM_FOOS_N_ITEMS_DELETED="%s foos deleted."
    COM_FOOS_N_ITEMS_DELETED_1="%s foo deleted."
    COM_FOOS_N_ITEMS_FEATURED="%s foos featured."
    COM_FOOS_N_ITEMS_FEATURED_1="%s foo featured."
    COM_FOOS_N_ITEMS_PUBLISHED="%s foos published."
    COM_FOOS_N_ITEMS_PUBLISHED_1="%s foo published."
    COM_FOOS_N_ITEMS_TRASHED="%s foos trashed."
    COM_FOOS_N_ITEMS_TRASHED_1="%s foo trashed."
    COM_FOOS_N_ITEMS_UNFEATURED="%s foos unfeatured."
    COM_FOOS_N_ITEMS_UNFEATURED_1="%s foo unfeatured."
    COM_FOOS_N_ITEMS_UNPUBLISHED="%s foos unpublished."
    COM_FOOS_N_ITEMS_UNPUBLISHED_1="%s foo unpublished."

    COM_FOOS_FOOS_FIELD_PUBLISH_DOWN_LABEL="Finish Publishing"
    COM_FOOS_FOOS_FIELD_PUBLISH_UP_LABEL="Start Publishing"
    COM_FOOS_FOOS_N_ITEMS_ARCHIVED="%s foos archived."
    COM_FOOS_FOOS_N_ITEMS_ARCHIVED_1="%s foo archived."
    COM_FOOS_FOOS_N_ITEMS_CHECKED_IN_1="%d foo checked in."
    COM_FOOS_FOOS_N_ITEMS_CHECKED_IN_MORE="%d foos checked in."
    COM_FOOS_FOOS_N_ITEMS_DELETED="%s foos deleted."
    COM_FOOS_FOOS_N_ITEMS_DELETED_1="%s foo deleted."
    COM_FOOS_FOOS_N_ITEMS_FEATURED="%s foos featured."
    COM_FOOS_FOOS_N_ITEMS_FEATURED_1="%s foo featured."
    COM_FOOS_FOOS_N_ITEMS_PUBLISHED="%s foos published."
    COM_FOOS_FOOS_N_ITEMS_PUBLISHED_1="%s foo published."
    COM_FOOS_FOOS_N_ITEMS_TRASHED="%s foos trashed."
    COM_FOOS_FOOS_N_ITEMS_TRASHED_1="%s foo trashed."
    COM_FOOS_FOOS_N_ITEMS_UNFEATURED="%s foos unfeatured."
    COM_FOOS_FOOS_N_ITEMS_UNFEATURED_1="%s foo unfeatured."
    COM_FOOS_FOOS_N_ITEMS_UNPUBLISHED="%s foos unpublished."
    COM_FOOS_FOOS_N_ITEMS_UNPUBLISHED_1="%s foo unpublished."

    COM_FOOS_EDIT_FOO="Edit Foo"
    COM_FOOS_NEW_FOO="New Foo"

    COM_FOOS_HEADING_ASSOCIATION="Association"
    COM_FOOS_CHANGE_FOO="Change a foo"
    COM_FOOS_SELECT_A_FOO="Select a foo"

    COM_FOOS_TABLE_CAPTION="Foo Table Caption"

    COM_FOOS_N_ITEMS_ARCHIVED="%d foos archived."
    COM_FOOS_N_ITEMS_ARCHIVED_1="%d foo archived."
    COM_FOOS_N_ITEMS_DELETED="%d foos deleted."
    COM_FOOS_N_ITEMS_DELETED_1="%d foo deleted."
    COM_FOOS_N_ITEMS_TRASHED="%d foos trashed."
    COM_FOOS_N_ITEMS_TRASHED_1="%d foo trashed."
    COM_FOO_MANAGER_FOOS="Foos"

    COM_FOOS_FIELD_PARAMS_NAME_LABEL="Show Name"

</div>

### [Creating /administrator/components/com\_foos/sql/updates/mysql/1.21.0.sql]{#Creating_.2Fadministrator.2Fcomponents.2Fcom_foos.2Fsql.2Fupdates.2Fmysql.2F1.21.0.sql .mw-headline}

The `/administrator/components/com_foos/sql/updates/mysql/1.21.0.sql`
file is ....

#### [Completed /administrator/components/com\_foos/sql/updates/mysql/1.21.0.sql file]{#Completed_.2Fadministrator.2Fcomponents.2Fcom_foos.2Fsql.2Fupdates.2Fmysql.2F1.21.0.sql_file .mw-headline}

The code for the
`/administrator/components/com_foos/sql/updates/mysql/1.21.0.sql` file
is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    ALTER TABLE `#__foos_details` ADD COLUMN  `checked_out` int(10) unsigned NOT NULL DEFAULT 0 AFTER `alias`;

    ALTER TABLE `#__foos_details` ADD COLUMN  `checked_out_time` datetime NOT NULL DEFAULT '0000-00-00 00:00:00' AFTER `alias`;

</div>

\

[Test your component]{#Test_your_component_23 .mw-headline}
-----------------------------------------------------------

If two users edit an item at the same time, it could lead to overlapping
and thus data loss. Therefore, we block the entry as long as it is being
edited by a user. The sign is the lock.

[![As j4 t 21
1.png](/images/thumb/9/99/As_j4_t_21_1.png/700px-As_j4_t_21_1.png){width="700"
height="341"
srcset="/images/thumb/9/99/As_j4_t_21_1.png/1050px-As_j4_t_21_1.png 1.5x, /images/9/99/As_j4_t_21_1.png 2x"}](/File:As_j4_t_21_1.png){.image}

[Example in Joomla!]{#Example_in_Joomla.21_13 .mw-headline}
-----------------------------------------------------------

[Component Contents]{#Component_Contents_24 .mw-headline}
---------------------------------------------------------

At this point in the tutorial, your component should contain the
following files:

  --- -------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------
  1   administrator/components/com\_foos/Controller/DisplayController.php        this is the administrator entry point to the Foo component                                                                                                                            unchanged
  1   administrator/components/com\_foos/Extension/FoosComponent.php             the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  6   administrator/components/com\_foos/Model/FoosModel.php                     this is the model of the Foo component                                                                                                                                                new
  1   administrator/components/com\_foos/Service/HTML/AdministratorService.php   the html service see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                                unchanged
  1   administrator/components/com\_foos/View/Foos/HtmlView.php                  file representing the view in the back end                                                                                                                                            changed
  1   administrator/components/com\_foos/services/provider.php                   the service provider interface see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                  changed
  6   administrator/components/com\_foos/sql/install.mysql.utf8.sql              During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           new
  6   administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql            During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           new
  1   administrator/components/com\_foos/tmpl/foos/default.php                   the default view in the back end                                                                                                                                                      changed
  1   administrator/components/com\_foos/foos.xml                                this is an XML (manifest) file that tells Joomla! how to install our component.                                                                                                       changed
  1   administrator/components/com\_foos/script.php                              the installer script                                                                                                                                                                  unchanged
  2   components/com\_foos/Controller/DisplayController.php                      this is the frond end entry point to the Foo component                                                                                                                                unchanged
  4   components/com\_foos/Model/FooModel.php                                    this is the frond end model for the Foo component                                                                                                                                     unchanged
  2   components/com\_foos/View/Foo/HtmlView.php                                 file representing the view in the frond end                                                                                                                                           unchanged
  2   components/com\_foos/tmpl/foo/default.php                                  the default view in the frond end                                                                                                                                                     unchanged
  3   components/com\_foos/tmpl/foo/default.xml                                  the xml for the menu item                                                                                                                                                             unchanged
  --- -------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------

\

\

[Conclusion]{#Conclusion_23 .mw-headline}
-----------------------------------------

In this chapter, we have made sure that the data is processed more
securely. Next, we'll look at how we can edit a lot of data in one fell
swoop.

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

[Adding a batch process and alias - Part 22]{#Adding_a_batch_process_and_alias_-_Part_22 .mw-headline}
======================================================================================================

In this chapter we'll look at how we can edit a lot of data in one fell
swoop.

[Requirements]{#Requirements_25 .mw-headline}
---------------------------------------------

You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev)

[File Structure]{#File_Structure_25 .mw-headline}
-------------------------------------------------

### [Changing administrator/components/com\_foos/Controller/FooController.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FController.2FFooController.php .mw-headline}

The `administrator/components/com_foos/Controller/FooController.php`
file is ....

#### [Completed administrator/components/com\_foos/Controller/FooController.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FController.2FFooController.php_file_2 .mw-headline}

The code for the
`administrator/components/com_foos/Controller/FooController.php` file is
as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\Controller;

    defined('_JEXEC') or die;

    use Joomla\CMS\MVC\Controller\FormController;
    use Joomla\CMS\Router\Route;

    /**
     * Controller for a single foo
     *
     * @since  1.0
     */
    class FooController extends FormController
    {
      /**
       * Method to run batch operations.
       *
       * @param   object  $model  The model.
       *
       * @return  boolean   True if successful, false otherwise and internal error is set.
       *
       * @since   1.0
       */
       public function batch($model = null)
       {
           $this->checkToken();

           $model = $this->getModel('Foo', 'Administrator', array());

           // Preset the redirect
           $this->setRedirect(Route::_('index.php?option=com_foos&view=foos' . $this->getRedirectToListAppend(), false));

           return parent::batch($model);
       }

    }

</div>

### [Changing administrator/components/com\_foos/Model/FooModel.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFooModel.php_3 .mw-headline}

The `administrator/components/com_foos/Model/FooModel.php` file is ....

#### [Completed administrator/components/com\_foos/Model/FooModel.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFooModel.php_file_4 .mw-headline}

The code for the `administrator/components/com_foos/Model/FooModel.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\Model;

    defined('_JEXEC') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\MVC\Model\AdminModel;
    use Joomla\CMS\Language\Associations;
    use Joomla\CMS\Language\LanguageHelper;

    /**
     * Item Model for a Foo.
     *
     * @since  1.0
     */
    class FooModel extends AdminModel
    {
        /**
        * The type alias for this content type.
        *
        * @var    string
        * @since  1.0
        */
        public $typeAlias = 'com_foos.foo';

        /**
        * The context used for the associations table
        *
        * @var    string
        * @since  1.0
        */
        protected $associationsContext = 'com_foos.item';

        /**
      * Batch copy/move command. If set to false, the batch copy/move command is not supported
       *
       * @var  string
       */
       protected $batch_copymove = 'category_id';

       /**
       * Allowed batch commands
       *
       * @var array
       */
       protected $batch_commands = array(
           'assetgroup_id' => 'batchAccess',
           'language_id'   => 'batchLanguage',
       );

       /**
         * Method to get the row form.
        *
        * @param   array    $data      Data for the form.
        * @param   boolean  $loadData  True if the form is to load its own data (default case), false if not.
        *
        * @return  \JForm|boolean  A \JForm object on success, false on failure
        *
        * @since   1.0
        */
        public function getForm($data = array(), $loadData = true)
        {
            // Get the form.
            $form = $this->loadForm('com_foos.foo', 'foo', array('control' => 'jform', 'load_data' => $loadData));

            if (empty($form))
            {
                return false;
            }

            return $form;
        }

        /**
        * Method to get the data that should be injected in the form.
        *
        * @return  mixed  The data for the form.
        *
        * @since   1.0
        */
        protected function loadFormData()
        {
            $app = Factory::getApplication();

            $data = $this->getItem();

            $this->preprocessData('com_foos.foo', $data);

            return $data;
        }

        /**
        * Method to get a single record.
        *
        * @param   integer  $pk  The id of the primary key.
        *
        * @return  mixed  Object on success, false on failure.
        *
        * @since   1.0
        */
        public function getItem($pk = null)
        {
            $item = parent::getItem($pk);

            // Load associated foo items
            $assoc = Associations::isEnabled();

            if ($assoc)
            {
                $item->associations = array();

                if ($item->id != null)
                {
                    $associations = Associations::getAssociations('com_foos', '#__foos_details', 'com_foos.item', $item->id, 'id', null);

                    foreach ($associations as $tag => $association)
                    {
                        $item->associations[$tag] = $association->id;
                    }
                }
            }

            return $item;
        }

        /**
        * Preprocess the form.
        *
        * @param   \JForm  $form   Form object.
        * @param   object  $data   Data object.
        * @param   string  $group  Group name.
        *
        * @return  void
        *
        * @since   1.0
        */
        protected function preprocessForm(\JForm $form, $data, $group = 'content')
        {
            if (Associations::isEnabled())
            {
                $languages = LanguageHelper::getContentLanguages(false, true, null, 'ordering', 'asc');

                if (count($languages) > 1)
                {
                    $addform = new \SimpleXMLElement('<form />');
                    $fields = $addform->addChild('fields');
                    $fields->addAttribute('name', 'associations');
                    $fieldset = $fields->addChild('fieldset');
                    $fieldset->addAttribute('name', 'item_associations');

                    foreach ($languages as $language)
                    {
                        $field = $fieldset->addChild('field');
                        $field->addAttribute('name', $language->lang_code);
                        $field->addAttribute('type', 'modal_foo');
                        $field->addAttribute('language', $language->lang_code);
                        $field->addAttribute('label', $language->title);
                        $field->addAttribute('translate_label', 'false');
                        $field->addAttribute('select', 'true');
                        $field->addAttribute('new', 'true');
                        $field->addAttribute('edit', 'true');
                        $field->addAttribute('clear', 'true');
                    }

                    $form->load($addform, false);
                }
            }

            parent::preprocessForm($form, $data, $group);
        }
    }

</div>

\

### [Changing administrator/components/com\_foos/Model/FoosModel.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_9 .mw-headline}

The `administrator/components/com_foos/Model/FoosModel.php` file is ....

#### [Completed administrator/components/com\_foos/Model/FoosModel.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FModel.2FFoosModel.php_file_10 .mw-headline}

The code for the `administrator/components/com_foos/Model/FoosModel.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\Model;

    defined('_JEXEC') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\Language\Associations;
    use Joomla\CMS\MVC\Model\ListModel;

    /**
     * Methods supporting a list of foo records.
     *
     * @since  1.0
     */
    class FoosModel extends ListModel
    {
        /**
        * Constructor.
        *
        * @param   array  $config  An optional associative array of configuration settings.
        *
        * @see     \JControllerLegacy
        * @since   1.0
        */
        public function __construct($config = array())
        {
            if (empty($config['filter_fields']))
            {
                $config['filter_fields'] = array(
                    'id', 'a.id',
                    'name', 'a.name',
                  'alias', 'a.alias',
                 'catid', 'a.catid', 'category_id', 'category_title',
                    'checked_out', 'a.checked_out',
                    'checked_out_time', 'a.checked_out_time',
                    'published', 'a.published',
                    'access', 'a.access', 'access_level',
                    'ordering', 'a.ordering',
                    'language', 'a.language', 'language_title',
                    'publish_up', 'a.publish_up',
                    'publish_down', 'a.publish_down',
                );

                $assoc = Associations::isEnabled();

                if ($assoc)
                {
                    $config['filter_fields'][] = 'association';
                }
            }

            parent::__construct($config);
        }

        /**
        * Build an SQL query to load the list data.
        *
        * @return  \JDatabaseQuery
        *
        * @since   1.0
        */
        protected function getListQuery()
        {
            // Create a new query object.
            $db = $this->getDbo();
            $query = $db->getQuery(true);

            // Select the required fields from the table.
            $query->select(
                $this->getState(
                    'list.select',
                    'a.id AS id,'
                    . 'a.name AS name,'
                    . 'a.access,'
                    . 'a.language,'
                    . 'a.ordering AS ordering,'
                    . 'a.checked_out AS checked_out,'
                    . 'a.checked_out_time AS checked_out_time,'
                    . 'a.state AS state,'
                    . 'a.catid AS catid,'
                    . 'a.published AS published,'
                    . 'a.publish_up,'
                    . 'a.publish_down'
                )
            );

            $query->from($db->quoteName('#__foos_details', 'a'));

            // Join over the asset groups.
            $query->select($db->quoteName('ag.title', 'access_level'))
                ->join(
                    'LEFT',
                    $db->quoteName('#__viewlevels', 'ag') . ' ON ' . $db->quoteName('ag.id') . ' = ' . $db->quoteName('a.access')
                );

            // Join over the categories.
            $query->select($db->quoteName('c.title', 'category_title'))
                ->join(
                    'LEFT',
                    $db->quoteName('#__categories', 'c') . ' ON ' . $db->quoteName('c.id') . ' = ' . $db->quoteName('a.catid')
                );

            // Join over the language
            $query->select($db->quoteName('l.title', 'language_title'))
                ->select($db->quoteName('l.image', 'language_image'))
                ->join(
                    'LEFT',
                    $db->quoteName('#__languages', 'l') . ' ON ' . $db->quoteName('l.lang_code') . ' = ' . $db->quoteName('a.language')
                );

            // Join over the associations.
            $assoc = Associations::isEnabled();

            if ($assoc)
            {
                $query->select('COUNT(' . $db->quoteName('asso2.id') . ') > 1 as ' . $db->quoteName('association'))
                    ->join(
                        'LEFT',
                        $db->quoteName('#__associations', 'asso') . ' ON ' . $db->quoteName('asso.id') . ' = ' . $db->quoteName('a.id')
                        . ' AND ' . $db->quoteName('asso.context') . ' = ' . $db->quote('com_foos.item')
                    )
                    ->join(
                        'LEFT',
                        $db->quoteName('#__associations', 'asso2') . ' ON ' . $db->quoteName('asso2.key') . ' = ' . $db->quoteName('asso.key')
                    )
                    ->group(
                        $db->quoteName(
                            array(
                                'a.id',
                                'a.name',
                                'a.alias',
                                'a.catid',
                                'a.checked_out',
                                'a.checked_out_time',
                                'a.published',
                                'a.access',
                                'a.language',
                                'a.publish_up',
                                'a.publish_down',
                                'l.title' ,
                                'l.image' ,
                                'ag.title' ,
                                'c.title'
                            )
                        )
                    );
            }

            // Join over the users for the checked out user.
            $query->select($db->quoteName('uc.name', 'editor'))
                ->join(
                    'LEFT',
                    $db->quoteName('#__users', 'uc') . ' ON ' . $db->quoteName('uc.id') . ' = ' . $db->quoteName('a.checked_out')
                );

            // Filter by access level.
            if ($access = $this->getState('filter.access'))
            {
                $query->where($db->quoteName('a.access') . ' = ' . (int) $access);
            }

            // Filter by published state
            $published = (string) $this->getState('filter.published');

            if (is_numeric($published))
            {
                $query->where($db->quoteName('a.published') . ' = ' . (int) $published);
            }
            elseif ($published === '')
            {
                $query->where('(' . $db->quoteName('a.published') . ' = 0 OR ' . $db->quoteName('a.published') . ' = 1)');
            }

            // Filter by a single or group of categories.
            $categoryId = $this->getState('filter.category_id');

            if (is_numeric($categoryId))
            {
                $query->where($db->quoteName('a.catid') . ' = ' . (int) $categoryId);
            }
            elseif (is_array($categoryId))
            {
                $query->where($db->quoteName('a.catid') . ' IN (' . implode(',', ArrayHelper::toInteger($categoryId)) . ')');
            }

            // Filter by search in name.
            $search = $this->getState('filter.search');

            if (!empty($search))
            {
                if (stripos($search, 'id:') === 0)
                {
                    $query->where('a.id = ' . (int) substr($search, 3));
                }
                else
                {
                    $search = $db->quote('%' . str_replace(' ', '%', $db->escape(trim($search), true) . '%'));
                    $query->where(
                        '(' . $db->quoteName('a.name') . ' LIKE ' . $search . ')'
                    );
                }
            }

            // Filter on the language.
            if ($language = $this->getState('filter.language'))
            {
                $query->where($db->quoteName('a.language') . ' = ' . $db->quote($language));
            }

            // Filter by a single tag.
            $tagId = $this->getState('filter.tag');

            if (is_numeric($tagId))
            {
                $query->where($db->quoteName('tagmap.tag_id') . ' = ' . (int) $tagId)
                    ->join(
                        'LEFT',
                        $db->quoteName('#__contentitem_tag_map', 'tagmap')
                        . ' ON ' . $db->quoteName('tagmap.content_item_id') . ' = ' . $db->quoteName('a.id')
                        . ' AND ' . $db->quoteName('tagmap.type_alias') . ' = ' . $db->quote('com_foos.contact')
                    );
            }

            // Filter on the level.
            if ($level = $this->getState('filter.level'))
            {
                $query->where('c.level <= ' . (int) $level);
            }

            // Add the list ordering clause.
            $orderCol = $this->state->get('list.ordering', 'a.name');
            $orderDirn = $this->state->get('list.direction', 'asc');

            if ($orderCol == 'a.ordering' || $orderCol == 'category_title')
            {
                $orderCol = $db->quoteName('c.title') . ' ' . $orderDirn . ', ' . $db->quoteName('a.ordering');
            }

            $query->order($db->escape($orderCol . ' ' . $orderDirn));

            return $query;
        }

        /**
        * Method to auto-populate the model state.
        *
        * Note. Calling getState in this method will result in recursion.
        *
        * @param   string  $ordering   An optional ordering field.
        * @param   string  $direction  An optional direction (asc|desc).
        *
        * @return  void
        *
        * @since   1.0
        */
        protected function populateState($ordering = 'a.name', $direction = 'asc')
        {
            $app = Factory::getApplication();

            $forcedLanguage = $app->input->get('forcedLanguage', '', 'cmd');

            // Adjust the context to support modal layouts.
            if ($layout = $app->input->get('layout'))
            {
                $this->context .= '.' . $layout;
            }

            // Adjust the context to support forced languages.
            if ($forcedLanguage)
            {
                $this->context .= '.' . $forcedLanguage;
            }

            // List state information.
            parent::populateState($ordering, $direction);

            // Force a language.
            if (!empty($forcedLanguage))
            {
                $this->setState('filter.language', $forcedLanguage);
            }
        }
    }

</div>

\

### [Changing administrator/components/com\_foos/View/Foos/HtmlView.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_12 .mw-headline}

The `administrator/components/com_foos/View/Foos/HtmlView.php` file is
....

#### [Completed administrator/components/com\_foos/View/Foos/HtmlView.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_file_13 .mw-headline}

The code for the
`administrator/components/com_foos/View/Foos/HtmlView.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php

    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\View\Foos;

    defined('_JEXEC') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\HTML\HTMLHelper;
    use Joomla\CMS\Helper\ContentHelper;
    use Joomla\CMS\Language\Text;
    use Joomla\CMS\MVC\View\HtmlView as BaseHtmlView;
    use Joomla\CMS\Toolbar\Toolbar;
    use Joomla\CMS\Toolbar\ToolbarHelper;
    use Joomla\Component\Foos\Administrator\Helper\FooHelper;
    use Joomla\CMS\Language\Multilanguage;

    /**
     * View class for a list of foos.
     *
     * @since  1.0
     */
    class HtmlView extends BaseHtmlView
    {
        /**
        * An array of items
        *
        * @var  array
        */
        protected $items;

        /**
        * The pagination object
        *
        * @var  \JPagination
        */
        protected $pagination;

        /**
        * The model state
        *
        * @var  \JObject
        */
        protected $state;

        /**
        * Form object for search filters
        *
        * @var  \JForm
        */
        public $filterForm;

        /**
        * The active search filters
        *
        * @var  array
        */
        public $activeFilters;

        /**
        * The sidebar markup
        *
        * @var  string
        */
        protected $sidebar;

        /**
        * Display the view.
        *
        * @param   string  $tpl  The name of the template file to parse; automatically searches through the template paths.
        *
        * @return  mixed  A string if successful, otherwise an Error object.
        */
        public function display($tpl = null)
        {
            $this->items = $this->get('Items');
            $this->pagination = $this->get('Pagination');
            $this->filterForm = $this->get('FilterForm');
            $this->activeFilters = $this->get('ActiveFilters');
            $this->state = $this->get('State');

            // Check for errors.
            if (count($errors = $this->get('Errors')))
            {
                throw new \JViewGenericdataexception(implode("\n", $errors), 500);
            }

            // Preprocess the list of items to find ordering divisions.
            // TODO: Complete the ordering stuff with nested sets
            foreach ($this->items as &$item)
            {
                $item->order_up = true;
                $item->order_dn = true;
            }

            // We don't need toolbar in the modal window.
            if ($this->getLayout() !== 'modal')
            {
                FooHelper::addSubmenu('foos');
                $this->addToolbar();
                $this->sidebar = \JHtmlSidebar::render();

                // We do not need to filter by language when multilingual is disabled
                if (!Multilanguage::isEnabled())
                {
                    unset($this->activeFilters['language']);
                    $this->filterForm->removeField('language', 'filter');
                }
            }
            else
            {
                // In article associations modal we need to remove language filter if forcing a language.
                // We also need to change the category filter to show show categories with All or the forced language.
                if ($forcedLanguage = Factory::getApplication()->input->get('forcedLanguage', '', 'CMD'))
                {
                    // If the language is forced we can't allow to select the language, so transform the language selector filter into a hidden field.
                    $languageXml = new \SimpleXMLElement('<field name="language" type="hidden" default="' . $forcedLanguage . '" />');
                    $this->filterForm->setField($languageXml, 'filter', true);

                    // Also, unset the active language filter so the search tools is not open by default with this filter.
                    unset($this->activeFilters['language']);

                    // One last changes needed is to change the category filter to just show categories with All language or with the forced language.
                    $this->filterForm->setFieldAttribute('category_id', 'language', '*,' . $forcedLanguage, 'filter');
                }
            }

            return parent::display($tpl);
        }

        /**
        * Add the page title and toolbar.
        *
        * @return  void
        *
        * @since   1.0
        */
        protected function addToolbar()
        {
            $canDo = ContentHelper::getActions('com_foos', 'category', $this->state->get('filter.category_id'));
            $user  = Factory::getUser();

            // Get the toolbar object instance
            $toolbar = Toolbar::getInstance('toolbar');

            ToolbarHelper::title(Text::_('COM_FOO_MANAGER_FOOS'), 'address foos');

            if ($canDo->get('core.create') || count($user->getAuthorisedCategories('com_foos', 'core.create')) > 0)
            {
                $toolbar->addNew('foo.add');
            }

            if ($canDo->get('core.edit.state'))
            {
                $dropdown = $toolbar->dropdownButton('status-group')
                    ->text('JTOOLBAR_CHANGE_STATUS')
                    ->toggleSplit(false)
                    ->icon('fa fa-globe')
                    ->buttonClass('btn btn-info')
                    ->listCheck(true);

                $childBar = $dropdown->getChildToolbar();

                $childBar->publish('foos.publish')->listCheck(true);

                $childBar->unpublish('foos.unpublish')->listCheck(true);

                $childBar->archive('foos.archive')->listCheck(true);

                if ($user->authorise('core.admin'))
                {
                    $childBar->checkin('foos.checkin')->listCheck(true);
                }

                if ($this->state->get('filter.published') != -2)
                {
                    $childBar->trash('foos.trash')->listCheck(true);
                }
            }

          $toolbar->popupButton('batch')
               ->text('JTOOLBAR_BATCH')
               ->selector('collapseModal')
               ->listCheck(true);

         if ($this->state->get('filter.published') == -2 && $canDo->get('core.delete'))
            {
                $toolbar->delete('foos.delete')
                    ->text('JTOOLBAR_EMPTY_TRASH')
                    ->message('JGLOBAL_CONFIRM_DELETE')
                    ->listCheck(true);
            }

            if ($user->authorise('core.admin', 'com_foos') || $user->authorise('core.options', 'com_foos'))
            {
                $toolbar->preferences('com_foos');
            }

            HTMLHelper::_('sidebar.setAction', 'index.php?option=com_foos');
        }

        /**
        * Returns an array of fields the table can be sorted by
        *
        * @return  array  Array containing the field name to sort by as the key and display text as value
        *
        * @since   1.0
        */
        protected function getSortFields()
        {
            return array(
                'a.ordering'     => Text::_('JGRID_HEADING_ORDERING'),
                'a.published'    => Text::_('JSTATUS'),
                'a.name'         => Text::_('JGLOBAL_TITLE'),
                'category_title' => Text::_('JCATEGORY'),
                'a.access'       => Text::_('JGRID_HEADING_ACCESS'),
                'a.language'     => Text::_('JGRID_HEADING_LANGUAGE'),
                'a.id'           => Text::_('JGRID_HEADING_ID'),
            );
        }
    }

</div>

\

### [Changing administrator/components/com\_foos/foos.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_21 .mw-headline}

The `administrator/components/com_foos/foos.xml` file is ....

#### [Completed administrator/components/com\_foos/foos.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_21 .mw-headline}

The code for the `administrator/components/com_foos/foos.xml` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8" ?>
    <extension type="component" method="upgrade">
        <name>COM_FOOS</name>
        <creationDate>[DATE]</creationDate>
        <author>[AUTHOR]</author>
        <authorEmail>[AUTHOR_EMAIL]</authorEmail>
        <authorUrl>[AUTHOR_URL]</authorUrl>
        <copyright>[COPYRIGHT]</copyright>
        <license>GNU General Public License version 2 or later;</license>
      <version>1.22.0</version>
     <description>COM_FOOS_XML_DESCRIPTION</description>
        <namespace>Joomla\Component\Foos</namespace>
        <scriptfile>script.php</scriptfile>
        <install> <!-- Runs on install -->
            <sql>
                <file driver="mysql" charset="utf8">sql/install.mysql.utf8.sql</file>
            </sql>
        </install>
        <uninstall> <!-- Runs on uninstall -->
            <sql>
                <file driver="mysql" charset="utf8">sql/uninstall.mysql.utf8.sql</file>
            </sql>
        </uninstall>
        <update>  <!-- Runs on update -->
            <schemas>
                <schemapath type="mysql">sql/updates/mysql</schemapath>
            </schemas>
        </update>
        <!-- Frond-end files -->
        <files folder="components/com_foos">
            <folder>Controller</folder>
            <folder>Model</folder>
            <folder>View</folder>
            <folder>tmpl</folder>
            <folder>language</folder>
        </files>
        <media folder="media/com_foos" destination="com_foos">
            <folder>js</folder>
        </media>
        <!-- Back-end files -->
        <administration>
            <!-- Menu entries -->
            <menu view="foos">COM_FOOS</menu>
            <submenu>
                <menu link="option=com_foos">COM_FOOS</menu>
                <menu link="option=com_categories&amp;extension=com_foos"
                    view="categories" img="class:foos-cat" alt="Foos/Categories">JCATEGORY</menu>
            </submenu>
            <files folder="administrator/components/com_foos">
                <filename>access.xml</filename>
                <filename>config.xml</filename>
                <filename>foos.xml</filename>
                <folder>Controller</folder>
                <folder>Extension</folder>
                <folder>Field</folder>
                <folder>Helper</folder>
                <folder>Model</folder>
                <folder>Rule</folder>
                <folder>Service</folder>
                <folder>Table</folder>
                <folder>View</folder>
                <folder>forms</folder>
                <folder>language</folder>
                <folder>services</folder>
                <folder>sql</folder>
                <folder>tmpl</folder>
            </files>
        </administration>
    </extension>

</div>

\

### [Changing administrator/components/com\_foos/forms/foo.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_11 .mw-headline}

The `administrator/components/com_foos/forms/foo.xml` file is ....

#### [Completed administrator/components/com\_foos/forms/foo.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Fforms.2Ffoo.xml_file_12 .mw-headline}

The code for the `administrator/components/com_foos/forms/foo.xml` file
is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8"?>
    <form>
        <fieldset 
            addfieldprefix="Joomla\Component\Foos\Administrator\Field" 
            addruleprefix="Joomla\Component\Foos\Administrator\Rule"
        >
            <field
                name="id"
                type="number"
                label="JGLOBAL_FIELD_ID_LABEL"
                default="0"
                class="readonly"
                readonly="true"
            />

            <field
                name="name"
                type="text"
                validate="Letter"
                class="validate-letter"
                label="COM_FOOS_FIELD_NAME_LABEL"
                size="40"
                required="true"
            />

            <field
              name="alias"
               type="text"
               label="JFIELD_ALIAS_LABEL"
               size="45"
               hint="JFIELD_ALIAS_PLACEHOLDER"
           />

         <field
                name="language"
                type="contentlanguage"
                label="JFIELD_LANGUAGE_LABEL"
            >
                <option value="*">JALL</option>
            </field>

            <field
                name="published"
                type="list"
                label="JSTATUS"
                default="1"
                id="published"
                class="custom-select-color-state"
                size="1"
            >
                <option value="1">JPUBLISHED</option>
                <option value="0">JUNPUBLISHED</option>
                <option value="2">JARCHIVED</option>
                <option value="-2">JTRASHED</option>
            </field>

            <field
                name="publish_up"
                type="calendar"
                label="COM_FOOS_FIELD_PUBLISH_UP_LABEL"
                translateformat="true"
                showtime="true"
                size="22"
                filter="user_utc"
            />

            <field
                name="publish_down"
                type="calendar"
                label="COM_FOOS_FIELD_PUBLISH_DOWN_LABEL"
                translateformat="true"
                showtime="true"
                size="22"
                filter="user_utc"
            />

            <field
                name="catid"
                type="categoryedit"
                label="JCATEGORY"
                extension="com_foos"
                addfieldprefix="Joomla\Component\Categories\Administrator\Field"
                required="true"
                default=""
            />

            <field
                name="access"
                type="accesslevel"
                label="JFIELD_ACCESS_LABEL"
                size="1"
            />

            <field
                name="checked_out"
                type="hidden"
                filter="unset"
            />

            <field
                name="checked_out_time"
                type="hidden"
                filter="unset"
            />

            <field
                name="ordering"
                type="ordering"
                label="JFIELD_ORDERING_LABEL"
                content_type="com_foos.foo"
            />

        </fieldset>
        <fields name="params" label="JGLOBAL_FIELDSET_DISPLAY_OPTIONS">
            <fieldset name="display" label="JGLOBAL_FIELDSET_DISPLAY_OPTIONS">

                <field
                    name="show_name"
                    type="list"
                    label="COM_FOOS_FIELD_PARAMS_NAME_LABEL"
                    useglobal="true"
                >
                    <option value="0">JHIDE</option>
                    <option value="1">JSHOW</option>
                </field>

                <field
                    name="foos_layout"
                    type="componentlayout"
                    label="JFIELD_ALT_LAYOUT_LABEL"
                    class="custom-select"
                    extension="com_foos"
                    view="foo"
                    useglobal="true"
                />

            </fieldset>
        </fields>
    </form>

</div>

\

### [Changing administrator/components/com\_foos/tmpl/foo/edit.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php_7 .mw-headline}

The `administrator/components/com_foos/tmpl/foo/edit.php` file is ....

#### [Completed administrator/components/com\_foos/tmpl/foo/edit.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoo.2Fedit.php_file_8 .mw-headline}

The code for the `administrator/components/com_foos/tmpl/foo/edit.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    defined('_JEXEC') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\HTML\HTMLHelper;
    use Joomla\CMS\Language\Associations;
    use Joomla\CMS\Router\Route;
    use Joomla\CMS\Language\Text;
    use Joomla\CMS\Layout\LayoutHelper;

    HTMLHelper::_('behavior.formvalidator');
    HTMLHelper::_('script', 'com_foos/admin-foos-letter.js', array('version' => 'auto', 'relative' => true));

    $app = Factory::getApplication();
    $input = $app->input;

    $assoc = Associations::isEnabled();

    $this->ignore_fieldsets = array('item_associations');
    $this->useCoreUI = true;

    // In case of modal
    $isModal = $input->get('layout') == 'modal' ? true : false;
    $layout  = $isModal ? 'modal' : 'edit';
    $tmpl    = $isModal || $input->get('tmpl', '', 'cmd') === 'component' ? '&tmpl=component' : '';
    ?>

    <form action="<?php echo Route::_('index.php?option=com_foos&layout=' . $layout . $tmpl . '&id=' . (int) $this->item->id); ?>" method="post" name="adminForm" id="foo-form" class="form-validate">

      <?php echo LayoutHelper::render('joomla.edit.title_alias', $this); ?>

        <div>
            <?php echo HTMLHelper::_('uitab.startTabSet', 'myTab', array('active' => 'details')); ?>

            <?php echo HTMLHelper::_('uitab.addTab', 'myTab', 'details', empty($this->item->id) ? Text::_('COM_FOOS_NEW_FOO') : Text::_('COM_FOOS_EDIT_FOO')); ?>
            <div class="row">
                <div class="col-md-9">
                    <div class="row">
                        <div class="col-md-6">
                            <?php echo $this->getForm()->renderField('access'); ?>
                            <?php echo $this->getForm()->renderField('published'); ?>
                            <?php echo $this->getForm()->renderField('publish_up'); ?>
                            <?php echo $this->getForm()->renderField('publish_down'); ?>
                            <?php echo $this->getForm()->renderField('catid'); ?>
                            <?php echo $this->getForm()->renderField('language'); ?>
                        </div>
                    </div>
                </div>
            </div>
            <?php echo HTMLHelper::_('uitab.endTab'); ?>

            <?php if ( ! $isModal && $assoc) : ?>
                <?php echo HTMLHelper::_('uitab.addTab', 'myTab', 'associations', Text::_('JGLOBAL_FIELDSET_ASSOCIATIONS')); ?>
                <?php echo $this->loadTemplate('associations'); ?>
                <?php echo HTMLHelper::_('uitab.endTab'); ?>
            <?php elseif ($isModal && $assoc) : ?>
                <div class="hidden"><?php echo $this->loadTemplate('associations'); ?></div>
            <?php endif; ?>
            
            <?php echo LayoutHelper::render('joomla.edit.params', $this); ?>

            <?php echo HTMLHelper::_('uitab.endTabSet'); ?>
        </div>

            <input type="hidden" name="task" value="">
        <?php echo HTMLHelper::_('form.token'); ?>
    </form>

</div>

\

### [Changing administrator/components/com\_foos/tmpl/foos/default.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_10 .mw-headline}

The `administrator/components/com_foos/tmpl/foos/default.php` file is
....

#### [Completed administrator/components/com\_foos/tmpl/foos/default.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault.php_file_11 .mw-headline}

The code for the
`administrator/components/com_foos/tmpl/foos/default.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    defined('_JEXEC') or die;

    use Joomla\CMS\HTML\HTMLHelper;
    use Joomla\CMS\Language\Text;
    use Joomla\CMS\Router\Route;
    use Joomla\CMS\Language\Multilanguage;
    use Joomla\CMS\Language\Associations;
    use Joomla\CMS\Layout\LayoutHelper;
    use Joomla\CMS\Session\Session;

    $canChange  = true;
    $assoc = Associations::isEnabled();
    $listOrder = $this->escape($this->state->get('list.ordering'));
    $listDirn  = $this->escape($this->state->get('list.direction'));
    $saveOrder = $listOrder == 'a.ordering';

    if ($saveOrder && !empty($this->items))
    {
        $saveOrderingUrl = 'index.php?option=com_foos&task=foos.saveOrderAjax&tmpl=component&' . Session::getFormToken() . '=1';
    }
    ?>
    <form action="<?php echo Route::_('index.php?option=com_foos'); ?>" method="post" name="adminForm" id="adminForm">
        <div class="row">
            <?php if (!empty($this->sidebar)) : ?>
                <div id="j-sidebar-container" class="col-md-2">
                    <?php echo $this->sidebar; ?>
                </div>
            <?php endif; ?>
            <div class="<?php if (!empty($this->sidebar)) {echo 'col-md-10'; } else { echo 'col-md-12'; } ?>">
                <div id="j-main-container" class="j-main-container">
                    <?php echo LayoutHelper::render('joomla.searchtools.default', array('view' => $this)); ?>
                    <?php if (empty($this->items)) : ?>
                        <div class="alert alert-warning">
                            <?php echo Text::_('JGLOBAL_NO_MATCHING_RESULTS'); ?>
                        </div>
                    <?php else : ?>
                        <table class="table" id="fooList">
                            <caption id="captionTable" class="sr-only">
                                <?php echo Text::_('COM_FOOS_TABLE_CAPTION'); ?>, <?php echo Text::_('JGLOBAL_SORTED_BY'); ?>
                            </caption>
                            <thead>
                                <tr>
                                    <th scope="col" style="width:1%" class="text-center d-none d-md-table-cell">
                                        <?php echo HTMLHelper::_('searchtools.sort', '', 'a.ordering', $listDirn, $listOrder, null, 'asc', 'JGRID_HEADING_ORDERING', 'icon-menu-2'); ?>
                                    </th>
                                    <td style="width:1%" class="text-center">
                                        <?php echo HTMLHelper::_('grid.checkall'); ?>
                                    </td>
                                    <th scope="col" style="width:1%" class="text-center d-none d-md-table-cell">
                                        <?php echo HTMLHelper::_('searchtools.sort', 'COM_FOOS_TABLE_TABLEHEAD_NAME', 'a.name', $listDirn, $listOrder); ?>
                                    </th>
                                    <th scope="col" style="width:10%" class="d-none d-md-table-cell">
                                        <?php echo HTMLHelper::_('searchtools.sort', 'JGRID_HEADING_ACCESS', 'access_level', $listDirn, $listOrder); ?>
                                    </th>
                                    <?php if ($assoc) : ?>
                                        <th scope="col" style="width:10%">
                                            <?php echo HTMLHelper::_('searchtools.sort', 'COM_FOOS_HEADING_ASSOCIATION', 'association', $listDirn, $listOrder); ?>
                                        </th>
                                    <?php endif; ?>
                                    <?php if (Multilanguage::isEnabled()) : ?>
                                        <th scope="col" style="width:10%" class="d-none d-md-table-cell">
                                            <?php echo HTMLHelper::_('searchtools.sort', 'JGRID_HEADING_LANGUAGE', 'language_title', $listDirn, $listOrder); ?>
                                        </th>
                                    <?php endif; ?>
                                    <th scope="col" style="width:1%; min-width:85px" class="text-center">
                                        <?php echo HTMLHelper::_('searchtools.sort', 'JSTATUS', 'a.published', $listDirn, $listOrder); ?>
                                    </th>
                                    <th scope="col">
                                        <?php echo HTMLHelper::_('searchtools.sort', 'JGRID_HEADING_ID', 'a.id', $listDirn, $listOrder); ?>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                            <?php
                            $n = count($this->items);
                            foreach ($this->items as $i => $item) :
                                ?>
                                <tr class="row<?php echo $i % 2; ?>">
                                    <td class="order text-center d-none d-md-table-cell">
                                        <?php
                                        $iconClass = '';
                                        if (!$canChange)
                                        {
                                            $iconClass = ' inactive';
                                        }
                                        elseif (!$saveOrder)
                                        {
                                            $iconClass = ' inactive tip-top hasTooltip" title="' . HTMLHelper::_('tooltipText', 'JORDERINGDISABLED');
                                        }
                                        ?>
                                        <span class="sortable-handler<?php echo $iconClass; ?>">
                                            <span class="icon-menu" aria-hidden="true"></span>
                                        </span>
                                        <?php if ($canChange && $saveOrder) : ?>
                                            <input type="text" style="display:none" name="order[]" size="5"
                                                value="<?php echo $item->ordering; ?>" class="width-20 text-area-order">
                                        <?php endif; ?>
                                    </td>
                                    <td class="text-center">
                                        <?php echo HTMLHelper::_('grid.id', $i, $item->id); ?>
                                    </td>
                                    <td scope="row" class="has-context">
                                        <?php if ($item->checked_out) : ?>
                                            <?php echo HTMLHelper::_('jgrid.checkedout', $i, $item->editor, $item->checked_out_time, 'foos.', true); ?>
                                        <?php endif; ?>
                                        <div>
                                            <?php echo $this->escape($item->name); ?>
                                        </div>
                                        <?php $editIcon = '<span class="fa fa-pencil-square mr-2" aria-hidden="true"></span>'; ?>
                                        <a class="hasTooltip" href="<?php echo Route::_('index.php?option=com_foos&task=foo.edit&id=' . (int) $item->id); ?>" title="<?php echo Text::_('JACTION_EDIT'); ?> <?php echo $this->escape(addslashes($item->name)); ?>">
                                            <?php echo $editIcon; ?><?php echo $this->escape($item->name); ?>
                                        </a>
                                        <div class="small">
                                            <?php echo Text::_('JCATEGORY') . ': ' . $this->escape($item->category_title); ?>
                                        </div>

                                    </td>
                                    <td class="small d-none d-md-table-cell">
                                        <?php echo $item->access_level; ?>
                                    </td>
                                    <?php if ($assoc) : ?>
                                    <td class="d-none d-md-table-cell">
                                        <?php if ($item->association) : ?>
                                            <?php 
                                            echo HTMLHelper::_('foosadministrator.association', $item->id); 
                                            ?>
                                        <?php endif; ?>
                                    </td>
                                    <?php endif; ?>
                                    <?php if (Multilanguage::isEnabled()) : ?>
                                        <td class="small d-none d-md-table-cell">
                                            <?php echo LayoutHelper::render('joomla.content.language', $item); ?>
                                        </td>
                                    <?php endif; ?>
                                    <td class="text-center">
                                        <div class="btn-group">
                                            <?php echo HTMLHelper::_('jgrid.published', $item->published, $i, 'foos.', $canChange, 'cb', $item->publish_up, $item->publish_down); ?>
                                        </div>    
                                    </td>
                                    <td class="d-none d-md-table-cell">
                                        <?php echo $item->id; ?>
                                    </td>
                                </tr>
                                <?php endforeach; ?>
                            </tbody>
                        </table>

                        <?php echo $this->pagination->getListFooter(); ?>
                    
                      <?php echo HTMLHelper::_(
                           'bootstrap.renderModal',
                           'collapseModal',
                           array(
                               'title'  => Text::_('COM_FOOS_BATCH_OPTIONS'),
                               'footer' => $this->loadTemplate('batch_footer'),
                           ),
                           $this->loadTemplate('batch_body')
                       ); ?>

                 <?php endif; ?>
                    <input type="hidden" name="task" value="">
                    <input type="hidden" name="boxchecked" value="0">
                    <?php echo HTMLHelper::_('form.token'); ?>
                </div>
            </div>
        </div>
    </form>

</div>

### [Creating administrator/components/com\_foos/tmpl/foos/default\_batch.php]{#Creating_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault_batch.php .mw-headline}

The `administrator/components/com_foos/tmpl/foos/default_batch.php` file
is the installation file.

#### [Completed administrator/components/com\_foos/tmpl/foos/default\_batch.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault_batch.php_file .mw-headline}

The code for the
`administrator/components/com_foos/tmpl/foos/default_batch.php` file is
as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php

    defined('_JEXEC') or die;

    use Joomla\CMS\Language\Text;
    use Joomla\CMS\Layout\LayoutHelper;

    $published = $this->state->get('filter.published');
    $noUser = true;
    ?>
    <div class="modal hide fade" id="collapseModal">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&#215;</button>
            <h3><?php echo Text::_('COM_FOOS_BATCH_OPTIONS'); ?></h3>
        </div>
        <div class="modal-body modal-batch">
            <p><?php echo Text::_('COM_FOOS_BATCH_TIP'); ?></p>
            <div class="row">
                <div class="form-group col-md-6">
                    <div class="controls">
                        <?php echo LayoutHelper::render('joomla.html.batch.language', []); ?>
                    </div>
                </div>
                <div class="form-group col-md-6">
                    <div class="controls">
                        <?php echo LayoutHelper::render('joomla.html.batch.access', []); ?>
                    </div>
                </div>
            </div>
            <div class="row">
            <?php if ($published >= 0) : ?>
                <div class="form-group col-md-6">
                    <div class="controls">
                        <?php echo LayoutHelper::render('joomla.html.batch.item', ['extension' => 'com_foos']); ?>
                    </div>
                </div>
            <?php endif; ?>
            <div class="form-group col-md-6">
                <div class="controls">
                    <?php echo LayoutHelper::render('joomla.html.batch.tag', []); ?>
                </div>
            </div>
            <div class="row">
                <div class="control-group">
                    <div class="controls">
                        <?php echo LayoutHelper::render('joomla.html.batch.user', ['noUser' => $noUser]); ?>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" type="button" onclick="document.getElementById('batch-category-id').value='';document.getElementById('batch-access').value='';document.getElementById('batch-language-id').value='';document.getElementById('batch-user-id').value='';document.getElementById('batch-tag-id').value=''" data-dismiss="modal">
                <?php echo Text::_('JCANCEL'); ?>
            </button>
            <button class="btn btn-primary" type="submit" onclick="Joomla.submitbutton('foo.batch');">
                <?php echo Text::_('JGLOBAL_BATCH_PROCESS'); ?>
            </button>
        </div>
    </div>

</div>

### [Creating administrator/components/com\_foos/tmpl/foos/default\_batch\_body.php]{#Creating_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault_batch_body.php .mw-headline}

The `administrator/components/com_foos/tmpl/foos/default_batch_body.php`
file is the installation file.

#### [Completed administrator/components/com\_foos/tmpl/foos/default\_batch\_body.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault_batch_body.php_file .mw-headline}

The code for the
`administrator/components/com_foos/tmpl/foos/default_batch_body.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    defined('_JEXEC') or die;

    use Joomla\CMS\Layout\LayoutHelper;

    $published = $this->state->get('filter.published');
    $noUser    = true;
    ?>

    <div class="container">
        <div class="row">
            <div class="form-group col-md-6">
                <div class="controls">
                    <?php echo LayoutHelper::render('joomla.html.batch.language', []); ?>
                </div>
            </div>
            <div class="form-group col-md-6">
                <div class="controls">
                    <?php echo LayoutHelper::render('joomla.html.batch.access', []); ?>
                </div>
            </div>
        </div>
        <div class="row">
            <?php if ($published >= 0) : ?>
                <div class="form-group col-md-6">
                    <div class="controls">
                        <?php echo LayoutHelper::render('joomla.html.batch.item', ['extension' => 'com_foos']); ?>
                    </div>
                </div>
            <?php endif; ?>
        </div>
    </div>

</div>

### [Creating administrator/components/com\_foos/tmpl/foos/default\_batch\_footer.php]{#Creating_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault_batch_footer.php .mw-headline}

The
`administrator/components/com_foos/tmpl/foos/default_batch_footer.php`
file is the installation file.

#### [Completed administrator/components/com\_foos/tmpl/foos/default\_batch\_footer.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ftmpl.2Ffoos.2Fdefault_batch_footer.php_file .mw-headline}

The code for the
`administrator/components/com_foos/tmpl/foos/default_batch_footer.php`
file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    defined('_JEXEC') or die;

    use Joomla\CMS\Language\Text;

    ?>
    <button type="button" class="btn btn-secondary" onclick="document.getElementById('batch-category-id').value='';document.getElementById('batch-access').value='';document.getElementById('batch-language-id').value='';document.getElementById('batch-user-id').value='';document.getElementById('batch-tag-id').value=''" data-dismiss="modal">
        <?php echo Text::_('JCANCEL'); ?>
    </button>
    <button type="submit" class="btn btn-success" onclick="Joomla.submitbutton('foo.batch');">
        <?php echo Text::_('JGLOBAL_BATCH_PROCESS'); ?>
    </button>

</div>

[Test your component]{#Test_your_component_24 .mw-headline}
-----------------------------------------------------------

[![As j4 t 22
1.png](/images/thumb/9/94/As_j4_t_22_1.png/700px-As_j4_t_22_1.png){width="700"
height="341"
srcset="/images/thumb/9/94/As_j4_t_22_1.png/1050px-As_j4_t_22_1.png 1.5x, /images/9/94/As_j4_t_22_1.png 2x"}](/File:As_j4_t_22_1.png){.image}

[![As j4 t 22
2.png](/images/thumb/a/a4/As_j4_t_22_2.png/700px-As_j4_t_22_2.png){width="700"
height="341"
srcset="/images/thumb/a/a4/As_j4_t_22_2.png/1050px-As_j4_t_22_2.png 1.5x, /images/a/a4/As_j4_t_22_2.png 2x"}](/File:As_j4_t_22_2.png){.image}

\

[Example in Joomla!]{#Example_in_Joomla.21_14 .mw-headline}
-----------------------------------------------------------

[Component Contents]{#Component_Contents_25 .mw-headline}
---------------------------------------------------------

At this point in the tutorial, your component should contain the
following files:

  --- -------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------
  1   administrator/components/com\_foos/Controller/DisplayController.php        this is the administrator entry point to the Foo component                                                                                                                            unchanged
  1   administrator/components/com\_foos/Extension/FoosComponent.php             the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  6   administrator/components/com\_foos/Model/FoosModel.php                     this is the model of the Foo component                                                                                                                                                new
  1   administrator/components/com\_foos/Service/HTML/AdministratorService.php   the html service see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                                unchanged
  1   administrator/components/com\_foos/View/Foos/HtmlView.php                  file representing the view in the back end                                                                                                                                            changed
  1   administrator/components/com\_foos/services/provider.php                   the service provider interface see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                  changed
  6   administrator/components/com\_foos/sql/install.mysql.utf8.sql              During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           new
  6   administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql            During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           new
  1   administrator/components/com\_foos/tmpl/foos/default.php                   the default view in the back end                                                                                                                                                      changed
  1   administrator/components/com\_foos/foos.xml                                this is an XML (manifest) file that tells Joomla! how to install our component.                                                                                                       changed
  1   administrator/components/com\_foos/script.php                              the installer script                                                                                                                                                                  unchanged
  2   components/com\_foos/Controller/DisplayController.php                      this is the frond end entry point to the Foo component                                                                                                                                unchanged
  4   components/com\_foos/Model/FooModel.php                                    this is the frond end model for the Foo component                                                                                                                                     unchanged
  2   components/com\_foos/View/Foo/HtmlView.php                                 file representing the view in the frond end                                                                                                                                           unchanged
  2   components/com\_foos/tmpl/foo/default.php                                  the default view in the frond end                                                                                                                                                     unchanged
  3   components/com\_foos/tmpl/foo/default.xml                                  the xml for the menu item                                                                                                                                                             unchanged
  --- -------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------

\

[Conclusion]{#Conclusion_24 .mw-headline}
-----------------------------------------

Well, you have many different features built into your component.
Perhaps you would like to explain these functions to your users with a
help page? This is the topic of the next chapter.

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

[Adding a help link - Part 23]{#Adding_a_help_link_-_Part_23 .mw-headline}
==========================================================================

Well, you have many different features built into your component.
Perhaps you would like to explain these functions to your users with a
help page? This is the topic of this chapter

[Requirements]{#Requirements_26 .mw-headline}
---------------------------------------------

You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev)

[File Structure]{#File_Structure_26 .mw-headline}
-------------------------------------------------

### [Changing administrator/components/com\_foos/View/Foo/HtmlView.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoo.2FHtmlView.php_3 .mw-headline}

The `administrator/components/com_foos/View/Foo/HtmlView.php` file is
....

#### [Completed administrator/components/com\_foos/View/Foo/HtmlView.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoo.2FHtmlView.php_file_3 .mw-headline}

The code for the file is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php
    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\View\Foo;

    defined('_JEXEC') or die;

    use Joomla\CMS\Component\ComponentHelper;
    use Joomla\CMS\Helper\ContentHelper;
    use Joomla\CMS\Language\Associations;
    use Joomla\CMS\Factory;
    use Joomla\CMS\Language\Text;
    use Joomla\CMS\MVC\View\HtmlView as BaseHtmlView;
    use Joomla\CMS\Toolbar\ToolbarHelper;

    /**
     * View to edit a foo.
     *
     * @since  1.0
     */
    class HtmlView extends BaseHtmlView
    {
        /**
        * The \JForm object
        *
        * @var  \JForm
        */
        protected $form;

        /**
        * The active item
        *
        * @var  object
        */
        protected $item;

        /**
        * Display the view.
        *
        * @param   string  $tpl  The name of the template file to parse; automatically searches through the template paths.
        *
        * @return  mixed  A string if successful, otherwise an Error object.
        */
        public function display($tpl = null)
        {
            $this->item = $this->get('Item');

            // If we are forcing a language in modal (used for associations).
            if ($this->getLayout() === 'modal' && $forcedLanguage = Factory::getApplication()->input->get('forcedLanguage', '', 'cmd'))
            {
                // Set the language field to the forcedLanguage and disable changing it.
                $this->form->setValue('language', null, $forcedLanguage);
                $this->form->setFieldAttribute('language', 'readonly', 'true');

                // Only allow to select categories with All language or with the forced language.
                $this->form->setFieldAttribute('catid', 'language', '*,' . $forcedLanguage);
            }

            $this->addToolbar();

            return parent::display($tpl);
        }

        /**
        * Add the page title and toolbar.
        *
        * @return  void
        *
        * @since   1.0
        */
        protected function addToolbar()
        {
            Factory::getApplication()->input->set('hidemainmenu', true);

            $user  = Factory::getUser();
            $userId = $user->id;
            $isNew = ($this->item->id == 0);
            $test = $user->getAuthorisedCategories('com_foos', 'core.create');

            ToolbarHelper::title($isNew ? Text::_('COM_FOOS_MANAGER_FOO_NEW') : Text::_('COM_FOOS_MANAGER_FOO_EDIT'), 'address foo');

            // Since we don't track these assets at the item level, use the category id.
            $canDo = ContentHelper::getActions('com_foos', 'category', $this->item->catid);

            // Build the actions for new and existing records.
            if ($isNew)
            {
                // For new records, check the create permission.
                if ((count($user->getAuthorisedCategories('com_foos', 'core.create')) > 0))
                {
                    ToolbarHelper::apply('foo.apply');

                    ToolbarHelper::saveGroup(
                        [
                            ['save', 'foo.save'],
                            ['save2new', 'foo.save2new']
                        ],
                        'btn-success'
                    );
                }

                ToolbarHelper::cancel('foo.cancel');
            }
            else
            {
                // Since it's an existing record, check the edit permission, or fall back to edit own if the owner.
                $itemEditable = $canDo->get('core.edit') || ($canDo->get('core.edit.own') && $this->item->created_by == $userId);

                $toolbarButtons = [];

                // Can't save the record if it's not editable
                if ($itemEditable)
                {
                    ToolbarHelper::apply('foo.apply');

                    $toolbarButtons[] = ['save', 'foo.save'];

                    // We can save this record, but check the create permission to see if we can return to make a new one.
                    if ($canDo->get('core.create'))
                    {
                        $toolbarButtons[] = ['save2new', 'foo.save2new'];
                    }
                }

                // If checked out, we can still save
                if ($canDo->get('core.create'))
                {
                    $toolbarButtons[] = ['save2copy', 'foo.save2copy'];
                }

                ToolbarHelper::saveGroup(
                    $toolbarButtons,
                    'btn-success'
                );

                if (Associations::isEnabled() && ComponentHelper::isEnabled('com_associations'))
                {
                    ToolbarHelper::custom('foo.editAssociations', 'contract', 'contract', 'JTOOLBAR_ASSOCIATIONS', false, false);
                }

                ToolbarHelper::cancel('foo.cancel', 'JTOOLBAR_CLOSE');
            }

          ToolbarHelper::divider();
           ToolbarHelper::help('', false, 'http://google.de');
     }
    }

</div>

### [Changing administrator/components/com\_foos/View/Foos/HtmlView.php]{#Changing_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_13 .mw-headline}

The `administrator/components/com_foos/View/Foos/HtmlView.php` file is
....

#### [Completed administrator/components/com\_foos/View/Foos/HtmlView.php file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2FView.2FFoos.2FHtmlView.php_file_14 .mw-headline}

The code for the
`administrator/components/com_foos/View/Foos/HtmlView.php` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?php

    /**
     * @package     Joomla.Administrator
     * @subpackage  com_foos
     *
     * @copyright   Copyright (C) 2005 - 2019 Open Source Matters, Inc. All rights reserved.
     * @license     GNU General Public License version 2 or later; see LICENSE.txt
     */

    namespace Joomla\Component\Foos\Administrator\View\Foos;

    defined('_JEXEC') or die;

    use Joomla\CMS\Factory;
    use Joomla\CMS\HTML\HTMLHelper;
    use Joomla\CMS\Helper\ContentHelper;
    use Joomla\CMS\Language\Text;
    use Joomla\CMS\MVC\View\HtmlView as BaseHtmlView;
    use Joomla\CMS\Toolbar\Toolbar;
    use Joomla\CMS\Toolbar\ToolbarHelper;
    use Joomla\Component\Foos\Administrator\Helper\FooHelper;
    use Joomla\CMS\Language\Multilanguage;

    /**
     * View class for a list of foos.
     *
     * @since  1.0
     */
    class HtmlView extends BaseHtmlView
    {
        /**
        * An array of items
        *
        * @var  array
        */
        protected $items;

        /**
        * The pagination object
        *
        * @var  \JPagination
        */
        protected $pagination;

        /**
        * The model state
        *
        * @var  \JObject
        */
        protected $state;

        /**
        * Form object for search filters
        *
        * @var  \JForm
        */
        public $filterForm;

        /**
        * The active search filters
        *
        * @var  array
        */
        public $activeFilters;

        /**
        * The sidebar markup
        *
        * @var  string
        */
        protected $sidebar;

        /**
        * Display the view.
        *
        * @param   string  $tpl  The name of the template file to parse; automatically searches through the template paths.
        *
        * @return  mixed  A string if successful, otherwise an Error object.
        */
        public function display($tpl = null)
        {
            $this->items = $this->get('Items');
            $this->pagination = $this->get('Pagination');
            $this->filterForm = $this->get('FilterForm');
            $this->activeFilters = $this->get('ActiveFilters');
            $this->state = $this->get('State');

            // Check for errors.
            if (count($errors = $this->get('Errors')))
            {
                throw new \JViewGenericdataexception(implode("\n", $errors), 500);
            }

            // Preprocess the list of items to find ordering divisions.
            // TODO: Complete the ordering stuff with nested sets
            foreach ($this->items as &$item)
            {
                $item->order_up = true;
                $item->order_dn = true;
            }

            // We don't need toolbar in the modal window.
            if ($this->getLayout() !== 'modal')
            {
                FooHelper::addSubmenu('foos');
                $this->addToolbar();
                $this->sidebar = \JHtmlSidebar::render();

                // We do not need to filter by language when multilingual is disabled
                if (!Multilanguage::isEnabled())
                {
                    unset($this->activeFilters['language']);
                    $this->filterForm->removeField('language', 'filter');
                }
            }
            else
            {
                // In article associations modal we need to remove language filter if forcing a language.
                // We also need to change the category filter to show show categories with All or the forced language.
                if ($forcedLanguage = Factory::getApplication()->input->get('forcedLanguage', '', 'CMD'))
                {
                    // If the language is forced we can't allow to select the language, so transform the language selector filter into a hidden field.
                    $languageXml = new \SimpleXMLElement('<field name="language" type="hidden" default="' . $forcedLanguage . '" />');
                    $this->filterForm->setField($languageXml, 'filter', true);

                    // Also, unset the active language filter so the search tools is not open by default with this filter.
                    unset($this->activeFilters['language']);

                    // One last changes needed is to change the category filter to just show categories with All language or with the forced language.
                    $this->filterForm->setFieldAttribute('category_id', 'language', '*,' . $forcedLanguage, 'filter');
                }
            }

            return parent::display($tpl);
        }

        /**
        * Add the page title and toolbar.
        *
        * @return  void
        *
        * @since   1.0
        */
        protected function addToolbar()
        {
            $canDo = ContentHelper::getActions('com_foos', 'category', $this->state->get('filter.category_id'));
            $user  = Factory::getUser();

            // Get the toolbar object instance
            $toolbar = Toolbar::getInstance('toolbar');

            ToolbarHelper::title(Text::_('COM_FOO_MANAGER_FOOS'), 'address foos');

            if ($canDo->get('core.create') || count($user->getAuthorisedCategories('com_foos', 'core.create')) > 0)
            {
                $toolbar->addNew('foo.add');
            }

            if ($canDo->get('core.edit.state'))
            {
                $dropdown = $toolbar->dropdownButton('status-group')
                    ->text('JTOOLBAR_CHANGE_STATUS')
                    ->toggleSplit(false)
                    ->icon('fa fa-globe')
                    ->buttonClass('btn btn-info')
                    ->listCheck(true);

                $childBar = $dropdown->getChildToolbar();

                $childBar->publish('foos.publish')->listCheck(true);

                $childBar->unpublish('foos.unpublish')->listCheck(true);

                $childBar->archive('foos.archive')->listCheck(true);

                if ($user->authorise('core.admin'))
                {
                    $childBar->checkin('foos.checkin')->listCheck(true);
                }

                if ($this->state->get('filter.published') != -2)
                {
                    $childBar->trash('foos.trash')->listCheck(true);
                }
            }

            $toolbar->popupButton('batch')
                ->text('JTOOLBAR_BATCH')
                ->selector('collapseModal')
                ->listCheck(true);

            if ($this->state->get('filter.published') == -2 && $canDo->get('core.delete'))
            {
                $toolbar->delete('foos.delete')
                    ->text('JTOOLBAR_EMPTY_TRASH')
                    ->message('JGLOBAL_CONFIRM_DELETE')
                    ->listCheck(true);
            }

            if ($user->authorise('core.admin', 'com_foos') || $user->authorise('core.options', 'com_foos'))
            {
                $toolbar->preferences('com_foos');
            }

          ToolbarHelper::divider();
           ToolbarHelper::help('', false, 'http://google.de');

            HTMLHelper::_('sidebar.setAction', 'index.php?option=com_foos');
        }

        /**
        * Returns an array of fields the table can be sorted by
        *
        * @return  array  Array containing the field name to sort by as the key and display text as value
        *
        * @since   1.0
        */
        protected function getSortFields()
        {
            return array(
                'a.ordering'     => Text::_('JGRID_HEADING_ORDERING'),
                'a.published'    => Text::_('JSTATUS'),
                'a.name'         => Text::_('JGLOBAL_TITLE'),
                'category_title' => Text::_('JCATEGORY'),
                'a.access'       => Text::_('JGRID_HEADING_ACCESS'),
                'a.language'     => Text::_('JGRID_HEADING_LANGUAGE'),
                'a.id'           => Text::_('JGRID_HEADING_ID'),
            );
        }
    }

</div>

### [Changing administrator/components/com\_foos/foos.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_22 .mw-headline}

The `administrator/components/com_foos/foos.xml` file is ....

#### [Completed administrator/components/com\_foos/foos.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_22 .mw-headline}

The code for the `administrator/components/com_foos/foos.xml` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8" ?>
    <extension type="component" method="upgrade">
        <name>COM_FOOS</name>
        <creationDate>[DATE]</creationDate>
        <author>[AUTHOR]</author>
        <authorEmail>[AUTHOR_EMAIL]</authorEmail>
        <authorUrl>[AUTHOR_URL]</authorUrl>
        <copyright>[COPYRIGHT]</copyright>
        <license>GNU General Public License version 2 or later;</license>
      <version>1.23.0</version>
     <description>COM_FOOS_XML_DESCRIPTION</description>
        <namespace>Joomla\Component\Foos</namespace>
        <scriptfile>script.php</scriptfile>
        <install> <!-- Runs on install -->
            <sql>
                <file driver="mysql" charset="utf8">sql/install.mysql.utf8.sql</file>
            </sql>
        </install>
        <uninstall> <!-- Runs on uninstall -->
            <sql>
                <file driver="mysql" charset="utf8">sql/uninstall.mysql.utf8.sql</file>
            </sql>
        </uninstall>
        <update>  <!-- Runs on update -->
            <schemas>
                <schemapath type="mysql">sql/updates/mysql</schemapath>
            </schemas>
        </update>
        <!-- Frond-end files -->
        <files folder="components/com_foos">
            <folder>Controller</folder>
            <folder>Model</folder>
            <folder>View</folder>
            <folder>tmpl</folder>
            <folder>language</folder>
        </files>
        <media folder="media/com_foos" destination="com_foos">
            <folder>js</folder>
        </media>
        <!-- Back-end files -->
        <administration>
            <!-- Menu entries -->
            <menu view="foos">COM_FOOS</menu>
            <submenu>
                <menu link="option=com_foos">COM_FOOS</menu>
                <menu link="option=com_categories&amp;extension=com_foos"
                    view="categories" img="class:foos-cat" alt="Foos/Categories">JCATEGORY</menu>
            </submenu>
            <files folder="administrator/components/com_foos">
                <filename>access.xml</filename>
                <filename>config.xml</filename>
                <filename>foos.xml</filename>
                <folder>Controller</folder>
                <folder>Extension</folder>
                <folder>Field</folder>
                <folder>Helper</folder>
                <folder>Model</folder>
                <folder>Rule</folder>
                <folder>Service</folder>
                <folder>Table</folder>
                <folder>View</folder>
                <folder>forms</folder>
                <folder>language</folder>
                <folder>services</folder>
                <folder>sql</folder>
                <folder>tmpl</folder>
            </files>
        </administration>
    </extension>

</div>

\

[Test your component]{#Test_your_component_25 .mw-headline}
-----------------------------------------------------------

[Example in Joomla!]{#Example_in_Joomla.21_15 .mw-headline}
-----------------------------------------------------------

You can now individually offer a help page via the button on the top
right. You can put these on the web and keep them up to date. Here I
have chosen google.de as an example. Of course, you can adapt this page
to your circumstances.

[![As j4 t 23
1.png](/images/thumb/2/20/As_j4_t_23_1.png/700px-As_j4_t_23_1.png){width="700"
height="341"
srcset="/images/thumb/2/20/As_j4_t_23_1.png/1050px-As_j4_t_23_1.png 1.5x, /images/2/20/As_j4_t_23_1.png 2x"}](/File:As_j4_t_23_1.png){.image}

\

[Component Contents]{#Component_Contents_26 .mw-headline}
---------------------------------------------------------

At this point in the tutorial, your component should contain the
following files:

  --- -------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------
  1   administrator/components/com\_foos/Controller/DisplayController.php        this is the administrator entry point to the Foo component                                                                                                                            unchanged
  1   administrator/components/com\_foos/Extension/FoosComponent.php             the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  6   administrator/components/com\_foos/Model/FoosModel.php                     this is the model of the Foo component                                                                                                                                                new
  1   administrator/components/com\_foos/Service/HTML/AdministratorService.php   the html service see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                                unchanged
  1   administrator/components/com\_foos/View/Foos/HtmlView.php                  file representing the view in the back end                                                                                                                                            changed
  1   administrator/components/com\_foos/services/provider.php                   the service provider interface see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                  changed
  6   administrator/components/com\_foos/sql/install.mysql.utf8.sql              During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           new
  6   administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql            During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           new
  1   administrator/components/com\_foos/tmpl/foos/default.php                   the default view in the back end                                                                                                                                                      changed
  1   administrator/components/com\_foos/foos.xml                                this is an XML (manifest) file that tells Joomla! how to install our component.                                                                                                       changed
  1   administrator/components/com\_foos/script.php                              the installer script                                                                                                                                                                  unchanged
  2   components/com\_foos/Controller/DisplayController.php                      this is the frond end entry point to the Foo component                                                                                                                                unchanged
  4   components/com\_foos/Model/FooModel.php                                    this is the frond end model for the Foo component                                                                                                                                     unchanged
  2   components/com\_foos/View/Foo/HtmlView.php                                 file representing the view in the frond end                                                                                                                                           unchanged
  2   components/com\_foos/tmpl/foo/default.php                                  the default view in the frond end                                                                                                                                                     unchanged
  3   components/com\_foos/tmpl/foo/default.xml                                  the xml for the menu item                                                                                                                                                             unchanged
  --- -------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------

\

[Conclusion]{#Conclusion_25 .mw-headline}
-----------------------------------------

You now know how to keep your users up to date. In the next chapter,
we'll look at how you can make it easy for your users to keep your
extension up-to-date.

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

\

[Adding an update server and a changelog- Part 24]{#Adding_an_update_server_and_a_changelog-_Part_24 .mw-headline}
==================================================================================================================

In this chapter, we'll look at how you can make it easy for your users
to keep your extension up-to-date.

[Requirements]{#Requirements_27 .mw-headline}
---------------------------------------------

You need Joomla! 4.x for this tutorial (as of writing currently Joomla!
4.0.0-alpha11-dev)

[File Structure]{#File_Structure_27 .mw-headline}
-------------------------------------------------

### [Changing administrator/components/com\_foos/foos.xml]{#Changing_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_23 .mw-headline}

The `administrator/components/com_foos/foos.xml` file is ....

#### [Completed administrator/components/com\_foos/foos.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoos.xml_file_23 .mw-headline}

The code for the `administrator/components/com_foos/foos.xml` file is as
follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <?xml version="1.0" encoding="utf-8" ?>
    <extension type="component" method="upgrade">
        <name>COM_FOOS</name>
        <creationDate>[DATE]</creationDate>
        <author>[AUTHOR]</author>
        <authorEmail>[AUTHOR_EMAIL]</authorEmail>
        <authorUrl>[AUTHOR_URL]</authorUrl>
        <copyright>[COPYRIGHT]</copyright>
        <license>GNU General Public License version 2 or later;</license>
      <version>1.24.0</version>
     <description>COM_FOOS_XML_DESCRIPTION</description>
        <namespace>Joomla\Component\Foos</namespace>
        <scriptfile>script.php</scriptfile>
        <install> <!-- Runs on install -->
            <sql>
                <file driver="mysql" charset="utf8">sql/install.mysql.utf8.sql</file>
            </sql>
        </install>
        <uninstall> <!-- Runs on uninstall -->
            <sql>
                <file driver="mysql" charset="utf8">sql/uninstall.mysql.utf8.sql</file>
            </sql>
        </uninstall>
        <update>  <!-- Runs on update -->
            <schemas>
                <schemapath type="mysql">sql/updates/mysql</schemapath>
            </schemas>
        </update>
        <!-- Frond-end files -->
        <files folder="components/com_foos">
            <folder>Controller</folder>
            <folder>Model</folder>
            <folder>View</folder>
            <folder>tmpl</folder>
            <folder>language</folder>
        </files>
        <media folder="media/com_foos" destination="com_foos">
            <folder>js</folder>
        </media>
        <!-- Back-end files -->
        <administration>
            <!-- Menu entries -->
            <menu view="foos">COM_FOOS</menu>
            <submenu>
                <menu link="option=com_foos">COM_FOOS</menu>
                <menu link="option=com_categories&amp;extension=com_foos"
                    view="categories" img="class:foos-cat" alt="Foos/Categories">JCATEGORY</menu>
            </submenu>
            <files folder="administrator/components/com_foos">
                <filename>access.xml</filename>
                <filename>config.xml</filename>
                <filename>foos.xml</filename>
                <folder>Controller</folder>
                <folder>Extension</folder>
                <folder>Field</folder>
                <folder>Helper</folder>
                <folder>Model</folder>
                <folder>Rule</folder>
                <folder>Rule</folder>
                <folder>Service</folder>
                <folder>Table</folder>
                <folder>View</folder>
                <folder>forms</folder>
                <folder>language</folder>
                <folder>services</folder>
                <folder>sql</folder>
                <folder>tmpl</folder>
            </files>
        </administration>
      <changelogurl>https://example.com/.../changelog.xml</changelogurl>
       <updateservers>
           <server type="extension" name="Foo Updates">http://example.com/.../foo_update.xml</server>
       </updateservers>
    </extension>

</div>

### [Creating administrator/components/com\_foos/changelog.xml]{#Creating_administrator.2Fcomponents.2Fcom_foos.2Fchangelog.xml .mw-headline}

The `administrator/components/com_foos/changelog.xml` file is the
installation file.

#### [Completed administrator/components/com\_foos/changelog.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Fchangelog.xml_file .mw-headline}

The code for the `administrator/components/com_foos/changelog.xml` file
is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <changelogs>
        <changelog>
            <element>com_foos</element>
            <type>component</type>
            <version>1.0.0</version>
            <note>
                <item>Initial</item>
            </note>
        </changelog>
        <changelog>
            <element>com_foos</element>
            <type>component</type>
            <version>1.0.0</version>
            <note>
                <item>Add front end view</item>
            </note>
        </changelog>
        <changelog>
            <element>com_foos</element>
            <type>component</type>
            <version>1.24.0</version>
            <security>
                <item>Item A</item>
                <item><![CDATA[<h2>You MUST replace this file</h2>]]></item>
            </security>
            <fix>
                <item>Item A</item>
                <item>Item b</item>
            </fix>
            <language>
                <item>Item A</item>
                <item>Item b</item>
            </language>
            <addition>
                <item>Item A</item>
                <item>Item b</item>
            </addition>
            <change>
                <item>Item A</item>
                <item>Item b</item>
            </change>
            <remove>
                <item>Item A</item>
                <item>Item b</item>
            </remove>
            <note>
                <item>Item A</item>
                <item>Item b</item>
            </note>
        </changelog>
    </changelogs>

</div>

### [Creating administrator/components/com\_foos/foo\_update.xml]{#Creating_administrator.2Fcomponents.2Fcom_foos.2Ffoo_update.xml .mw-headline}

The `administrator/components/com_foos/foo_update.xml` file is the
installation file.

#### [Completed administrator/components/com\_foos/foo\_update.xml file]{#Completed_administrator.2Fcomponents.2Fcom_foos.2Ffoo_update.xml_file .mw-headline}

The code for the `administrator/components/com_foos/foo_update.xml` file
is as follows:

<div class="mw-highlight mw-content-ltr" dir="ltr">

    <updates>
        <update>
            <name>Foo</name>
            <description>This is com_foo 1.24.0</description>
            <element>com_foo</element>
            <type>component</type>
            <version>1.0.1</version>
            <downloads>
                <downloadurl type="full" format="zip">http://www.example.com/com_foo_101.zip</downloadurl>
            </downloads>
            <maintainer>Foo Creator</maintainer>
            <maintainerurl>http://www.example.com</maintainerurl>
            <targetplatform name="joomla" version="4.0"/>
            <client>site</client>
            <php_minimum>7.1</php_minimum>
        </update>
    </updates>

</div>

\

[Test your component]{#Test_your_component_26 .mw-headline}
-----------------------------------------------------------

[700px](/index.php?title=Special:Upload&wpDestFile=Componenttutorial24atest.png "File:Componenttutorial24atest.png"){.new}

\

[Example in Joomla!]{#Example_in_Joomla.21_16 .mw-headline}
-----------------------------------------------------------

[More informations]{#More_informations .mw-headline}
----------------------------------------------------

<https://docs.joomla.org/Adding_changelog_to_your_manifest_file>
<https://github.com/joomla/joomla-cms/pull/24026>

\

[Component Contents]{#Component_Contents_27 .mw-headline}
---------------------------------------------------------

At this point in the tutorial, your component should contain the
following files:

  --- -------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------
  1   administrator/components/com\_foos/Controller/DisplayController.php        this is the administrator entry point to the Foo component                                                                                                                            unchanged
  1   administrator/components/com\_foos/Extension/FoosComponent.php             the interface BootableExtensionInterface where a component class can load its internal class loader or register HTML services see <https://github.com/joomla/joomla-cms/pull/20217>   unchanged
  6   administrator/components/com\_foos/Model/FoosModel.php                     this is the model of the Foo component                                                                                                                                                new
  1   administrator/components/com\_foos/Service/HTML/AdministratorService.php   the html service see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                                unchanged
  1   administrator/components/com\_foos/View/Foos/HtmlView.php                  file representing the view in the back end                                                                                                                                            changed
  1   administrator/components/com\_foos/services/provider.php                   the service provider interface see <https://github.com/joomla/joomla-cms/pull/20217>                                                                                                  changed
  6   administrator/components/com\_foos/sql/install.mysql.utf8.sql              During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           new
  6   administrator/components/com\_foos/sql/uninstall.mysql.utf8.sql            During the install/uninstall/update phase of a component, you can execute SQL queries through the use of this SQL text file                                                           new
  1   administrator/components/com\_foos/tmpl/foos/default.php                   the default view in the back end                                                                                                                                                      changed
  1   administrator/components/com\_foos/foos.xml                                this is an XML (manifest) file that tells Joomla! how to install our component.                                                                                                       changed
  1   administrator/components/com\_foos/script.php                              the installer script                                                                                                                                                                  unchanged
  2   components/com\_foos/Controller/DisplayController.php                      this is the frond end entry point to the Foo component                                                                                                                                unchanged
  4   components/com\_foos/Model/FooModel.php                                    this is the frond end model for the Foo component                                                                                                                                     unchanged
  2   components/com\_foos/View/Foo/HtmlView.php                                 file representing the view in the frond end                                                                                                                                           unchanged
  2   components/com\_foos/tmpl/foo/default.php                                  the default view in the frond end                                                                                                                                                     unchanged
  3   components/com\_foos/tmpl/foo/default.xml                                  the xml for the menu item                                                                                                                                                             unchanged
  --- -------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------

\

[Conclusion]{#Conclusion_26 .mw-headline}
-----------------------------------------

[Adding Adding frontend edit - Part 25]{#Adding_Adding_frontend_edit_-_Part_25 .mw-headline}
============================================================================================

<https://github.com/joomla/joomla-cms/pull/24311>

\

[Adding Tags - Part 26]{#Adding_Tags_-_Part_26 .mw-headline}
============================================================

<https://github.com/joomla/joomla-cms/issues/23589>

\

[Adding Workflow - Part 27]{#Adding_Workflow_-_Part_27 .mw-headline}
====================================================================

I am not sure if we can use it in a third party component.

<div class="hf-footer">

</div>

<div class="hf-nsfooter">

</div>

</div>

<div class="printfooter">

Retrieved from
"<https://docs.joomla.org/index.php?title=User:Astridx&oldid=623966>"

</div>

<div class="clear_both">

</div>

</div>

<div class="group">

<div id="catlinks" class="catlinks" data-mw="interface">

<div id="mw-normal-catlinks" class="mw-normal-catlinks">

[Categories](/Special:Categories "Special:Categories"):
-   [Pages with syntax highlighting
    errors](/Category:Pages_with_syntax_highlighting_errors "Category:Pages with syntax highlighting errors")
-   [Pages with broken file
    links](/Category:Pages_with_broken_file_links "Category:Pages with broken file links")

</div>

</div>

</div>

</div>

</div>

<div id="footer">

<div class="social-footer large-12 small-12 columns">

<div class="social-links">

<div class="addthis_horizontal_follow_toolbox">

</div>

</div>

</div>

<div id="footer-left" class="large-8 small-12 columns">

-   <div id="footer-lastmod">

    </div>

    This page was last modified on 19 August 2019, at 11:29.
-   <div id="footer-copyright">

    </div>

    Content is available under [Joomla! EDL](/JEDL "JEDL") unless
    otherwise noted.\
    Joomla!^®^ is a registered trademark of Open Source Matters, Inc.\
    If you are experiencing technical issues with this website,
    [please report
    it](https://github.com/joomla/joomla-websites/issues/new?title=%5Bjdocs%5D%20&body=Please%20describe%20the%20problem%20or%20your%20issue)
    .\
    Notice a content problem?
    [Create an
    account](/JDOC:How_to_Contribute_to_Joomla!_Documentation)
    and fix it.
-   <div id="footer-privacy">

    </div>

    [Privacy policy](/JDOC:Privacy_policy "JDOC:Privacy policy")
-   <div id="footer-about">

    </div>

    [About Joomla! Documentation](/JDOC:About "JDOC:About")
-   <div id="footer-disclaimer">

    </div>

    [Terms of
    Service](/JDOC:General_disclaimer "JDOC:General disclaimer")

</div>

<div id="footer-right-icons" class="large-4 small-12 columns">

-   [![Joomla!
    EDL](https://docs.joomla.org/skins/JEDL_icon.png){width="88"
    height="31"}](https://docs.joomla.org/JEDL)
-   [![Powered by
    MediaWiki](/resources/assets/poweredby_mediawiki_88x31.png){width="88"
    height="31"
    srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x"}](//www.mediawiki.org/)
-   [![Joomla! Hosting by
    Rochen...](//cdn.joomla.org/rochen/rochen_footer_logo_white.png){width="88"
    height="31"}](https://www.rochen.com/joomla-hosting)

</div>

</div>

</div>

</div>
